<!DOCTYPE html>
<!-- Built with spec-md https://spec-md.com -->
<html>
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><title>GraphQL Composite Schemas Spec</title>
<style>@media (prefers-color-scheme: light){:root{--color-foreground: #333333;--color-background: #ffffff;--color-light-grey: #ccc;--color-grey: #666666;--color-white: #fff;--color-link: #3b5998;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #f0f0f0;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(0, 0, 0, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #fafafa;--color-pre-border: #e9e9e9;--color-code-background: rgba(0, 0, 0, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #fafaff;--color-spec-example-border: #bbbbff;--color-spec-counter-example: #fffafa;--color-spec-counter-border: #ffbbbb;--color-spec-counter-example-link: #98593b;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #83238e;--color-spec-condition: #1c7758;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #f4e925;--color-spec-note-background: #fefef3;--color-spec-note-first-link: #6c6613;--color-source-link: var(--color-light-grey);--color-table-header: #f9f9f9;--color-table-header-border: #d0d0d0;--color-token-inserted: hsla(241, 71%, 34%, .69);--color-token-deleted: hsla(324, 92%, 33%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #cacee0;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #3b5998}}@media (prefers-color-scheme: dark){:root{--color-foreground: #b6b6b6;--color-background: #262626;--color-light-grey: #373737;--color-grey: #828282;--color-white: rgb(29, 29, 29);--color-link: #89b7da;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #323232;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(220, 220, 220, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #2e2e2e;--color-pre-border: #3a3a3a;--color-code-background: rgba(41, 41, 41, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #2b2b35;--color-spec-example-border: #4d4d6d;--color-spec-counter-example: #322828;--color-spec-counter-border: #664040;--color-spec-counter-example-link: #ff702d;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #c689ce;--color-spec-condition: #6fa889;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #605e39;--color-spec-note-background: #303028;--color-spec-note-first-link: #f0e330;--color-source-link: var(--color-grey);--color-table-header: #373737;--color-table-header-border: #525252;--color-token-inserted: hsla(241, 63%, 70%, .69);--color-token-deleted: hsla(325, 64%, 67%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #656565;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #829edb}}:root{color:var(--color-foreground);background-color:var(--color-background);font-family:var(--font-family);font-size:15px;line-height:1.5;--mono-font-size: 13px;--indent: 1rem;--list-indent: 1.5rem;--dfn-indent: 0rem;--font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;--font-family-monospace: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace}@media (min-width: 720px){:root{font-size:17px;--mono-font-size: 15px;--indent: 2rem;--list-indent: 2rem;--dfn-indent: 2rem}}body{margin:3rem 0 3rem}article{margin:0 1rem}@media (min-width: 720px){body{margin:6rem auto 3rem;max-width:800px;padding-left:75px;padding-right:clamp(0px,calc((100vw - 800px) * .25),75px)}}.source-link{display:none}@media screen and (min-width: 720px){.source-link{display:block;position:absolute;width:18px;fill:var(--color-source-link);opacity:.3}.source-link:hover{opacity:1}}.outdated-selection-link,.selection-link{position:absolute;display:block;color:var(--color-white);background:var(--selection-background-color);border-radius:4px;font-size:36px;height:23px;line-height:48px;text-align:center;text-decoration:none;width:25px;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.outdated-selection-link:hover,.selection-link:hover{text-decoration:none}.outdated-selection-link:before,.selection-link:before{border:5px solid transparent;content:"";height:0;margin-top:-5px;margin-right:-5px;position:absolute;right:1px;top:50%;width:0}@media (max-width: 719px){.outdated-selection-link:before,.selection-link:before{border-bottom-color:var(--selection-background-color);border-top:0;right:50%;top:1px}}@media (min-width: 720px){.outdated-selection-link:before,.selection-link:before{border-left-color:var(--selection-background-color);border-right:0;right:1px;top:50%}}.outdated-selection-link{background:var(--selection-background-color-link);font-size:21px;font-weight:800;line-height:27px}.outdated-selection-link:hover:after{content:"This selection content has changed since this link was created.";font:9pt/11pt var(--font-family);position:absolute;display:block;white-space:nowrap;padding:2px 5px 1px;top:-20px;background:black;color:var(--color-white)}a{color:var(--color-link);text-decoration:none}a:hover{text-decoration:underline}img{max-width:100%}dl{margin:1rem 0 1rem var(--dfn-indent)}dd{margin:.25em 0 .5em var(--indent)}dd+dd{margin-top:1rem}dfn,.spec-ref{font-style:italic}dfn>a,.spec-ref>a{color:inherit}h1,h2,h3,h4,h5,h6{font-weight:bold;margin:3em 0 1em;position:relative}@media (min-width: 720px){header>h1{margin:6em 0 3em}}h1{font-size:1.5em;margin-top:5em}h2,h3{font-size:1.25em}h4,h5,h6{font-size:1em}section{padding-top:1rem;margin-top:-1rem}section.subsec>h6{margin-top:2em}section.subsec>h6>a{color:var(--color-subsection-link)}section .spec-secid{margin-right:1ex}@media (min-width: 720px){section .spec-secid{position:absolute;right:100%;text-align:right;white-space:nowrap}}footer{font-size:75%;opacity:.5;text-align:center;margin-top:12rem}.spec-toc{margin:1rem 0 3rem}.spec-toc .title{content:"Contents";display:block;font-weight:bold;margin:5em 0 1em}.spec-toc .spec-secid{margin-right:1ex}.spec-toc ol{list-style:none;padding-left:0;margin-top:0;margin-bottom:0}.spec-toc ol ol{list-style:none;padding-left:2ex;margin-bottom:.25em}.spec-toc li{position:relative;padding:5px 0 0 30px;margin:-5px 0 0 -30px}.spec-toc a{color:var(--color-toc-link)}.spec-toc a:hover{text-decoration:none}.spec-toc a .spec-secid{color:var(--color-toc-id)}.spec-toc a:hover .spec-secid{text-decoration:underline}.spec-toc .toggle{display:none}.spec-toc .toggle+label{cursor:pointer;left:6px;opacity:1;padding:5px 6px 5px 7px;position:absolute;top:6px;transform:rotate(0deg);transition:all .18s ease-in-out}.spec-toc .toggle+label:after{border-color:transparent transparent transparent var(--color-toggle-border);border-style:solid;border-width:6px 0 6px 7px;content:" ";display:block;height:0;width:0}@media (pointer: fine){.spec-toc .toggle+label{left:10px;padding:3px 5px 3px 6px;top:8px}}.spec-toc .toggle:checked+label{transform:rotate(90deg)}@media (hover: hover){.spec-toc li:not(:hover)>.toggle:checked+label{opacity:0}}.spec-toc .toggle:not(:checked)~ol{max-height:0;overflow:hidden;margin:0}.spec-sidebar-toggle{display:none}.spec-sidebar-toggle+label>.spec-sidebar-button{position:fixed;right:0;top:0;padding:10px 15px;font-size:30px;color:var(--color-sidebar-toggle-button);z-index:2;cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked+label:after{content:"";position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0}.spec-sidebar{display:none;position:fixed;right:0;top:0;width:min(320px,calc(100vw - 48px));font-size:14px;line-height:1.75;overflow-y:scroll;height:100%;padding:0 0 5rem 30px;box-sizing:border-box;background:var(--color-sidebar-background);box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),-4px 0 8px -2px var(--color-sidebar-shadow);overscroll-behavior:contain}.spec-sidebar{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked~.spec-sidebar{display:block}.spec-sidebar .viewing>a:after{color:var(--color-sidebar-viewing-link);content:"\2022";margin-left:1ex}@media (min-width: 1220px){.spec-sidebar-toggle+label{display:none}.spec-sidebar{display:block;box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),inset 4px 0 8px -2px var(--color-sidebar-large-shadow)!important}body{padding-right:345px}}.spec-note{background:var(--color-spec-note-background);border-left:solid 4px var(--color-spec-note-border);margin:1rem -1rem;min-width:70vw;padding:8px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}@media (min-width: 720px){.spec-note{min-width:416px}}.spec-note>a:first-child{color:var(--color-spec-note-first-link);display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-todo{color:var(--color-spec-todo);margin:1em 0 1em 5em;min-height:1em}.spec-todo::before{content:"todo";display:block;float:left;margin-left:-5em;text-transform:uppercase}.spec-index ol{list-style-type:none;margin:0 0 0 var(--indent);padding:0;column-width:210px;column-gap:var(--indent)}.spec-index ol li{width:min-content;white-space:nowrap}pre,code{font-family:var(--font-family-monospace);font-size:var(--mono-font-size);font-weight:inherit}code{background:var(--color-code-background);margin:-2px -1px;padding:3px 3px;white-space:pre-wrap}pre>code{background:none;font-weight:inherit;margin:0;padding:0;white-space:pre}pre{background:var(--color-pre-background);border-left:solid 4px var(--color-pre-border);margin:1rem -1rem;min-width:70vw;padding:12px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;max-width:calc(100vw - 2rem);overflow-y:auto}@media (min-width: 720px){pre{min-width:40ch}}.spec-example{background:var(--color-spec-example);border-left:solid 4px var(--color-spec-example-border);padding-top:8px}.spec-counter-example{background:var(--color-spec-counter-example);border-left:solid 4px var(--color-spec-counter-border);padding-top:8px}.spec-example>a,.spec-counter-example>a{display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-counter-example>a{color:var(--color-spec-counter-example-link)}table{border-collapse:collapse}th{background-color:var(--color-table-header)}td,th{border:1px solid var(--color-table-header-border);padding:.4em;vertical-align:baseline}ol,ul{padding-left:var(--list-indent)}li>ol,li>ul{margin-top:.25em;margin-bottom:.5em}li+li{margin-top:.25em}li.task{list-style-type:none;position:relative}li.task>input:first-child{margin-left:0;position:absolute;transform:translateX(calc(-100% - 1ch))}ins{background-color:var(--color-inserts-background);text-decoration:none}del{background-color:var(--color-deletions-background)}.spec-added,.spec-removed{border-left:4px solid;margin-left:-18px;padding-left:14px}.spec-added{border-color:var(--color-spec-added-border)}.spec-removed{border-color:var(--color-spec-removed-border);text-decoration:line-through}.spec-keyword{font-weight:bold}.spec-string{font-family:var(--font-family-monospace);font-size:85%;white-space:pre}var{font-style:italic}*[data-name]{transition:.15s background ease-out;border-radius:2px;padding:0 3px;margin:0 -3px}.spec-semantic,.spec-algo{margin:1rem 0 1rem var(--dfn-indent)}.spec-semantic>.spec-nt::after,.spec-algo>.spec-call:first-child::after{content:":";font-style:normal;font-weight:bold;margin-left:1ex}.spec-semantic ol,.spec-semantic ol ol ol ol,.spec-algo ol,.spec-algo ol ol ol ol{list-style-type:decimal}.spec-semantic ol ol,.spec-semantic ol ol ol ol ol,.spec-algo ol ol,.spec-algo ol ol ol ol ol{list-style-type:lower-alpha}.spec-semantic ol ol ol,.spec-semantic ol ol ol ol ol ol,.spec-algo ol ol ol,.spec-algo ol ol ol ol ol ol{list-style-type:lower-roman}.spec-call>a{color:inherit}.spec-production{margin:1rem 0 1rem var(--dfn-indent)}.spec-production>.spec-nt::after{content:":";font-style:normal;font-weight:bold;margin:0 1ex}.spec-semantic.d2>.spec-nt::after,.spec-production.d2>.spec-nt::after{content:"::"}.spec-semantic.d3>.spec-nt::after,.spec-production.d3>.spec-nt::after{content:":::"}.spec-production>.spec-rhs{line-height:1.1;margin:.25em 0 .5em calc(2 * var(--indent));text-indent:calc(-1 * var(--indent))}.spec-semantic>.spec-rhs{display:inline-block;text-indent:calc(-1 * var(--indent));margin-left:calc(1ex + var(--indent))}.spec-rhs>*{text-indent:0}.spec-oneof{display:inline}.spec-oneof::before{content:"one of";font-style:normal;font-weight:bold}.spec-oneof-grid{max-width:calc(100vw - 2rem);overflow:auto;margin:-1ex -1rem;padding:1ex 1rem}.spec-oneof-grid>table{margin-left:var(--indent)}.spec-oneof .spec-rhs{border:none;margin:0;padding:0 0 0 1rem;vertical-align:baseline;white-space:pre}.spec-oneof .spec-rhs:first-child{padding:0}.spec-rhs .spec-constrained:not(:first-child),.spec-rhs .spec-quantified:not(:first-child),.spec-rhs .spec-nt:not(:first-child),.spec-rhs .spec-t:not(:first-child),.spec-rhs .spec-rx:not(:first-child),.spec-rhs .spec-prose:not(:first-child),.spec-rhs .spec-empty:not(:first-child),.spec-rhs .spec-lookahead:not(:first-child){margin-left:1ex;display:inline-block}.spec-condition{font-size:85%}.spec-condition::before{content:"[if "}.spec-condition.not::before{content:"[if not "}.spec-condition::after{content:"]"}.spec-empty,.spec-prose{color:var(--color-spec-prose)}.spec-nt{font-style:italic}.spec-nt>a{color:inherit}.spec-quantifiers,.spec-params{font-size:65%;font-style:normal;vertical-align:sub}.spec-quantifier.list{color:var(--color-spec-quantifier-list)}.spec-quantifier.optional{color:var(--color-spec-quantifier-optional)}.spec-params,.spec-condition{color:var(--color-spec-condition)}.spec-params::before{content:"["}.spec-params::after{content:"]"}.spec-quantifier:not(:last-child)::after,.spec-param:not(:last-child)::after{color:var(--color-spec-param);content:", "}.spec-param.conditional::before{content:"?"}.spec-param.negated::before{content:"!"}.spec-t,.spec-rx{color:var(--color-spec-rx);font-family:var(--font-family-monospace);font-weight:bold}.spec-butnot::before{color:var(--color-grey);content:"but not";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-butnot>*:not(:first-child)::before{color:var(--color-grey);content:"or";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-rhs .spec-oneof::before,.spec-rhs .spec-butnot::before{margin-left:1ex}.spec-lookahead>*{margin:0!important}.spec-lookahead>*:not(:first-child)::before{color:var(--color-grey);content:", ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead::before{color:var(--color-grey);content:"[lookahead = ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead.not::before{content:"[lookahead \2260  "}.spec-lookahead.set::before{content:"[lookahead \2208  {";margin-right:0}.spec-lookahead.set.not::before{content:"[lookahead \2209  {"}.spec-lookahead.ntset::before{content:"[lookahead \2208  ";margin-right:0}.spec-lookahead.ntset.not::before{content:"[lookahead \2209  "}.spec-lookahead::after{color:var(--color-grey);content:"]"}.spec-lookahead.set::after{content:"}]"}code[class*=language-],pre[class*=language-]{color:var(--color-prism-foreground);background:none;text-shadow:0 1px var(--color-prism-text-shadow);font-family:var(--font-family-monospace);font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:var(--color-prism-background)}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:var(--color-prism-background)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--color-prism-block-background)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.atrule,.token.attr-value,.token.keyword,.token.property,.token.selector,.token.attr-name,.token.builtin,.token.entity,.token.url,.token.inserted{color:var(--color-token-inserted);background:none}.token.tag,.token.boolean,.token.number,.token.string,.token.char,.token.constant,.token.symbol,.token.regex,.token.important,.token.variable,.token.function,.token.class-name,.token.deleted{color:var(--color-token-deleted)}.token.comment,.token.prolog,.token.doctype,.token.cdata,.token.description{color:inherit;opacity:.3}.token.punctuation{color:inherit;opacity:.5}.token.operator,.token.namespace{color:inherit;opacity:.7}</style>
<script>(function(){var r,a=[];document.addEventListener("readystatechange",function(){document.readyState==="interactive"&&u()});function u(){var n=document.querySelector('label[for="spec-sidebar-toggle"]');n.addEventListener("scroll",o),n.addEventListener("touchmove",o);function o(d){d.preventDefault()}for(var t=document.getElementsByTagName("section"),e=0;e<t.length;e++)t[e].getAttribute("secid")&&a.push(t[e]);var i=window.scrollY,c=!1;window.addEventListener("scroll",function(d){i=window.scrollY,c||(c=!0,window.requestAnimationFrame(function(){s(i),c=!1}))})}function s(n){for(var o=n+document.documentElement.clientHeight/4,t,e=a.length-1;e>=0;e--)if(a[e].offsetTop<o){t=a[e];break}var i=t&&t.getAttribute("secid");i!==r&&(r&&l(r,!1),i&&l(i,!0),r=i)}function l(n,o){document.getElementById("_sidebar_"+n).className=o?"viewing":"";for(var t=n.split(".");t.length;){var e=document.getElementById("_toggle_"+t.join("."));e&&(e.checked=o),t.pop()}}s(window.scrollY);})();</script>
<script>(function(){var n=document.getElementsByTagName("style")[0].sheet,e;function u(){e&&(n.deleteRule(e),e=void 0)}function d(t){u(),e=n.insertRule('*[data-name="'+t+'"] { background: rgba(230,215,0,0.12); }',n.cssRules.length)}document.documentElement.addEventListener("mouseover",function(t){var a=t.target.attributes["data-name"];a&&d(a.value)});document.documentElement.addEventListener("mouseout",u);})();</script>
<script>(function(){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",o,p,r,g;document.addEventListener("selectionchange",E);window.addEventListener("resize",C);window.addEventListener("hashchange",x);window.addEventListener("load",x);function S(n){y(new URL(n.target.href))}function x(){y(window.location)}function y(n){var e=n.hash.match(/^#sel-([A-Za-z0-9-_]+)$/);if(!!e){g=e[1],r=k(g);var t=r.getBoundingClientRect(),d=Math.max(20,Math.floor((window.innerHeight-t.height)*.4));window.scrollTo(0,window.scrollY+t.y-d);var c=document.getSelection();c.empty(),c.addRange(r),C()}}function E(n){var e=document.getSelection();if(e.isCollapsed)o&&(o.parentNode.removeChild(o),o=null);else{var t=e.getRangeAt(0);(!r||t.compareBoundaryPoints(Range.START_TO_START,r)!==0||t.compareBoundaryPoints(Range.END_TO_END,r)!==0)&&(r=t,g=B(r),C())}}function C(){if(!!r){p||(p=document.getElementsByTagName("article")[0]),o||(o=document.createElement("a"),document.body.appendChild(o)),o.href="#sel-"+g,o.onclick=S,o.className=r.isOutdated?"outdated-selection-link":"selection-link",o.innerText=r.isOutdated?"!":"\u201F";var n=window.innerWidth<720,e=r.getBoundingClientRect();if(n)o.style.left=Math.floor(e.x+e.width/2+window.scrollX-13)+"px",o.style.top=Math.floor(e.bottom+window.scrollY+10)+"px";else{var t=p.getBoundingClientRect().x;o.style.left=Math.floor(t+window.scrollX-37)+"px",o.style.top=Math.floor(e.y+window.scrollY-3)+"px"}}}function B(n){var e="",t=N(n.startContainer),d=N(n.endContainer),c=M(t,d);return l(c),l(t.slice(c.length).concat(n.startOffset)),l(d.slice(c.length).concat(n.endOffset)),i(L(n.toString())),e;function i(a){do e+=R[a&31|(a>31?32:0)],a>>=5;while(a>0)}function l(a){i(a.length);for(var h=0;h<a.length;h++)i(a[h])}}function k(n){for(var e=new Array(64),t=0;t<64;t++)e[R.charCodeAt(t)]=t;var d=0,c=m(),i=m(),l=m(),a=w(),h=i.pop(),P=O(c.concat(i)),T=l.pop(),A=O(c.concat(l)),u=document.createRange();return u.setStart(P,h),u.setEnd(A,T),u.isOutdated=a!==void 0&&a!==L(u.toString()),u;function w(){for(var s=0,v=0;d<n.length;){var f=e[n.charCodeAt(d++)];if(s|=(f&31)<<v,v+=5,f<32)return s}}function m(){var s=w();if(s!=null){for(var v=new Array(s),f=0;f<s;f++)v[f]=w();return v}}}function N(n){for(var e=[];n!=document.body;){var t=n.parentNode;e.push(Array.prototype.indexOf.call(t.childNodes,n)),n=t}return e.reverse()}function O(n){for(var e=document.body,t=0;t<n.length&&e;t++)e=e.childNodes[n[t]];return e}function M(n,e){for(var t=0;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function L(n){for(var e=2166136261,t=0;t<n.length;++t)e^=n.charCodeAt(t),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(e>>15^e)&32767}})();</script>
<script>(function(){var a,i,t;document.addEventListener("pointerover",c);document.addEventListener("pointerleave",u);window.addEventListener("resize",d);var s={OL:1,UL:1};function c(r){var e=r.target;if(e.nodeType===Node.ELEMENT_NODE){for(;e&&!e.getAttribute("data-source");){if(s[e.nodeName])return;e=e.parentElement}e&&e!==a&&(a=e,d())}}function d(){if(!!a){i||(i=document.getElementsByTagName("article")[0]),t||(t=document.createElement("a"),t.className="source-link",t.target="_blank",t.innerHTML='<svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>',document.body.appendChild(t)),t.href=i.getAttribute("data-source-base")+a.getAttribute("data-source");var r=v(a),e=document.createRange();r.nodeType===Node.TEXT_NODE?e.setStart(r,0):e.selectNode(r);var n=e.getBoundingClientRect();e.detach();var o=n.y+n.height/2-9,l=i.getBoundingClientRect().x-95;t.style.left=Math.floor(window.scrollX+l)+"px",t.style.top=Math.floor(window.scrollY+o)+"px"}}function v(r){e:for(;r;){for(var e=r.childNodes,n=0;e&&n<e.length;n++){var o=e[n];if(o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE&&!/^\s*$/.test(o.data)){r=o;continue e}}return r}}function u(){t&&(t.parentNode.removeChild(t),t=null)}})();</script>
</head>
<body><article data-source-base="https://github.com/graphql/composite-schemas-spec/blame/main/">
<header>
<h1>GraphQL Composite Schemas Spec</h1>
<section id="intro">
<section id="sec-Introduction" class="subsec">
<h6 data-source="spec/Spec.md#L3"><a href="#sec-Introduction" title="link to this subsection">Introduction</a></h6>
<p data-source="spec/Spec.md#L5-L10">The GraphQL Composite Schemas introduces a comprehensive specification for creating distributed GraphQL systems that seamlessly merges multiple GraphQL schemas. This specification describes the process of composing a federated GraphQL schema and outlines algorithms for executing GraphQL queries on the federated schema effectively by using query plans. This specification was originally created by ChilliCream and was transferred to the GraphQL foundation.</p>
<p data-source="spec/Spec.md#L12-L15">The GraphQL Foundation was formed in 2019 as a neutral focal point for organizations who support the GraphQL ecosystem, and the GraphQL Specification Project was established also in 2019 as the Joint Development Foundation Projects, LLC, GraphQL Series.</p>
<p data-source="spec/Spec.md#L17-L19">If your organization benefits from GraphQL, please consider becoming a member and helping us to sustain the activities that support the health of our neutral ecosystem.</p>
<p data-source="spec/Spec.md#L21-L24">The GraphQL Specification Project has evolved and may continue to evolve in future editions of this specification. Previous editions of the GraphQL specification can be found at permalinks that match their release tag. The latest working draft release can be found at https://spec.graphql.org/draft.</p>
</section>
<section id="sec-Copyright-notice" class="subsec">
<h6 data-source="spec/Spec.md#L26"><a href="#sec-Copyright-notice" title="link to this subsection">Copyright notice</a></h6>
<p data-source="spec/Spec.md#L28">Copyright © 2023-present, GraphQL contributors</p>
<p data-source="spec/Spec.md#L30-L40">THESE MATERIALS ARE PROVIDED &ldquo;AS IS&rdquo;. The parties expressly disclaim any warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to the materials. The entire risk as to implementing or otherwise using the materials is assumed by the implementer and user. IN NO EVENT WILL THE PARTIES BE LIABLE TO ANY OTHER PARTY FOR LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF ANY KIND WITH RESPECT TO THIS DELIVERABLE OR ITS GOVERNING AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER MEMBER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</section>
<section id="sec-Conformance" class="subsec">
<h6 data-source="spec/Spec.md#L42"><a href="#sec-Conformance" title="link to this subsection">Conformance</a></h6>
<p data-source="spec/Spec.md#L44-L46">A conforming implementation of GraphQL over HTTP must fulfill all normative requirements. Conformance requirements are described in this document via both descriptive assertions and key words with clearly defined meanings.</p>
<p data-source="spec/Spec.md#L48-L53">The key words &ldquo;MUST&rdquo;, &ldquo;MUST NOT&rdquo;, &ldquo;REQUIRED&rdquo;, &ldquo;SHALL&rdquo;, &ldquo;SHALL NOT&rdquo;, &ldquo;SHOULD&rdquo;, &ldquo;SHOULD NOT&rdquo;, &ldquo;RECOMMENDED&rdquo;, &ldquo;MAY&rdquo;, and &ldquo;OPTIONAL&rdquo; in the normative portions of this document are to be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">IETF RFC 2119</a>. These key words may appear in lowercase and still retain their meaning unless explicitly declared as non-normative.</p>
<p data-source="spec/Spec.md#L55-L57">A conforming implementation of GraphQL over HTTP may provide additional functionality, but must not where explicitly disallowed or would otherwise result in non-conformance.</p>
</section>
<section id="sec-Non-Normative-Portions" class="subsec">
<h6 data-source="spec/Spec.md#L59"><a href="#sec-Non-Normative-Portions" title="link to this subsection">Non-Normative Portions</a></h6>
<p data-source="spec/Spec.md#L61-L62">All contents of this document are normative except portions explicitly declared as non-normative.</p>
<p data-source="spec/Spec.md#L64-L67">Examples in this document are non-normative, and are presented to aid understanding of introduced concepts and the behavior of normative portions of the specification. Examples are either introduced explicitly in prose (e.g. &ldquo;for example&rdquo;) or are set apart in example or counter-example blocks, like this:</p>
<pre id="example-fed99" class="spec-example" data-source="spec/Spec.md#L69-L71"><a href="#example-fed99">Example № 1</a><code>This is an example of a non-normative example.
</code></pre>
<pre id="example-881bd" class="spec-counter-example" data-source="spec/Spec.md#L73-L75"><a href="#example-881bd">Counter Example № 2</a><code>This is an example of a non-normative counter-example.
</code></pre>
<p data-source="spec/Spec.md#L77-L80">Notes in this document are non-normative, and are presented to clarify intent, draw attention to potential edge-cases and pit-falls, and answer common questions that arise during implementation. Notes are either introduced explicitly in prose (e.g. &ldquo;Note: &ldquo;) or are set apart in a note block, like this:</p>
<div id="note-c0129" class="spec-note" data-source="spec/Spec.md#L82">
<a href="#note-c0129">Note</a>
This is an example of a non-normative note.</div>
</section>
</section>
<nav class="spec-toc">
<div class="title">Contents</div>
<ol>
<li><a href="#sec-Overview"><span class="spec-secid">1</span>Overview</a></li>
<li><a href="#sec-Source-Schema"><span class="spec-secid">2</span>Source Schema</a><ol>
<li><a href="#sec-Directives"><span class="spec-secid">2.1</span>Directives</a><ol>
<li><a href="#sec--lookup"><span class="spec-secid">2.1.1</span>@lookup</a></li>
<li><a href="#sec--internal"><span class="spec-secid">2.1.2</span>@internal</a></li>
<li><a href="#sec--is"><span class="spec-secid">2.1.3</span>@is</a></li>
<li><a href="#sec--require"><span class="spec-secid">2.1.4</span>@require</a></li>
<li><a href="#sec--key"><span class="spec-secid">2.1.5</span>@key</a></li>
<li><a href="#sec--shareable"><span class="spec-secid">2.1.6</span>@shareable</a></li>
<li><a href="#sec--provides"><span class="spec-secid">2.1.7</span>@provides</a></li>
<li><a href="#sec--external"><span class="spec-secid">2.1.8</span>@external</a></li>
<li><a href="#sec--override"><span class="spec-secid">2.1.9</span>@override</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Schema-Composition"><span class="spec-secid">3</span>Schema Composition</a><ol>
<li><a href="#sec-Validate-Source-Schema"><span class="spec-secid">3.1</span>Validate Source Schema</a></li>
<li><a href="#sec-Merge-Source-Schemas"><span class="spec-secid">3.2</span>Merge Source Schemas</a><ol>
<li><a href="#sec-Pre-Merge-Validation"><span class="spec-secid">3.2.1</span>Pre Merge Validation</a><ol>
<li><a href="#sec-Output-Field-Types-Mergeable"><span class="spec-secid">3.2.1.1</span>Output Field Types Mergeable</a></li>
</ol>
</li>
<li><a href="#sec-Merge"><span class="spec-secid">3.2.2</span>Merge</a></li>
<li><a href="#sec-Post-Merge-Validation"><span class="spec-secid">3.2.3</span>Post Merge Validation</a><ol>
<li><a href="#sec-Empty-Merged-Object-Type"><span class="spec-secid">3.2.3.1</span>Empty Merged Object Type</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Validate-Satisfiability"><span class="spec-secid">3.3</span>Validate Satisfiability</a></li>
</ol>
</li>
<li><a href="#sec-Executor"><span class="spec-secid">4</span>Executor</a><ol>
<li><a href="#sec-Configuration"><span class="spec-secid">4.1</span>Configuration</a></li>
</ol>
</li>
<li><a href="#sec-Shared-Types"><span class="spec-secid">5</span>Shared Types</a><ol>
<li><a href="#sec-Shared-Types.Name"><span class="spec-secid">5.1</span>Name</a></li>
<li><a href="#sec-FieldSelection"><span class="spec-secid">5.2</span>FieldSelection</a></li>
</ol>
</li>
<li><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar"><span class="spec-secid">6</span>Appendix A: Specification of FieldSelectionMap Scalar</a><ol>
<li><a href="#sec-Introduction"><span class="spec-secid">6.1</span>Introduction</a><ol>
<li><a href="#sec-Scope"><span class="spec-secid">6.1.1</span>Scope</a></li>
</ol>
</li>
<li><a href="#sec-Language"><span class="spec-secid">6.2</span>Language</a><ol>
<li><a href="#sec-Language.Name"><span class="spec-secid">6.2.1</span>Name</a></li>
<li><a href="#sec-Path"><span class="spec-secid">6.2.2</span>Path</a></li>
<li><a href="#sec-SelectedValue"><span class="spec-secid">6.2.3</span>SelectedValue</a></li>
<li><a href="#sec-SelectedObjectValue"><span class="spec-secid">6.2.4</span>SelectedObjectValue</a></li>
<li><a href="#sec-SelectedListValue"><span class="spec-secid">6.2.5</span>SelectedListValue</a></li>
</ol>
</li>
<li><a href="#sec-Validation"><span class="spec-secid">6.3</span>Validation</a><ol>
<li><a href="#sec-Path-Field-Selections"><span class="spec-secid">6.3.1</span>Path Field Selections</a></li>
<li><a href="#sec-Path-Terminal-Field-Selections"><span class="spec-secid">6.3.2</span>Path Terminal Field Selections</a></li>
<li><a href="#sec-Type-Reference-Is-Possible"><span class="spec-secid">6.3.3</span>Type Reference Is Possible</a></li>
<li><a href="#sec-Values-of-Correct-Type"><span class="spec-secid">6.3.4</span>Values of Correct Type</a></li>
<li><a href="#sec-Selected-Object-Field-Names"><span class="spec-secid">6.3.5</span>Selected Object Field Names</a></li>
<li><a href="#sec-Selected-Object-Field-Uniqueness"><span class="spec-secid">6.3.6</span>Selected Object Field Uniqueness</a></li>
<li><a href="#sec-Required-Selected-Object-Fields"><span class="spec-secid">6.3.7</span>Required Selected Object Fields</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</nav>
</header>
<section id="sec-Overview" secid="1">
<h1 data-source="spec/Section%201%20--%20Overview.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Overview">1</a></span>Overview</h1>
<p data-source="spec/Section%201%20--%20Overview.md#L3-L5">The GraphQL Composite Schemas specification describes how to construct a single unified GraphQL schema, the <em>composite schema</em>, from multiple GraphQL schemas, each termed a <em>source schema</em>.</p>
<p data-source="spec/Section%201%20--%20Overview.md#L7-L10">The <em>composite schema</em> presents itself as a regular <span class="spec-ref"><a href="https://spec.graphql.org/draft/#sec-Schema" data-name="graphql-schema" target="_blank">GraphQL schema</a></span>; the implementation details and complexities of the underlying distributed systems are not visible to clients, all observable behavior is the same as described by the <span class="spec-ref"><a href="https://spec.graphql.org/draft/" data-name="graphql-specification" target="_blank">GraphQL specification</a></span>.</p>
<p data-source="spec/Section%201%20--%20Overview.md#L12">The GraphQL Composite Schemas specification has a number of design principles:</p>
<ul>
<li data-source="spec/Section%201%20--%20Overview.md#L14-L21"><strong>Composable</strong>: Rather than defining each <em>source schema</em> in isolation and reshaping it to fit the <em>composite schema</em> later, this specification encourages developers to design the source schemas as part of a larger whole from the start. Each source schema defines the types and fields it is responsible for serving within the context of the larger schema, referencing and extending that which is provided by other source schemas. The GraphQL Composite Schemas specification does not describe how to combine arbitrary schemas.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L23-L29"><strong>Collaborative</strong>: The GraphQL Composite Schemas specification is explicitly designed around team collaboration. By building on a principled composition model, it ensures that conflicts and inconsistencies are surfaced early and can be resolved before deployment. This allows many teams to contribute to a single schema without the danger of breaking it. The GraphQL Composite Schemas specification facilitates the coordinated effort of combining collaboratively designed source schemas into a single coherent composite schema.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L31-L37"><strong>Evolvable</strong>: A <em>composite schema</em> enables offering an integrated, product-centric API interface to clients; source schema boundaries are an implementation detail, a detail that is not exposed to clients. As each underlying <span class="spec-ref"><a href="https://spec.graphql.org/draft/#sec-Overview" data-name="graphql-service" target="_blank">GraphQL service</a></span> evolves, the same functionality may be provided from a different combination of services. This specification helps to ensure that changes to underlying services can be made whilst maintaining support for existing requests from all clients to the composite schema interface.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L39-L42"><strong>Explicitness</strong>: To make the composition process easier to understand and to avoid ambiguities that can lead to confusing failures as the system grows, the GraphQL Composite Schemas specification prefers to be explicit about intentions and minimize reliance on inference and convention.</li>
</ul>
<p data-source="spec/Section%201%20--%20Overview.md#L44-L46">To enable greater interoperability between different implementations of tooling and gateways, this specification focuses on two core components: schema composition and distributed execution.</p>
<ul>
<li data-source="spec/Section%201%20--%20Overview.md#L48-L53"><strong>Schema Composition</strong>: Schema composition describes the process of merging multiple <em>source schema</em> into a single GraphQL schema, the <em>composite schema</em>. During this process, an intermediary schema, the <em>composite execution schema</em>, is generated. This composite execution schema is annotated with directives to describe execution, and may have additional internal fields or arguments that won&rsquo;t be exposed in the client-facing composite schema.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L55-L58"><strong>Distributed Execution</strong>: The <em>distributed GraphQL executor</em> specifies the core execution behavior and algorithms that enable fulfillment of a <span class="spec-ref"><a href="https://spec.graphql.org/draft/#request" data-name="graphql-request" target="_blank">GraphQL request</a></span> performed against the <em>composite schema</em>. </li>
</ul>
</section>
<section id="sec-Source-Schema" secid="2">
<h1 data-source="spec/Section%202%20--%20Source%20Schema.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Source-Schema">2</a></span>Source Schema</h1>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L3-L6">A <em>source schema</em> is a GraphQL schema that is part of a larger <em>composite schema</em>. Source schemas use directives to express intent and requirements for the composition process. In the following chapters, we will describe the directives that are used to annotate a source schema.</p>
<section id="sec-Directives" secid="2.1">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L8"><span class="spec-secid" title="link to this section"><a href="#sec-Directives">2.1</a></span>Directives</h2>
<section id="sec--lookup" secid="2.1.1">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L10"><span class="spec-secid" title="link to this section"><a href="#sec--lookup">2.1.1</a></span>@lookup</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L12-L14"><code><span class="token keyword">directive</span> <span class="token directive function">@lookup</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L16-L18">The <code>@lookup</code> directive is used within a <em>source schema</em> to specify output fields that can be used by the <em>distributed GraphQL executor</em> to resolve an entity by a stable key.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L20-L21">The stable key is defined by the arguments of the field. Each argument must match a field on the return type of the lookup field.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L23-L24">Source schemas can provide multiple lookup fields for the same entity that resolve the entity by different keys.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L26-L28">In this example, the source schema specifies that the <code>Product</code> entity can be resolved with the <code>productById</code> field or the <code>productByName</code> field. Both lookup fields are able to resolve the <code>Product</code> entity but do so with different keys.</p>
<pre id="example-b8759" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L30-L41"><a href="#example-b8759">Example № 3</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token comment"># NOT a lookup field.</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
  <span class="token attr-name">productByName</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L43-L44">The arguments of a lookup field must correspond to fields specified as an entity key with the <code>@key</code> directive on the entity type.</p>
<pre id="example-5394c" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L46-L54"><a href="#example-5394c">Example № 4</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">node</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Node</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L56-L59">Lookup fields may return object, interface, or union types. In case a lookup field returns an abstract type (interface type or union type), all possible object types are considered entities and must have keys that correspond with the field&rsquo;s argument signature.</p>
<pre id="example-a4069" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L61-L83"><a href="#example-a4069">Example № 5</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token property">Electronics</span> <span class="token operator">|</span> <span class="token property">Clothing</span>

<span class="token keyword">type</span> <span class="token class-name">Electronics</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id categoryId"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">brand</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id categoryId"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L85-L86">The following example shows an invalid lookup field as the <code>Clothing</code> type does not declare a key that corresponds with the lookup field&rsquo;s argument signature.</p>
<pre id="example-2de20" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L88-L112"><a href="#example-2de20">Counter Example № 6</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token property">Electronics</span> <span class="token operator">|</span> <span class="token property">Clothing</span>

<span class="token keyword">type</span> <span class="token class-name">Electronics</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id categoryId"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">brand</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token comment"># Clothing does not have a key that corresponds</span>
<span class="token comment"># with the lookup field's argument signature.</span>
<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L114-L115">If the lookup returns an interface, the interface must also be annotated with a <code>@key</code> directive and declare its keys.</p>
<pre id="example-4521f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L117-L121"><a href="#example-4521f">Example № 7</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L123-L125">Lookup fields must be accessible from the Query type. If not directly on the Query type, they must be accessible via fields that do not require arguments, starting from the Query root type.</p>
<pre id="example-c623c" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L127-L139"><a href="#example-c623c">Example № 8</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lookups</span><span class="token punctuation">:</span> <span class="token class-name">Lookups</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Lookups</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L141-L145">Lookups can also be nested within other lookups and allow resolving nested entities that are part of an aggregate. In the following example the <code>Product</code> can be resolved by its ID but also the <code>ProductPrice</code> can be resolved by passing in a composite key containing the product ID and region name of the product price.</p>
<pre id="example-1c46f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L147-L162"><a href="#example-1c46f">Example № 9</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">(</span><span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"regionName product { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L164-L165">Nested lookups must immediately follow the parent lookup and cannot be nested with fields in between.</p>
<pre id="example-17ffb" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L167-L186"><a href="#example-17ffb">Counter Example № 10</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">ProductDetails</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">(</span><span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"regionName product { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--internal" secid="2.1.2">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L188"><span class="spec-secid" title="link to this section"><a href="#sec--internal">2.1.2</a></span>@internal</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L190-L192"><code><span class="token keyword">directive</span> <span class="token directive function">@internal</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L194-L197">The <code>@internal</code> directive is used to mark lookup fields as internal. Internal lookup fields are not used as entry points in the composite schema and can only be used by the <em>distributed GraphQL executor</em> to resolve additional data for an entity.</p>
<pre id="example-e6333" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L199-L207"><a href="#example-e6333">Example № 11</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token comment"># lookup field and possible entry point</span>
  <span class="token attr-name">reviewById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Review</span> <span class="token directive function">@lookup</span>

  <span class="token comment"># internal lookup field</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L209-L212">The <code>@internal</code> directive provides control over which source schemas are used to resolve entities and which source schemas merely contribute data to entities. Further, using <code>@internal</code> allows hiding &ldquo;technical&rdquo; lookup fields that are not meant for the client-facing composite schema.</p>
</section>
<section id="sec--is" secid="2.1.3">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L214"><span class="spec-secid" title="link to this section"><a href="#sec--is">2.1.3</a></span>@is</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L216-L218"><code><span class="token keyword">directive</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L220-L224">The <code>@is</code> directive is utilized on lookup fields to describe how the arguments can be mapped from the entity type that the lookup field resolves. The mapping establishes semantic equivalence between disparate type system members across source schemas and is used in cases where the argument does not 1:1 align with a field on the entity type.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L226-L228">In the following example, the directive specifies that the <code>id</code> argument on the field <code>Query.personById</code> and the field <code>Person.id</code> on the return type of the field are semantically the same.</p>
<div id="note-ecb66" class="spec-note" data-source="spec/Section%202%20--%20Source%20Schema.md#L230-L231">
<a href="#note-ecb66">Note</a>
In this case the <code>@is</code> directive could also be omitted as the argument and field names match.</div>
<pre id="example-68bd0" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L233-L237"><a href="#example-68bd0">Example № 12</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L239">The <code>@is</code> directive also allows referring to nested fields relative to <code>Person</code>.</p>
<pre id="example-ed8f8" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L241-L245"><a href="#example-ed8f8">Example № 13</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personByAddressId</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address.id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L247">The <code>@is</code> directive is not limited to a single argument.</p>
<pre id="example-11615" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L249-L256"><a href="#example-11615">Example № 14</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personByAddressId</span><span class="token punctuation">(</span>
    <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address.id"</span><span class="token punctuation">)</span>
    <span class="token attr-name">kind</span><span class="token punctuation">:</span> <span class="token class-name">PersonKind</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"kind"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L258-L259">The <code>@is</code> directive can also be used in combination with <code>@oneOf</code> to specify lookup fields that can resolve entities by different keys.</p>
<pre id="example-6845b" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L261-L273"><a href="#example-6845b">Example № 15</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">person</span><span class="token punctuation">(</span>
    <span class="token attr-name">by</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PersonByInput</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id } | { addressId: address.id } { name }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PersonByInput</span> <span class="token directive function">@oneOf</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">addressId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--is.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L275"><a href="#sec--is.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L277"><code>field</code>: Represents a selection path map syntax.</li>
</ul>
</section>
</section>
<section id="sec--require" secid="2.1.4">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L279"><span class="spec-secid" title="link to this section"><a href="#sec--require">2.1.4</a></span>@require</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L281-L283"><code><span class="token keyword">directive</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L285-L288">The <code>@require</code> directive is used to express data requirements with other source schemas. Arguments annotated with the <code>@require</code> directive are removed from the <em>composite schema</em> and the value for these will be resolved by the <em>distributed executor</em>.</p>
<pre id="example-3d648" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L290-L299"><a href="#example-3d648">Example № 16</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.size"</span><span class="token punctuation">)</span>
    <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.weight"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L301">The upper example would translate to the following in the <em>composite schema</em>.</p>
<pre id="example-20429" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L303-L308"><a href="#example-20429">Example № 17</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">delivery</span><span class="token punctuation">(</span><span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L310-L313">This can also be done by using input types. The selection path map specifies which data is required and needs to be resolved from other source schemas. If the input type is only used to express a requirements it is removed from the composite schema.</p>
<pre id="example-88e3b" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L315-L323"><a href="#example-88e3b">Example № 18</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">ProductDimensionInput</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ size: dimension.size, weight: dimension.weight }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L325-L326">If the input types do not match the output type structure the selection map syntax can be used to specify how requirements translate to the input object.</p>
<pre id="example-41596" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L328-L347"><a href="#example-41596">Example № 19</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">ProductDimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ productSize: dimension.size, productWeight: dimension.weight }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDimension</span> <span class="token punctuation">{</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">ProductDimensionInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productSize</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">productWeight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--require.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L349"><a href="#sec--require.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L351"><code>field</code>: Represents a selection path map syntax.</li>
</ul>
</section>
</section>
<section id="sec--key" secid="2.1.5">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L353"><span class="spec-secid" title="link to this section"><a href="#sec--key">2.1.5</a></span>@key</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L355-L357"><code><span class="token keyword">directive</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">SelectionSet</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">INTERFACE</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L359-L362">The @key directive is used to designate an entity&rsquo;s unique key, which identifies how to uniquely reference an instance of an entity across different source schemas. It allows a source schema to indicate which fields form a unique identifier, or <strong>key</strong>, for an entity.</p>
<pre id="example-ad2f9" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L364-L371"><a href="#example-ad2f9">Example № 20</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L373-L375">Each occurrence of the @key directive on an object or interface type specifies one distinct unique key for that entity, which enables a gateway to perform lookups and resolve instances of the entity based on that key.</p>
<pre id="example-12197" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L377-L384"><a href="#example-12197">Example № 21</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"key"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L386-L388">While multiple keys define separate ways to reference the same entity based on different sets of fields, a composite key allows to uniquely identify an entity by using a combination of multiple fields.</p>
<pre id="example-4e25f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L390-L397"><a href="#example-4e25f">Example № 22</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L399-L402">The directive is applicable to both OBJECT and INTERFACE types. This allows entities that implement an interface to inherit the key(s) defined at the interface level, ensuring consistent identification across different implementations of that interface.</p>
<section id="sec--key.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L404"><a href="#sec--key.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L406"><code>fields</code>: Represents a selection set syntax.</li>
</ul>
</section>
</section>
<section id="sec--shareable" secid="2.1.6">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L408"><span class="spec-secid" title="link to this section"><a href="#sec--shareable">2.1.6</a></span>@shareable</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L410-L412"><code><span class="token keyword">directive</span> <span class="token directive function">@shareable</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L414-L416">By default, only a single source schema is allowed to contribute a particular field to an object type. This prevents source schemas from inadvertently defining similarly named fields that are semantically not the same.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L418-L420">Fields have to be explicitly marked as <code>@shareable</code> to allow multiple source schemas to define it, and ensures that the step of allowing a field to be served from multiple source schemas is an explicit, coordinated decision.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L422-L424">If multiple source schemas define the same field, these are assumed to be semantically equivalent, and the executor is free to choose between them as it sees fit.</p>
<div id="note-1634f" class="spec-note" data-source="spec/Section%202%20--%20Source%20Schema.md#L426">
<a href="#note-1634f">Note</a>
Key fields are always considered sharable.</div>
</section>
<section id="sec--provides" secid="2.1.7">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L428"><span class="spec-secid" title="link to this section"><a href="#sec--provides">2.1.7</a></span>@provides</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L430-L432"><code><span class="token keyword">directive</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">SelectionSet</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L434-L436">The <code>@provides</code> directive is an optimization hint specifying child fields that can be resolved locally at the given source schema through a particular query path. This allows for a variation of overlapping field to improve data fetching.</p>
<section id="sec--provides.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L438"><a href="#sec--provides.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L440"><code>fields</code>: Represents a selection set syntax.</li>
</ul>
</section>
</section>
<section id="sec--external" secid="2.1.8">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L442"><span class="spec-secid" title="link to this section"><a href="#sec--external">2.1.8</a></span>@external</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L444-L446"><code><span class="token keyword">directive</span> <span class="token directive function">@external</span> <span class="token keyword">on</span> <span class="token constant">OBJECT_DEFINITION</span> <span class="token operator">|</span> <span class="token constant">INTERFACE_DEFINITION</span> <span class="token operator">|</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L448-L449">The <code>@external</code> directive is used in combination with the <code>@provides</code> directive and specifies data that is not owned ba a particular source schema.</p>
</section>
<section id="sec--override" secid="2.1.9">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L451"><span class="spec-secid" title="link to this section"><a href="#sec--override">2.1.9</a></span>@override</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L453-L455"><code><span class="token keyword">directive</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L457-L459">The <code>@override</code> directive allows to migrate fields from one source schema to another. </p>
</section>
</section>
</section>
<section id="sec-Schema-Composition" secid="3">
<h1 data-source="spec/Section%204%20--%20Composition.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Schema-Composition">3</a></span>Schema Composition</h1>
<p data-source="spec/Section%204%20--%20Composition.md#L3-L9">The schema composition describes the process of merging multiple source schemas into a single GraphQL schema, known as the <em>composite execution schema</em>, which is a valid GraphQL schema annotated with execution directives. This composite execution schema is the output of the schema composition process. The schema composition process is divided into four major algorithms: <strong>Validate Source Schema</strong>, <strong>Merge Source Schema</strong>, and <strong>Validate Satisfiability</strong>, which are run in sequence to produce the composite execution schema.</p>
<section id="sec-Validate-Source-Schema" secid="3.1">
<h2 data-source="spec/Section%204%20--%20Composition.md#L11"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schema">3.1</a></span>Validate Source Schema</h2>
</section>
<section id="sec-Merge-Source-Schemas" secid="3.2">
<h2 data-source="spec/Section%204%20--%20Composition.md#L13"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Source-Schemas">3.2</a></span>Merge Source Schemas</h2>
<section id="sec-Pre-Merge-Validation" secid="3.2.1">
<h3 data-source="spec/Section%204%20--%20Composition.md#L15"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation">3.2.1</a></span>Pre Merge Validation</h3>
<section id="sec-Output-Field-Types-Mergeable" secid="3.2.1.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L17"><span class="spec-secid" title="link to this section"><a href="#sec-Output-Field-Types-Mergeable">3.2.1.1</a></span>Output Field Types Mergeable</h4>
<section id="sec-Output-Field-Types-Mergeable.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L19"><a href="#sec-Output-Field-Types-Mergeable.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L21">OUTPUT<em>FIELD</em>TYPES<em>NOT</em>MERGEABLE</p>
</section>
<section id="sec-Output-Field-Types-Mergeable.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L23"><a href="#sec-Output-Field-Types-Mergeable.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L25">ERROR</p>
</section>
<section id="sec-Output-Field-Types-Mergeable.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L27"><a href="#sec-Output-Field-Types-Mergeable.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L29">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L30-L37">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L31-L32">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L33">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L34-L37">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L35-L36">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L37"><span class="spec-call"><a href="#FieldsAreMergeable()" data-name="FieldsAreMergeable">FieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="FieldsAreMergeable()" data-source="spec/Section%204%20--%20Composition.md#L39-L44">
<span class="spec-call"><a href="#FieldsAreMergeable()" data-name="FieldsAreMergeable">FieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L41-L44">Given each pair of members <var data-name="fieldA">fieldA</var> and <var data-name="fieldB">fieldB</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L42">Let <var data-name="typeA">typeA</var> be the type of <var data-name="fieldA">fieldA</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L43">Let <var data-name="typeB">typeB</var> be the type of <var data-name="fieldB">fieldB</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L44"><span class="spec-call"><span data-name="SameOutputTypeShape">SameOutputTypeShape</span>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> must be true.</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Output-Field-Types-Mergeable.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L46"><a href="#sec-Output-Field-Types-Mergeable.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L48-L49">Fields on objects or interfaces that have the same name are considered semantically equivalent and mergeable when they have a mergeable field type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L51">Fields with the same type are mergeable.</p>
<pre id="example-65bd6" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L53-L61"><a href="#example-65bd6">Example № 23</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L63-L64">Fields with different nullability are mergeable, resulting in a merged field with a nullable type.</p>
<pre id="example-6c133" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L66-L74"><a href="#example-6c133">Example № 24</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-a9f42" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L76-L88"><a href="#example-a9f42">Example № 25</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L90">Fields are not mergeable if the named types are different in kind or name.</p>
<pre id="example-1b751" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L92-L100"><a href="#example-1b751">Counter Example № 26</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-70adb" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L102-L116"><a href="#example-70adb">Counter Example № 27</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Tag</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Tag</span> <span class="token punctuation">{</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Tag</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">scalar</span> <span class="token class-name">Tag</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Merge" secid="3.2.2">
<h3 data-source="spec/Section%204%20--%20Composition.md#L118"><span class="spec-secid" title="link to this section"><a href="#sec-Merge">3.2.2</a></span>Merge</h3>
</section>
<section id="sec-Post-Merge-Validation" secid="3.2.3">
<h3 data-source="spec/Section%204%20--%20Composition.md#L120"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation">3.2.3</a></span>Post Merge Validation</h3>
<section id="sec-Empty-Merged-Object-Type" secid="3.2.3.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L122"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Object-Type">3.2.3.1</a></span>Empty Merged Object Type</h4>
<section id="sec-Empty-Merged-Object-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L124"><a href="#sec-Empty-Merged-Object-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L126"><code>EMPTY_MERGED_OBJECT_TYPE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L128"><strong>Severity</strong> ERROR</p>
</section>
<section id="sec-Empty-Merged-Object-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L130"><a href="#sec-Empty-Merged-Object-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L132">Let <var data-name="types">types</var> be the set of all object types across all source schemas</li>
<li data-source="spec/Section%204%20--%20Composition.md#L133-L134">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L134"><span class="spec-call"><a href="#IsObjectTypeEmpty()" data-name="IsObjectTypeEmpty">IsObjectTypeEmpty</a>(<var data-name="type">type</var>)</span> must be false.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="IsObjectTypeEmpty()" data-source="spec/Section%204%20--%20Composition.md#L136-L144">
<span class="spec-call"><a href="#IsObjectTypeEmpty()" data-name="IsObjectTypeEmpty">IsObjectTypeEmpty</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L138">If <var data-name="type">type</var> has <code>@inaccessible</code> directive</li>
<li data-source="spec/Section%204%20--%20Composition.md#L139">return false</li>
<li data-source="spec/Section%204%20--%20Composition.md#L140">Let <var data-name="fields">fields</var> be a set of all fields in <var data-name="type">type</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L141-L143">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L142-L143">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="field">field</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L143">return false</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L144">return true</li>
</ol>
</div>
</section>
<section id="sec-Empty-Merged-Object-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L146"><a href="#sec-Empty-Merged-Object-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L148-L152">For object types defined across multiple source schemas, the merged object type is the superset of all fields defined in these source schemas. However, any field marked with <code>@inaccessible</code> in any source schema is hidden and not included in the merged object type. An object type with no fields, after considering <code>@inaccessible</code> annotations, is considered empty and invalid.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L154-L156">In the following example, the merged object type <code>ObjectType1</code> is valid. It includes all fields from both source schemas, with <code>field2</code> being hidden due to the <code>@inaccessible</code> directive in one of the source schemas:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L158-L168"><code><span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L170-L172">If the <code>@inaccessible</code> directive is applied to an object type itself, the entire merged object type is excluded from the composite execution schema, and it is not required to contain any fields.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L174-L183"><code><span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L185-L188">This counter-example demonstrates an invalid merged object type. In this case, <code>ObjectType1</code> is defined in two source schemas, but all fields are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged object type:</p>
<pre id="example-a5d81" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L190-L200"><a href="#example-a5d81">Counter Example № 28</a><code><span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Validate-Satisfiability" secid="3.3">
<h2 data-source="spec/Section%204%20--%20Composition.md#L202"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Satisfiability">3.3</a></span>Validate Satisfiability</h2>
</section>
</section>
<section id="sec-Executor" secid="4">
<h1 data-source="spec/Section%205%20--%20Execution.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Executor">4</a></span>Executor</h1>
<p data-source="spec/Section%205%20--%20Execution.md#L3-L6">A distributed GraphQL executor acts as an orchestrator that uses schema metadata to rewrite a GraphQL request into a query plan. This plan resolves the required data from subgraphs and coerces this data into the result of the GraphQL request.</p>
<section id="sec-Configuration" secid="4.1">
<h2 data-source="spec/Section%205%20--%20Execution.md#L8"><span class="spec-secid" title="link to this section"><a href="#sec-Configuration">4.1</a></span>Configuration</h2>
<p data-source="spec/Section%205%20--%20Execution.md#L10-L13">The supergraph is a GraphQL IDL document that contains metadata for the query planner that describes the relationship between type system members and the type system members on subgraphs. </p>
</section>
</section>
<section id="sec-Shared-Types" secid="5">
<h1 data-source="spec/Section%206%20--%20Shared%20Types.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Types">5</a></span>Shared Types</h1>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L3-L4">In this section we outline directives and types that are shared between the subgraph configuration and the gateway configuration document.</p>
<section id="sec-Shared-Types.Name" secid="5.1">
<h2 data-source="spec/Section%206%20--%20Shared%20Types.md#L6"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Types.Name">5.1</a></span>Name</h2>
<pre data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L8-L10"><code><span class="token keyword">scalar</span> <span class="token class-name">Name</span>
</code></pre>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L12">The scalar <code>Name</code> represents a valid GraphQL type name.</p>
</section>
<section id="sec-FieldSelection" secid="5.2">
<h2 data-source="spec/Section%206%20--%20Shared%20Types.md#L14"><span class="spec-secid" title="link to this section"><a href="#sec-FieldSelection">5.2</a></span>FieldSelection</h2>
<pre data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L16-L18"><code><span class="token keyword">scalar</span> <span class="token class-name">FieldSelection</span>
</code></pre>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L20">The scalar <code>FieldSelection</code> represents a GraphQL field selection syntax.</p>
<pre id="example-fa3a8" class="spec-example" data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L22-L24"><a href="#example-fa3a8">Example № 29</a><code><span class="token property-query">abc</span><span class="token punctuation">(</span><span class="token attr-name">def</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token property">ghi</span> <span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar" secid="6">
<h1 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar">6</a></span>Appendix A: Specification of FieldSelectionMap Scalar</h1>
<section id="sec-Introduction" secid="6.1">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L3"><span class="spec-secid" title="link to this section"><a href="#sec-Introduction">6.1</a></span>Introduction</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L5-L10">This appendix focuses on the specification of the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar type. <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is designed to express semantic equivalence between arguments of a field and fields within the result type. Specifically, it allows defining complex relationships between input arguments and fields in the output object by encapsulating these relationships within a parsable string format. It is used in the <code>@is</code> and <code>@require</code> directives.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L12">To illustrate, consider a simple example from a GraphQL schema:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L14-L18"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L20-L22">In this schema, the <code>userById</code> query uses the <code>@is</code> directive with <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> to declare that the <code>userId</code> argument is semantically equivalent to the <code>User.id</code> field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L24">An example query might look like this:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L26-L32"><code><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token string">"123"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">id</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L34-L35">Here, it is expected that the <code>userId</code> &ldquo;123&rdquo; corresponds directly to <code>User.id</code>, resulting in the following response if correctly implemented:</p>
<pre data-language="json" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L37-L45"><code><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"userById"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L47-L48">The <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar is represented as a string that, when parsed, produces a <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L50-L52">A <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> must exactly match the shape of the argument value to be considered valid. For non-scalar arguments, you must specify each field of the input type in <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>.</p>
<pre id="example-4e764" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L54-L59"><a href="#example-4e764">Example № 30</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUserByName</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ firstName: firstName }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span>
    <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-b659f" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L61-L65"><a href="#example-b659f">Counter Example № 31</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUserByName</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"firstName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec-Scope" secid="6.1.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L67"><span class="spec-secid" title="link to this section"><a href="#sec-Scope">6.1.1</a></span>Scope</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L69-L72">The <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar type is used to establish semantic equivalence between an argument and fields within a specific output type. This output type is always a composite type, but the way it&rsquo;s determined can vary depending on the directive and context in which the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is used.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L74-L77">For example, when used with the <code>@is</code> directive, the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> maps between the argument and fields in the return type of the field. However, when used with the <code>@require</code> directive, it maps between the argument and fields in the object type on which the field is defined.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L79">Consider this example:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L81-L90"><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.size"</span><span class="token punctuation">)</span>
    <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.weight"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L92-L93">In this case, <code>"dimension.size"</code> and <code>"dimension.weight"</code> refer to fields of the <code>Product</code> type, not the <code>DeliveryEstimates</code> return type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L95-L97">Consequently, a <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> must be interpreted in the context of a specific argument, its associated directive, and the relevant output type as determined by that directive&rsquo;s behavior.</p>
<section id="sec-Scope.Examples" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L99"><a href="#sec-Scope.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L101">Scalar fields can be mapped directly to arguments.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L103">This example maps the <code>Product.weight</code> field to the <code>weight</code> argument:</p>
<pre id="example-bbc71" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L105-L109"><a href="#example-bbc71">Example № 32</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L111">This example maps the <code>Product.shippingWeight</code> field to the <code>weight</code> argument:</p>
<pre id="example-c801d" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L113-L117"><a href="#example-c801d">Example № 33</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"shippingWeight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L119-L120">Nested fields can be mapped to arguments by specifying the path. This example maps the nested field <code>Product.packaging.weight</code> to the <code>weight</code> argument:</p>
<pre id="example-ed66f" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L122-L126"><a href="#example-ed66f">Example № 34</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"packaging.weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L128">Complex objects can be mapped to arguments by specifying each field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L130-L131">This example maps the <code>Product.width</code> and <code>Product.height</code> fields to the <code>dimension</code> argument:</p>
<pre id="example-55571" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L133-L139"><a href="#example-55571">Example № 35</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: width height: height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L141">The shorthand equivalent is:</p>
<pre id="example-59fba" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L143-L149"><a href="#example-59fba">Example № 36</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L151-L152">In case the input field names do not match the output field names, explicit mapping is required.</p>
<pre id="example-e314c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L154-L160"><a href="#example-e314c">Example № 37</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ w: width h: height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L162-L163">Even if <code>Product.dimension</code> has all the fields needed for the input object, an explicit mapping is always required.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L165">This example is NOT allowed because it lacks explicit mapping:</p>
<pre id="example-9430e" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L167-L171"><a href="#example-9430e">Counter Example № 38</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L173">Instead, you can traverse into output fields by specifying the path.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L175">This example shows how to map nested fields explicitly:</p>
<pre id="example-be69a" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L177-L184"><a href="#example-be69a">Example № 39</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: dimension.width height: dimension.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L186-L187">The path does NOT affect the structure of the input object. It is only used to traverse the output object:</p>
<pre id="example-e916c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L189-L196"><a href="#example-e916c">Example № 40</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: size.width height: size.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L198-L199">To avoid repeating yourself, you can prefix the selection with a path that ends in a dot to traverse INTO the output type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L201-L202">This affects how fields get interpreted but does NOT affect the structure of the input object:</p>
<pre id="example-fd4cb" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L204-L210"><a href="#example-fd4cb">Example № 41</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.{ width height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L212">This example is equivalent to the previous one:</p>
<pre id="example-27e4c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L214-L220"><a href="#example-27e4c">Example № 42</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"size.{ width height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L222-L223">The path syntax is required for lists because list-valued path expressions would be ambiguous otherwise.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L225">This example is NOT allowed because it lacks the dot syntax for lists:</p>
<pre id="example-fa3c5" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L227-L234"><a href="#example-fa3c5">Counter Example № 43</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">DimensionInput</span><span class="token punctuation">]</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: dimensions.width height: dimensions.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L236">Instead, use the path syntax and brackets to specify the list elements:</p>
<pre id="example-e3457" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L238-L244"><a href="#example-e3457">Example № 44</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">DimensionInput</span><span class="token punctuation">]</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimensions[{ width height }]"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L246-L247">With the path syntax it is possible to also select fields from a list of nested objects:</p>
<pre id="example-bcf9b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L249-L253"><a href="#example-bcf9b">Example № 45</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
    <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">partIds</span><span class="token punctuation">:</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L255-L256">For more complex input objects, all these constructs can be nested. This allows for detailed and precise mappings.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L258-L259">This example nests the <code>weight</code> field and the <code>dimension</code> object with its <code>width</code> and <code>height</code> fields:</p>
<pre id="example-c07d2" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L261-L268"><a href="#example-c07d2">Example № 46</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: dimension.{ width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L270-L271">This example nests the <code>weight</code> field and the <code>size</code> object with its <code>width</code> and <code>height</code> fields:</p>
<pre id="example-40460" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L273-L280"><a href="#example-40460">Example № 47</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, size: dimension.{ width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L282">The label can be used to nest values that aren&rsquo;t nested in the output.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L284">This example nests <code>Product.width</code> and <code>Product.height</code> under <code>dimension</code>:</p>
<pre id="example-79bb3" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L286-L293"><a href="#example-79bb3">Example № 48</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: { width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L295">In the following example, dimensions are nested under <code>dimension</code> in the output:</p>
<pre id="example-70210" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L297-L304"><a href="#example-70210">Example № 49</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: dimension.{ width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Language" secid="6.2">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L306"><span class="spec-secid" title="link to this section"><a href="#sec-Language">6.2</a></span>Language</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L308-L309">According to the GraphQL specification, an argument is a key-value pair in which the key is the name of the argument and the value is a <code>Value</code>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L311-L313">The <code>Value</code> of an argument can take various forms: it might be a scalar value (such as <code>Int</code>, <code>Float</code>, <code>String</code>, <code>Boolean</code>, <code>Null</code>, or <code>Enum</code>), a list (<code>ListValue</code>), an input object (<code>ObjectValue</code>), or a <code>Variable</code>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L315-L317">Within the scope of the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span>, the relationship between input and output is established by defining the <code>Value</code> of the argument as a selection of fields from the output object.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L319-L321">Yet only certain types of <code>Value</code> have a semantic meaning. <code>ObjectValue</code> and <code>ListValue</code> are used to define the structure of the value. Scalar values, on the other hand, do not carry semantic importance in this context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L323-L324">While variables may have legitimate use cases, they are considered out of scope for the current discussion.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L326-L327">However, it&rsquo;s worth noting that there could be potential applications for allowing them in the future.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L329-L331">Given that these potential values do not align with the standard literals defined in the GraphQL specification, a new literal called <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> is introduced, along with <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L333">Beyond these literals, an additional literal called <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is necessary.</p>
<section id="sec-Language.Name" secid="6.2.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L335"><span class="spec-secid" title="link to this section"><a href="#sec-Language.Name">6.2.1</a></span>Name</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L337-L338">Is equivalent to the <span class="spec-nt"><span data-name="Name">Name</span></span> defined in the <a href="https://spec.graphql.org/October2021/#Name">GraphQL specification</a></p>
</section>
<section id="sec-Path" secid="6.2.2">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L340"><span class="spec-secid" title="link to this section"><a href="#sec-Path">6.2.2</a></span>Path</h3>
<div class="spec-production d2" id="Path" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L342">
<span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-t">&lt;</span><span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><span class="spec-t">&gt;</span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span><span class="spec-t">-</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
</div>
<div class="spec-production d2" id="PathSegment" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L344-L345">
<span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">-</span><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span><span class="spec-t">-</span><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">&lt;</span><span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><span class="spec-t">&gt;</span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
</div>
<div class="spec-production d2" id="FieldName" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L347">
<span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<div class="spec-production d2" id="TypeName" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L349">
<span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L351-L353">The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> literal is a string used to select a single output value from the <em>return type</em> by specifying a path to that value. This path is defined as a sequence of field names, each separated by a period (<code>.</code>) to create segments.</p>
<pre id="example-0327e" class="spec-example" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L355-L357"><a href="#example-0327e">Example № 50</a><code>book.title
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L359-L361">Each segment specifies a field in the context of the parent, with the root segment referencing a field in the <em>return type</em> of the query. Arguments are not allowed in a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L363-L365">To select a field when dealing with abstract types, the segment selecting the parent field must specify the concrete type of the field using angle brackets after the field name if the field is not defined on an interface.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L367-L368">In the following example, the path <code>mediaById&lt;Book&gt;.isbn</code> specifies that <code>mediaById</code> returns a <code>Book</code>, and the <code>isbn</code> field is selected from that <code>Book</code>.</p>
<pre id="example-db2de" class="spec-example" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L370-L372"><a href="#example-db2de">Example № 51</a><code>mediaById&lt;Book&gt;.isbn
</code></pre>
</section>
<section id="sec-SelectedValue" secid="6.2.3">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L374"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedValue">6.2.3</a></span>SelectedValue</h3>
<div class="spec-production d2" id="SelectedValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L376-L377">
<span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><span class="spec-t">-</span><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span><span class="spec-t">-</span><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><span class="spec-t">.</span><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span><span class="spec-t">-</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><span class="spec-t">|</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L379">A <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> is defined as either a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> or a <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L381-L384">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is designed to point to only a single value, although it may reference multiple fields depending on the return type. To allow selection from different paths based on type, a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> can include multiple paths separated by a pipe (<code>|</code>).</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L386-L387">In the following example, the value could be <code>title</code> when referring to a <code>Book</code> and <code>movieTitle</code> when referring to a <code>Movie</code>.</p>
<pre id="example-1cfdd" class="spec-example" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L389-L391"><a href="#example-1cfdd">Example № 52</a><code>mediaById&lt;Book&gt;.title | mediaById&lt;Movie&gt;.movieTitle
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L393-L395">The <code>|</code> operator can be used to match multiple possible <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>. This operator is applied when mapping an abstract output type to a <code>@oneOf</code> input type.</p>
<pre id="example-cf298" class="spec-example" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L397-L399"><a href="#example-cf298">Example № 53</a><code>{ movieId: &lt;Movie&gt;.id } | { productId: &lt;Product&gt;.id }
</code></pre>
<pre id="example-a050b" class="spec-example" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L401-L403"><a href="#example-a050b">Example № 54</a><code>{ nested: { movieId: &lt;Movie&gt;.id } | { productId: &lt;Product&gt;.id }}
</code></pre>
</section>
<section id="sec-SelectedObjectValue" secid="6.2.4">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L405"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedObjectValue">6.2.4</a></span>SelectedObjectValue</h3>
<div class="spec-production d2" id="SelectedObjectValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L407">
<span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-t">{</span><span class="spec-quantified"><span class="spec-nt"><a href="#SelectedObjectField" data-name="SelectedObjectField">SelectedObjectField</a></span><span class="spec-quantifiers"><span class="spec-quantifier list">list</span></span></span><span class="spec-t">}</span></div>
</div>
<div class="spec-production d2" id="SelectedObjectField" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L409">
<span class="spec-nt"><a href="#SelectedObjectField" data-name="SelectedObjectField">SelectedObjectField</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-nt"><span data-name="Name">Name</span></span><span class="spec-t">:</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L411-L413"><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> are unordered lists of keyed input values wrapped in curly-braces <code>{}</code>. It has to be used when the expected input type is an object type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L415-L418">This structure is similar to the <code>ObjectValue</code> defined in the GraphQL specification, but it differs by allowing the inclusion of <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> values within a <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>, thus extending the traditional <code>ObjectValue</code> capabilities to support direct path selections.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L420-L424">A <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> following a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is scoped to the type of the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. This means that the root of all <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> inside the selection is no longer scoped to the root (defined by <code>@is</code> or <code>@require</code>) but to the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> does not affect the structure of the input type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L426">This allows for reducing repetition in the selection.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L428">The following example is valid:</p>
<pre id="example-50236" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L430-L437"><a href="#example-50236">Example № 55</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token class-name">Dimension</span><span class="token operator">!</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.{ size weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L439">The following example is equivalent to the previous one:</p>
<pre id="example-733bd" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L441-L449"><a href="#example-733bd">Example № 56</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token class-name">Dimension</span><span class="token operator">!</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ size: dimensions.size weight: dimensions.weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec-SelectedListValue" secid="6.2.5">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L451"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedListValue">6.2.5</a></span>SelectedListValue</h3>
<div class="spec-production d2" id="SelectedListValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L453">
<span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span><div class="spec-rhs"><span class="spec-t">-</span><span class="spec-t">[</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><span class="spec-t">]</span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L455-L458">A <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> is an ordered list of <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> wrapped in square brackets <code>[]</code>. It is used to express semantic equivalence between an argument expecting a list of values and the values of a list field within the output object.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L460-L461">The <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> differs from the <code>ListValue</code> defined in the GraphQL specification by only allowing one <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> as an element.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L463">The following example is valid:</p>
<pre id="example-fa029" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L465-L470"><a href="#example-fa029">Example № 57</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">partIds</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L472-L473">In this example, the <code>partIds</code> argument is semantically equivalent to the <code>id</code> fields of the <code>parts</code> list.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L475-L476">The following example is invalid because it uses multiple <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> as elements:</p>
<pre id="example-6046e" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L478-L488"><a href="#example-6046e">Counter Example № 58</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id name]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L490-L492">A <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> can be used as an element of a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> to select multiple object fields as long as the input type is a list of structurally equivalent objects.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L494-L498">Similar to <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>, a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> following a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is scoped to the type of the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. This means that the root of all <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> inside the selection is no longer scoped to the root (defined by <code>@is</code> or <code>@require</code>) but to the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> does not affect the structure of the input type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L500">The following example is valid:</p>
<pre id="example-1e02e" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L502-L512"><a href="#example-1e02e">Example № 59</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[{ id name }]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L514-L515">In case the input type is a nested list, the shape of the input object must match the shape of the output object.</p>
<pre id="example-60610" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L517-L529"><a href="#example-60610">Example № 60</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span>
    <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[[{ id name }]]"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L531">The following example is valid:</p>
<pre id="example-39bac" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L533-L558"><a href="#example-39bac">Example № 61</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findLocation</span><span class="token punctuation">(</span>
    <span class="token attr-name">location</span><span class="token punctuation">:</span> <span class="token atom-input class-name">LocationInput</span><span class="token operator">!</span>
      <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ coordinates: coordinates[{lat: x lon: y}]}"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Location</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Coordinate</span> <span class="token punctuation">{</span>
  <span class="token attr-name">x</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">y</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Location</span> <span class="token punctuation">{</span>
  <span class="token attr-name">coordinates</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Coordinate</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PositionInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lat</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">lon</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">LocationInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">coordinates</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PositionInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Validation" secid="6.3">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L560"><span class="spec-secid" title="link to this section"><a href="#sec-Validation">6.3</a></span>Validation</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L562-L563">Validation ensures that <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalars are semantically correct within the given context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L565-L567">Validation of <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalars occurs during the composition phase, ensuring that all <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> entries are syntactically correct and semantically meaningful relative to the context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L569-L571">Composition is only possible if the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is validated successfully. An invalid <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> results in undefined behavior, making composition impossible.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L573-L574">In this section, we will assume the following type system in order to demonstrate examples:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L576-L621"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mediaById</span><span class="token punctuation">(</span><span class="token attr-name">mediaId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Media</span>
  <span class="token attr-name">findMedia</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Media</span>
  <span class="token attr-name">searchStore</span><span class="token punctuation">(</span><span class="token attr-name">search</span><span class="token punctuation">:</span> <span class="token atom-input class-name">SearchStoreInput</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Store</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token attr-name">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">media</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Media</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token keyword">implements</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">isbn</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Movie</span> <span class="token keyword">implements</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">movieTitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">releaseDate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">books</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">FindMediaInput</span> <span class="token directive function">@oneOf</span> <span class="token punctuation">{</span>
  <span class="token attr-name">bookId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">movieId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token atom-input class-name">SearchStoreInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">hasInStock</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec-Path-Field-Selections" secid="6.3.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L623"><span class="spec-secid" title="link to this section"><a href="#sec-Path-Field-Selections">6.3.1</a></span>Path Field Selections</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L625-L626">Each segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must correspond to a valid field defined on the current type context.</p>
<section id="sec-Path-Field-Selections.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L628"><a href="#sec-Path-Field-Selections.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L630">For each <var data-name="segment">segment</var> in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L631-L633">If the <var data-name="segment">segment</var> is a field<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L632">Let <var data-name="fieldName">fieldName</var> be the field name in the current <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L633"><var data-name="fieldName">fieldName</var> must be defined on the current type in scope.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Path-Field-Selections.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L635"><a href="#sec-Path-Field-Selections.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L637-L639">The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> literal is used to reference a specific output field from a input field. Each segment in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must correspond to a field that is valid within the current type scope.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L641">For example, the following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is valid in the context of <code>Book</code>:</p>
<pre id="example-db002" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L643-L645"><a href="#example-db002">Example № 62</a><code><span class="token property">title</span>
</code></pre>
<pre id="example-e6354" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L647-L649"><a href="#example-e6354">Example № 63</a><code>&lt;<span class="token property">Book</span>>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L651-L654">Incorrect paths where the field does not exist on the specified type is not valid result in validation errors. For instance, if <code>&lt;Book&gt;.movieId</code> is referenced but <code>movieId</code> is not a field of <code>Book</code>, will result in an invalid <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</p>
<pre id="example-3529a" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L656-L658"><a href="#example-3529a">Counter Example № 64</a><code><span class="token property">movieId</span>
</code></pre>
<pre id="example-9565a" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L660-L662"><a href="#example-9565a">Counter Example № 65</a><code>&lt;<span class="token property">Book</span>>.<span class="token property">movieId</span>
</code></pre>
</section>
</section>
<section id="sec-Path-Terminal-Field-Selections" secid="6.3.2">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L664"><span class="spec-secid" title="link to this section"><a href="#sec-Path-Terminal-Field-Selections">6.3.2</a></span>Path Terminal Field Selections</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L666-L667">Each terminal segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must follow the rules regarding whether the selected field is a leaf node.</p>
<section id="sec-Path-Terminal-Field-Selections.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L669"><a href="#sec-Path-Terminal-Field-Selections.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L671">For each <var data-name="segment">segment</var> in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L672">Let <var data-name="selectedType">selectedType</var> be the unwrapped type of the current <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L673-L674">If <var data-name="selectedType">selectedType</var> is a scalar or enum:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L674">There must not be any further segments in <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</li>
</ul>
</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L675-L676">If <var data-name="selectedType">selectedType</var> is an object, interface, or union:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L676">There must be another segment in <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Path-Terminal-Field-Selections.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L678"><a href="#sec-Path-Terminal-Field-Selections.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L680-L683">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> that refers to scalar or enum fields must end at those fields. No further field selections are allowed after a scalar or enum. On the other hand, fields returning objects, interfaces, or unions must continue to specify further selections until you reach a scalar or enum field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L685-L686">For example, the following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is valid if <code>title</code> is a scalar field on the <code>Book</code> type:</p>
<pre id="example-82d9a" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L688-L690"><a href="#example-82d9a">Example № 66</a><code><span class="token property">book</span>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L692">The following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is invalid because <code>title</code> should not have subselections:</p>
<pre id="example-3e7a3" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L694-L696"><a href="#example-3e7a3">Counter Example № 67</a><code><span class="token property">book</span>.<span class="token property">title</span>.<span class="token property">something</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L698-L699">For non-leaf fields, the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must continue to specify subselections until a leaf field is reached:</p>
<pre id="example-6187c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L701-L703"><a href="#example-6187c">Example № 68</a><code><span class="token property">book</span>.<span class="token property">author</span>.<span class="token property">id</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L705">Invalid <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> where non-leaf fields do not have further selections:</p>
<pre id="example-f9b6d" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L707-L709"><a href="#example-f9b6d">Counter Example № 69</a><code><span class="token property">book</span>.<span class="token property">author</span>
</code></pre>
</section>
</section>
<section id="sec-Type-Reference-Is-Possible" secid="6.3.3">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L711"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Reference-Is-Possible">6.3.3</a></span>Type Reference Is Possible</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L713-L714">Each segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> that references a type, must be a type that is valid in the current context.</p>
<section id="sec-Type-Reference-Is-Possible.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L716"><a href="#sec-Type-Reference-Is-Possible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L718">For each <var data-name="segment">segment</var> in a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L719-L724">If <var data-name="segment">segment</var> is a type reference:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L720">Let <var data-name="type">type</var> be the type referenced in the <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L721">Let <var data-name="parentType">parentType</var> be the type of the parent of the <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L722-L723">Let <var data-name="applicableTypes">applicableTypes</var> be the intersection of <span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="type">type</var>)</span> and <span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="parentType">parentType</var>)</span>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L724"><var data-name="applicableTypes">applicableTypes</var> must not be empty.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="GetPossibleTypes()" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L726-L730">
<span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L728">If <var data-name="type">type</var> is an object type, return a set containing <var data-name="type">type</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L729">If <var data-name="type">type</var> is an interface type, return the set of types implementing <var data-name="type">type</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L730">If <var data-name="type">type</var> is a union type, return the set of possible types of <var data-name="type">type</var>.</li>
</ol>
</div>
</section>
<section id="sec-Type-Reference-Is-Possible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L732"><a href="#sec-Type-Reference-Is-Possible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L734-L736">Type references inside a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must be valid within the context of the surrounding type. A type reference is only valid if the referenced type could logically apply within the parent type.</p>
</section>
</section>
<section id="sec-Values-of-Correct-Type" secid="6.3.4">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L738"><span class="spec-secid" title="link to this section"><a href="#sec-Values-of-Correct-Type">6.3.4</a></span>Values of Correct Type</h3>
<section id="sec-Values-of-Correct-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L740"><a href="#sec-Values-of-Correct-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L742">For each SelectedValue <var data-name="value">value</var>:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L743">Let <var data-name="type">type</var> be the type expected in the position <var data-name="value">value</var> is found.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L744"><var data-name="value">value</var> must be coercible to <var data-name="type">type</var>.</li>
</ul>
</section>
<section id="sec-Values-of-Correct-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L746"><a href="#sec-Values-of-Correct-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L748-L749">Literal values must be compatible with the type expected in the position they are found.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L751-L752">The following examples are valid use of value literals in the context of <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar:</p>
<pre id="example-c9dc9" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L754-L763"><a href="#example-c9dc9">Example № 70</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L765">Non-coercible values are invalid. The following examples are invalid:</p>
<pre id="example-d18c1" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L767-L776"><a href="#example-d18c1">Counter Example № 71</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Selected-Object-Field-Names" secid="6.3.5">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L778"><span class="spec-secid" title="link to this section"><a href="#sec-Selected-Object-Field-Names">6.3.5</a></span>Selected Object Field Names</h3>
<section id="sec-Selected-Object-Field-Names.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L780"><a href="#sec-Selected-Object-Field-Names.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L782">For each Selected Object Field <var data-name="field">field</var> in the document:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L783">Let <var data-name="fieldName">fieldName</var> be the Name of <var data-name="field">field</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L784-L785">Let <var data-name="fieldDefinition">fieldDefinition</var> be the field definition provided by the parent selected object type named <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L786"><var data-name="fieldDefinition">fieldDefinition</var> must exist.</li>
</ul>
</section>
<section id="sec-Selected-Object-Field-Names.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L788"><a href="#sec-Selected-Object-Field-Names.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L790-L791">Every field provided in an selected object value must be defined in the set of possible fields of that input object&rsquo;s expected type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L793">For example, the following is valid:</p>
<pre id="example-51bdc" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L795-L804"><a href="#example-51bdc">Example № 72</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L806-L807">In contrast, the following is invalid because it uses a field &ldquo;address&rdquo; which is not defined on the expected type:</p>
<pre id="example-fa9d0" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L809-L818"><a href="#example-fa9d0">Counter Example № 73</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Selected-Object-Field-Uniqueness" secid="6.3.6">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L820"><span class="spec-secid" title="link to this section"><a href="#sec-Selected-Object-Field-Uniqueness">6.3.6</a></span>Selected Object Field Uniqueness</h3>
<section id="sec-Selected-Object-Field-Uniqueness.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L822"><a href="#sec-Selected-Object-Field-Uniqueness.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L824">For each selected object value <var data-name="selectedObject">selectedObject</var>:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L825-L828">For every <var data-name="field">field</var> in <var data-name="selectedObject">selectedObject</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L826">Let <var data-name="name">name</var> be the Name of <var data-name="field">field</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L827">Let <var data-name="fields">fields</var> be all Selected Object Fields named <var data-name="name">name</var> in <var data-name="selectedObject">selectedObject</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L828"><var data-name="fields">fields</var> must be the set containing only <var data-name="field">field</var>.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Selected-Object-Field-Uniqueness.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L830"><a href="#sec-Selected-Object-Field-Uniqueness.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L832-L833">Selected objects must not contain more than one field with the same name, as it would create ambiguity and potential conflicts.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L835">For example, the following is invalid:</p>
<pre id="example-c77ac" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L837-L846"><a href="#example-c77ac">Counter Example № 74</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Required-Selected-Object-Fields" secid="6.3.7">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L848"><span class="spec-secid" title="link to this section"><a href="#sec-Required-Selected-Object-Fields">6.3.7</a></span>Required Selected Object Fields</h3>
<section id="sec-Required-Selected-Object-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L850"><a href="#sec-Required-Selected-Object-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L852">For each Selected Object:</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L853">Let <var data-name="fields">fields</var> be the fields provided by that Selected Object.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L854-L855">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the set of input object field definitions of that Selected Object.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L856-L862">For each <var data-name="fieldDefinition">fieldDefinition</var> in <var data-name="fieldDefinitions">fieldDefinitions</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L857">Let <var data-name="type">type</var> be the expected type of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L858">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L859-L862">If <var data-name="type">type</var> is Non-Null and <var data-name="defaultValue">defaultValue</var> does not exist:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L860">Let <var data-name="fieldName">fieldName</var> be the name of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L861">Let <var data-name="field">field</var> be the input object field in <var data-name="fields">fields</var> named <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L862"><var data-name="field">field</var> must exist.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Required-Selected-Object-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L864"><a href="#sec-Required-Selected-Object-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L866-L868">Input object fields may be required. This means that a selected object field is required if the corresponding input field is required. Otherwise, the selected object field is optional.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L870">For instance, if the <code>UserInput</code> type requires the <code>id</code> field:</p>
<pre id="example-5e94b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L872-L877"><a href="#example-5e94b">Example № 75</a><code><span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L879">Then, an invalid selection would be missing the required <code>id</code> field:</p>
<pre id="example-c5cdf" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L881-L885"><a href="#example-c5cdf">Counter Example № 76</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name: name }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L887-L888">If the <code>UserInput</code> type requires the <code>name</code> field, but the <code>User</code> type has an optional <code>name</code> field, the following selection would be valid.</p>
<pre id="example-f2da0" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L890-L904"><a href="#example-f2da0">Example № 77</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name: name }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L906-L907">But if the <code>UserInput</code> type requires the <code>name</code> field but it&rsquo;s not defined in the <code>User</code> type, the selection would be invalid.</p>
<pre id="example-7a958" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L909-L922"><a href="#example-7a958">Counter Example № 78</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id: id }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="index" secid="index" class="spec-index">
<h1>
<span class="spec-secid" title="link to the index"><a href="#index">§</a></span>Index</h1>
<ol>
<li><a href="#FieldName">FieldName</a></li>
<li><a href="#FieldsAreMergeable()">FieldsAreMergeable</a></li>
<li><a href="#GetPossibleTypes()">GetPossibleTypes</a></li>
<li><a href="#IsObjectTypeEmpty()">IsObjectTypeEmpty</a></li>
<li><a href="#Path">Path</a></li>
<li><a href="#PathSegment">PathSegment</a></li>
<li><a href="#SelectedListValue">SelectedListValue</a></li>
<li><a href="#SelectedObjectField">SelectedObjectField</a></li>
<li><a href="#SelectedObjectValue">SelectedObjectValue</a></li>
<li><a href="#SelectedValue">SelectedValue</a></li>
<li><a href="#TypeName">TypeName</a></li>
</ol>
</section>
</article>
<footer>
Written in <a href="https://spec-md.com" target="_blank">Spec Markdown</a>.</footer>
<input hidden class="spec-sidebar-toggle" type="checkbox" id="spec-sidebar-toggle" aria-hidden /><label for="spec-sidebar-toggle" aria-hidden><div class="spec-sidebar-button">&#x2630;</div></label>
<div class="spec-sidebar" aria-hidden>
<div class="spec-toc">
<div class="title"><a href="#">GraphQL Composite Schemas Spec</a></div>
<ol><li id="_sidebar_1"><a href="#sec-Overview"><span class="spec-secid">1</span>Overview</a></li>
<li id="_sidebar_2"><a href="#sec-Source-Schema"><span class="spec-secid">2</span>Source Schema</a>
<input hidden class="toggle" type="checkbox" id="_toggle_2" /><label for="_toggle_2"></label>
<ol>
<li id="_sidebar_2.1"><a href="#sec-Directives"><span class="spec-secid">2.1</span>Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_2.1" /><label for="_toggle_2.1"></label>
<ol>
<li id="_sidebar_2.1.1"><a href="#sec--lookup"><span class="spec-secid">2.1.1</span>@lookup</a></li>
<li id="_sidebar_2.1.2"><a href="#sec--internal"><span class="spec-secid">2.1.2</span>@internal</a></li>
<li id="_sidebar_2.1.3"><a href="#sec--is"><span class="spec-secid">2.1.3</span>@is</a></li>
<li id="_sidebar_2.1.4"><a href="#sec--require"><span class="spec-secid">2.1.4</span>@require</a></li>
<li id="_sidebar_2.1.5"><a href="#sec--key"><span class="spec-secid">2.1.5</span>@key</a></li>
<li id="_sidebar_2.1.6"><a href="#sec--shareable"><span class="spec-secid">2.1.6</span>@shareable</a></li>
<li id="_sidebar_2.1.7"><a href="#sec--provides"><span class="spec-secid">2.1.7</span>@provides</a></li>
<li id="_sidebar_2.1.8"><a href="#sec--external"><span class="spec-secid">2.1.8</span>@external</a></li>
<li id="_sidebar_2.1.9"><a href="#sec--override"><span class="spec-secid">2.1.9</span>@override</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3"><a href="#sec-Schema-Composition"><span class="spec-secid">3</span>Schema Composition</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3" /><label for="_toggle_3"></label>
<ol>
<li id="_sidebar_3.1"><a href="#sec-Validate-Source-Schema"><span class="spec-secid">3.1</span>Validate Source Schema</a></li>
<li id="_sidebar_3.2"><a href="#sec-Merge-Source-Schemas"><span class="spec-secid">3.2</span>Merge Source Schemas</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2" /><label for="_toggle_3.2"></label>
<ol>
<li id="_sidebar_3.2.1"><a href="#sec-Pre-Merge-Validation"><span class="spec-secid">3.2.1</span>Pre Merge Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.1" /><label for="_toggle_3.2.1"></label>
<ol>
<li id="_sidebar_3.2.1.1"><a href="#sec-Output-Field-Types-Mergeable"><span class="spec-secid">3.2.1.1</span>Output Field Types Mergeable</a></li>
</ol>
</li>
<li id="_sidebar_3.2.2"><a href="#sec-Merge"><span class="spec-secid">3.2.2</span>Merge</a></li>
<li id="_sidebar_3.2.3"><a href="#sec-Post-Merge-Validation"><span class="spec-secid">3.2.3</span>Post Merge Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.3" /><label for="_toggle_3.2.3"></label>
<ol>
<li id="_sidebar_3.2.3.1"><a href="#sec-Empty-Merged-Object-Type"><span class="spec-secid">3.2.3.1</span>Empty Merged Object Type</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3.3"><a href="#sec-Validate-Satisfiability"><span class="spec-secid">3.3</span>Validate Satisfiability</a></li>
</ol>
</li>
<li id="_sidebar_4"><a href="#sec-Executor"><span class="spec-secid">4</span>Executor</a>
<input hidden class="toggle" type="checkbox" id="_toggle_4" /><label for="_toggle_4"></label>
<ol>
<li id="_sidebar_4.1"><a href="#sec-Configuration"><span class="spec-secid">4.1</span>Configuration</a></li>
</ol>
</li>
<li id="_sidebar_5"><a href="#sec-Shared-Types"><span class="spec-secid">5</span>Shared Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5" /><label for="_toggle_5"></label>
<ol>
<li id="_sidebar_5.1"><a href="#sec-Shared-Types.Name"><span class="spec-secid">5.1</span>Name</a></li>
<li id="_sidebar_5.2"><a href="#sec-FieldSelection"><span class="spec-secid">5.2</span>FieldSelection</a></li>
</ol>
</li>
<li id="_sidebar_6"><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar"><span class="spec-secid">6</span>Appendix A: Specification of FieldSelectionMap Scalar</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6" /><label for="_toggle_6"></label>
<ol>
<li id="_sidebar_6.1"><a href="#sec-Introduction"><span class="spec-secid">6.1</span>Introduction</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.1" /><label for="_toggle_6.1"></label>
<ol>
<li id="_sidebar_6.1.1"><a href="#sec-Scope"><span class="spec-secid">6.1.1</span>Scope</a></li>
</ol>
</li>
<li id="_sidebar_6.2"><a href="#sec-Language"><span class="spec-secid">6.2</span>Language</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.2" /><label for="_toggle_6.2"></label>
<ol>
<li id="_sidebar_6.2.1"><a href="#sec-Language.Name"><span class="spec-secid">6.2.1</span>Name</a></li>
<li id="_sidebar_6.2.2"><a href="#sec-Path"><span class="spec-secid">6.2.2</span>Path</a></li>
<li id="_sidebar_6.2.3"><a href="#sec-SelectedValue"><span class="spec-secid">6.2.3</span>SelectedValue</a></li>
<li id="_sidebar_6.2.4"><a href="#sec-SelectedObjectValue"><span class="spec-secid">6.2.4</span>SelectedObjectValue</a></li>
<li id="_sidebar_6.2.5"><a href="#sec-SelectedListValue"><span class="spec-secid">6.2.5</span>SelectedListValue</a></li>
</ol>
</li>
<li id="_sidebar_6.3"><a href="#sec-Validation"><span class="spec-secid">6.3</span>Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.3" /><label for="_toggle_6.3"></label>
<ol>
<li id="_sidebar_6.3.1"><a href="#sec-Path-Field-Selections"><span class="spec-secid">6.3.1</span>Path Field Selections</a></li>
<li id="_sidebar_6.3.2"><a href="#sec-Path-Terminal-Field-Selections"><span class="spec-secid">6.3.2</span>Path Terminal Field Selections</a></li>
<li id="_sidebar_6.3.3"><a href="#sec-Type-Reference-Is-Possible"><span class="spec-secid">6.3.3</span>Type Reference Is Possible</a></li>
<li id="_sidebar_6.3.4"><a href="#sec-Values-of-Correct-Type"><span class="spec-secid">6.3.4</span>Values of Correct Type</a></li>
<li id="_sidebar_6.3.5"><a href="#sec-Selected-Object-Field-Names"><span class="spec-secid">6.3.5</span>Selected Object Field Names</a></li>
<li id="_sidebar_6.3.6"><a href="#sec-Selected-Object-Field-Uniqueness"><span class="spec-secid">6.3.6</span>Selected Object Field Uniqueness</a></li>
<li id="_sidebar_6.3.7"><a href="#sec-Required-Selected-Object-Fields"><span class="spec-secid">6.3.7</span>Required Selected Object Fields</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_index"><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</div>
</div>
</body>
</html>
