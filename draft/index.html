<!DOCTYPE html>
<!-- Built with spec-md https://spec-md.com -->
<html>
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><title>GraphQL Composite Schemas Spec</title>
<style>@media (prefers-color-scheme: light){:root{--color-foreground: #333333;--color-background: #ffffff;--color-light-grey: #ccc;--color-grey: #666666;--color-white: #fff;--color-link: #3b5998;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #f0f0f0;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(0, 0, 0, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #fafafa;--color-pre-border: #e9e9e9;--color-code-background: rgba(0, 0, 0, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #fafaff;--color-spec-example-border: #bbbbff;--color-spec-counter-example: #fffafa;--color-spec-counter-border: #ffbbbb;--color-spec-counter-example-link: #98593b;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #83238e;--color-spec-condition: #1c7758;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #f4e925;--color-spec-note-background: #fefef3;--color-spec-note-first-link: #6c6613;--color-source-link: var(--color-light-grey);--color-table-header: #f9f9f9;--color-table-header-border: #d0d0d0;--color-token-inserted: hsla(241, 71%, 34%, .69);--color-token-deleted: hsla(324, 92%, 33%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #cacee0;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #3b5998}}@media (prefers-color-scheme: dark){:root{--color-foreground: #b6b6b6;--color-background: #262626;--color-light-grey: #373737;--color-grey: #828282;--color-white: rgb(29, 29, 29);--color-link: #89b7da;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #323232;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(220, 220, 220, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #2e2e2e;--color-pre-border: #3a3a3a;--color-code-background: rgba(41, 41, 41, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #2b2b35;--color-spec-example-border: #4d4d6d;--color-spec-counter-example: #322828;--color-spec-counter-border: #664040;--color-spec-counter-example-link: #ff702d;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #c689ce;--color-spec-condition: #6fa889;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #605e39;--color-spec-note-background: #303028;--color-spec-note-first-link: #f0e330;--color-source-link: var(--color-grey);--color-table-header: #373737;--color-table-header-border: #525252;--color-token-inserted: hsla(241, 63%, 70%, .69);--color-token-deleted: hsla(325, 64%, 67%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #656565;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #829edb}}:root{color:var(--color-foreground);background-color:var(--color-background);font-family:var(--font-family);font-size:15px;line-height:1.5;--mono-font-size: 13px;--indent: 1rem;--list-indent: 1.5rem;--dfn-indent: 0rem;--font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;--font-family-monospace: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace}@media (min-width: 720px){:root{font-size:17px;--mono-font-size: 15px;--indent: 2rem;--list-indent: 2rem;--dfn-indent: 2rem}}body{margin:3rem 0 3rem}article{margin:0 1rem}@media (min-width: 720px){body{margin:6rem auto 3rem;max-width:800px;padding-left:75px;padding-right:clamp(0px,calc((100vw - 800px) * .25),75px)}}.source-link{display:none}@media screen and (min-width: 720px){.source-link{display:block;position:absolute;width:18px;fill:var(--color-source-link);opacity:.3}.source-link:hover{opacity:1}}.outdated-selection-link,.selection-link{position:absolute;display:block;color:var(--color-white);background:var(--selection-background-color);border-radius:4px;font-size:36px;height:23px;line-height:48px;text-align:center;text-decoration:none;width:25px;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.outdated-selection-link:hover,.selection-link:hover{text-decoration:none}.outdated-selection-link:before,.selection-link:before{border:5px solid transparent;content:"";height:0;margin-top:-5px;margin-right:-5px;position:absolute;right:1px;top:50%;width:0}@media (max-width: 719px){.outdated-selection-link:before,.selection-link:before{border-bottom-color:var(--selection-background-color);border-top:0;right:50%;top:1px}}@media (min-width: 720px){.outdated-selection-link:before,.selection-link:before{border-left-color:var(--selection-background-color);border-right:0;right:1px;top:50%}}.outdated-selection-link{background:var(--selection-background-color-link);font-size:21px;font-weight:800;line-height:27px}.outdated-selection-link:hover:after{content:"This selection content has changed since this link was created.";font:9pt/11pt var(--font-family);position:absolute;display:block;white-space:nowrap;padding:2px 5px 1px;top:-20px;background:black;color:var(--color-white)}a{color:var(--color-link);text-decoration:none}a:hover{text-decoration:underline}img{max-width:100%}dl{margin:1rem 0 1rem var(--dfn-indent)}dd{margin:.25em 0 .5em var(--indent)}dd+dd{margin-top:1rem}dfn,.spec-ref{font-style:italic}dfn>a,.spec-ref>a{color:inherit}h1,h2,h3,h4,h5,h6{font-weight:bold;margin:3em 0 1em;position:relative}@media (min-width: 720px){header>h1{margin:6em 0 3em}}h1{font-size:1.5em;margin-top:5em}h2,h3{font-size:1.25em}h4,h5,h6{font-size:1em}section{padding-top:1rem;margin-top:-1rem}section.subsec>h6{margin-top:2em}section.subsec>h6>a{color:var(--color-subsection-link)}section .spec-secid{margin-right:1ex}@media (min-width: 720px){section .spec-secid{position:absolute;right:100%;text-align:right;white-space:nowrap}}footer{font-size:75%;opacity:.5;text-align:center;margin-top:12rem}.spec-toc{margin:1rem 0 3rem}.spec-toc .title{content:"Contents";display:block;font-weight:bold;margin:5em 0 1em}.spec-toc .spec-secid{margin-right:1ex}.spec-toc ol{list-style:none;padding-left:0;margin-top:0;margin-bottom:0}.spec-toc ol ol{list-style:none;padding-left:2ex;margin-bottom:.25em}.spec-toc li{position:relative;padding:5px 0 0 30px;margin:-5px 0 0 -30px}.spec-toc a{color:var(--color-toc-link)}.spec-toc a:hover{text-decoration:none}.spec-toc a .spec-secid{color:var(--color-toc-id)}.spec-toc a:hover .spec-secid{text-decoration:underline}.spec-toc .toggle{display:none}.spec-toc .toggle+label{cursor:pointer;left:6px;opacity:1;padding:5px 6px 5px 7px;position:absolute;top:6px;transform:rotate(0deg);transition:all .18s ease-in-out}.spec-toc .toggle+label:after{border-color:transparent transparent transparent var(--color-toggle-border);border-style:solid;border-width:6px 0 6px 7px;content:" ";display:block;height:0;width:0}@media (pointer: fine){.spec-toc .toggle+label{left:10px;padding:3px 5px 3px 6px;top:8px}}.spec-toc .toggle:checked+label{transform:rotate(90deg)}@media (hover: hover){.spec-toc li:not(:hover)>.toggle:checked+label{opacity:0}}.spec-toc .toggle:not(:checked)~ol{max-height:0;overflow:hidden;margin:0}.spec-sidebar-toggle{display:none}.spec-sidebar-toggle+label>.spec-sidebar-button{position:fixed;right:0;top:0;padding:10px 15px;font-size:30px;color:var(--color-sidebar-toggle-button);z-index:2;cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked+label:after{content:"";position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0}.spec-sidebar{display:none;position:fixed;right:0;top:0;width:min(320px,calc(100vw - 48px));font-size:14px;line-height:1.75;overflow-y:scroll;height:100%;padding:0 0 5rem 30px;box-sizing:border-box;background:var(--color-sidebar-background);box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),-4px 0 8px -2px var(--color-sidebar-shadow);overscroll-behavior:contain}.spec-sidebar{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked~.spec-sidebar{display:block}.spec-sidebar .viewing>a:after{color:var(--color-sidebar-viewing-link);content:"\2022";margin-left:1ex}@media (min-width: 1220px){.spec-sidebar-toggle+label{display:none}.spec-sidebar{display:block;box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),inset 4px 0 8px -2px var(--color-sidebar-large-shadow)!important}body{padding-right:345px}}.spec-note{background:var(--color-spec-note-background);border-left:solid 4px var(--color-spec-note-border);margin:1rem -1rem;min-width:70vw;padding:8px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}@media (min-width: 720px){.spec-note{min-width:416px}}.spec-note>a:first-child{color:var(--color-spec-note-first-link);display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-todo{color:var(--color-spec-todo);margin:1em 0 1em 5em;min-height:1em}.spec-todo::before{content:"todo";display:block;float:left;margin-left:-5em;text-transform:uppercase}.spec-index ol{list-style-type:none;margin:0 0 0 var(--indent);padding:0;column-width:210px;column-gap:var(--indent)}.spec-index ol li{width:min-content;white-space:nowrap}pre,code{font-family:var(--font-family-monospace);font-size:var(--mono-font-size);font-weight:inherit}code{background:var(--color-code-background);margin:-2px -1px;padding:3px 3px;white-space:pre-wrap}pre>code{background:none;font-weight:inherit;margin:0;padding:0;white-space:pre}pre{background:var(--color-pre-background);border-left:solid 4px var(--color-pre-border);margin:1rem -1rem;min-width:70vw;padding:12px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;max-width:calc(100vw - 2rem);overflow-y:auto}@media (min-width: 720px){pre{min-width:40ch}}.spec-example{background:var(--color-spec-example);border-left:solid 4px var(--color-spec-example-border);padding-top:8px}.spec-counter-example{background:var(--color-spec-counter-example);border-left:solid 4px var(--color-spec-counter-border);padding-top:8px}.spec-example>a,.spec-counter-example>a{display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-counter-example>a{color:var(--color-spec-counter-example-link)}table{border-collapse:collapse}th{background-color:var(--color-table-header)}td,th{border:1px solid var(--color-table-header-border);padding:.4em;vertical-align:baseline}ol,ul{padding-left:var(--list-indent)}li>ol,li>ul{margin-top:.25em;margin-bottom:.5em}li+li{margin-top:.25em}li.task{list-style-type:none;position:relative}li.task>input:first-child{margin-left:0;position:absolute;transform:translateX(calc(-100% - 1ch))}ins{background-color:var(--color-inserts-background);text-decoration:none}del{background-color:var(--color-deletions-background)}.spec-added,.spec-removed{border-left:4px solid;margin-left:-18px;padding-left:14px}.spec-added{border-color:var(--color-spec-added-border)}.spec-removed{border-color:var(--color-spec-removed-border);text-decoration:line-through}.spec-keyword{font-weight:bold}.spec-string{font-family:var(--font-family-monospace);font-size:85%;white-space:pre}var{font-style:italic}*[data-name]{transition:.15s background ease-out;border-radius:2px;padding:0 3px;margin:0 -3px}.spec-semantic,.spec-algo{margin:1rem 0 1rem var(--dfn-indent)}.spec-semantic>.spec-nt::after,.spec-algo>.spec-call:first-child::after{content:":";font-style:normal;font-weight:bold;margin-left:1ex}.spec-semantic ol,.spec-semantic ol ol ol ol,.spec-algo ol,.spec-algo ol ol ol ol{list-style-type:decimal}.spec-semantic ol ol,.spec-semantic ol ol ol ol ol,.spec-algo ol ol,.spec-algo ol ol ol ol ol{list-style-type:lower-alpha}.spec-semantic ol ol ol,.spec-semantic ol ol ol ol ol ol,.spec-algo ol ol ol,.spec-algo ol ol ol ol ol ol{list-style-type:lower-roman}.spec-call>a{color:inherit}.spec-production{margin:1rem 0 1rem var(--dfn-indent)}.spec-production>.spec-nt::after{content:":";font-style:normal;font-weight:bold;margin:0 1ex}.spec-semantic.d2>.spec-nt::after,.spec-production.d2>.spec-nt::after{content:"::"}.spec-semantic.d3>.spec-nt::after,.spec-production.d3>.spec-nt::after{content:":::"}.spec-production>.spec-rhs{line-height:1.1;margin:.25em 0 .5em calc(2 * var(--indent));text-indent:calc(-1 * var(--indent))}.spec-semantic>.spec-rhs{display:inline-block;text-indent:calc(-1 * var(--indent));margin-left:calc(1ex + var(--indent))}.spec-rhs>*{text-indent:0}.spec-oneof{display:inline}.spec-oneof::before{content:"one of";font-style:normal;font-weight:bold}.spec-oneof-grid{max-width:calc(100vw - 2rem);overflow:auto;margin:-1ex -1rem;padding:1ex 1rem}.spec-oneof-grid>table{margin-left:var(--indent)}.spec-oneof .spec-rhs{border:none;margin:0;padding:0 0 0 1rem;vertical-align:baseline;white-space:pre}.spec-oneof .spec-rhs:first-child{padding:0}.spec-rhs .spec-constrained:not(:first-child),.spec-rhs .spec-quantified:not(:first-child),.spec-rhs .spec-nt:not(:first-child),.spec-rhs .spec-t:not(:first-child),.spec-rhs .spec-rx:not(:first-child),.spec-rhs .spec-prose:not(:first-child),.spec-rhs .spec-empty:not(:first-child),.spec-rhs .spec-lookahead:not(:first-child){margin-left:1ex;display:inline-block}.spec-condition{font-size:85%}.spec-condition::before{content:"[if "}.spec-condition.not::before{content:"[if not "}.spec-condition::after{content:"]"}.spec-empty,.spec-prose{color:var(--color-spec-prose)}.spec-nt{font-style:italic}.spec-nt>a{color:inherit}.spec-quantifiers,.spec-params{font-size:65%;font-style:normal;vertical-align:sub}.spec-quantifier.list{color:var(--color-spec-quantifier-list)}.spec-quantifier.optional{color:var(--color-spec-quantifier-optional)}.spec-params,.spec-condition{color:var(--color-spec-condition)}.spec-params::before{content:"["}.spec-params::after{content:"]"}.spec-quantifier:not(:last-child)::after,.spec-param:not(:last-child)::after{color:var(--color-spec-param);content:", "}.spec-param.conditional::before{content:"?"}.spec-param.negated::before{content:"!"}.spec-t,.spec-rx{color:var(--color-spec-rx);font-family:var(--font-family-monospace);font-weight:bold}.spec-butnot::before{color:var(--color-grey);content:"but not";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-butnot>*:not(:first-child)::before{color:var(--color-grey);content:"or";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-rhs .spec-oneof::before,.spec-rhs .spec-butnot::before{margin-left:1ex}.spec-lookahead>*{margin:0!important}.spec-lookahead>*:not(:first-child)::before{color:var(--color-grey);content:", ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead::before{color:var(--color-grey);content:"[lookahead = ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead.not::before{content:"[lookahead \2260  "}.spec-lookahead.set::before{content:"[lookahead \2208  {";margin-right:0}.spec-lookahead.set.not::before{content:"[lookahead \2209  {"}.spec-lookahead.ntset::before{content:"[lookahead \2208  ";margin-right:0}.spec-lookahead.ntset.not::before{content:"[lookahead \2209  "}.spec-lookahead::after{color:var(--color-grey);content:"]"}.spec-lookahead.set::after{content:"}]"}code[class*=language-],pre[class*=language-]{color:var(--color-prism-foreground);background:none;text-shadow:0 1px var(--color-prism-text-shadow);font-family:var(--font-family-monospace);font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:var(--color-prism-background)}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:var(--color-prism-background)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--color-prism-block-background)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.atrule,.token.attr-value,.token.keyword,.token.property,.token.selector,.token.attr-name,.token.builtin,.token.entity,.token.url,.token.inserted{color:var(--color-token-inserted);background:none}.token.tag,.token.boolean,.token.number,.token.string,.token.char,.token.constant,.token.symbol,.token.regex,.token.important,.token.variable,.token.function,.token.class-name,.token.deleted{color:var(--color-token-deleted)}.token.comment,.token.prolog,.token.doctype,.token.cdata,.token.description{color:inherit;opacity:.3}.token.punctuation{color:inherit;opacity:.5}.token.operator,.token.namespace{color:inherit;opacity:.7}</style>
<script>(function(){var r,a=[];document.addEventListener("readystatechange",function(){document.readyState==="interactive"&&u()});function u(){var n=document.querySelector('label[for="spec-sidebar-toggle"]');n.addEventListener("scroll",o),n.addEventListener("touchmove",o);function o(d){d.preventDefault()}for(var t=document.getElementsByTagName("section"),e=0;e<t.length;e++)t[e].getAttribute("secid")&&a.push(t[e]);var i=window.scrollY,c=!1;window.addEventListener("scroll",function(d){i=window.scrollY,c||(c=!0,window.requestAnimationFrame(function(){s(i),c=!1}))})}function s(n){for(var o=n+document.documentElement.clientHeight/4,t,e=a.length-1;e>=0;e--)if(a[e].offsetTop<o){t=a[e];break}var i=t&&t.getAttribute("secid");i!==r&&(r&&l(r,!1),i&&l(i,!0),r=i)}function l(n,o){document.getElementById("_sidebar_"+n).className=o?"viewing":"";for(var t=n.split(".");t.length;){var e=document.getElementById("_toggle_"+t.join("."));e&&(e.checked=o),t.pop()}}s(window.scrollY);})();</script>
<script>(function(){var n=document.getElementsByTagName("style")[0].sheet,e;function u(){e&&(n.deleteRule(e),e=void 0)}function d(t){u(),e=n.insertRule('*[data-name="'+t+'"] { background: rgba(230,215,0,0.12); }',n.cssRules.length)}document.documentElement.addEventListener("mouseover",function(t){var a=t.target.attributes["data-name"];a&&d(a.value)});document.documentElement.addEventListener("mouseout",u);})();</script>
<script>(function(){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",o,p,r,g;document.addEventListener("selectionchange",E);window.addEventListener("resize",C);window.addEventListener("hashchange",x);window.addEventListener("load",x);function S(n){y(new URL(n.target.href))}function x(){y(window.location)}function y(n){var e=n.hash.match(/^#sel-([A-Za-z0-9-_]+)$/);if(!!e){g=e[1],r=k(g);var t=r.getBoundingClientRect(),d=Math.max(20,Math.floor((window.innerHeight-t.height)*.4));window.scrollTo(0,window.scrollY+t.y-d);var c=document.getSelection();c.empty(),c.addRange(r),C()}}function E(n){var e=document.getSelection();if(e.isCollapsed)o&&(o.parentNode.removeChild(o),o=null);else{var t=e.getRangeAt(0);(!r||t.compareBoundaryPoints(Range.START_TO_START,r)!==0||t.compareBoundaryPoints(Range.END_TO_END,r)!==0)&&(r=t,g=B(r),C())}}function C(){if(!!r){p||(p=document.getElementsByTagName("article")[0]),o||(o=document.createElement("a"),document.body.appendChild(o)),o.href="#sel-"+g,o.onclick=S,o.className=r.isOutdated?"outdated-selection-link":"selection-link",o.innerText=r.isOutdated?"!":"\u201F";var n=window.innerWidth<720,e=r.getBoundingClientRect();if(n)o.style.left=Math.floor(e.x+e.width/2+window.scrollX-13)+"px",o.style.top=Math.floor(e.bottom+window.scrollY+10)+"px";else{var t=p.getBoundingClientRect().x;o.style.left=Math.floor(t+window.scrollX-37)+"px",o.style.top=Math.floor(e.y+window.scrollY-3)+"px"}}}function B(n){var e="",t=N(n.startContainer),d=N(n.endContainer),c=M(t,d);return l(c),l(t.slice(c.length).concat(n.startOffset)),l(d.slice(c.length).concat(n.endOffset)),i(L(n.toString())),e;function i(a){do e+=R[a&31|(a>31?32:0)],a>>=5;while(a>0)}function l(a){i(a.length);for(var h=0;h<a.length;h++)i(a[h])}}function k(n){for(var e=new Array(64),t=0;t<64;t++)e[R.charCodeAt(t)]=t;var d=0,c=m(),i=m(),l=m(),a=w(),h=i.pop(),P=O(c.concat(i)),T=l.pop(),A=O(c.concat(l)),u=document.createRange();return u.setStart(P,h),u.setEnd(A,T),u.isOutdated=a!==void 0&&a!==L(u.toString()),u;function w(){for(var s=0,v=0;d<n.length;){var f=e[n.charCodeAt(d++)];if(s|=(f&31)<<v,v+=5,f<32)return s}}function m(){var s=w();if(s!=null){for(var v=new Array(s),f=0;f<s;f++)v[f]=w();return v}}}function N(n){for(var e=[];n!=document.body;){var t=n.parentNode;e.push(Array.prototype.indexOf.call(t.childNodes,n)),n=t}return e.reverse()}function O(n){for(var e=document.body,t=0;t<n.length&&e;t++)e=e.childNodes[n[t]];return e}function M(n,e){for(var t=0;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function L(n){for(var e=2166136261,t=0;t<n.length;++t)e^=n.charCodeAt(t),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(e>>15^e)&32767}})();</script>
<script>(function(){var a,i,t;document.addEventListener("pointerover",c);document.addEventListener("pointerleave",u);window.addEventListener("resize",d);var s={OL:1,UL:1};function c(r){var e=r.target;if(e.nodeType===Node.ELEMENT_NODE){for(;e&&!e.getAttribute("data-source");){if(s[e.nodeName])return;e=e.parentElement}e&&e!==a&&(a=e,d())}}function d(){if(!!a){i||(i=document.getElementsByTagName("article")[0]),t||(t=document.createElement("a"),t.className="source-link",t.target="_blank",t.innerHTML='<svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>',document.body.appendChild(t)),t.href=i.getAttribute("data-source-base")+a.getAttribute("data-source");var r=v(a),e=document.createRange();r.nodeType===Node.TEXT_NODE?e.setStart(r,0):e.selectNode(r);var n=e.getBoundingClientRect();e.detach();var o=n.y+n.height/2-9,l=i.getBoundingClientRect().x-95;t.style.left=Math.floor(window.scrollX+l)+"px",t.style.top=Math.floor(window.scrollY+o)+"px"}}function v(r){e:for(;r;){for(var e=r.childNodes,n=0;e&&n<e.length;n++){var o=e[n];if(o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE&&!/^\s*$/.test(o.data)){r=o;continue e}}return r}}function u(){t&&(t.parentNode.removeChild(t),t=null)}})();</script>
</head>
<body><article data-source-base="https://github.com/graphql/composite-schemas-spec/blame/main/">
<header>
<h1>GraphQL Composite Schemas Spec</h1>
<section id="intro">
<section id="sec-Introduction" class="subsec">
<h6 data-source="spec/Spec.md#L3"><a href="#sec-Introduction" title="link to this subsection">Introduction</a></h6>
<p data-source="spec/Spec.md#L5-L10">The GraphQL Composite Schemas Spec introduces a comprehensive specification for creating distributed GraphQL systems that seamlessly merges multiple GraphQL schemas. This specification describes the process of composing a federated GraphQL schema and outlines algorithms for executing GraphQL queries on the federated schema effectively by using query plans. This specification was originally created by ChilliCream and was transferred to the GraphQL foundation.</p>
<p data-source="spec/Spec.md#L12-L15">The GraphQL Foundation was formed in 2019 as a neutral focal point for organizations who support the GraphQL ecosystem, and the GraphQL Specification Project was established also in 2019 as the Joint Development Foundation Projects, LLC, GraphQL Series.</p>
<p data-source="spec/Spec.md#L17-L19">If your organization benefits from GraphQL, please consider becoming a member and helping us to sustain the activities that support the health of our neutral ecosystem.</p>
<p data-source="spec/Spec.md#L21-L24">The GraphQL Specification Project has evolved and may continue to evolve in future editions of this specification. Previous editions of the GraphQL specification can be found at permalinks that match their release tag. The latest working draft release can be found at <https://spec.graphql.org/draft>.</p>
</section>
<section id="sec-Copyright-notice" class="subsec">
<h6 data-source="spec/Spec.md#L26"><a href="#sec-Copyright-notice" title="link to this subsection">Copyright notice</a></h6>
<p data-source="spec/Spec.md#L28">Copyright © 2023-present, GraphQL contributors</p>
<p data-source="spec/Spec.md#L30-L40">THESE MATERIALS ARE PROVIDED &ldquo;AS IS&rdquo;. The parties expressly disclaim any warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to the materials. The entire risk as to implementing or otherwise using the materials is assumed by the implementer and user. IN NO EVENT WILL THE PARTIES BE LIABLE TO ANY OTHER PARTY FOR LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF ANY KIND WITH RESPECT TO THIS DELIVERABLE OR ITS GOVERNING AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER MEMBER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</section>
<section id="sec-Conformance" class="subsec">
<h6 data-source="spec/Spec.md#L42"><a href="#sec-Conformance" title="link to this subsection">Conformance</a></h6>
<p data-source="spec/Spec.md#L44-L47">A conforming implementation of the GraphQL Composite Schemas Spec must fulfill all normative requirements. Conformance requirements are described in this document via both descriptive assertions and key words with clearly defined meanings.</p>
<p data-source="spec/Spec.md#L49-L54">The key words &ldquo;MUST&rdquo;, &ldquo;MUST NOT&rdquo;, &ldquo;REQUIRED&rdquo;, &ldquo;SHALL&rdquo;, &ldquo;SHALL NOT&rdquo;, &ldquo;SHOULD&rdquo;, &ldquo;SHOULD NOT&rdquo;, &ldquo;RECOMMENDED&rdquo;, &ldquo;MAY&rdquo;, and &ldquo;OPTIONAL&rdquo; in the normative portions of this document are to be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">IETF RFC 2119</a>. These key words may appear in lowercase and still retain their meaning unless explicitly declared as non-normative.</p>
<p data-source="spec/Spec.md#L56-L58">A conforming implementation of the GraphQL Composite Schemas Spec may provide additional functionality, but must not where explicitly disallowed or would otherwise result in non-conformance.</p>
</section>
<section id="sec-Non-Normative-Portions" class="subsec">
<h6 data-source="spec/Spec.md#L60"><a href="#sec-Non-Normative-Portions" title="link to this subsection">Non-Normative Portions</a></h6>
<p data-source="spec/Spec.md#L62-L63">All contents of this document are normative except portions explicitly declared as non-normative.</p>
<p data-source="spec/Spec.md#L65-L68">Examples in this document are non-normative, and are presented to aid understanding of introduced concepts and the behavior of normative portions of the specification. Examples are either introduced explicitly in prose (e.g. &ldquo;for example&rdquo;) or are set apart in example or counter-example blocks, like this:</p>
<pre id="example-fed99" class="spec-example" data-source="spec/Spec.md#L70-L72"><a href="#example-fed99">Example № 1</a><code>This is an example of a non-normative example.
</code></pre>
<pre id="example-881bd" class="spec-counter-example" data-source="spec/Spec.md#L74-L76"><a href="#example-881bd">Counter Example № 2</a><code>This is an example of a non-normative counter-example.
</code></pre>
<p data-source="spec/Spec.md#L78-L81">Notes in this document are non-normative, and are presented to clarify intent, draw attention to potential edge-cases and pit-falls, and answer common questions that arise during implementation. Notes are either introduced explicitly in prose (e.g. &ldquo;Note: &ldquo;) or are set apart in a note block, like this:</p>
<div id="note-c0129" class="spec-note" data-source="spec/Spec.md#L83">
<a href="#note-c0129">Note</a>
This is an example of a non-normative note.</div>
</section>
</section>
<nav class="spec-toc">
<div class="title">Contents</div>
<ol>
<li><a href="#sec-Overview"><span class="spec-secid">1</span>Overview</a></li>
<li><a href="#sec-Source-Schema"><span class="spec-secid">2</span>Source Schema</a><ol>
<li><a href="#sec--lookup"><span class="spec-secid">2.1</span>@lookup</a></li>
<li><a href="#sec--internal"><span class="spec-secid">2.2</span>@internal</a></li>
<li><a href="#sec--inaccessible"><span class="spec-secid">2.3</span>@inaccessible</a></li>
<li><a href="#sec--is"><span class="spec-secid">2.4</span>@is</a></li>
<li><a href="#sec--require"><span class="spec-secid">2.5</span>@require</a></li>
<li><a href="#sec--key"><span class="spec-secid">2.6</span>@key</a></li>
<li><a href="#sec--shareable"><span class="spec-secid">2.7</span>@shareable</a></li>
<li><a href="#sec--provides"><span class="spec-secid">2.8</span>@provides</a></li>
<li><a href="#sec--external"><span class="spec-secid">2.9</span>@external</a></li>
<li><a href="#sec--override"><span class="spec-secid">2.10</span>@override</a></li>
</ol>
</li>
<li><a href="#sec-Schema-Composition"><span class="spec-secid">3</span>Schema Composition</a><ol>
<li><a href="#sec-Validate-Source-Schemas"><span class="spec-secid">3.1</span>Validate Source Schemas</a><ol>
<li><a href="#sec-Validate-Source-Schemas.Validate-Type-System"><span class="spec-secid">3.1.1</span>Validate Type System</a><ol>
<li><a href="#sec-Invalid-GraphQL"><span class="spec-secid">3.1.1.1</span>Invalid GraphQL</a></li>
<li><a href="#sec-Disallowed-Inaccessible-Elements"><span class="spec-secid">3.1.1.2</span>Disallowed Inaccessible Elements</a></li>
<li><a href="#sec-Type-Definition-Invalid"><span class="spec-secid">3.1.1.3</span>Type Definition Invalid</a></li>
<li><a href="#sec-Query-Root-Type-Inaccessible"><span class="spec-secid">3.1.1.4</span>Query Root Type Inaccessible</a></li>
<li><a href="#sec-Root-Mutation-Used"><span class="spec-secid">3.1.1.5</span>Root Mutation Used</a></li>
<li><a href="#sec-Root-Query-Used"><span class="spec-secid">3.1.1.6</span>Root Query Used</a></li>
<li><a href="#sec-Root-Subscription-Used"><span class="spec-secid">3.1.1.7</span>Root Subscription Used</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Source-Schemas.Validate-External-Directives"><span class="spec-secid">3.1.2</span>Validate External Directives</a><ol>
<li><a href="#sec-External-Unused"><span class="spec-secid">3.1.2.1</span>External Unused</a></li>
<li><a href="#sec-External-Collision-with-Another-Directive"><span class="spec-secid">3.1.2.2</span>External Collision with Another Directive</a></li>
<li><a href="#sec-External-on-Interface"><span class="spec-secid">3.1.2.3</span>External on Interface</a></li>
</ol>
</li>
<li><a href="#sec-Validate-is-Directive"><span class="spec-secid">3.1.3</span>Validate `@is` Directive</a><ol>
<li><a href="#sec-Is-Invalid-Syntax"><span class="spec-secid">3.1.3.1</span>Is Invalid Syntax</a></li>
<li><a href="#sec-Is-Invalid-Field-Type"><span class="spec-secid">3.1.3.2</span>Is Invalid Field Type</a></li>
<li><a href="#sec-Is-Invalid-Usage"><span class="spec-secid">3.1.3.3</span>Is Invalid Usage</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Key-Directives"><span class="spec-secid">3.1.4</span>Validate Key Directives</a><ol>
<li><a href="#sec-Key-Fields-Select-Invalid-Type"><span class="spec-secid">3.1.4.1</span>Key Fields Select Invalid Type</a></li>
<li><a href="#sec-Key-Directive-in-Fields-Argument"><span class="spec-secid">3.1.4.2</span>Key Directive in Fields Argument</a></li>
<li><a href="#sec-Key-Fields-Has-Arguments"><span class="spec-secid">3.1.4.3</span>Key Fields Has Arguments</a></li>
<li><a href="#sec-Key-Invalid-Syntax"><span class="spec-secid">3.1.4.4</span>Key Invalid Syntax</a></li>
<li><a href="#sec-Key-Invalid-Fields"><span class="spec-secid">3.1.4.5</span>Key Invalid Fields</a></li>
<li><a href="#sec-Key-Invalid-Fields-Type"><span class="spec-secid">3.1.4.6</span>Key Invalid Fields Type</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Lookup-Directives"><span class="spec-secid">3.1.5</span>Validate Lookup Directives</a><ol>
<li><a href="#sec-Lookup-Returns-Non-Nullable-Type"><span class="spec-secid">3.1.5.1</span>Lookup Returns Non-Nullable Type</a></li>
<li><a href="#sec-Lookup-Returns-List"><span class="spec-secid">3.1.5.2</span>Lookup Returns List</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Source-Schemas.Validate-Override-Directives"><span class="spec-secid">3.1.6</span>Validate Override Directives</a><ol>
<li><a href="#sec-Override-from-Self"><span class="spec-secid">3.1.6.1</span>Override from Self</a></li>
<li><a href="#sec-Override-on-Interface"><span class="spec-secid">3.1.6.2</span>Override on Interface</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Provides-Directives"><span class="spec-secid">3.1.7</span>Validate Provides Directives</a><ol>
<li><a href="#sec-Provides-Directive-in-Fields-Argument"><span class="spec-secid">3.1.7.1</span>Provides Directive in Fields Argument</a></li>
<li><a href="#sec-Provides-Fields-Has-Arguments"><span class="spec-secid">3.1.7.2</span>Provides Fields Has Arguments</a></li>
<li><a href="#sec-Provides-Fields-Missing-External"><span class="spec-secid">3.1.7.3</span>Provides Fields Missing External</a></li>
<li><a href="#sec-Provides-Invalid-Syntax"><span class="spec-secid">3.1.7.4</span>Provides Invalid Syntax</a></li>
<li><a href="#sec-Provides-Invalid-Fields"><span class="spec-secid">3.1.7.5</span>Provides Invalid Fields</a></li>
<li><a href="#sec-Provides-Invalid-Fields-Type"><span class="spec-secid">3.1.7.6</span>Provides Invalid Fields Type</a></li>
<li><a href="#sec-Provides-on-Non-Composite-Field"><span class="spec-secid">3.1.7.7</span>Provides on Non-Composite Field</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Source-Schemas.Validate-Require-Directives"><span class="spec-secid">3.1.8</span>Validate Require Directives</a><ol>
<li><a href="#sec-Require-Invalid-Syntax"><span class="spec-secid">3.1.8.1</span>Require Invalid Syntax</a></li>
<li><a href="#sec-Require-Invalid-Fields-Type"><span class="spec-secid">3.1.8.2</span>Require Invalid Fields Type</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Source-Schemas.Validate-Shareable-Directives"><span class="spec-secid">3.1.9</span>Validate Shareable Directives</a><ol>
<li><a href="#sec-Invalid-Shareable-Usage"><span class="spec-secid">3.1.9.1</span>Invalid Shareable Usage</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation"><span class="spec-secid">3.2</span>Pre Merge Validation</a><ol>
<li><a href="#sec-Pre-Merge-Validation.Validate-Type-System"><span class="spec-secid">3.2.1</span>Validate Type System</a><ol>
<li><a href="#sec-Type-Kind-Mismatch"><span class="spec-secid">3.2.1.1</span>Type Kind Mismatch</a></li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation.Validate-Enums"><span class="spec-secid">3.2.2</span>Validate Enums</a><ol>
<li><a href="#sec-Enum-Values-Mismatch"><span class="spec-secid">3.2.2.1</span>Enum Values Mismatch</a></li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation.Validate-Composite-Types"><span class="spec-secid">3.2.3</span>Validate Composite Types</a><ol>
<li><a href="#sec-Output-Field-Types-Mergeable"><span class="spec-secid">3.2.3.1</span>Output Field Types Mergeable</a></li>
<li><a href="#sec-Field-Argument-Types-Mergeable"><span class="spec-secid">3.2.3.2</span>Field Argument Types Mergeable</a></li>
<li><a href="#sec-Field-With-Missing-Required-Arguments"><span class="spec-secid">3.2.3.3</span>Field With Missing Required Arguments</a></li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation.Validate-Input-Types"><span class="spec-secid">3.2.4</span>Validate Input Types</a><ol>
<li><a href="#sec-Input-Field-Default-Mismatch"><span class="spec-secid">3.2.4.1</span>Input Field Default Mismatch</a></li>
<li><a href="#sec-Input-Field-Types-mergeable"><span class="spec-secid">3.2.4.2</span>Input Field Types mergeable</a></li>
<li><a href="#sec-Input-With-Missing-Required-Fields"><span class="spec-secid">3.2.4.3</span>Input With Missing Required Fields</a></li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation.Validate-External-Directives"><span class="spec-secid">3.2.5</span>Validate External Directives</a><ol>
<li><a href="#sec-External-Argument-Default-Mismatch"><span class="spec-secid">3.2.5.1</span>External Argument Default Mismatch</a></li>
<li><a href="#sec-External-Argument-Missing"><span class="spec-secid">3.2.5.2</span>External Argument Missing</a></li>
<li><a href="#sec-External-Argument-Type-Mismatch"><span class="spec-secid">3.2.5.3</span>External Argument Type Mismatch</a></li>
<li><a href="#sec-External-Missing-on-Base"><span class="spec-secid">3.2.5.4</span>External Missing on Base</a></li>
<li><a href="#sec-External-Type-Mismatch"><span class="spec-secid">3.2.5.5</span>External Type Mismatch</a></li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation.Validate-Override-Directives"><span class="spec-secid">3.2.6</span>Validate Override Directives</a><ol>
<li><a href="#sec-Override-Collision-with-Another-Directive"><span class="spec-secid">3.2.6.1</span>Override Collision with Another Directive</a></li>
<li><a href="#sec-Override-Source-Has-Override"><span class="spec-secid">3.2.6.2</span>Override Source Has Override</a></li>
</ol>
</li>
<li><a href="#sec-Pre-Merge-Validation.Validate-Shareable-Directives"><span class="spec-secid">3.2.7</span>Validate Shareable Directives</a><ol>
<li><a href="#sec-Invalid-Field-Sharing"><span class="spec-secid">3.2.7.1</span>Invalid Field Sharing</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Merge"><span class="spec-secid">3.3</span>Merge</a><ol>
<li><a href="#sec-Merge-Scalar-Types"><span class="spec-secid">3.3.1</span>Merge Scalar Types</a></li>
<li><a href="#sec-Merge-Interface-Types"><span class="spec-secid">3.3.2</span>Merge Interface Types</a></li>
<li><a href="#sec-Merge-Enum-Types"><span class="spec-secid">3.3.3</span>Merge Enum Types</a></li>
<li><a href="#sec-Merge-Union-Types"><span class="spec-secid">3.3.4</span>Merge Union Types</a></li>
<li><a href="#sec-Merge-Input-Types"><span class="spec-secid">3.3.5</span>Merge Input Types</a></li>
<li><a href="#sec-Merge-Object-Types"><span class="spec-secid">3.3.6</span>Merge Object Types</a></li>
<li><a href="#sec-Merge-Output-Fields"><span class="spec-secid">3.3.7</span>Merge Output Fields</a></li>
<li><a href="#sec-Merge-Input-Fields"><span class="spec-secid">3.3.8</span>Merge Input Fields</a></li>
<li><a href="#sec-Merge-Argument-Definitions"><span class="spec-secid">3.3.9</span>Merge Argument Definitions</a></li>
<li><a href="#sec-Merge-Arguments"><span class="spec-secid">3.3.10</span>Merge Arguments</a></li>
<li><a href="#sec-Shared-Algorithms"><span class="spec-secid">3.3.11</span>Shared Algorithms</a><ol>
<li><a href="#sec-Least-Restrictive-Type"><span class="spec-secid">3.3.11.1</span>Least Restrictive Type</a></li>
<li><a href="#sec-Most-Restrictive-Type"><span class="spec-secid">3.3.11.2</span>Most Restrictive Type</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Post-Merge-Validation"><span class="spec-secid">3.4</span>Post Merge Validation</a><ol>
<li><a href="#sec-Post-Merge-Validation.Validate-Type-System"><span class="spec-secid">3.4.1</span>Validate Type System</a><ol>
<li><a href="#sec-No-Queries"><span class="spec-secid">3.4.1.1</span>No Queries</a></li>
<li><a href="#sec-Reference-To-Inaccessible-Type"><span class="spec-secid">3.4.1.2</span>Reference To Inaccessible Type</a></li>
</ol>
</li>
<li><a href="#sec-Post-Merge-Validation.Validate-Composite-Types"><span class="spec-secid">3.4.2</span>Validate Composite Types</a><ol>
<li><a href="#sec-Empty-Merged-Object-Type"><span class="spec-secid">3.4.2.1</span>Empty Merged Object Type</a></li>
<li><a href="#sec-Empty-Merged-Interface-Type"><span class="spec-secid">3.4.2.2</span>Empty Merged Interface Type</a></li>
<li><a href="#sec-Implemented-by-Inaccessible"><span class="spec-secid">3.4.2.3</span>Implemented by Inaccessible</a></li>
<li><a href="#sec-Interface-Field-No-Implementation"><span class="spec-secid">3.4.2.4</span>Interface Field No Implementation</a></li>
</ol>
</li>
<li><a href="#sec-Post-Merge-Validation.Validate-Input-Types"><span class="spec-secid">3.4.3</span>Validate Input Types</a><ol>
<li><a href="#sec-Empty-Merged-Input-Object-Type"><span class="spec-secid">3.4.3.1</span>Empty Merged Input Object Type</a></li>
<li><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible"><span class="spec-secid">3.4.3.2</span>Non-Null Input Fields cannot be inaccessible</a></li>
</ol>
</li>
<li><a href="#sec-Post-Merge-Validation.Validate-Enums"><span class="spec-secid">3.4.4</span>Validate Enums</a><ol>
<li><a href="#sec-Empty-Merged-Enum-Type"><span class="spec-secid">3.4.4.1</span>Empty Merged Enum Type</a></li>
<li><a href="#sec-Enum-Type-Default-Value-Inaccessible"><span class="spec-secid">3.4.4.2</span>Enum Type Default Value Inaccessible</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Union-Types"><span class="spec-secid">3.4.5</span>Validate Union Types</a><ol>
<li><a href="#sec-Empty-Merged-Union-Type"><span class="spec-secid">3.4.5.1</span>Empty Merged Union Type</a></li>
</ol>
</li>
<li><a href="#sec-Validate-Is-Directives"><span class="spec-secid">3.4.6</span>Validate Is Directives</a><ol>
<li><a href="#sec-Is-Invalid-Fields"><span class="spec-secid">3.4.6.1</span>Is Invalid Fields</a></li>
</ol>
</li>
<li><a href="#sec-Post-Merge-Validation.Validate-Require-Directives"><span class="spec-secid">3.4.7</span>Validate Require Directives</a><ol>
<li><a href="#sec-Require-Invalid-Fields"><span class="spec-secid">3.4.7.1</span>Require Invalid Fields</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Validate-Satisfiability"><span class="spec-secid">3.5</span>Validate Satisfiability</a></li>
</ol>
</li>
<li><a href="#sec-Executor"><span class="spec-secid">4</span>Executor</a><ol>
<li><a href="#sec-Configuration"><span class="spec-secid">4.1</span>Configuration</a></li>
</ol>
</li>
<li><a href="#sec-Shared-Types"><span class="spec-secid">5</span>Shared Types</a><ol>
<li><a href="#sec-Shared-Types.Name"><span class="spec-secid">5.1</span>Name</a></li>
<li><a href="#sec-FieldSelection"><span class="spec-secid">5.2</span>FieldSelection</a></li>
</ol>
</li>
<li><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar"><span class="spec-secid">6</span>Appendix A: Specification of FieldSelectionMap Scalar</a><ol>
<li><a href="#sec-Introduction"><span class="spec-secid">6.1</span>Introduction</a><ol>
<li><a href="#sec-Scope"><span class="spec-secid">6.1.1</span>Scope</a></li>
</ol>
</li>
<li><a href="#sec-Language"><span class="spec-secid">6.2</span>Language</a><ol>
<li><a href="#sec-Language.Name"><span class="spec-secid">6.2.1</span>Name</a></li>
<li><a href="#sec-Path"><span class="spec-secid">6.2.2</span>Path</a></li>
<li><a href="#sec-SelectedValue"><span class="spec-secid">6.2.3</span>SelectedValue</a></li>
<li><a href="#sec-SelectedObjectValue"><span class="spec-secid">6.2.4</span>SelectedObjectValue</a></li>
<li><a href="#sec-SelectedListValue"><span class="spec-secid">6.2.5</span>SelectedListValue</a></li>
</ol>
</li>
<li><a href="#sec-Validation"><span class="spec-secid">6.3</span>Validation</a><ol>
<li><a href="#sec-Path-Field-Selections"><span class="spec-secid">6.3.1</span>Path Field Selections</a></li>
<li><a href="#sec-Path-Terminal-Field-Selections"><span class="spec-secid">6.3.2</span>Path Terminal Field Selections</a></li>
<li><a href="#sec-Type-Reference-Is-Possible"><span class="spec-secid">6.3.3</span>Type Reference Is Possible</a></li>
<li><a href="#sec-Values-of-Correct-Type"><span class="spec-secid">6.3.4</span>Values of Correct Type</a></li>
<li><a href="#sec-Selected-Object-Field-Names"><span class="spec-secid">6.3.5</span>Selected Object Field Names</a></li>
<li><a href="#sec-Selected-Object-Field-Uniqueness"><span class="spec-secid">6.3.6</span>Selected Object Field Uniqueness</a></li>
<li><a href="#sec-Required-Selected-Object-Fields"><span class="spec-secid">6.3.7</span>Required Selected Object Fields</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</nav>
</header>
<section id="sec-Overview" secid="1">
<h1 data-source="spec/Section%201%20--%20Overview.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Overview">1</a></span>Overview</h1>
<p data-source="spec/Section%201%20--%20Overview.md#L3-L5">The GraphQL Composite Schemas specification describes how to construct a single unified GraphQL schema, the <em>composite schema</em>, from multiple GraphQL schemas, each termed a <em>source schema</em>.</p>
<p data-source="spec/Section%201%20--%20Overview.md#L7-L10">The <em>composite schema</em> presents itself as a regular <span class="spec-ref"><a href="https://spec.graphql.org/draft/#sec-Schema" data-name="graphql-schema" target="_blank">GraphQL schema</a></span>; the implementation details and complexities of the underlying distributed systems are not visible to clients, all observable behavior is the same as described by the <span class="spec-ref"><a href="https://spec.graphql.org/draft/" data-name="graphql-specification" target="_blank">GraphQL specification</a></span>.</p>
<p data-source="spec/Section%201%20--%20Overview.md#L12">The GraphQL Composite Schemas specification has a number of design principles:</p>
<ul>
<li data-source="spec/Section%201%20--%20Overview.md#L14-L21"><strong>Composable</strong>: Rather than defining each <em>source schema</em> in isolation and reshaping it to fit the <em>composite schema</em> later, this specification encourages developers to design the source schemas as part of a larger whole from the start. Each source schema defines the types and fields it is responsible for serving within the context of the larger schema, referencing and extending that which is provided by other source schemas. The GraphQL Composite Schemas specification does not describe how to combine arbitrary schemas.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L23-L29"><strong>Collaborative</strong>: The GraphQL Composite Schemas specification is explicitly designed around team collaboration. By building on a principled composition model, it ensures that conflicts and inconsistencies are surfaced early and can be resolved before deployment. This allows many teams to contribute to a single schema without the danger of breaking it. The GraphQL Composite Schemas specification facilitates the coordinated effort of combining collaboratively designed source schemas into a single coherent composite schema.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L31-L37"><strong>Evolvable</strong>: A <em>composite schema</em> enables offering an integrated, product-centric API interface to clients; source schema boundaries are an implementation detail, a detail that is not exposed to clients. As each underlying <span class="spec-ref"><a href="https://spec.graphql.org/draft/#sec-Overview" data-name="graphql-service" target="_blank">GraphQL service</a></span> evolves, the same functionality may be provided from a different combination of services. This specification helps to ensure that changes to underlying services can be made whilst maintaining support for existing requests from all clients to the composite schema interface.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L39-L42"><strong>Explicitness</strong>: To make the composition process easier to understand and to avoid ambiguities that can lead to confusing failures as the system grows, the GraphQL Composite Schemas specification prefers to be explicit about intentions and minimize reliance on inference and convention.</li>
</ul>
<div id="note-98b57" class="spec-note" data-source="spec/Section%201%20--%20Overview.md#L44-L47">
<a href="#note-98b57">Note</a>
Although the GraphQL Composite Schemas specification does not describe how to combine arbitrary schemas, tooling may be built to transform existing or external schemas into compliant <em>source schemas</em>. Details of building such tooling is beyond the scope of this specification.</div>
<p data-source="spec/Section%201%20--%20Overview.md#L49-L51">To enable greater interoperability between different implementations of tooling and gateways, this specification focuses on two core components: schema composition and distributed execution.</p>
<ul>
<li data-source="spec/Section%201%20--%20Overview.md#L53-L58"><strong>Schema Composition</strong>: Schema composition describes the process of merging multiple <em>source schema</em> into a single GraphQL schema, the <em>composite schema</em>. During this process, an intermediary schema, the <em>execution schema</em>, is generated. This composite execution schema is annotated with directives to describe execution, and may have additional internal fields or arguments that won&rsquo;t be exposed in the client-facing composite schema.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L60-L63"><strong>Distributed Execution</strong>: The <em>distributed GraphQL executor</em> specifies the core execution behavior and algorithms that enable fulfillment of a <span class="spec-ref"><a href="https://spec.graphql.org/draft/#request" data-name="graphql-request" target="_blank">GraphQL request</a></span> performed against the <em>composite schema</em>. </li>
</ul>
</section>
<section id="sec-Source-Schema" secid="2">
<h1 data-source="spec/Section%202%20--%20Source%20Schema.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Source-Schema">2</a></span>Source Schema</h1>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L3-L6">A <em>source schema</em> is a GraphQL schema that is part of a larger <em>composite schema</em>. Source schemas use directives to express intent and requirements for the composition process as well as to describe runtime behavior. The following chapters describe the directives that are used to annotate a source schema.</p>
<section id="sec--lookup" secid="2.1">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L8"><span class="spec-secid" title="link to this section"><a href="#sec--lookup">2.1</a></span>@lookup</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L10-L12"><code><span class="token keyword">directive</span> <span class="token directive function">@lookup</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L14-L16">The <code>@lookup</code> directive is used within a <em>source schema</em> to specify output fields that can be used by the <em>distributed GraphQL executor</em> to resolve an entity by a stable key.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L18-L19">The stable key is defined by the arguments of the field. Each lookup argument must match a field on the return type of the lookup field.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L21-L22">Source schemas can provide multiple lookup fields for the same entity to resolve the entity by different keys.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L24-L26">In this example, the source schema specifies that the <code>Product</code> entity can be resolved with the <code>productById</code> field or the <code>productByName</code> field. Both lookup fields are able to resolve the <code>Product</code> entity but do so with different keys.</p>
<pre id="example-f16ed" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L28-L39"><a href="#example-f16ed">Example № 3</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token comment"># NOT a lookup field.</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
  <span class="token attr-name">productByName</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L41-L44">Lookup fields may return object, interface, or union types. In case a lookup field returns an abstract type (interface type or union type), all possible object types of the abstract return type are considered entities, and each must have fields that correspond to every argument of the lookup field.</p>
<pre id="example-92f0d" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L46-L68"><a href="#example-92f0d">Example № 4</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token property">Electronics</span> <span class="token operator">|</span> <span class="token property">Clothing</span>

<span class="token keyword">type</span> <span class="token class-name">Electronics</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">brand</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L70-L72">The following example shows an invalid lookup field because the <code>Clothing</code> type, which is one of the possible object types of the abstract return type, does not define all the fields required by the lookup field&rsquo;s arguments.</p>
<pre id="example-adcef" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L74-L97"><a href="#example-adcef">Counter Example № 5</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token property">Electronics</span> <span class="token operator">|</span> <span class="token property">Clothing</span>

<span class="token keyword">type</span> <span class="token class-name">Electronics</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">brand</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token comment"># Clothing does not have a field that corresponds</span>
<span class="token comment"># with the lookup field's argument signature.</span>
<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L99-L103">Lookup fields must be accessible from the <code>Query</code> type. If a lookup field is not defined directly on the <code>Query</code> type, it must be reachable by following a chain of fields &mdash; starting from the <code>Query</code> root type &mdash; where none of the intermediate fields have arguments. This ensures that lookup fields are accessible to the executor.</p>
<pre id="example-3e46a" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L105-L117"><a href="#example-3e46a">Example № 6</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lookups</span><span class="token punctuation">:</span> <span class="token class-name">Lookups</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Lookups</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--internal" secid="2.2">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L119"><span class="spec-secid" title="link to this section"><a href="#sec--internal">2.2</a></span>@internal</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L121-L123"><code><span class="token keyword">directive</span> <span class="token directive function">@internal</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L125-L130">The <code>@internal</code> directive is used in combination with lookup fields and allows you to declare internal types and fields. Internal types and fields do not appear in the final client-facing composite schema and do not participate in the standard schema-merging process. This allows a source schema to define lookup fields for resolving entities that should not be accessible through the client-facing composite schema.</p>
<pre id="example-b01ad" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L132-L143"><a href="#example-b01ad">Example № 7</a><code><span class="token comment"># Source Schema</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L145-L147">Since internal types and fields do not participate in the standard schema-merging process they do not collide with similar named fields or types on other source schemas.</p>
<pre id="example-c2999" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L149-L169"><a href="#example-c2999">Example № 8</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token comment"># this field follows the standard field merging rules</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>

  <span class="token comment"># this field is internal and does not follow any field merging rules.</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L171-L172">Internal fields can only be used by the distributed GraphQL executor as lookup fields for entity resolution.</p>
<pre id="example-5dcd6" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L174-L191"><a href="#example-5dcd6">Example № 9</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
  <span class="token attr-name">lookups</span><span class="token punctuation">:</span> <span class="token class-name">InternalLookups</span><span class="token operator">!</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>

<span class="token comment"># all lookups within this internal type are hidden from the public API</span>
<span class="token comment"># but can be used for entity resolution.</span>
<span class="token keyword">type</span> <span class="token class-name">InternalLookups</span> <span class="token directive function">@internal</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L193-L195">Since internal fields are not part of the standard schema-merging process, they cannot be used as key fields or in requirements. This is because there is no semantic equivalence of the field or type to another source schema.</p>
<pre id="example-f91d8" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L197-L205"><a href="#example-f91d8">Counter Example № 10</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L207-L208">In contrast to <code>@inaccessible</code>, the effect of <code>@internal</code> is local to its source schema.</p>
<pre id="example-45e68" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L210-L234"><a href="#example-45e68">Example № 11</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token comment"># this field follows the standard field merging rules</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>

  <span class="token comment"># this field is internal and does not follow any field merging rules.</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token comment"># this field follows the standard field merging rules</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>

  <span class="token comment"># this field follows the standard field merging rules</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--inaccessible" secid="2.3">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L236"><span class="spec-secid" title="link to this section"><a href="#sec--inaccessible">2.3</a></span>@inaccessible</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L238-L251"><code><span class="token comment"># prettier-ignore</span>
<span class="token keyword">directive</span> <span class="token directive function">@inaccessible</span> <span class="token keyword">on</span>
  <span class="token operator">|</span> <span class="token constant">FIELD_DEFINITION</span>
  <span class="token operator">|</span> <span class="token constant">OBJECT</span>
  <span class="token operator">|</span> <span class="token constant">INTERFACE</span>
  <span class="token operator">|</span> <span class="token constant">UNION</span>
  <span class="token operator">|</span> <span class="token constant">ARGUMENT_DEFINITION</span>
  <span class="token operator">|</span> <span class="token constant">SCALAR</span>
  <span class="token operator">|</span> <span class="token constant">ENUM</span>
  <span class="token operator">|</span> <span class="token constant">ENUM_VALUE</span>
  <span class="token operator">|</span> <span class="token constant">INPUT_OBJECT</span>
  <span class="token operator">|</span> <span class="token constant">INPUT_FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L253-L255">The <code>@inaccessible</code> directive is used to prevent specific type system members from being accessible through the client-facing <em>composite schema</em>, even if they are accessible in the underlying source schemas.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L257-L259">This directive is useful for restricting access to type system members that are either irrelevant to the client-facing composite schema or sensitive in nature, such as internal identifiers or fields intended only for backend use.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L261-L263">In the following example, the key field <code>sku</code> is inaccessible from the composite schema. However, type system members marked as <code>@inaccessible</code> can still be used by the distributed executor to fulfill requirements.</p>
<pre id="example-33f09" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L265-L276"><a href="#example-33f09">Example № 12</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">note</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L278-L280">In contrast to the <code>@internal</code> directive, <code>@inaccessible</code> hides type system members from the composite schema even if other source schemas on the same type system member have no <code>@inaccessible</code> directive.</p>
<pre id="example-536ec" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L282-L302"><a href="#example-536ec">Example № 13</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">note</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">note</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--is" secid="2.4">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L304"><span class="spec-secid" title="link to this section"><a href="#sec--is">2.4</a></span>@is</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L306-L308"><code><span class="token keyword">directive</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L310-L314">The <code>@is</code> directive is utilized on lookup fields to describe how the arguments can be mapped from the entity type that the lookup field resolves. The mapping establishes semantic equivalence between disparate type system members across source schemas and is used in cases where an argument does not directly align with a field on the entity type.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L316-L318">In the following example, the directive specifies that the <code>id</code> argument on the field <code>Query.personById</code> and the field <code>Person.id</code> on the return type of the field are semantically the same.</p>
<div id="note-22d89" class="spec-note" data-source="spec/Section%202%20--%20Source%20Schema.md#L320-L321">
<a href="#note-22d89">Note</a>
In cases where the lookup argument name aligns with the field name on the return type, the <code>@is</code> directive can be omitted.</div>
<pre id="example-d33b5" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L323-L327"><a href="#example-d33b5">Example № 14</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">productId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L329">The <code>@is</code> directive also allows referring to nested fields relative to <code>Person</code>.</p>
<pre id="example-91a82" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L331-L335"><a href="#example-91a82">Example № 15</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personByAddressId</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address.id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L337-L339">The <code>@is</code> directive can be applied to multiple arguments within the same lookup field, allowing each argument to be mapped individually to fields on the return type.</p>
<pre id="example-7798a" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L341-L348"><a href="#example-7798a">Example № 16</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personByAddressId</span><span class="token punctuation">(</span>
    <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address.id"</span><span class="token punctuation">)</span>
    <span class="token attr-name">kind</span><span class="token punctuation">:</span> <span class="token class-name">PersonKind</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"kind"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L350-L351">The <code>@is</code> directive can also be used in combination with <code>@oneOf</code> to specify a single lookup field that can resolve entities by multiple keys.</p>
<pre id="example-4214e" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L353-L366"><a href="#example-4214e">Example № 17</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">person</span><span class="token punctuation">(</span>
    <span class="token attr-name">by</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PersonByInput</span>
      <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id } | { addressId: address.id } | { name }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PersonByInput</span> <span class="token directive function">@oneOf</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">addressId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--is.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L368"><a href="#sec--is.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L370"><code>field</code>: Represents a selection path map syntax.</li>
</ul>
</section>
</section>
<section id="sec--require" secid="2.5">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L372"><span class="spec-secid" title="link to this section"><a href="#sec--require">2.5</a></span>@require</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L374-L376"><code><span class="token keyword">directive</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L378-L381">The <code>@require</code> directive is used to express data requirements with other source schemas. Arguments annotated with the <code>@require</code> directive are removed from the <em>composite schema</em> and the value for these will be resolved by the <em>distributed executor</em>.</p>
<pre id="example-3d648" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L383-L392"><a href="#example-3d648">Example № 18</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.size"</span><span class="token punctuation">)</span>
    <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.weight"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L394">The above example would translate to the following in the <em>composite schema</em>.</p>
<pre id="example-20429" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L396-L401"><a href="#example-20429">Example № 19</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">delivery</span><span class="token punctuation">(</span><span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L403-L406">This can also be done by using input types. The selection path map specifies which data is required and needs to be resolved from other source schemas. If the input type is only used to express requirements it is removed from the composite schema.</p>
<pre id="example-527d3" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L408-L417"><a href="#example-527d3">Example № 20</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">ProductDimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ size: dimension.size, weight: dimension.weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L419-L420">If the input types do not match the output type structure the selection map syntax can be used to specify how requirements translate to the input object.</p>
<pre id="example-44172" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L422-L443"><a href="#example-44172">Example № 21</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">ProductDimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span>
        <span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ productSize: dimension.size, productWeight: dimension.weight }"</span>
      <span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDimension</span> <span class="token punctuation">{</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">ProductDimensionInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productSize</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">productWeight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--require.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L445"><a href="#sec--require.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L447"><code>field</code>: Represents a selection path map syntax.</li>
</ul>
</section>
</section>
<section id="sec--key" secid="2.6">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L449"><span class="spec-secid" title="link to this section"><a href="#sec--key">2.6</a></span>@key</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L451-L453"><code><span class="token keyword">directive</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionSet</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">INTERFACE</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L455-L457">The <code>@key</code> directive is used to designate an entity&rsquo;s unique key, which identifies how to uniquely reference an instance of an entity across different source schemas.</p>
<pre id="example-ad2f9" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L459-L466"><a href="#example-ad2f9">Example № 22</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L468-L470">Each occurrence of the <code>@key</code> directive on an object or interface type specifies one distinct unique key for that entity. Keys allow the distributed GraphQL executor to distinguish between different entities of the same type.</p>
<pre id="example-799bb" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L472-L479"><a href="#example-799bb">Example № 23</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L481-L483">While multiple keys define separate ways to reference the same entity based on different sets of fields, a composite key allows for uniquely identifying an entity by using a combination of multiple fields.</p>
<pre id="example-4e25f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L485-L492"><a href="#example-4e25f">Example № 24</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L494-L497">The directive is applicable to both OBJECT and INTERFACE types. This allows entities that implement an interface to inherit the key(s) defined at the interface level, ensuring consistent identification across different implementations of that interface.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L499-L500">By applying the <code>@key</code> directive all referenced fields become sharable even if the fields are not explicitly marked with <code>@shareable</code>.</p>
<pre id="example-e9e4f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L502-L514"><a href="#example-e9e4f">Example № 25</a><code><span class="token comment"># source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L516-L519">Fields must be explicitly marked as a key or annotated with the <code>@shareable</code> directive to allow multiple source schemas to define them, ensuring that the decision to serve a field from more than one source schema is intentional and coordinated.</p>
<pre id="example-6a236" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L521-L533"><a href="#example-6a236">Counter Example № 26</a><code><span class="token comment"># source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--key.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L535"><a href="#sec--key.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L537"><code>fields</code>: Represents a field selection set syntax.</li>
</ul>
</section>
</section>
<section id="sec--shareable" secid="2.7">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L539"><span class="spec-secid" title="link to this section"><a href="#sec--shareable">2.7</a></span>@shareable</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L541-L543"><code><span class="token keyword">directive</span> <span class="token directive function">@shareable</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L545-L547">By default, only a single source schema is allowed to contribute a particular field to an object type. This prevents source schemas from inadvertently defining similarly named fields that are not semantically equivalent.</p>
<pre id="example-aea2c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L549-L561"><a href="#example-aea2c">Counter Example № 27</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">variation</span><span class="token punctuation">:</span> <span class="token class-name">ProductVariation</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L563-L565">Fields must be explicitly marked as <code>@shareable</code> to allow multiple source schemas to define them, ensuring that the decision to serve a field from more than one source schema is intentional and coordinated.</p>
<pre id="example-dcbb4" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L567-L579"><a href="#example-dcbb4">Example № 28</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">variation</span><span class="token punctuation">:</span> <span class="token class-name">ProductVariation</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L581-L583">If multiple source schemas define the same sharable field, they are assumed to be semantically equivalent, and the executor is free to choose between them as it sees fit.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L585-L586">The <code>@shareable</code> directive can also be applied at the object-type level, having the same effect as if <code>@shareable</code> were applied to each field of the type.</p>
<pre id="example-239bb" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L588-L600"><a href="#example-239bb">Example № 29</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@shareable</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">variation</span><span class="token punctuation">:</span> <span class="token class-name">ProductVariation</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L602-L603">Key fields of an object-type are considered shareable by default and do not need to be explicitly marked with <code>@shareable</code>.</p>
<pre id="example-91661" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L605-L619"><a href="#example-91661">Example № 30</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">variation</span><span class="token punctuation">:</span> <span class="token class-name">ProductVariation</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--provides" secid="2.8">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L621"><span class="spec-secid" title="link to this section"><a href="#sec--provides">2.8</a></span>@provides</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L623-L625"><code><span class="token keyword">directive</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionSet</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L627-L629">The <code>@provides</code> directive indicates that a field can provide certain subfields of its return type from the same source schema, without requiring an additional resolution step elsewhere.</p>
<pre id="example-ce7f2" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L631-L648"><a href="#example-ce7f2">Example № 31</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">body</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"email"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">reviews</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Review</span><span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L650-L653">When a field annotated with <code>@provides</code> returns an object, interface or union type that may also be contributed by other source schemas, this directive declares which of that type&rsquo;s subfields the current source schema can resolve directly.</p>
<pre id="example-a9913" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L655-L665"><a href="#example-a9913">Example № 32</a><code><span class="token punctuation">{</span>
  <span class="token object">reviews</span> <span class="token punctuation">{</span>
    <span class="token property">body</span>
    <span class="token object">author</span> <span class="token punctuation">{</span>
      <span class="token property">name</span>
      <span class="token property">email</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L667-L669">If a client tries to fetch the same subfield (<code>User.email</code>) through a different path (e.g., users query field), the source schema will not be able to resolve it and will throw an error.</p>
<pre id="example-79352" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L671-L679"><a href="#example-79352">Counter Example № 33</a><code><span class="token punctuation">{</span>
  <span class="token object">users</span> <span class="token punctuation">{</span>
    <span class="token comment"># The source schema does NOT provide email in this context,</span>
    <span class="token comment"># and this field will fail at runtime.</span>
    <span class="token property">email</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L681">The <code>@provides</code> directive may reference multiple fields or nested fields:</p>
<pre id="example-ec820" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L683-L699"><a href="#example-ec820">Example № 34</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku variation { size }"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku variation { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">variation</span><span class="token punctuation">:</span> <span class="token class-name">ProductVariation</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductVariation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L701-L703">When a field annotated with the provides directive has an abstract return type the fields syntax can leverage inline fragments to express fields that can be resolved locally.</p>
<pre id="example-8757d" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L705-L738"><a href="#example-8757d">Example № 35</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token comment"># The @provides directive tells us that this source schema can supply different</span>
  <span class="token comment"># fields depending on which concrete type of Product is returned.</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
    <span class="token directive function">@provides</span><span class="token punctuation">(</span>
      <span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"""
      ... on Book { author }
      ... on Clothing { size }
      """</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">reviews</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Review</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--provides.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L740"><a href="#sec--provides.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L742-L743"><code>fields</code>: Represents a field selection set syntax describing the subfields of the returned type that can be provided by the current source schema.</li>
</ul>
</section>
</section>
<section id="sec--external" secid="2.9">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L745"><span class="spec-secid" title="link to this section"><a href="#sec--external">2.9</a></span>@external</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L747-L749"><code><span class="token keyword">directive</span> <span class="token directive function">@external</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L751-L753">The @external directive indicates that a field is recognized by the current source schema but is not directly contributed (resolved) by it. Instead, this schema references the field for specific composition purposes.</p>
<section id="sec--external.Entity-Keys" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L755"><a href="#sec--external.Entity-Keys" title="link to this subsection">Entity Keys</a></h6>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L757-L758">When combined with one or more <code>@key</code> directives, an external field can serve as an entity identifier (or part of a composite identifier).</p>
<pre id="example-15e0b" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L760-L771"><a href="#example-15e0b">Example № 36</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
  <span class="token attr-name">productByUpc</span><span class="token punctuation">(</span><span class="token attr-name">upc</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"upc"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">upc</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--external.Field-Resolution" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L773"><a href="#sec--external.Field-Resolution" title="link to this subsection">Field Resolution</a></h6>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L775-L776">When another field in the same source schema uses <code>@provides</code> to declare that it can resolve certain external fields in a single data-fetching step.</p>
<pre id="example-70bf8" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L778-L789"><a href="#example-70bf8">Example № 37</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"email"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L791-L795">When a field is marked <code>@external</code>, the composition process understands that the field is provided by another source schema. The current source schema references it only for entity identification (via <code>@key</code>) or for providing a field through <code>@provides</code>. If no such usage exists, the presence of an <code>@external</code> field produces a composition error.</p>
</section>
</section>
<section id="sec--override" secid="2.10">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L797"><span class="spec-secid" title="link to this section"><a href="#sec--override">2.10</a></span>@override</h2>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L799-L801"><code><span class="token keyword">directive</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L803-L808">The <code>@override</code> directive is used to migrate a field from one source schema to another. When a field in the local schema is annotated with <code>@override(from: "Catalog")</code>, it signals that the local schema overrides the field previously contributed by the <code>Catalog</code> source schema. As a result, the composite schema will source this field from the local schema, rather than from the original source schema.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L810-L812">The following example shows how a field can be migrated from the <code>Catalog</code> schema to the new <code>Payments</code> schema. By using <code>@override</code>, a field can be moved to a new schema without requiring any change to the original <code>Catalog</code> schema.</p>
<pre id="example-6cfd7" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L814-L828"><a href="#example-6cfd7">Example № 38</a><code><span class="token comment"># The original "Catalog" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Payments" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Catalog"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L830">Fields that are annotated can themselves be migrated.</p>
<pre id="example-b017f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L832-L853"><a href="#example-b017f">Example № 39</a><code><span class="token comment"># The original "Catalog" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Payments" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Catalog"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Pricing" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Payments"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L855">If the composition detects cyclic overrides it must throw a composition error.</p>
<pre id="example-f101c" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L857-L871"><a href="#example-f101c">Example № 40</a><code><span class="token comment"># The original "Catalog" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Pricing"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Payments" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Catalog"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--override.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L873"><a href="#sec--override.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L875-L876"><code>from</code>: The name of the source schema that originally provided this field. </li>
</ul>
</section>
</section>
</section>
<section id="sec-Schema-Composition" secid="3">
<h1 data-source="spec/Section%204%20--%20Composition.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Schema-Composition">3</a></span>Schema Composition</h1>
<p data-source="spec/Section%204%20--%20Composition.md#L3-L9">The schema composition describes the process of merging multiple source schemas into a single GraphQL schema, known as the <em>composite execution schema</em>, which is a valid GraphQL schema annotated with execution directives. This composite execution schema is the output of the schema composition process. The schema composition process is divided into three main steps: <strong>Validate Source Schemas</strong>, <strong>Merge Source Schemas</strong>, and <strong>Validate Satisfiability</strong>, which are run in sequence to produce the composite execution schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L11-L17">Although this chapter describes schema composition as a sequence of phases, an implementation is not required to implement these steps exactly as presented. Implementations may interleave or reorder the specified checks, or introduce additional processing stages, provided that the final composed schema complies with the requirements set forth in this specification. The composition rules and resulting schema must remain consistent, but the specific structure or timing of each validation step is left to the implementer.</p>
<section id="sec-Validate-Source-Schemas" secid="3.1">
<h2 data-source="spec/Section%204%20--%20Composition.md#L19"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas">3.1</a></span>Validate Source Schemas</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L21-L25">In this phase, each source schema is validated in isolation to ensure that it satisfies the GraphQL specification and composition requirements. No cross-schema references are considered here. Each source schema must have valid syntax, well-formed type definitions, and correct directive usage. If any source schema fails these checks, composition does not proceed.</p>
<section id="sec-Validate-Source-Schemas.Validate-Type-System" secid="3.1.1">
<h3 data-source="spec/Section%204%20--%20Composition.md#L27"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas.Validate-Type-System">3.1.1</a></span>Validate Type System</h3>
<section id="sec-Invalid-GraphQL" secid="3.1.1.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L29"><span class="spec-secid" title="link to this section"><a href="#sec-Invalid-GraphQL">3.1.1.1</a></span>Invalid GraphQL</h4>
<section id="sec-Invalid-GraphQL.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L31"><a href="#sec-Invalid-GraphQL.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L33"><code>INVALID_GRAPHQL</code></p>
</section>
<section id="sec-Invalid-GraphQL.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L35"><a href="#sec-Invalid-GraphQL.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L37">ERROR</p>
</section>
<section id="sec-Invalid-GraphQL.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L39"><a href="#sec-Invalid-GraphQL.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L41">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L42"><var data-name="schema">schema</var> must be a syntactically valid</li>
<li data-source="spec/Section%204%20--%20Composition.md#L43-L44"><var data-name="schema">schema</var> must be a semantically valid GraphQL schema according to the <a href="https://spec.graphql.org/">GraphQL specification</a>.</li>
</ul>
</section>
<section id="sec-Invalid-GraphQL.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L46"><a href="#sec-Invalid-GraphQL.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L48-L50">Before composition, every individual source schema must be valid as per the official GraphQL specification. Common reasons a schema may be considered &ldquo;invalid GraphQL&rdquo; include:</p>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L52"><strong>Syntax Errors</strong>: Missing braces, invalid tokens, or misplaced punctuation.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L53-L54"><strong>Unknown Types</strong>: Referencing types that are not defined within the schema or imported from elsewhere.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L55-L56"><strong>Invalid Directive Usage</strong>: Omitting required arguments to directives or using directives in disallowed locations.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L57-L59"><strong>Invalid Default Values</strong>: Providing default values for arguments or fields that do not conform to the type (e.g., a default of <code>null</code> for a non-null field, an invalid enum value, etc.).</li>
<li data-source="spec/Section%204%20--%20Composition.md#L60-L61"><strong>Conflicting Type Definitions</strong>: Defining or overriding a built-in type or directive incorrectly.</li>
</ul>
<p data-source="spec/Section%204%20--%20Composition.md#L63-L67">When any of these validation checks fail for a particular source schema, that schema does not meet the baseline requirements for composition, and the composition process cannot proceed. An <code>INVALID_GRAPHQL</code> error is raised, prompting the schema owner to correct the GraphQL violations before retrying composition.</p>
</section>
<section id="sec-Invalid-GraphQL.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L69"><a href="#sec-Invalid-GraphQL.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L71-L72">In the following counter-example, the schema is invalid because the type <code>User</code> is referenced in the <code>Query</code> type but never defined:</p>
<pre id="example-0b1aa" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L74-L80"><a href="#example-0b1aa">Counter Example № 41</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token class-name">User</span>
<span class="token punctuation">}</span>

<span class="token comment"># The type "User" is never defined; this is invalid GraphQL.</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L82-L83">In this counter-example, <code>"INVALID_VALUE"</code> is not a valid <code>Role</code>, causing <code>INVALID_GRAPHQL</code>.</p>
<pre id="example-5cc30" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L85-L94"><a href="#example-5cc30">Counter Example № 42</a><code><span class="token keyword">enum</span> <span class="token class-name">Role</span> <span class="token punctuation">{</span>
  <span class="token constant">ADMIN</span>
  <span class="token constant">USER</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">users</span><span class="token punctuation">(</span><span class="token attr-name">role</span><span class="token punctuation">:</span> <span class="token class-name">Role</span> <span class="token operator">=</span> <span class="token string">"INVALID_VALUE"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L96-L98">The GraphQL spec requires all non-null directive arguments to be supplied. The omission of the <code>fields</code> argument in the <code>@provides</code> directive triggers <code>INVALID_GRAPHQL</code>.</p>
<pre id="example-10884" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L100-L107"><a href="#example-10884">Counter Example № 43</a><code><span class="token keyword">directive</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@provides</span>
  <span class="token comment"># "fields" argument is required, but not provided.</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Disallowed-Inaccessible-Elements" secid="3.1.1.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L109"><span class="spec-secid" title="link to this section"><a href="#sec-Disallowed-Inaccessible-Elements">3.1.1.2</a></span>Disallowed Inaccessible Elements</h4>
<section id="sec-Disallowed-Inaccessible-Elements.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L111"><a href="#sec-Disallowed-Inaccessible-Elements.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L113"><code>DISALLOWED_INACCESSIBLE</code></p>
</section>
<section id="sec-Disallowed-Inaccessible-Elements.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L115"><a href="#sec-Disallowed-Inaccessible-Elements.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L117">ERROR</p>
</section>
<section id="sec-Disallowed-Inaccessible-Elements.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L119"><a href="#sec-Disallowed-Inaccessible-Elements.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L121">Let <var data-name="type">type</var> be the set of all types the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L122-L128">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L123-L128">If <var data-name="type">type</var> is a built-in scalar type or introspection type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L124"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="type">type</var>)</span> must be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L125-L128">For each <var data-name="field">field</var> in <var data-name="type">type</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L126"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="field">field</var>)</span> must be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L127-L128">For each <var data-name="argument">argument</var> in <var data-name="field">field</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L128"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="argument">argument</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L129-L132">For each <var data-name="directive">directive</var> in <var data-name="directives">directives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L130-L132">If <var data-name="directive">directive</var> is a built-in directive:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L131-L132">For each <var data-name="argument">argument</var> in <var data-name="directive">directive</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L132"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="argument">argument</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Disallowed-Inaccessible-Elements.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L134"><a href="#sec-Disallowed-Inaccessible-Elements.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L136-L139">This rule ensures that certain essential elements of a GraphQL schema, particularly built-in scalars, directive arguments, and introspection types, cannot be marked as <code>@inaccessible</code>. These types are fundamental to GraphQL. Making these elements inaccessible would break core GraphQL functionality.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L141-L142">Here, the <code>String</code> type is not marked as <code>@inaccessible</code>, which adheres to the rule:</p>
<pre id="example-99a08" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L144-L149"><a href="#example-99a08">Example № 44</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L151-L153">In this example, the <code>String</code> scalar is marked as <code>@inaccessible</code>. This violates the rule because <code>String</code> is a required built-in type that cannot be inaccessible:</p>
<pre id="example-23d3f" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L155-L162"><a href="#example-23d3f">Counter Example № 45</a><code><span class="token keyword">scalar</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L164-L166">In this example, the introspection type <code>__Type</code> is marked as <code>@inaccessible</code>. This violates the rule because introspection types must remain accessible for GraphQL introspection queries to work.</p>
<pre id="example-f1652" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L168-L174"><a href="#example-f1652">Counter Example № 46</a><code><span class="token keyword">type</span> <span class="token class-name">__Type</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">kind</span><span class="token punctuation">:</span> <span class="token class-name">__TypeKind</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">fields</span><span class="token punctuation">(</span><span class="token attr-name">includeDeprecated</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">__Field</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Type-Definition-Invalid" secid="3.1.1.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L176"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Definition-Invalid">3.1.1.3</a></span>Type Definition Invalid</h4>
<section id="sec-Type-Definition-Invalid.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L178"><a href="#sec-Type-Definition-Invalid.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L180"><code>TYPE_DEFINITION_INVALID</code></p>
</section>
<section id="sec-Type-Definition-Invalid.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L182"><a href="#sec-Type-Definition-Invalid.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L184">ERROR</p>
</section>
<section id="sec-Type-Definition-Invalid.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L186"><a href="#sec-Type-Definition-Invalid.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L188-L189">Let <var data-name="types">types</var> be the set of built-in types (for example, <code>FieldSelectionMap</code>) defined by the composition specification from the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L190-L202">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L191">Let <var data-name="kind">kind</var> be the kind of <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L192"><var data-name="kind">kind</var> must be equal to the kind defined by the composition specification.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L193-L202">If <var data-name="type">type</var> is a directive:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L194-L195">Let <var data-name="expectedArguments">expectedArguments</var> be the set of arguments defined by the composition specification.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L196-L202">For each <var data-name="expectedArgument">expectedArgument</var> in <var data-name="expectedArguments">expectedArguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L197">Let <var data-name="name">name</var> be the name of <var data-name="expectedArgument">expectedArgument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L198">Let <var data-name="argument">argument</var> be the argument with <var data-name="name">name</var> in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L199"><var data-name="argument">argument</var> must be defined.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L200">Let <var data-name="expectedType">expectedType</var> be the type of <var data-name="expectedArgument">expectedArgument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L201">Let <var data-name="type">type</var> be the type of <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L202"><var data-name="type">type</var> must be equal to <var data-name="expectedType">expectedType</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Type-Definition-Invalid.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L204"><a href="#sec-Type-Definition-Invalid.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L206-L211">Certain types (and directives) are reserved in composite schema specification for specific purposes and must adhere to the specification&rsquo;s definitions. For example, <code>FieldSelectionMap</code> is a built-in scalar that represents a selection of fields as a string. Redefining these built-in types with a different kind (e.g., an input object, enum, union, or object type) is disallowed and makes the composition invalid.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L213-L215">To ensure schema evolution and interoperability, directives may include additional arguments, provided that all required arguments defined by the specification are present.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L217-L218">This rule ensures that built-in types maintain their expected shapes and semantics so the composed schema can correctly interpret them.</p>
</section>
<section id="sec-Type-Definition-Invalid.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L220"><a href="#sec-Type-Definition-Invalid.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L222-L225">In the following counter-example, <code>FieldSelectionMap</code> is declared as an <code>input</code> type instead of the required <code>scalar</code>. This leads to a <code>TYPE_DEFINITION_INVALID</code> error because the defined scalar <code>FieldSelectionMap</code> is being overridden by an incompatible definition.</p>
<pre id="example-414cc" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L227-L233"><a href="#example-414cc">Counter Example № 47</a><code><span class="token keyword">directive</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>

<span class="token keyword">input</span> <span class="token object">FieldSelectionMap</span> <span class="token punctuation">{</span>
  <span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L235-L237">In the following example, the <code>@key</code> directive includes an additional argument, <code>futureArg</code>, which is not part of the specification. This is valid and allows the directive to evolve without breaking existing schemas.</p>
<pre id="example-53567" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L239-L244"><a href="#example-53567">Example № 48</a><code><span class="token keyword">directive</span> <span class="token directive function">@key</span><span class="token punctuation">(</span>
  <span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionSet</span><span class="token operator">!</span>
  <span class="token attr-name">futureArg</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">)</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">INTERFACE</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L246-L247">However, if the <code>@key</code> directive is defined without the required <code>fields</code> argument, as shown below, it results in a <code>TYPE_DEFINITION_INVALID</code> error.</p>
<pre id="example-1124a" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L249-L251"><a href="#example-1124a">Counter Example № 49</a><code><span class="token keyword">directive</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">futureArg</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">INTERFACE</span>
</code></pre>
</section>
</section>
<section id="sec-Query-Root-Type-Inaccessible" secid="3.1.1.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L253"><span class="spec-secid" title="link to this section"><a href="#sec-Query-Root-Type-Inaccessible">3.1.1.4</a></span>Query Root Type Inaccessible</h4>
<section id="sec-Query-Root-Type-Inaccessible.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L255"><a href="#sec-Query-Root-Type-Inaccessible.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L257"><code>QUERY_ROOT_TYPE_INACCESSIBLE</code></p>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L259"><a href="#sec-Query-Root-Type-Inaccessible.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L261">ERROR</p>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L263"><a href="#sec-Query-Root-Type-Inaccessible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L265">Let <var data-name="queryType">queryType</var> be the query operation type defined in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L266-L267">If <var data-name="queryType">queryType</var> is annotated with <code>@inaccessible</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L267">Produce a <code>QUERY_ROOT_TYPE_INACCESSIBLE</code> error.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L269"><a href="#sec-Query-Root-Type-Inaccessible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L271-L274">Every source schema that contributes to the final composite schema must expose a public (accessible) root query type. Marking the root query type as <code>@inaccessible</code> makes it invisible to the gateway, defeating its purpose as the primary entry point for queries and lookups.</p>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L276"><a href="#sec-Query-Root-Type-Inaccessible.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L278-L279">In this example, no <code>@inaccessible</code> annotation is applied to the query root, so the rule is satisfied.</p>
<pre id="example-c0dca" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L281-L294"><a href="#example-c0dca">Example № 50</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">Query</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">allBooks</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L296-L298">Since the schema marks the query root type as <code>@inaccessible</code>, the rule is violated. <code>QUERY_ROOT_TYPE_INACCESSIBLE</code> is raised because a schema&rsquo;s root query type cannot be hidden from consumers.</p>
<pre id="example-a894d" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L300-L313"><a href="#example-a894d">Counter Example № 51</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">Query</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">allBooks</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Root-Mutation-Used" secid="3.1.1.5">
<h4 data-source="spec/Section%204%20--%20Composition.md#L315"><span class="spec-secid" title="link to this section"><a href="#sec-Root-Mutation-Used">3.1.1.5</a></span>Root Mutation Used</h4>
<section id="sec-Root-Mutation-Used.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L317"><a href="#sec-Root-Mutation-Used.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L319"><code>ROOT_MUTATION_USED</code></p>
</section>
<section id="sec-Root-Mutation-Used.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L321"><a href="#sec-Root-Mutation-Used.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L323">ERROR</p>
</section>
<section id="sec-Root-Mutation-Used.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L325"><a href="#sec-Root-Mutation-Used.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L327-L328">Let <var data-name="rootMutation">rootMutation</var> be the root mutation type defined in the schema, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L329-L330">Let <var data-name="namedMutationType">namedMutationType</var> be the type with the name <code>Mutation</code> in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L331-L332">If <var data-name="rootMutation">rootMutation</var> is defined:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L332"><var data-name="rootMutation">rootMutation</var> must be named <code>Mutation</code>.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L333">Otherwise, <var data-name="namedMutationType">namedMutationType</var> must not be defined.</li>
</ul>
</section>
<section id="sec-Root-Mutation-Used.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L335"><a href="#sec-Root-Mutation-Used.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L337-L341">This rule enforces that, for any source schema, if a root mutation type is defined, it must be named <code>Mutation</code>. Defining a root mutation type with a name other than <code>Mutation</code> or using a differently named type alongside a type explicitly named <code>Mutation</code> creates inconsistencies in schema design and violates the composite schema specification.</p>
</section>
<section id="sec-Root-Mutation-Used.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L343"><a href="#sec-Root-Mutation-Used.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L345">Valid example:</p>
<pre id="example-b6c3a" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L347-L360"><a href="#example-b6c3a">Example № 52</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mutation</span><span class="token punctuation">:</span> <span class="token class-name">Mutation</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createProduct</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L362-L363">The following counter-example violates the rule because <code>RootMutation</code> is used as the root mutation type, but a type named <code>Mutation</code> is also defined.</p>
<pre id="example-a2861" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L365-L377"><a href="#example-a2861">Counter Example № 53</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mutation</span><span class="token punctuation">:</span> <span class="token class-name">RootMutation</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RootMutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createProduct</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">deprecatedField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Root-Query-Used" secid="3.1.1.6">
<h4 data-source="spec/Section%204%20--%20Composition.md#L379"><span class="spec-secid" title="link to this section"><a href="#sec-Root-Query-Used">3.1.1.6</a></span>Root Query Used</h4>
<section id="sec-Root-Query-Used.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L381"><a href="#sec-Root-Query-Used.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L383"><code>ROOT_QUERY_USED</code></p>
</section>
<section id="sec-Root-Query-Used.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L385"><a href="#sec-Root-Query-Used.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L387">ERROR</p>
</section>
<section id="sec-Root-Query-Used.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L389"><a href="#sec-Root-Query-Used.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L391">Let <var data-name="rootQuery">rootQuery</var> be the root query type defined in the schema, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L392-L393">Let <var data-name="namedQueryType">namedQueryType</var> be the type with the name <code>Query</code> in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L394-L395">If <var data-name="rootQuery">rootQuery</var> is defined:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L395"><var data-name="rootQuery">rootQuery</var> must be named <code>Query</code>.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L396">Otherwise, <var data-name="namedQueryType">namedQueryType</var> must not be defined.</li>
</ul>
</section>
<section id="sec-Root-Query-Used.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L398"><a href="#sec-Root-Query-Used.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L400-L404">This rule enforces that the root query type in any source schema must be named <code>Query</code>. Defining a root query type with a name other than <code>Query</code> or using a differently named type alongside a type explicitly named <code>Query</code> creates inconsistencies in schema design and violates the composite schema specification.</p>
</section>
<section id="sec-Root-Query-Used.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L406"><a href="#sec-Root-Query-Used.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L408">Valid example:</p>
<pre id="example-9d912" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L410-L423"><a href="#example-9d912">Example № 54</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">Query</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L425-L426">The following counter-example violates the rule because <code>RootQuery</code> is used as the root query type, but a type named <code>Query</code> is also defined.</p>
<pre id="example-17e1c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L428-L440"><a href="#example-17e1c">Counter Example № 55</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">RootQuery</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RootQuery</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">deprecatedField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Root-Subscription-Used" secid="3.1.1.7">
<h4 data-source="spec/Section%204%20--%20Composition.md#L442"><span class="spec-secid" title="link to this section"><a href="#sec-Root-Subscription-Used">3.1.1.7</a></span>Root Subscription Used</h4>
<section id="sec-Root-Subscription-Used.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L444"><a href="#sec-Root-Subscription-Used.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L446"><code>ROOT_SUBSCRIPTION_USED</code></p>
</section>
<section id="sec-Root-Subscription-Used.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L448"><a href="#sec-Root-Subscription-Used.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L450">ERROR</p>
</section>
<section id="sec-Root-Subscription-Used.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L452"><a href="#sec-Root-Subscription-Used.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L454-L455">Let <var data-name="rootSubscription">rootSubscription</var> be the root mutation type defined in the schema, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L456-L457">Let <var data-name="namedSubscriptionType">namedSubscriptionType</var> be the type with the name <code>Subscription</code> in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L458-L459">If <var data-name="rootSubscription">rootSubscription</var> is defined:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L459"><var data-name="rootSubscription">rootSubscription</var> must be named <code>Subscription</code>.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L460">Otherwise, <var data-name="namedSubscriptionType">namedSubscriptionType</var> must not be defined.</li>
</ul>
</section>
<section id="sec-Root-Subscription-Used.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L462"><a href="#sec-Root-Subscription-Used.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L464-L468">This rule enforces that, for any source schema, if a root subscription type is defined, it must be named <code>Subscription</code>. Defining a root subscription type with a name other than <code>Subscription</code> or using a differently named type alongside a type explicitly named <code>Subscription</code> creates inconsistencies in schema design and violates the composite schema specification.</p>
</section>
<section id="sec-Root-Subscription-Used.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L470"><a href="#sec-Root-Subscription-Used.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L472">Valid example:</p>
<pre id="example-9ffc3" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L474-L487"><a href="#example-9ffc3">Example № 56</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">subscription</span><span class="token punctuation">:</span> <span class="token class-name">Subscription</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productCreated</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L489-L491">The following counter-example violates the rule because <code>RootSubscription</code> is used as the root subscription type, but a type named <code>Subscription</code> is also defined.</p>
<pre id="example-4dbd7" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L493-L505"><a href="#example-4dbd7">Counter Example № 57</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">subscription</span><span class="token punctuation">:</span> <span class="token class-name">RootSubscription</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RootSubscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productCreated</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">deprecatedField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Source-Schemas.Validate-External-Directives" secid="3.1.2">
<h3 data-source="spec/Section%204%20--%20Composition.md#L507"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas.Validate-External-Directives">3.1.2</a></span>Validate External Directives</h3>
<section id="sec-External-Unused" secid="3.1.2.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L509"><span class="spec-secid" title="link to this section"><a href="#sec-External-Unused">3.1.2.1</a></span>External Unused</h4>
<section id="sec-External-Unused.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L511"><a href="#sec-External-Unused.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L513"><code>EXTERNAL_UNUSED</code></p>
</section>
<section id="sec-External-Unused.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L515"><a href="#sec-External-Unused.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L517">ERROR</p>
</section>
<section id="sec-External-Unused.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L519"><a href="#sec-External-Unused.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L521-L522">Let <var data-name="types">types</var> be the set of all composite types (object, interface) in the schema</li>
<li data-source="spec/Section%204%20--%20Composition.md#L523-L530">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L524">Let <var data-name="fields">fields</var> be the set of fields for <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L525-L530">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L526-L530">If <var data-name="field">field</var> is marked with <code>@external</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L527-L528">Let <var data-name="referencingFields">referencingFields</var> be the set of fields in <var data-name="schema">schema</var> that reference <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L529-L530"><var data-name="referencingFields">referencingFields</var> must contain at least one field that references <var data-name="field">field</var> in <code>@provides</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Unused.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L532"><a href="#sec-External-Unused.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L534-L535">This rule ensures that every field marked as <code>@external</code> in a source schema is actually used by that source schema in a <code>@provides</code> directive.</p>
</section>
<section id="sec-External-Unused.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L537"><a href="#sec-External-Unused.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L539-L540">In this example, the <code>name</code> field is marked with <code>@external</code> and is used by the <code>@provides</code> directive, satisfying the rule:</p>
<pre id="example-51c97" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L542-L552"><a href="#example-51c97">Example № 58</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productByName</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L554-L555">In this example, the <code>name</code> field is marked with <code>@external</code> but is not used by a <code>@provides</code> directive, violating the rule:</p>
<pre id="example-70e26" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L557-L563"><a href="#example-70e26">Counter Example № 59</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Collision-with-Another-Directive" secid="3.1.2.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L565"><span class="spec-secid" title="link to this section"><a href="#sec-External-Collision-with-Another-Directive">3.1.2.2</a></span>External Collision with Another Directive</h4>
<section id="sec-External-Collision-with-Another-Directive.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L567"><a href="#sec-External-Collision-with-Another-Directive.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L569"><code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code></p>
</section>
<section id="sec-External-Collision-with-Another-Directive.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L571"><a href="#sec-External-Collision-with-Another-Directive.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L573">ERROR</p>
</section>
<section id="sec-External-Collision-with-Another-Directive.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L575"><a href="#sec-External-Collision-with-Another-Directive.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L577">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L578">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L579-L585">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L580">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L581-L585">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L582-L585">If <var data-name="field">field</var> is annotated with <code>@external</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L583-L584">For each <var data-name="argument">argument</var> in <var data-name="field">field</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L584"><var data-name="argument">argument</var> must <strong>not</strong> be annotated with <code>@require</code></li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L585"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@provides</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Collision-with-Another-Directive.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L587"><a href="#sec-External-Collision-with-Another-Directive.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L589-L592">The <code>@external</code> directive indicates that a field is <strong>defined</strong> in a different source schema, and the current schema merely references it. Therefore, a field marked with <code>@external</code> must <strong>not</strong> simultaneously carry directives that assume local ownership or resolution responsibility, such as:</p>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L594-L596"><strong><code>@provides</code></strong>: Declares that the field can supply additional nested fields from the local schema, which conflicts with the notion of an external field whose definition resides elsewhere.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L598-L600"><strong><code>@require</code></strong>: Specifies dependencies on other fields to resolve this field. Since <code>@external</code> fields are not locally resolved, there is no need for <code>@require</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L602-L604"><strong><code>@override</code></strong>: Transfers ownership of the field&rsquo;s definition from one schema to another, which is incompatible with an already-external field definition. Yet this is covered by the <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code> rule.</li>
</ul>
<p data-source="spec/Section%204%20--%20Composition.md#L606-L608">Any combination of <code>@external</code> with either <code>@provides</code> or <code>@require</code> on the same field results in inconsistent semantics. In such scenarios, an <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error is raised.</p>
</section>
<section id="sec-External-Collision-with-Another-Directive.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L610"><a href="#sec-External-Collision-with-Another-Directive.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L612-L613">In this example, <code>method</code> is <strong>only</strong> annotated with <code>@external</code> in Schema B, without any other directive. This usage is valid.</p>
<pre id="example-f01cf" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L615-L628"><a href="#example-f01cf">Example № 60</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">method</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token comment"># This field is external, defined in Schema A.</span>
  <span class="token attr-name">method</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L630-L632">In this counter-example, <code>description</code> is annotated with <code>@external</code> and also with <code>@provides</code>. Because <code>@external</code> and <code>@provides</code> cannot co-exist on the same field, an <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error is produced.</p>
<pre id="example-3b199" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L634-L646"><a href="#example-3b199">Counter Example № 61</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Invoice</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Invoice</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"length"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L648-L650">The following example is invalid, since <code>title</code> is marked with both <code>@external</code> and has an argument that is annotated with <code>@require</code>. This conflict leads to an <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error.</p>
<pre id="example-a73b2" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L652-L665"><a href="#example-a73b2">Counter Example № 62</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">subtitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">title</span><span class="token punctuation">(</span><span class="token attr-name">subtitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"subtitle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-on-Interface" secid="3.1.2.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L667"><span class="spec-secid" title="link to this section"><a href="#sec-External-on-Interface">3.1.2.3</a></span>External on Interface</h4>
<section id="sec-External-on-Interface.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L669"><a href="#sec-External-on-Interface.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L671"><code>EXTERNAL_ON_INTERFACE</code></p>
</section>
<section id="sec-External-on-Interface.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L673"><a href="#sec-External-on-Interface.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L675">ERROR</p>
</section>
<section id="sec-External-on-Interface.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L677"><a href="#sec-External-on-Interface.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L679">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L680">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L681-L685">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L682-L685">If <var data-name="type">type</var> is an interface type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L683">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L684-L685">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L685"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@external</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-on-Interface.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L687"><a href="#sec-External-on-Interface.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L689-L696">The <code>@external</code> directive indicates that a field is <strong>defined</strong> and <strong>resolved</strong> elsewhere, not in the current schema. In the case of an <strong>interface</strong> type, fields are <strong>abstract</strong> - they do not have direct resolutions at the interface level. Instead, each implementing object type provides the concrete field implementations. Marking an <strong>interface</strong> field with <code>@external</code> is therefore nonsensical, as there is no actual field resolution in the interface itself to &ldquo;borrow&rdquo; from another schema. Such usage raises an <code>EXTERNAL_ON_INTERFACE</code> error.</p>
</section>
<section id="sec-External-on-Interface.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L698"><a href="#sec-External-on-Interface.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L700-L702">Here, the interface <code>Node</code> merely describes the field <code>id</code>. Object types <code>User</code> and <code>Product</code> implement and resolve <code>id</code>. No <code>@external</code> usage occurs on the interface itself, so no error is triggered.</p>
<pre id="example-35150" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L704-L718"><a href="#example-35150">Example № 63</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L720-L723">Since <code>id</code> is declared on an <strong>interface</strong> and marked with <code>@external</code>, the composition fails with <code>EXTERNAL_ON_INTERFACE</code>. An interface does not own the concrete field resolution, so it is invalid to mark any of its fields as external.</p>
<pre id="example-20eaa" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L725-L729"><a href="#example-20eaa">Counter Example № 64</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-is-Directive" secid="3.1.3">
<h3 data-source="spec/Section%204%20--%20Composition.md#L731"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-is-Directive">3.1.3</a></span>Validate `@is` Directive</h3>
<section id="sec-Is-Invalid-Syntax" secid="3.1.3.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L733"><span class="spec-secid" title="link to this section"><a href="#sec-Is-Invalid-Syntax">3.1.3.1</a></span>Is Invalid Syntax</h4>
<section id="sec-Is-Invalid-Syntax.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L735"><a href="#sec-Is-Invalid-Syntax.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L737"><code>IS_INVALID_SYNTAX</code></p>
</section>
<section id="sec-Is-Invalid-Syntax.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L739"><a href="#sec-Is-Invalid-Syntax.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L741">ERROR</p>
</section>
<section id="sec-Is-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L743"><a href="#sec-Is-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L745-L746">Let <var data-name="types">types</var> be the set of all <span class="spec-nt"><span data-name="INTERFACE">INTERFACE</span></span> and <span class="spec-nt"><span data-name="OBJECT">OBJECT</span></span> types in the source schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L747-L754">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L748">Let <var data-name="fields">fields</var> be the set of all lookup fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L749">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L750-L754">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L751-L754">If <var data-name="argument">argument</var> is annotated with <code>@is</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L752-L753">Let <var data-name="fieldArg">fieldArg</var> be the string value of the <code>field</code> argument of the <code>@is</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L754"><var data-name="fieldArg">fieldArg</var> must be be parsable as a valid <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Is-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L756"><a href="#sec-Is-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L758-L761">The <code>@is</code> directive&rsquo;s <code>field</code> argument must be syntactically valid GraphQL. If the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> string is malformed (e.g., missing closing braces, unbalanced quotes, invalid tokens), then the schema cannot be composed correctly. In such cases, the error <code>IS_INVALID_SYNTAX</code> is raised.</p>
</section>
<section id="sec-Is-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L763"><a href="#sec-Is-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L765-L766">In the following example, the <code>@is</code> directive&rsquo;s <code>field</code> argument is a valid <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> and satisfies the rule.</p>
<pre id="example-277fd" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L768-L777"><a href="#example-277fd">Example № 65</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L779-L780">In the following counter-example, the <code>@is</code> directive&rsquo;s <code>field</code> argument has invalid syntax because it is missing a closing brace.</p>
<pre id="example-f3dda" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L782-L791"><a href="#example-f3dda">Counter Example № 66</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Is-Invalid-Field-Type" secid="3.1.3.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L793"><span class="spec-secid" title="link to this section"><a href="#sec-Is-Invalid-Field-Type">3.1.3.2</a></span>Is Invalid Field Type</h4>
<section id="sec-Is-Invalid-Field-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L795"><a href="#sec-Is-Invalid-Field-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L797"><code>IS_INVALID_FIELD_TYPE</code></p>
</section>
<section id="sec-Is-Invalid-Field-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L799"><a href="#sec-Is-Invalid-Field-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L801">ERROR</p>
</section>
<section id="sec-Is-Invalid-Field-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L803"><a href="#sec-Is-Invalid-Field-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L805">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L806">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L807-L816">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L808">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L809">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L810-L816">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L811-L812">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@is</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L812">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L813-L814">Let <var data-name="fieldArg">fieldArg</var> be the value of the <code>field</code> argument of the <code>@is</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L815-L816">If <var data-name="fieldArg">fieldArg</var> is <strong>not</strong> a string:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L816">Produce an <code>IS_INVALID_FIELD_TYPE</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Is-Invalid-Field-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L818"><a href="#sec-Is-Invalid-Field-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L820-L824">When using the <code>@is</code> directive, the <code>field</code> argument must always be a string that describes how the arguments can be mapped from the entity type that the lookup field resolves. If the <code>field</code> argument is provided as a type other than a string (such as an integer, boolean, or enum), the directive usage is invalid and will cause schema composition to fail.</p>
</section>
<section id="sec-Is-Invalid-Field-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L826"><a href="#sec-Is-Invalid-Field-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L828-L829">In the following example, the <code>@is</code> directive&rsquo;s <code>field</code> argument is a valid string and satisfies the rule.</p>
<pre id="example-d6610" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L831-L840"><a href="#example-d6610">Example № 67</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L842-L843">Since <code>field</code> is set to <code>123</code> (an integer) instead of a string, this violates the rule and triggers an <code>IS_INVALID_FIELD_TYPE</code> error.</p>
<pre id="example-25cc4" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L845-L854"><a href="#example-25cc4">Counter Example № 68</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Is-Invalid-Usage" secid="3.1.3.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L856"><span class="spec-secid" title="link to this section"><a href="#sec-Is-Invalid-Usage">3.1.3.3</a></span>Is Invalid Usage</h4>
<section id="sec-Is-Invalid-Usage.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L858"><a href="#sec-Is-Invalid-Usage.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L860"><code>IS_INVALID_USAGE</code></p>
</section>
<section id="sec-Is-Invalid-Usage.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L862"><a href="#sec-Is-Invalid-Usage.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L864">ERROR</p>
</section>
<section id="sec-Is-Invalid-Usage.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L866"><a href="#sec-Is-Invalid-Usage.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L868">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L869">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L870-L877">For each <var data-name="compositeType">compositeType</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L871">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="compositeType">compositeType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L872-L877">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L873">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L874-L877">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L875-L876">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@is</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L876">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L877"><var data-name="field">field</var> must be annotated with <code>@lookup</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Is-Invalid-Usage.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L879"><a href="#sec-Is-Invalid-Usage.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L881-L882">When using the <code>@is</code> directive, the field declaring the argument must be a lookup field (i.e. have the <code>@lookup</code> directive applied).</p>
</section>
<section id="sec-Is-Invalid-Usage.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L884"><a href="#sec-Is-Invalid-Usage.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L886-L887">In the following example, the <code>@is</code> directive is applied to an argument declared on a field with the <code>@lookup</code> directive, satisfying the rule.</p>
<pre id="example-ff827" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L889-L898"><a href="#example-ff827">Example № 69</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L900-L901">In the following counter-example, the <code>@is</code> directive is applied to an argument declared on a field without the <code>@lookup</code> directive, violating the rule.</p>
<pre id="example-a49c6" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L903-L912"><a href="#example-a49c6">Counter Example № 70</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Key-Directives" secid="3.1.4">
<h3 data-source="spec/Section%204%20--%20Composition.md#L914"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Key-Directives">3.1.4</a></span>Validate Key Directives</h3>
<section id="sec-Key-Fields-Select-Invalid-Type" secid="3.1.4.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L916"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Fields-Select-Invalid-Type">3.1.4.1</a></span>Key Fields Select Invalid Type</h4>
<section id="sec-Key-Fields-Select-Invalid-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L918"><a href="#sec-Key-Fields-Select-Invalid-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L920"><code>KEY_FIELDS_SELECT_INVALID_TYPE</code></p>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L922"><a href="#sec-Key-Fields-Select-Invalid-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L924">ERROR</p>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L926"><a href="#sec-Key-Fields-Select-Invalid-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L928-L929">Let <var data-name="types">types</var> be the set of all object or interface types that are annotated with the <code>@key</code> directive in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L930-L937">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L931">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L932-L937">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L933-L934">Let <var data-name="keyFields">keyFields</var> be the set of all fields (including nested) referenced by the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L935-L937">For each <var data-name="field">field</var> in <var data-name="keyFields">keyFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L936">Let <var data-name="fieldType">fieldType</var> be the type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L937"><var data-name="fieldType">fieldType</var> must not be a <code>List</code>, <code>Interface</code>, or <code>Union</code> type.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L939"><a href="#sec-Key-Fields-Select-Invalid-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L941-L945">The <code>@key</code> directive is used to define the set of fields that uniquely identify an entity. These fields must reference scalars or object types to ensure a valid and consistent representation of the entity across schemas. Fields of types <code>List</code>, <code>Interface</code>, or <code>Union</code> cannot be part of a <code>@key</code> because they do not have a well-defined unique value.</p>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L947"><a href="#sec-Key-Fields-Select-Invalid-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L949-L950">In this valid example, the <code>Product</code> type has a valid <code>@key</code> directive referencing the scalar field <code>sku</code>.</p>
<pre id="example-110ef" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L952-L957"><a href="#example-110ef">Example № 71</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L959-L961">In the following counter-example, the <code>Product</code> type has an invalid <code>@key</code> directive referencing a field (<code>featuredItem</code>) whose type is an interface, violating the rule.</p>
<pre id="example-76a99" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L963-L972"><a href="#example-76a99">Counter Example № 72</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"featuredItem { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L974-L975">In this counter example, the <code>@key</code> directive references a field (<code>tags</code>) of type <code>List</code>, which is also not allowed.</p>
<pre id="example-f52f6" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L977-L982"><a href="#example-f52f6">Counter Example № 73</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L984-L985">In this counter example, the <code>@key</code> directive references a field (<code>relatedItems</code>) of type <code>Union</code>, which violates the rule.</p>
<pre id="example-4a122" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L987-L998"><a href="#example-4a122">Counter Example № 74</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"relatedItems"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">relatedItems</span><span class="token punctuation">:</span> <span class="token class-name">Related</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Related</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Service</span>

<span class="token keyword">type</span> <span class="token class-name">Service</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Directive-in-Fields-Argument" secid="3.1.4.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1000"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Directive-in-Fields-Argument">3.1.4.2</a></span>Key Directive in Fields Argument</h4>
<section id="sec-Key-Directive-in-Fields-Argument.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1002"><a href="#sec-Key-Directive-in-Fields-Argument.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1004"><code>KEY_DIRECTIVE_IN_FIELDS_ARGUMENT</code></p>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1006"><a href="#sec-Key-Directive-in-Fields-Argument.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1008">ERROR</p>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1010"><a href="#sec-Key-Directive-in-Fields-Argument.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1012">Let <var data-name="types">types</var> be the set of all object and interface types in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1013-L1018">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1014">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1015-L1018">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1016-L1017">Let <var data-name="fields">fields</var> be the string value of the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1018"><var data-name="fields">fields</var> must not contain a directive application.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1020"><a href="#sec-Key-Directive-in-Fields-Argument.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1022-L1025">The <code>@key</code> directive specifies the set of fields used to uniquely identify an entity. The <code>fields</code> argument must consist of a valid GraphQL selection set that does not include any directive applications. Directives in the <code>fields</code> argument are not supported.</p>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1027"><a href="#sec-Key-Directive-in-Fields-Argument.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1029-L1030">In this example, the <code>fields</code> argument of the <code>@key</code> directive does not include any directive applications, satisfying the rule.</p>
<pre id="example-73ed9" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1032-L1037"><a href="#example-73ed9">Example № 75</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1039-L1040">In this counter-example, the <code>fields</code> argument of the <code>@key</code> directive includes a directive application <code>@lowercase</code>, which is not allowed.</p>
<pre id="example-5a41e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1042-L1049"><a href="#example-5a41e">Counter Example № 76</a><code><span class="token keyword">directive</span> <span class="token directive function">@lowercase</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name @lowercase"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1051-L1052">In this example, the <code>fields</code> argument includes a directive application <code>@lowercase</code> nested inside the selection set, which is also invalid.</p>
<pre id="example-6873f" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1054-L1066"><a href="#example-6873f">Counter Example № 77</a><code><span class="token keyword">directive</span> <span class="token directive function">@lowercase</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name { firstName @lowercase }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token class-name">FullName</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
  <span class="token attr-name">firstName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Fields-Has-Arguments" secid="3.1.4.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1068"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Fields-Has-Arguments">3.1.4.3</a></span>Key Fields Has Arguments</h4>
<section id="sec-Key-Fields-Has-Arguments.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1070"><a href="#sec-Key-Fields-Has-Arguments.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1072"><code>KEY_FIELDS_HAS_ARGUMENTS</code></p>
</section>
<section id="sec-Key-Fields-Has-Arguments.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1074"><a href="#sec-Key-Fields-Has-Arguments.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1076">ERROR</p>
</section>
<section id="sec-Key-Fields-Has-Arguments.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1078"><a href="#sec-Key-Fields-Has-Arguments.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1080-L1081">Let <var data-name="types">types</var> be the set of all object types that are annotated with the <code>@key</code> directive in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1082-L1086">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1083-L1084">Let <var data-name="keyFields">keyFields</var> be the set of fields referenced by the <code>fields</code> argument of the <code>@key</code> directive on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1085-L1086">For each <var data-name="field">field</var> in <var data-name="keyFields">keyFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1086">HasKeyFieldsArguments(field) must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="HasKeyFieldsArguments()" data-source="spec/Section%204%20--%20Composition.md#L1088-L1096">
<span class="spec-call"><a href="#HasKeyFieldsArguments()" data-name="HasKeyFieldsArguments">HasKeyFieldsArguments</a>(<var data-name="field">field</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1090-L1091">If <var data-name="field">field</var> has arguments:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1091">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1092-L1095">If <var data-name="field">field</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1093">Let <var data-name="subFields">subFields</var> be the set of all fields in the selection set of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1094-L1095">For each <var data-name="subField">subField</var> in <var data-name="subFields">subFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1095">HasKeyFieldsArguments(subField) must be true.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1096">return true</li>
</ol>
</div>
</section>
<section id="sec-Key-Fields-Has-Arguments.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1098"><a href="#sec-Key-Fields-Has-Arguments.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1100-L1104">The <code>@key</code> directive is used to define the set of fields that uniquely identify an entity. These fields must not include any field that is defined with arguments, as arguments introduce variability that prevents consistent and valid entity resolution across schemas. Fields included in the <code>fields</code> argument of the <code>@key</code> directive must be static and consistently resolvable.</p>
</section>
<section id="sec-Key-Fields-Has-Arguments.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1106"><a href="#sec-Key-Fields-Has-Arguments.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1108-L1109">In this example, the <code>User</code> type has a valid <code>@key</code> directive that references the argument-free fields <code>id</code> and <code>name</code>.</p>
<pre id="example-5ab80" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1111-L1117"><a href="#example-5ab80">Example № 78</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1119-L1120">In this counter-example, the <code>@key</code> directive references a field (<code>tags</code>) that is defined with arguments (<code>limit</code>), which is not allowed.</p>
<pre id="example-959e5" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1122-L1127"><a href="#example-959e5">Counter Example № 79</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id tags"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">(</span><span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Invalid-Syntax" secid="3.1.4.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1129"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Invalid-Syntax">3.1.4.4</a></span>Key Invalid Syntax</h4>
<section id="sec-Key-Invalid-Syntax.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1131"><a href="#sec-Key-Invalid-Syntax.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1133"><code>KEY_INVALID_SYNTAX</code></p>
</section>
<section id="sec-Key-Invalid-Syntax.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1135"><a href="#sec-Key-Invalid-Syntax.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1137">ERROR</p>
</section>
<section id="sec-Key-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1139"><a href="#sec-Key-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1141">Let <var data-name="types">types</var> be the set of all object or interface types in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1142-L1149">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1143">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1144-L1149">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1145-L1146">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1147">Attempt to parse <var data-name="fieldsArg">fieldsArg</var> as a valid GraphQL selection set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1148-L1149">Parsing must <strong>not</strong> fail (e.g., missing braces, invalid tokens, unbalanced curly braces, or other syntax errors).</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1151"><a href="#sec-Key-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1153-L1157">Each <code>@key</code> directive must specify the fields that uniquely identify an entity using a valid GraphQL selection set in its <code>fields</code> argument. If the <code>fields</code> argument string is syntactically incorrect-missing closing braces, containing invalid tokens, or otherwise malformed &ndash; it cannot be composed into a valid schema and triggers the <code>KEY_INVALID_SYNTAX</code> error.</p>
</section>
<section id="sec-Key-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1159"><a href="#sec-Key-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1161-L1163">In this valid scenario, the <code>fields</code> argument is a correctly formed selection set: <code>"sku featuredItem { id }"</code> is properly balanced and contains no syntax errors.</p>
<pre id="example-e08e6" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1165-L1174"><a href="#example-e08e6">Example № 80</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku featuredItem { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1176-L1177">Here, the selection set <code>"featuredItem { id"</code> is missing the closing brace <code>}</code>. It is thus invalid syntax, causing a <code>KEY_INVALID_SYNTAX</code> error.</p>
<pre id="example-f764a" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1179-L1188"><a href="#example-f764a">Counter Example № 81</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"featuredItem { id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Invalid-Fields" secid="3.1.4.5">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1190"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Invalid-Fields">3.1.4.5</a></span>Key Invalid Fields</h4>
<section id="sec-Key-Invalid-Fields.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1192"><a href="#sec-Key-Invalid-Fields.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1194"><code>KEY_INVALID_FIELDS</code></p>
</section>
<section id="sec-Key-Invalid-Fields.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1196"><a href="#sec-Key-Invalid-Fields.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1198">ERROR</p>
</section>
<section id="sec-Key-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1200"><a href="#sec-Key-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1202">Let <var data-name="types">types</var> be the set of all object and interface types in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1203-L1210">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1204">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1205-L1210">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1206-L1207">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1208">Let <var data-name="selections">selections</var> be the set of fields in the selection set of <var data-name="fieldsArg">fieldsArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1209-L1210">For each <var data-name="selection">selection</var> in <var data-name="selections">selections</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1210"><span class="spec-call"><a href="#IsValidKeyField()" data-name="IsValidKeyField">IsValidKeyField</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="IsValidKeyField()" data-source="spec/Section%204%20--%20Composition.md#L1212-L1221">
<span class="spec-call"><a href="#IsValidKeyField()" data-name="IsValidKeyField">IsValidKeyField</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1214-L1215">If <var data-name="selection">selection</var> is not defined on <var data-name="type">type</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1215">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1216-L1220">If <var data-name="selection">selection</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1217">Let <var data-name="subType">subType</var> be the return type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1218">Let <var data-name="subFields">subFields</var> be the set of all fields in the selection set of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1219-L1220">For each <var data-name="subField">subField</var> in <var data-name="subFields">subFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1220"><span class="spec-call"><a href="#IsValidKeyField()" data-name="IsValidKeyField">IsValidKeyField</a>(<var data-name="subField">subField</var>, <var data-name="subType">subType</var>)</span> must be true.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1221">return true</li>
</ol>
</div>
</section>
<section id="sec-Key-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1223"><a href="#sec-Key-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1225-L1230">Even if the selection set for <code>@key(fields: "…")</code> is syntactically valid, field references within that selection set must also refer to <strong>actual</strong> fields on the annotated type. This includes nested selections, which must appear on the corresponding return type. If any referenced field is missing or incorrectly named, composition fails with a <code>KEY_INVALID_FIELDS</code> error because the entity key cannot be resolved correctly.</p>
</section>
<section id="sec-Key-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1232"><a href="#sec-Key-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1234-L1235">In this valid example, the <code>fields</code> argument of the <code>@key</code> directive is properly defined with valid syntax and references existing fields.</p>
<pre id="example-ddbd0" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1237-L1246"><a href="#example-ddbd0">Example № 82</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku featuredItem { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1248-L1249">In this counter-example, the <code>fields</code> argument of the <code>@key</code> directive references a field <code>id</code>, which does not exist on the <code>Product</code> type.</p>
<pre id="example-4f50b" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1251-L1255"><a href="#example-4f50b">Counter Example № 83</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Invalid-Fields-Type" secid="3.1.4.6">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1257"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Invalid-Fields-Type">3.1.4.6</a></span>Key Invalid Fields Type</h4>
<section id="sec-Key-Invalid-Fields-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1259"><a href="#sec-Key-Invalid-Fields-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1261"><code>KEY_INVALID_FIELDS_TYPE</code></p>
</section>
<section id="sec-Key-Invalid-Fields-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1263"><a href="#sec-Key-Invalid-Fields-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1265">ERROR</p>
</section>
<section id="sec-Key-Invalid-Fields-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1267"><a href="#sec-Key-Invalid-Fields-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1269">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1270">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1271-L1275">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1272-L1275">If <var data-name="type">type</var> is annotated with <code>@key</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1273-L1274">Let <var data-name="fieldsArg">fieldsArg</var> be the value of the <code>fields</code> argument in the <code>@key</code> directive.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1275"><var data-name="fieldsArg">fieldsArg</var> must be a string.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Invalid-Fields-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1277"><a href="#sec-Key-Invalid-Fields-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1279-L1283">The <code>@key</code> directive designates the fields used to identify a particular object uniquely. The <code>fields</code> argument accepts a <strong>string</strong> that represents a selection set (for example, <code>"id"</code>, or <code>"id otherField"</code>). If the <code>fields</code> argument is provided as any non-string type (e.g., <code>Boolean</code>, <code>Int</code>, <code>Array</code>), the schema fails to compose correctly because it cannot parse a valid field selection.</p>
</section>
<section id="sec-Key-Invalid-Fields-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1285"><a href="#sec-Key-Invalid-Fields-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1287-L1289">In this example, the <code>@key</code> directive&rsquo;s <code>fields</code> argument is the string <code>"id uuid"</code>, identifying two fields that form the object key. This usage is valid.</p>
<pre id="example-0025a" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1291-L1301"><a href="#example-0025a">Example № 84</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id uuid"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">uuid</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1303-L1305">Here, the <code>fields</code> argument is provided as a boolean (<code>true</code>) instead of a string. This violates the directive requirement and triggers a <code>KEY_INVALID_FIELDS_TYPE</code> error.</p>
<pre id="example-60ed5" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1307-L1311"><a href="#example-60ed5">Counter Example № 85</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Lookup-Directives" secid="3.1.5">
<h3 data-source="spec/Section%204%20--%20Composition.md#L1313"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Lookup-Directives">3.1.5</a></span>Validate Lookup Directives</h3>
<section id="sec-Lookup-Returns-Non-Nullable-Type" secid="3.1.5.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1315"><span class="spec-secid" title="link to this section"><a href="#sec-Lookup-Returns-Non-Nullable-Type">3.1.5.1</a></span>Lookup Returns Non-Nullable Type</h4>
<section id="sec-Lookup-Returns-Non-Nullable-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1317"><a href="#sec-Lookup-Returns-Non-Nullable-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1319"><code>LOOKUP_RETURNS_NON_NULLABLE_TYPE</code></p>
</section>
<section id="sec-Lookup-Returns-Non-Nullable-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1321"><a href="#sec-Lookup-Returns-Non-Nullable-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1323">WARNING</p>
</section>
<section id="sec-Lookup-Returns-Non-Nullable-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1325"><a href="#sec-Lookup-Returns-Non-Nullable-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1327">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1328-L1329">Let <var data-name="fields">fields</var> be the set of all field definitions annotated with <code>@lookup</code> in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1330-L1332">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1331">Let <var data-name="type">type</var> be the return type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1332"><var data-name="type">type</var> must be a nullable type.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Lookup-Returns-Non-Nullable-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1334"><a href="#sec-Lookup-Returns-Non-Nullable-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1336-L1341">Fields annotated with the <code>@lookup</code> directive are intended to retrieve a single entity based on provided arguments. To properly handle cases where the requested entity does not exist, such fields should have a nullable return type. This allows the field to return <code>null</code> when an entity matching the provided criteria is not found, following the standard GraphQL practices for representing missing data.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1343-L1348">In a distributed system, it is likely that some entities will not be found on other schemas, even when those schemas contribute fields to the type. Ensuring that <code>@lookup</code> fields have nullable return types also avoids GraphQL errors on schemas and prevents result erasure through non-null propagation. By allowing null to be returned when an entity is not found, the system can gracefully handle missing data without causing exceptions or unexpected behavior.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1350-L1352">Ensuring that <code>@lookup</code> fields have nullable return types allows gateways to distinguish between cases where an entity is not found (receiving null) and other error conditions that may have to be propagated to the client.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1354">For example, the following usage is recommended:</p>
<pre id="example-d9d20" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1356-L1365"><a href="#example-d9d20">Example № 86</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">userById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1367-L1368">In this example, <code>userById</code> returns a nullable <code>User</code> type, aligning with the recommendation.</p>
</section>
<section id="sec-Lookup-Returns-Non-Nullable-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1370"><a href="#sec-Lookup-Returns-Non-Nullable-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1372">This counter-example demonstrates an invalid usage:</p>
<pre id="example-9c997" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1374-L1383"><a href="#example-9c997">Counter Example № 87</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">userById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1385-L1386">Here, <code>userById</code> returns a non-nullable <code>User!</code>, which does not align with the recommendation that a <code>@lookup</code> field should have a nullable return type.</p>
</section>
</section>
<section id="sec-Lookup-Returns-List" secid="3.1.5.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1388"><span class="spec-secid" title="link to this section"><a href="#sec-Lookup-Returns-List">3.1.5.2</a></span>Lookup Returns List</h4>
<section id="sec-Lookup-Returns-List.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1390"><a href="#sec-Lookup-Returns-List.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1392"><code>LOOKUP_RETURNS_LIST</code></p>
</section>
<section id="sec-Lookup-Returns-List.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1394"><a href="#sec-Lookup-Returns-List.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1396">ERROR</p>
</section>
<section id="sec-Lookup-Returns-List.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1398"><a href="#sec-Lookup-Returns-List.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1400">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1401-L1402">Let <var data-name="fields">fields</var> be the set of all field definitions annotated with <code>@lookup</code> in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1403-L1405">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1404">Let <var data-name="type">type</var> be the return type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1405"><span class="spec-call"><a href="#IsListType()" data-name="IsListType">IsListType</a>(<var data-name="type">type</var>)</span> must be false.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="IsListType()" data-source="spec/Section%204%20--%20Composition.md#L1407-L1415">
<span class="spec-call"><a href="#IsListType()" data-name="IsListType">IsListType</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1409-L1411">If <var data-name="type">type</var> is a Non-Null type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1410">Let <var data-name="innerType">innerType</var> be the inner type of <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1411">Return <span class="spec-call"><a href="#IsListType()" data-name="IsListType">IsListType</a>(<var data-name="innerType">innerType</var>)</span>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1412-L1413">Else if <var data-name="type">type</var> is a List type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1413">Return true.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1414-L1415">Else:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1415">Return false.</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Lookup-Returns-List.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1417"><a href="#sec-Lookup-Returns-List.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1419-L1423">Fields annotated with the <code>@lookup</code> directive are intended to retrieve a single entity based on provided arguments. To avoid ambiguity in entity resolution, such fields must return a single object and not a list. This validation rule enforces that any field annotated with <code>@lookup</code> must have a return type that is <strong>NOT</strong> a list.</p>
</section>
<section id="sec-Lookup-Returns-List.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1425"><a href="#sec-Lookup-Returns-List.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1427">For example, the following usage is valid:</p>
<pre id="example-c37ca" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1429-L1438"><a href="#example-c37ca">Example № 88</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">userById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1440">In this example, <code>userById</code> returns a <code>User</code> object, satisfying the requirement.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1442">This counter-example demonstrates an invalid usage:</p>
<pre id="example-4471f" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1444-L1453"><a href="#example-4471f">Counter Example № 89</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">usersByIds</span><span class="token punctuation">(</span><span class="token attr-name">ids</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token operator">!</span><span class="token punctuation">]</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1455-L1456">Here, <code>usersByIds</code> returns a list of <code>User</code> objects, which violates the requirement that a <code>@lookup</code> field must return a single object.</p>
</section>
</section>
</section>
<section id="sec-Validate-Source-Schemas.Validate-Override-Directives" secid="3.1.6">
<h3 data-source="spec/Section%204%20--%20Composition.md#L1458"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas.Validate-Override-Directives">3.1.6</a></span>Validate Override Directives</h3>
<section id="sec-Override-from-Self" secid="3.1.6.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1460"><span class="spec-secid" title="link to this section"><a href="#sec-Override-from-Self">3.1.6.1</a></span>Override from Self</h4>
<section id="sec-Override-from-Self.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1462"><a href="#sec-Override-from-Self.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1464"><code>OVERRIDE_FROM_SELF</code></p>
</section>
<section id="sec-Override-from-Self.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1466"><a href="#sec-Override-from-Self.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1468">ERROR</p>
</section>
<section id="sec-Override-from-Self.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1470"><a href="#sec-Override-from-Self.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1472">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1473">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1474-L1480">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1475">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1476-L1480">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1477-L1480">If <var data-name="field">field</var> is annotated with <code>@override</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1478-L1479">Let <var data-name="from">from</var> be the value of the <code>from</code> argument of the <code>@override</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1480"><var data-name="from">from</var> must <strong>not</strong> be the same as the name of <var data-name="schema">schema</var>:</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-from-Self.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1482"><a href="#sec-Override-from-Self.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1484-L1488">When using <code>@override</code>, the <code>from</code> argument indicates the name of the source schema that originally owns the field. Overriding from the <strong>same</strong> schema creates a contradiction, as it implies both local and transferred ownership of the field within one schema. If the <code>from</code> value matches the local schema name, it triggers an <code>OVERRIDE_FROM_SELF</code> error.</p>
</section>
<section id="sec-Override-from-Self.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1490"><a href="#sec-Override-from-Self.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1492-L1493">In the following example, <strong>Schema B</strong> overrides the field <code>amount</code> from <strong>Schema A</strong>. The two schema names are different, so no error is raised.</p>
<pre id="example-1c62b" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1495-L1507"><a href="#example-1c62b">Example № 90</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1509-L1511">In the following counter-example, the local schema is also <code>"SchemaA"</code>, and the <code>from</code> argument is <code>"SchemaA"</code>. Overriding a field from the same schema is not allowed, causing an <code>OVERRIDE_FROM_SELF</code> error.</p>
<pre id="example-fa30e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1513-L1519"><a href="#example-fa30e">Counter Example № 91</a><code><span class="token comment"># Source Schema A (named "SchemaA")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Override-on-Interface" secid="3.1.6.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1521"><span class="spec-secid" title="link to this section"><a href="#sec-Override-on-Interface">3.1.6.2</a></span>Override on Interface</h4>
<section id="sec-Override-on-Interface.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1523"><a href="#sec-Override-on-Interface.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1525"><code>OVERRIDE_ON_INTERFACE</code></p>
</section>
<section id="sec-Override-on-Interface.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1527"><a href="#sec-Override-on-Interface.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1529">ERROR</p>
</section>
<section id="sec-Override-on-Interface.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1531"><a href="#sec-Override-on-Interface.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1533">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1534">Let <var data-name="types">types</var> be the set of all interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1535-L1538">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1536">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1537-L1538">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1538"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@override</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-on-Interface.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1540"><a href="#sec-Override-on-Interface.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1542-L1548">The <code>@override</code> directive designates that ownership of a field is transferred from one source schema to another. In the context of interface types, fields are abstract&mdash;objects that implement the interface are responsible for providing the actual fields. Consequently, it is invalid to attach <code>@override</code> directly to an interface field. Doing so leads to an <code>OVERRIDE_ON_INTERFACE</code> error because there is no concrete field implementation on the interface itself that can be overridden.</p>
</section>
<section id="sec-Override-on-Interface.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1550"><a href="#sec-Override-on-Interface.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1552-L1554">In this valid example, <code>@override</code> is used on a field of an object type, ensuring that the field definition is concrete and can be reassigned to another schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1556">Since <code>@override</code> is <strong>not</strong> used on any interface fields, no error is produced.</p>
<pre id="example-eed64" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1558-L1570"><a href="#example-eed64">Example № 92</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1572-L1575">In the following counter-example, <code>Bill.amount</code> is declared on an <strong>interface</strong> type and annotated with <code>@override</code>. This violates the rule because the interface field itself is not eligible for ownership transfer. The composition fails with an <code>OVERRIDE_ON_INTERFACE</code> error.</p>
<pre id="example-22325" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1577-L1583"><a href="#example-22325">Counter Example № 93</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaB"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Provides-Directives" secid="3.1.7">
<h3 data-source="spec/Section%204%20--%20Composition.md#L1585"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Provides-Directives">3.1.7</a></span>Validate Provides Directives</h3>
<section id="sec-Provides-Directive-in-Fields-Argument" secid="3.1.7.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1587"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Directive-in-Fields-Argument">3.1.7.1</a></span>Provides Directive in Fields Argument</h4>
<section id="sec-Provides-Directive-in-Fields-Argument.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1589"><a href="#sec-Provides-Directive-in-Fields-Argument.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1591"><code>PROVIDES_DIRECTIVE_IN_FIELDS_ARGUMENT</code></p>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1593"><a href="#sec-Provides-Directive-in-Fields-Argument.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1595">ERROR</p>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1597"><a href="#sec-Provides-Directive-in-Fields-Argument.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1599-L1600">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1601-L1605">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1602-L1603">Let <var data-name="fields">fields</var> be the selected fields of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1604-L1605">For each <var data-name="selection">selection</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1605"><span class="spec-call"><a href="#HasProvidesDirective()" data-name="HasProvidesDirective">HasProvidesDirective</a>(<var data-name="selection">selection</var>)</span> must be false</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="HasProvidesDirective()" data-source="spec/Section%204%20--%20Composition.md#L1607-L1615">
<span class="spec-call"><a href="#HasProvidesDirective()" data-name="HasProvidesDirective">HasProvidesDirective</a>(<var data-name="selection">selection</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1609-L1610">If <var data-name="selection">selection</var> has a directive application:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1610">return true</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1611-L1615">If <var data-name="selection">selection</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1612">Let <var data-name="subSelections">subSelections</var> be the selections in <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1613-L1615">For each <var data-name="subSelection">subSelection</var> in <var data-name="subSelections">subSelections</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1614-L1615">If <span class="spec-call"><a href="#HasProvidesDirective()" data-name="HasProvidesDirective">HasProvidesDirective</a>(<var data-name="subSelection">subSelection</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1615">return true</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1617"><a href="#sec-Provides-Directive-in-Fields-Argument.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1619-L1622">The <code>@provides</code> directive is used to specify the set of fields on an object type that a resolver provides for the parent type. The <code>fields</code> argument must consist of a valid GraphQL selection set without any directive applications, as directives within the <code>fields</code> argument are not supported.</p>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1624"><a href="#sec-Provides-Directive-in-Fields-Argument.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1626-L1627">In this example, the <code>fields</code> argument of the <code>@provides</code> directive does not have any directive applications, satisfying the rule.</p>
<pre id="example-77349" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1629-L1640"><a href="#example-77349">Example № 94</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1642-L1643">In this counter-example, the <code>fields</code> argument of the <code>@provides</code> directive has a directive application <code>@lowercase</code>, which is not allowed.</p>
<pre id="example-fa578" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1645-L1658"><a href="#example-fa578">Counter Example № 95</a><code><span class="token keyword">directive</span> <span class="token directive function">@lowercase</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name @lowercase"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Fields-Has-Arguments" secid="3.1.7.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1660"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Fields-Has-Arguments">3.1.7.2</a></span>Provides Fields Has Arguments</h4>
<section id="sec-Provides-Fields-Has-Arguments.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1662"><a href="#sec-Provides-Fields-Has-Arguments.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1664"><code>PROVIDES_FIELDS_HAS_ARGUMENTS</code></p>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1666"><a href="#sec-Provides-Fields-Has-Arguments.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1668">ERROR</p>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1670"><a href="#sec-Provides-Fields-Has-Arguments.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1672-L1673">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1674-L1679">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1675-L1676">Let <var data-name="selections">selections</var> be the field selections of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1677">Let <var data-name="type">type</var> be the return type of <var data-name="field">field</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1678-L1679">For each <var data-name="selection">selection</var> in <var data-name="selections">selections</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1679"><span class="spec-call"><a href="#ProvidesHasArguments()" data-name="ProvidesHasArguments">ProvidesHasArguments</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span> must be false</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="ProvidesHasArguments()" data-source="spec/Section%204%20--%20Composition.md#L1681-L1691">
<span class="spec-call"><a href="#ProvidesHasArguments()" data-name="ProvidesHasArguments">ProvidesHasArguments</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1683">Let <var data-name="field">field</var> be the field of <var data-name="type">type</var> selected by <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1684-L1685">If <var data-name="field">field</var> has arguments:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1685">return true</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1686-L1691">If <var data-name="selection">selection</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1687">Let <var data-name="subSelections">subSelections</var> be the selections in <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1688">Let <var data-name="subType">subType</var> be the return type of <var data-name="field">field</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1689-L1691">For each <var data-name="subSelection">subSelection</var> in <var data-name="subSelections">subSelections</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1690-L1691">If <span class="spec-call"><a href="#ProvidesHasArguments()" data-name="ProvidesHasArguments">ProvidesHasArguments</a>(<var data-name="subField">subField</var>, <var data-name="subSelection">subSelection</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1691">return true</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1693"><a href="#sec-Provides-Fields-Has-Arguments.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1695-L1698">The <code>@provides</code> directive specifies fields that a resolver provides for the parent type. The <code>fields</code> argument must reference fields that do not have arguments, as fields with arguments introduce variability that is incompatible with the consistent behavior expected of <code>@provides</code>.</p>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1700"><a href="#sec-Provides-Fields-Has-Arguments.Examples" title="link to this subsection">Examples</a></h6>
<pre id="example-59a88" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1702-L1712"><a href="#example-59a88">Example № 96</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Article</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1714-L1716">This violates the rule because the <code>tags</code> field referenced in the <code>fields</code> argument of the <code>@provides</code> directive is defined with arguments (<code>limit: UserType = ADMIN</code>).</p>
<pre id="example-f8a39" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1718-L1733"><a href="#example-f8a39">Counter Example № 97</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">(</span><span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token class-name">UserType</span> <span class="token operator">=</span> <span class="token constant">ADMIN</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">UserType</span> <span class="token punctuation">{</span>
  <span class="token constant">REGULAR</span>
  <span class="token constant">ADMIN</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Article</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Fields-Missing-External" secid="3.1.7.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1735"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Fields-Missing-External">3.1.7.3</a></span>Provides Fields Missing External</h4>
<section id="sec-Provides-Fields-Missing-External.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1737"><a href="#sec-Provides-Fields-Missing-External.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1739"><code>PROVIDES_FIELDS_MISSING_EXTERNAL</code></p>
</section>
<section id="sec-Provides-Fields-Missing-External.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1741"><a href="#sec-Provides-Fields-Missing-External.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1743">ERROR</p>
</section>
<section id="sec-Provides-Fields-Missing-External.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1745"><a href="#sec-Provides-Fields-Missing-External.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1747">Let <var data-name="objectTypes">objectTypes</var> be the set of all object types in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1748-L1756">For each <var data-name="objectType">objectType</var> in <var data-name="objectTypes">objectTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1749-L1750">Let <var data-name="providingFields">providingFields</var> be the set of fields on <var data-name="objectType">objectType</var> annotated with <code>@provides</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1751-L1756">For each <var data-name="field">field</var> in <var data-name="providingFields">providingFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1752-L1753">Let <var data-name="referencedFields">referencedFields</var> be the set of fields referenced by the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1754-L1756">For each <var data-name="referencedField">referencedField</var> in <var data-name="referencedFields">referencedFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1755-L1756">If <var data-name="referencedField">referencedField</var> is <strong>not</strong> marked as <code>@external</code><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1756">Produce a <code>PROVIDES_FIELDS_MISSING_EXTERNAL</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-Fields-Missing-External.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1758"><a href="#sec-Provides-Fields-Missing-External.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1760-L1764">The <code>@provides</code> directive indicates that an object type field will supply additional fields belonging to the return type in this execution-specific path. Any field listed in the <code>@provides(fields: ...)</code> argument must therefore be <em>external</em> in the local schema, meaning that the local schema itself does <strong>not</strong> provide it.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1766-L1768">This rule disallows selecting non-external fields in a <code>@provides</code> selection set. If a field is already provided by the same schema in all execution paths, there is no need to <code>@provide</code>.</p>
</section>
<section id="sec-Provides-Fields-Missing-External.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1770"><a href="#sec-Provides-Fields-Missing-External.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1772-L1775">Here, the <code>Order</code> type from this schema is providing fields on <code>User</code> through <code>@provides</code>. The <code>name</code> field of <code>User</code> is <strong>not</strong> defined in this schema; it is declared with <code>@external</code> indicating that the <code>name</code> field comes from elsewhere. Thus, referencing <code>name</code> under <code>@provides(fields: "name")</code> is valid.</p>
<pre id="example-854d4" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1777-L1787"><a href="#example-854d4">Example № 98</a><code><span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">customer</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1789-L1792">In this counter-example, <code>User.address</code> is <strong>not</strong> marked as <code>@external</code> in the same schema that applies <code>@provides</code>. This means the schema already provides the <code>address</code> field in all possible paths, so using <code>@provides(fields: "address")</code> is invalid.</p>
<pre id="example-ea819" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1794-L1804"><a href="#example-ea819">Counter Example № 99</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">address</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">buyer</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"address"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Invalid-Syntax" secid="3.1.7.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1806"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Invalid-Syntax">3.1.7.4</a></span>Provides Invalid Syntax</h4>
<section id="sec-Provides-Invalid-Syntax.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1808"><a href="#sec-Provides-Invalid-Syntax.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1810"><code>PROVIDES_INVALID_SYNTAX</code></p>
</section>
<section id="sec-Provides-Invalid-Syntax.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1812"><a href="#sec-Provides-Invalid-Syntax.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1814">ERROR</p>
</section>
<section id="sec-Provides-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1816"><a href="#sec-Provides-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1818-L1819">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1820-L1823">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1821-L1822">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1823"><var data-name="fieldsArg">fieldsArg</var> must be a valid selection set string</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1825"><a href="#sec-Provides-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1827-L1830">The <code>@provides</code> directive&rsquo;s <code>fields</code> argument must be a syntactically valid selection set string, as if you were selecting fields in a GraphQL query. If the selection set is malformed (e.g., missing braces, unbalanced quotes, or invalid tokens), the schema composition fails with a <code>PROVIDES_INVALID_SYNTAX</code> error.</p>
</section>
<section id="sec-Provides-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1832"><a href="#sec-Provides-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1834">Here, the <code>@provides</code> directive&rsquo;s <code>fields</code> argument is a valid selection set:</p>
<pre id="example-69105" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1836-L1846"><a href="#example-69105">Example № 100</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">address</span><span class="token punctuation">:</span> <span class="token class-name">Address</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"street city"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>
  <span class="token attr-name">street</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1848-L1850">In this counter-example, the <code>fields</code> argument is missing a closing brace. It cannot be parsed as a valid GraphQL selection set, triggering a <code>PROVIDES_INVALID_SYNTAX</code> error.</p>
<pre id="example-5e66d" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1852-L1857"><a href="#example-5e66d">Counter Example № 101</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">address</span><span class="token punctuation">:</span> <span class="token class-name">Address</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"{ street city "</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Invalid-Fields" secid="3.1.7.5">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1859"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Invalid-Fields">3.1.7.5</a></span>Provides Invalid Fields</h4>
<section id="sec-Provides-Invalid-Fields.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1861"><a href="#sec-Provides-Invalid-Fields.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1863"><code>PROVIDES_INVALID_FIELDS</code></p>
</section>
<section id="sec-Provides-Invalid-Fields.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1865"><a href="#sec-Provides-Invalid-Fields.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1867">ERROR</p>
</section>
<section id="sec-Provides-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1869"><a href="#sec-Provides-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1871">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1872-L1873">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1874-L1881">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1875-L1876">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1877-L1878">Let <var data-name="parsedFieldSelectionSet">parsedFieldSelectionSet</var> be the parsed field selection set from <var data-name="fieldsArg">fieldsArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1879">Let <var data-name="returnType">returnType</var> be the return type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1880-L1881"><span class="spec-call"><a href="#ValidateFieldSelectionSet()" data-name="ValidateFieldSelectionSet">ValidateFieldSelectionSet</a>(<var data-name="parsedFieldSelectionSet">parsedFieldSelectionSet</var>, <var data-name="returnType">returnType</var>)</span> must be true.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="ValidateFieldSelectionSet()" data-source="spec/Section%204%20--%20Composition.md#L1883-L1896">
<span class="spec-call"><a href="#ValidateFieldSelectionSet()" data-name="ValidateFieldSelectionSet">ValidateFieldSelectionSet</a>(<var data-name="fieldSelectionSet">fieldSelectionSet</var>, <var data-name="parentType">parentType</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1885-L1895">For each <var data-name="selection">selection</var> in <var data-name="fieldSelectionSet">fieldSelectionSet</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1886">Let <var data-name="selectedField">selectedField</var> be the field selected by <var data-name="selection">selection</var> in <var data-name="parentType">parentType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1887-L1888">If <var data-name="selectedField">selectedField</var> does not exist on <var data-name="parentType">parentType</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1888">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1889">Let <var data-name="selectedType">selectedType</var> be the type of <var data-name="selectedField">selectedField</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1890-L1895">If <var data-name="selectedType">selectedType</var> is an <span class="spec-nt"><span data-name="INTERFACE">INTERFACE</span></span> or <span class="spec-nt"><span data-name="OBJECT">OBJECT</span></span> type<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1891">Let <var data-name="subSelectionSet">subSelectionSet</var> be the field selection set of <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1892-L1893">If <var data-name="subSelectionSet">subSelectionSet</var> is empty<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1893">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1894-L1895">If <span class="spec-call"><a href="#ValidateFieldSelectionSet()" data-name="ValidateFieldSelectionSet">ValidateFieldSelectionSet</a>(<var data-name="subSelectionSet">subSelectionSet</var>, <var data-name="fieldType">fieldType</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1895">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1896">return true</li>
</ol>
</div>
</section>
<section id="sec-Provides-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1898"><a href="#sec-Provides-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1900-L1904">Even if the <code>@provides(fields: "…")</code> argument is well-formed syntactically, the selected fields must actually exist on the return type of the field. Invalid field references&mdash;e.g., selecting non-existent fields, referencing fields on the wrong type, or incorrectly omitting required nested selections&mdash;lead to a <code>PROVIDES_INVALID_FIELDS</code> error.</p>
</section>
<section id="sec-Provides-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1906"><a href="#sec-Provides-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1908-L1909">In the following example, the <code>@provides</code> directive references a valid field (<code>hobbies</code>) on the <code>UserDetails</code> type.</p>
<pre id="example-270d7" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1911-L1920"><a href="#example-270d7">Example № 102</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">UserDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"hobbies"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hobbies</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1922-L1924">In the following counter-example, the <code>@provides</code> directive specifies a field named <code>unknownField</code> which is not defined on <code>UserDetails</code>. This raises a <code>PROVIDES_INVALID_FIELDS</code> error.</p>
<pre id="example-a93fe" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1926-L1935"><a href="#example-a93fe">Counter Example № 103</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">UserDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"unknownField"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hobbies</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Invalid-Fields-Type" secid="3.1.7.6">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1937"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Invalid-Fields-Type">3.1.7.6</a></span>Provides Invalid Fields Type</h4>
<section id="sec-Provides-Invalid-Fields-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1939"><a href="#sec-Provides-Invalid-Fields-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1941"><code>PROVIDES_INVALID_FIELDS_TYPE</code></p>
</section>
<section id="sec-Provides-Invalid-Fields-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1943"><a href="#sec-Provides-Invalid-Fields-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1945">ERROR</p>
</section>
<section id="sec-Provides-Invalid-Fields-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1947"><a href="#sec-Provides-Invalid-Fields-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1949">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1950">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1951-L1957">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1952">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1953-L1957">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1954-L1957">If <var data-name="field">field</var> is annotated with <code>@provides</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1955-L1956">Let <var data-name="fieldsArg">fieldsArg</var> be the value of the <code>fields</code> argument on the <code>@provides</code> directive.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1957"><var data-name="fieldsArg">fieldsArg</var> must be a string.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-Invalid-Fields-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1959"><a href="#sec-Provides-Invalid-Fields-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1961-L1966">The <code>@provides</code> directive indicates that a field is <strong>providing</strong> one or more additional fields on the returned (child) type. The <code>fields</code> argument accepts a <strong>string</strong> representing a GraphQL selection set (for example, <code>"title author"</code>). If the <code>fields</code> argument is given as a non-string type (e.g., <code>Boolean</code>, <code>Int</code>, <code>Array</code>), the schema fails to compose because it cannot interpret a valid selection set.</p>
</section>
<section id="sec-Provides-Invalid-Fields-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1968"><a href="#sec-Provides-Invalid-Fields-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1970-L1972">In this valid example, the <code>@provides</code> directive on <code>details</code> uses the string <code>"features specifications"</code> to specify that both fields are provided in the child type <code>ProductDetails</code>.</p>
<pre id="example-1d352" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1974-L1988"><a href="#example-1d352">Example № 104</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">ProductDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"features specifications"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">features</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
  <span class="token attr-name">specifications</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">products</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Product</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1990-L1992">Here, the <code>@provides</code> directive includes a numeric value (<code>123</code>) instead of a string in its <code>fields</code> argument. This invalid usage raises a <code>PROVIDES_INVALID_FIELDS_TYPE</code> error.</p>
<pre id="example-d2d72" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1994-L2004"><a href="#example-d2d72">Counter Example № 105</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">ProductDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">features</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
  <span class="token attr-name">specifications</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-on-Non-Composite-Field" secid="3.1.7.7">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2006"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-on-Non-Composite-Field">3.1.7.7</a></span>Provides on Non-Composite Field</h4>
<section id="sec-Provides-on-Non-Composite-Field.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2008"><a href="#sec-Provides-on-Non-Composite-Field.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2010"><code>PROVIDES_ON_NON_COMPOSITE_FIELD</code></p>
</section>
<section id="sec-Provides-on-Non-Composite-Field.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2012"><a href="#sec-Provides-on-Non-Composite-Field.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2014">ERROR</p>
</section>
<section id="sec-Provides-on-Non-Composite-Field.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2016"><a href="#sec-Provides-on-Non-Composite-Field.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2018">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2019">Let <var data-name="types">types</var> be the set of all object and interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2020-L2026">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2021">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2022-L2026">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2023-L2026">If <var data-name="field">field</var> is annotated with <code>@provides</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2024-L2025">Let <var data-name="fieldType">fieldType</var> be the base return type of <var data-name="field">field</var> (i.e., unwrapped of any <code>[ ]</code> or <code>!</code>).</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2026"><var data-name="fieldType">fieldType</var> must be an interface or object type.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-on-Non-Composite-Field.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2028"><a href="#sec-Provides-on-Non-Composite-Field.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2030-L2035">The <code>@provides</code> directive allows a field to &ldquo;provide&rdquo; additional nested fields on the composite type it returns. If a field&rsquo;s base type is not an object or interface type (e.g., <code>String</code>, <code>Int</code>, <code>Boolean</code>, <code>Enum</code>, <code>Union</code>, or an <code>Input</code> type), it cannot hold nested fields for <code>@provides</code> to select. Consequently, attaching <code>@provides</code> to such a field is invalid and raises a <code>PROVIDES_ON_NON_COMPOSITE_FIELD</code> error.</p>
</section>
<section id="sec-Provides-on-Non-Composite-Field.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2037"><a href="#sec-Provides-on-Non-Composite-Field.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2039-L2040">Here, <code>profile</code> has an <strong>object</strong> base type <code>Profile</code>. The <code>@provides</code> directive can validly specify sub-fields like <code>settings { theme }</code>.</p>
<pre id="example-36e15" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2042-L2057"><a href="#example-36e15">Example № 106</a><code><span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">settings</span><span class="token punctuation">:</span> <span class="token class-name">Settings</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Settings</span> <span class="token punctuation">{</span>
  <span class="token attr-name">notificationsEnabled</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
  <span class="token attr-name">theme</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"settings { theme }"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2059-L2061">In this counter-example, <code>email</code> has a scalar base type (<code>String</code>). Because scalars do not expose sub-fields, attaching <code>@provides</code> to <code>email</code> triggers a <code>PROVIDES_ON_NON_COMPOSITE_FIELD</code> error.</p>
<pre id="example-6a7d1" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2063-L2068"><a href="#example-6a7d1">Counter Example № 107</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"length"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Source-Schemas.Validate-Require-Directives" secid="3.1.8">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2070"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas.Validate-Require-Directives">3.1.8</a></span>Validate Require Directives</h3>
<section id="sec-Require-Invalid-Syntax" secid="3.1.8.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2072"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Invalid-Syntax">3.1.8.1</a></span>Require Invalid Syntax</h4>
<section id="sec-Require-Invalid-Syntax.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2074"><a href="#sec-Require-Invalid-Syntax.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2076"><code>REQUIRE_INVALID_SYNTAX</code></p>
</section>
<section id="sec-Require-Invalid-Syntax.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2078"><a href="#sec-Require-Invalid-Syntax.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2080">ERROR</p>
</section>
<section id="sec-Require-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2082"><a href="#sec-Require-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2084">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in the schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2085-L2093">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2086">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2087">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2088-L2093">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2089-L2090">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2090">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2091-L2092">Let <var data-name="fieldArg">fieldArg</var> be the string value of the <code>field</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2093"><var data-name="fieldArg">fieldArg</var> must be be parsable as a valid selection map</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Require-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2095"><a href="#sec-Require-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2097-L2100">The <code>@require</code> directive&rsquo;s <code>field</code> argument must be syntactically valid GraphQL. If the selection map string is malformed (e.g., missing closing braces, unbalanced quotes, invalid tokens), then the schema cannot be composed correctly. In such cases, the error <code>REQUIRE_INVALID_SYNTAX</code> is raised.</p>
</section>
<section id="sec-Require-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2102"><a href="#sec-Require-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2104-L2105">In the following example, the <code>@require</code> directive&rsquo;s <code>field</code> argument is a valid selection map and satisfies the rule.</p>
<pre id="example-b116e" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2107-L2117"><a href="#example-b116e">Example № 108</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2119-L2120">In the following counter-example, the <code>@require</code> directive&rsquo;s <code>field</code> argument has invalid syntax because it is missing a closing brace.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2122">This violates the rule and triggers a <code>REQUIRE_INVALID_SYNTAX</code> error.</p>
<pre id="example-18a57" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2124-L2134"><a href="#example-18a57">Counter Example № 109</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Require-Invalid-Fields-Type" secid="3.1.8.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2136"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Invalid-Fields-Type">3.1.8.2</a></span>Require Invalid Fields Type</h4>
<section id="sec-Require-Invalid-Fields-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2138"><a href="#sec-Require-Invalid-Fields-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2140"><code>REQUIRE_INVALID_FIELD_TYPE</code></p>
</section>
<section id="sec-Require-Invalid-Fields-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2142"><a href="#sec-Require-Invalid-Fields-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2144">ERROR</p>
</section>
<section id="sec-Require-Invalid-Fields-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2146"><a href="#sec-Require-Invalid-Fields-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2148">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2149">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2150-L2159">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2151">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2152">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2153-L2159">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2154-L2155">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2155">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2156-L2157">Let <var data-name="fieldArg">fieldArg</var> be the value of the <code>field</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2158-L2159">If <var data-name="fieldArg">fieldArg</var> is <strong>not</strong> a string:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2159">Produce a <code>REQUIRE_INVALID_FIELD_TYPE</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Require-Invalid-Fields-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2161"><a href="#sec-Require-Invalid-Fields-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2163-L2167">When using the <code>@require</code> directive, the <code>field</code> argument must always be a string that defines a (potentially nested) selection set of fields from the same type. If the <code>field</code> argument is provided as a type other than a string (such as an integer, boolean, or enum), the directive usage is invalid and will cause schema composition to fail.</p>
</section>
<section id="sec-Require-Invalid-Fields-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2169"><a href="#sec-Require-Invalid-Fields-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2171-L2172">In the following example, the <code>@require</code> directive&rsquo;s <code>field</code> argument is a valid string and satisfies the rule.</p>
<pre id="example-3059f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2174-L2184"><a href="#example-3059f">Example № 110</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2186-L2187">Since <code>field</code> is set to <code>123</code> (an integer) instead of a string, this violates the rule and triggers a <code>REQUIRE_INVALID_FIELD_TYPE</code> error.</p>
<pre id="example-4aa97" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2189-L2199"><a href="#example-4aa97">Counter Example № 111</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Source-Schemas.Validate-Shareable-Directives" secid="3.1.9">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2201"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas.Validate-Shareable-Directives">3.1.9</a></span>Validate Shareable Directives</h3>
<section id="sec-Invalid-Shareable-Usage" secid="3.1.9.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2203"><span class="spec-secid" title="link to this section"><a href="#sec-Invalid-Shareable-Usage">3.1.9.1</a></span>Invalid Shareable Usage</h4>
<section id="sec-Invalid-Shareable-Usage.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2205"><a href="#sec-Invalid-Shareable-Usage.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2207"><code>INVALID_SHAREABLE_USAGE</code></p>
</section>
<section id="sec-Invalid-Shareable-Usage.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2209"><a href="#sec-Invalid-Shareable-Usage.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2211">ERROR</p>
</section>
<section id="sec-Invalid-Shareable-Usage.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2213"><a href="#sec-Invalid-Shareable-Usage.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2215">Let <var data-name="schema">schema</var> be the source schema to validate.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2216">Let <var data-name="types">types</var> be the set of types defined in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2217-L2225">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2218-L2221">If <var data-name="type">type</var> is an interface type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2219-L2221">For each field definition <var data-name="field">field</var> in <var data-name="type">type</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2220-L2221">If <var data-name="field">field</var> is annotated with <code>@shareable</code>, produce an <code>INVALID_SHAREABLE_USAGE</code> error.</li>
</ul>
</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2222-L2225">If <var data-name="type">type</var> is the <code>Subscription</code> type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2223-L2225">For each field definition <var data-name="field">field</var> in <var data-name="type">type</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2224-L2225">If <var data-name="field">field</var> is annotated with <code>@shareable</code>, produce an <code>INVALID_SHAREABLE_USAGE</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Invalid-Shareable-Usage.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2227"><a href="#sec-Invalid-Shareable-Usage.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2229-L2232">The <code>@shareable</code> directive is intended to indicate that a field on an <strong>object type</strong> can be resolved by multiple schemas without conflict. As a result, it is only valid to use <code>@shareable</code> on fields <strong>of object types</strong> (or on the entire object type itself).</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2234-L2237">Applying <code>@shareable</code> to interface fields is disallowed and violates the valid usage of the directive. This rule prevents schema composition errors and data conflicts by ensuring that <code>@shareable</code> is used only in contexts where shared field resolution is meaningful and unambiguous.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2239-L2242">Additionally, subscription root fields cannot be shared (i.e., they are effectively non-shareable), as subscription events from multiple schemas would create conflicts in the composed schema. Attempting to mark a subscription field as shareable or to define it in multiple schemas triggers the same error.</p>
</section>
<section id="sec-Invalid-Shareable-Usage.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2244"><a href="#sec-Invalid-Shareable-Usage.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2246-L2248">In this example, the field <code>orderStatus</code> on the <code>Order</code> object type is marked with <code>@shareable</code>, which is allowed. It signals that this field can be served from multiple schemas without creating a conflict.</p>
<pre id="example-dcf02" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2250-L2256"><a href="#example-dcf02">Example № 112</a><code><span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">orderStatus</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">total</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2258-L2260">In this counter-example, the <code>InventoryItem</code> interface has a field <code>sku</code> marked with <code>@shareable</code>, which is invalid usage. Marking an interface field as shareable leads to an <code>INVALID_SHAREABLE_USAGE</code> error.</p>
<pre id="example-b7d31" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2262-L2267"><a href="#example-b7d31">Counter Example № 113</a><code><span class="token keyword">interface</span> <span class="token class-name">InventoryItem</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2269-L2271">By definition, root subscription fields cannot be shared across multiple schemas. In this example, both schemas define a subscription field <code>newOrderPlaced</code>:</p>
<pre id="example-877ca" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2273-L2288"><a href="#example-877ca">Counter Example № 114</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newOrderPlaced</span><span class="token punctuation">:</span> <span class="token class-name">Order</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">items</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newOrderPlaced</span><span class="token punctuation">:</span> <span class="token class-name">Order</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation" secid="3.2">
<h2 data-source="spec/Section%204%20--%20Composition.md#L2290"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation">3.2</a></span>Pre Merge Validation</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L2292-L2296">Prior to merging the schemas, additional validations are performed that require visibility into all source schemas but treat them as separate entities. This step detects conflicts such as incompatible fields or default argument values that would render the merged schema unusable. Detecting such conflicts early prevents errors that would otherwise be discovered during the merge process.</p>
<section id="sec-Pre-Merge-Validation.Validate-Type-System" secid="3.2.1">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2298"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-Type-System">3.2.1</a></span>Validate Type System</h3>
<section id="sec-Type-Kind-Mismatch" secid="3.2.1.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2300"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Kind-Mismatch">3.2.1.1</a></span>Type Kind Mismatch</h4>
<section id="sec-Type-Kind-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2302"><a href="#sec-Type-Kind-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2304"><code>TYPE_KIND_MISMATCH</code></p>
</section>
<section id="sec-Type-Kind-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2306"><a href="#sec-Type-Kind-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2308">ERROR</p>
</section>
<section id="sec-Type-Kind-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2310"><a href="#sec-Type-Kind-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2312">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2313-L2317">For each type name <var data-name="typeName">typeName</var> defined in at least one of these schemas:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2314-L2315">Let <var data-name="types">types</var> be the set of all types named <var data-name="typeName">typeName</var> across all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2316-L2317">All <var data-name="types">types</var> must be of the same kind (Object, Interface, Union, Enum, InputObject, Scalar).</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Type-Kind-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2319"><a href="#sec-Type-Kind-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2321-L2326">Each named type must represent the <strong>same</strong> kind of GraphQL type across all source schemas. For instance, a type named <code>User</code> must consistently be an object type, or consistently be an interface, and so forth. If one schema defines <code>User</code> as an object type, while another schema declares <code>User</code> as an interface (or input object, union, etc.), the schema composition process cannot merge these definitions coherently.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2328-L2329">This rule ensures semantic consistency: a single type name cannot serve multiple, incompatible purposes in the final composed schema.</p>
</section>
<section id="sec-Type-Kind-Mismatch.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2331"><a href="#sec-Type-Kind-Mismatch.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2333">All schemas agree that <code>User</code> is an object type:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2335-L2353"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema C</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">joinedAt</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2355-L2357">In the following counter-example, <code>User</code> is defined as an object type in one of the schemas and as an interface in another. This violates the rule and results in a <code>TYPE_KIND_MISMATCH</code> error.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2359-L2371"><code><span class="token comment"># Schema A: `User` is an object type</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B: `User` is an interface</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">friends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation.Validate-Enums" secid="3.2.2">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2373"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-Enums">3.2.2</a></span>Validate Enums</h3>
<section id="sec-Enum-Values-Mismatch" secid="3.2.2.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2375"><span class="spec-secid" title="link to this section"><a href="#sec-Enum-Values-Mismatch">3.2.2.1</a></span>Enum Values Mismatch</h4>
<section id="sec-Enum-Values-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2377"><a href="#sec-Enum-Values-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2379"><code>ENUM_VALUES_MISMATCH</code></p>
</section>
<section id="sec-Enum-Values-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2381"><a href="#sec-Enum-Values-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2383">Let <var data-name="enumNames">enumNames</var> be the set of all enum type names across all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2384-L2387">For each <var data-name="enumName">enumName</var> in <var data-name="enumNames">enumNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2385-L2386">Let <var data-name="enums">enums</var> be the list of all enum types from different source schemas with the name <var data-name="enumName">enumName</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2387"><span class="spec-call"><a href="#EnumsAreMergeable()" data-name="EnumsAreMergeable">EnumsAreMergeable</a>(<var data-name="enums">enums</var>)</span> must be true.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="EnumsAreMergeable()" data-source="spec/Section%204%20--%20Composition.md#L2389-L2400">
<span class="spec-call"><a href="#EnumsAreMergeable()" data-name="EnumsAreMergeable">EnumsAreMergeable</a>(<var data-name="enums">enums</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2391-L2392">If <var data-name="enums">enums</var> has fewer than 2 elements:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2392">Return true.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2393-L2394">Let <var data-name="inaccessibleValues">inaccessibleValues</var> be the set of values that are declared as <code>@inaccessible</code> in <var data-name="enums">enums</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2395-L2396">Let <var data-name="requiredValues">requiredValues</var> be the set of values in <var data-name="enums">enums</var> that are not in <var data-name="inaccessibleValues">inaccessibleValues</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2397-L2400">For each <var data-name="enum">enum</var> in <var data-name="enums">enums</var><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2398-L2399">Let <var data-name="enumValues">enumValues</var> be the set of all values of <var data-name="enum">enum</var> that are not in <var data-name="inaccessibleValues">inaccessibleValues</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2400"><var data-name="requiredValues">requiredValues</var> must be equal to <var data-name="enumValues">enumValues</var></li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Enum-Values-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2402"><a href="#sec-Enum-Values-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2404-L2407">This rule ensures that enum types with the same name across different source schemas in a composite schema have identical sets of values. Enums must be consistent across source schemas to avoid conflicts and ambiguities in the composite schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2409-L2414">When an enum is defined with differing values, it can lead to confusion and errors in query execution. For instance, a value valid in one schema might be passed to another where it&rsquo;s unrecognized, leading to unexpected behavior or failures. This rule prevents such inconsistencies by enforcing that all instances of the same named enum across schemas have an exact match in their values.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2416-L2417">In this example, both source schemas define <code>Genre</code> with the same value <code>FANTASY</code>, satisfying the rule:</p>
<pre id="example-3934a" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2419-L2427"><a href="#example-3934a">Example № 115</a><code><span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2429-L2430">Here, the two definitions of <code>Genre</code> have different values (<code>FANTASY</code> and <code>SCIENCE_FICTION</code>), violating the rule:</p>
<pre id="example-9aad8" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2432-L2440"><a href="#example-9aad8">Counter Example № 116</a><code><span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">SCIENCE_FICTION</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2442-L2443">Here, the two definitions of <code>Genre</code> have shared values and additional values declared as <code>@inaccessible</code>, satisfying the rule:</p>
<pre id="example-efbe9" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2445-L2454"><a href="#example-efbe9">Example № 117</a><code><span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
  <span class="token constant">SCIENCE_FICTION</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation.Validate-Composite-Types" secid="3.2.3">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2456"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-Composite-Types">3.2.3</a></span>Validate Composite Types</h3>
<section id="sec-Output-Field-Types-Mergeable" secid="3.2.3.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2458"><span class="spec-secid" title="link to this section"><a href="#sec-Output-Field-Types-Mergeable">3.2.3.1</a></span>Output Field Types Mergeable</h4>
<section id="sec-Output-Field-Types-Mergeable.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2460"><a href="#sec-Output-Field-Types-Mergeable.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2462"><code>OUTPUT_FIELD_TYPES_NOT_MERGEABLE</code></p>
</section>
<section id="sec-Output-Field-Types-Mergeable.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2464"><a href="#sec-Output-Field-Types-Mergeable.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2466">ERROR</p>
</section>
<section id="sec-Output-Field-Types-Mergeable.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2468"><a href="#sec-Output-Field-Types-Mergeable.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2470">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2471-L2478">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2472-L2473">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2474">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2475-L2478">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2476-L2477">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2478"><span class="spec-call"><a href="#FieldsAreMergeable()" data-name="FieldsAreMergeable">FieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="FieldsAreMergeable()" data-source="spec/Section%204%20--%20Composition.md#L2480-L2485">
<span class="spec-call"><a href="#FieldsAreMergeable()" data-name="FieldsAreMergeable">FieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2482-L2485">Given each pair of members <var data-name="fieldA">fieldA</var> and <var data-name="fieldB">fieldB</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2483">Let <var data-name="typeA">typeA</var> be the type of <var data-name="fieldA">fieldA</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2484">Let <var data-name="typeB">typeB</var> be the type of <var data-name="fieldB">fieldB</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2485"><span class="spec-call"><span data-name="SameTypeShape">SameTypeShape</span>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> must be true.</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Output-Field-Types-Mergeable.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2487"><a href="#sec-Output-Field-Types-Mergeable.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2489-L2490">Fields on objects or interfaces that have the same name are considered semantically equivalent and mergeable when they have a mergeable field type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2492">Fields with the same type are mergeable.</p>
<pre id="example-65bd6" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2494-L2502"><a href="#example-65bd6">Example № 118</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2504-L2505">Fields with different nullability are mergeable, resulting in a merged field with a nullable type.</p>
<pre id="example-6c133" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2507-L2515"><a href="#example-6c133">Example № 119</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-a9f42" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2517-L2529"><a href="#example-a9f42">Example № 120</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2531">Fields are not mergeable if the named types are different in kind or name.</p>
<pre id="example-1b751" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2533-L2541"><a href="#example-1b751">Counter Example № 121</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-70adb" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2543-L2557"><a href="#example-70adb">Counter Example № 122</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Tag</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Tag</span> <span class="token punctuation">{</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Tag</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">scalar</span> <span class="token class-name">Tag</span>
</code></pre>
</section>
</section>
<section id="sec-Field-Argument-Types-Mergeable" secid="3.2.3.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2559"><span class="spec-secid" title="link to this section"><a href="#sec-Field-Argument-Types-Mergeable">3.2.3.2</a></span>Field Argument Types Mergeable</h4>
<section id="sec-Field-Argument-Types-Mergeable.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2561"><a href="#sec-Field-Argument-Types-Mergeable.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2563"><code>FIELD_ARGUMENT_TYPES_NOT_MERGEABLE</code></p>
</section>
<section id="sec-Field-Argument-Types-Mergeable.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2565"><a href="#sec-Field-Argument-Types-Mergeable.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2567">ERROR</p>
</section>
<section id="sec-Field-Argument-Types-Mergeable.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2569"><a href="#sec-Field-Argument-Types-Mergeable.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2571-L2572">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas that are not declared as <code>@inaccessible</code> in any schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2573-L2587">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2574-L2575">Let <var data-name="types">types</var> be the set of all types with the <var data-name="typeName">typeName</var> from all source schemas that are not declared as <code>@internal</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2576-L2577">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all <var data-name="types">types</var> that are not declared as <code>@inaccessible</code> in any schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2578-L2587">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2579-L2580">Let <var data-name="fields">fields</var> be the set of all fields with the <var data-name="fieldName">fieldName</var> from all <var data-name="types">types</var> that are not declared as <code>@internal</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2581-L2587">For each <var data-name="field">field</var> in <var data-name="fields">fields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2582">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2583-L2587">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2584-L2585">Let <var data-name="arguments">arguments</var> be the set of all arguments with the <var data-name="argumentName">argumentName</var> from all <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2586-L2587">For each pair of <var data-name="argumentA">argumentA</var> and <var data-name="argumentB">argumentB</var> in <var data-name="arguments">arguments</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2587"><span class="spec-call"><a href="#ArgumentsAreMergeable()" data-name="ArgumentsAreMergeable">ArgumentsAreMergeable</a>(<var data-name="argumentA">argumentA</var>, <var data-name="argumentB">argumentB</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="ArgumentsAreMergeable()" data-source="spec/Section%204%20--%20Composition.md#L2589-L2593">
<span class="spec-call"><a href="#ArgumentsAreMergeable()" data-name="ArgumentsAreMergeable">ArgumentsAreMergeable</a>(<var data-name="argumentA">argumentA</var>, <var data-name="argumentB">argumentB</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2591">Let <var data-name="typeA">typeA</var> be the type of <var data-name="argumentA">argumentA</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2592">Let <var data-name="typeB">typeB</var> be the type of <var data-name="argumentB">argumentB</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2593"><span class="spec-call"><span data-name="SameTypeShape">SameTypeShape</span>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> must be true.</li>
</ol>
</div>
</section>
<section id="sec-Field-Argument-Types-Mergeable.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2595"><a href="#sec-Field-Argument-Types-Mergeable.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2597-L2602">When multiple schemas define the same field name on the same output type (e.g., <code>User.field</code>), these fields can be merged if their arguments are compatible. Compatibility extends not only to the output field types themselves, but to each argument&rsquo;s input type as well. The schemas must agree on each argument&rsquo;s name and have compatible types, so that the composed schema can unify the definitions into a single consistent field specification.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2604"><em>Nullability</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2606-L2609">Different nullability requirements on arguments are still considered mergeable. For example, if one schema accepts <code>String!</code> and the other accepts <code>String</code>, these schemas can merge; the resulting argument type typically adopts the least restrictive (nullable) version.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2611-L2614"><em>Lists</em> Lists of different nullability (e.g., <code>[String!]</code> vs. <code>[String]!</code> vs. <code>[String]</code>) remain mergeable as long as they otherwise refer to the same inner type. Essentially, the same principle of &ldquo;least restrictive&rdquo; nullability merges them successfully.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2616"><em>Incompatible Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2618-L2621">If argument types differ on the named type itself &ndash; for example, one uses <code>String</code> while the other uses <code>DateTime</code> - this causes a <code>FIELD_ARGUMENT_TYPES_NOT_MERGEABLE</code> error. Similarly, if one schema has <code>[String]</code> but another has <code>[DateTime]</code>, they are incompatible.</p>
<pre id="example-b9e7f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2623-L2631"><a href="#example-b9e7f">Example № 123</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2633">Arguments that differ on nullability of an argument type are mergeable.</p>
<pre id="example-405d9" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2635-L2643"><a href="#example-405d9">Example № 124</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-0511f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2645-L2657"><a href="#example-0511f">Example № 125</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2659">Arguments are not mergeable if the named types are different in kind or name.</p>
<pre id="example-2716b" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2661-L2669"><a href="#example-2716b">Counter Example № 126</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-b0575" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2671-L2679"><a href="#example-b0575">Counter Example № 127</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">argument</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">DateTime</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Field-With-Missing-Required-Arguments" secid="3.2.3.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2681"><span class="spec-secid" title="link to this section"><a href="#sec-Field-With-Missing-Required-Arguments">3.2.3.3</a></span>Field With Missing Required Arguments</h4>
<section id="sec-Field-With-Missing-Required-Arguments.Error-Code-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2683"><a href="#sec-Field-With-Missing-Required-Arguments.Error-Code-" title="link to this subsection">Error Code:</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2685"><code>FIELD_WITH_MISSING_REQUIRED_ARGUMENT</code></p>
</section>
<section id="sec-Field-With-Missing-Required-Arguments.Severity-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2687"><a href="#sec-Field-With-Missing-Required-Arguments.Severity-" title="link to this subsection">Severity:</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2689">ERROR</p>
</section>
<section id="sec-Field-With-Missing-Required-Arguments.Formal-Specification-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2691"><a href="#sec-Field-With-Missing-Required-Arguments.Formal-Specification-" title="link to this subsection">Formal Specification:</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2693-L2694">Let <var data-name="typeNames">typeNames</var> be the set of all object and interface type names from all source schemas that are not declared as <code>@internal</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2695-L2709">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2696-L2697">Let <var data-name="typeDefinitions">typeDefinitions</var> be the list of all type definitions from different source schemas with the name <var data-name="typeName">typeName</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2698-L2699">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all <var data-name="typeDefinitions">typeDefinitions</var> that are not declared as <code>@internal</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2700-L2709">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2701-L2702">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the list of all field definitions from <var data-name="typeDefinitions">typeDefinitions</var> with the name <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2703-L2705">Let <var data-name="requiredArgumentNames">requiredArgumentNames</var> be the set of all argument names from <var data-name="fieldDefinitions">fieldDefinitions</var> that have a non-nullable type in at least one definition that does not specify <code>@require</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2706-L2709">For each <var data-name="fieldDefinition">fieldDefinition</var> in <var data-name="fieldDefinitions">fieldDefinitions</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2707-L2709">For each <var data-name="requiredArgumentName">requiredArgumentName</var> in <var data-name="requiredArgumentNames">requiredArgumentNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2708-L2709"><var data-name="fieldDefinition">fieldDefinition</var> must have an argument with the name <var data-name="requiredArgumentName">requiredArgumentName</var> that does not specify <code>@require</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Field-With-Missing-Required-Arguments.Explanatory-Text-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2711"><a href="#sec-Field-With-Missing-Required-Arguments.Explanatory-Text-" title="link to this subsection">Explanatory Text:</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2713-L2719">When merging a field definition across multiple schemas, any argument that is non-null (i.e., &ldquo;required&rdquo;) in one schema must appear in all schemas that define that field. In other words, arguments are effectively merged by intersection: if an argument is considered required in any schema, then that same argument must exist in every schema that contributes to the composite definition. If a required argument is missing in one schema, there is no consistent way to define that field across schemas.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2721-L2723">If an argument is marked with <code>@require</code>, it is treated as non-required. Consequently, this argument must either be nullable in all other schemas or must also be marked with <code>@require</code> in all other schemas.</p>
</section>
<section id="sec-Field-With-Missing-Required-Arguments.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2725"><a href="#sec-Field-With-Missing-Required-Arguments.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2727">All schemas agree on having a required argument <code>author</code> for the <code>books</code> field:</p>
<pre id="example-d26ac" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2729-L2739"><a href="#example-d26ac">Example № 128</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2741-L2745">In the following example, the <code>author</code> argument on the <code>books</code> field in Schema A specifies a dependency on the <code>author</code> field in Schema C. The <code>author</code> argument on the <code>books</code> field in Schema B is optional. As a result, the composition succeeds; however, the <code>author</code> argument will not be included in the composite schema.</p>
<pre id="example-91225" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2747-L2762"><a href="#example-91225">Example № 129</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span>
  <span class="token property-query">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"author"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span>
  <span class="token attr-name">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema C</span>
<span class="token keyword">type</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2764-L2766">In the following counter-example, the <code>author</code> argument is required in one schema but not in the other. This will result in a <code>FIELD_WITH_MISSING_REQUIRED_ARGUMENT</code> error.</p>
<pre id="example-07eca" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2768-L2778"><a href="#example-07eca">Counter Example № 130</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">books</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2780-L2783">In the following counter-example, the <code>author</code> argument on the <code>books</code> field in Schema A specifies a dependency on the <code>author</code> field in Schema C. The <code>author</code> argument on the <code>books</code> field in Schema B is <strong>not</strong> optional. This will result in a <code>FIELD_WITH_MISSING_REQUIRED_ARGUMENT</code> error.</p>
<pre id="example-1d424" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2785-L2800"><a href="#example-1d424">Counter Example № 131</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span>
  <span class="token property-query">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"author"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span>
  <span class="token attr-name">books</span><span class="token punctuation">(</span><span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema C</span>
<span class="token keyword">type</span> <span class="token class-name">Collection</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation.Validate-Input-Types" secid="3.2.4">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2802"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-Input-Types">3.2.4</a></span>Validate Input Types</h3>
<section id="sec-Input-Field-Default-Mismatch" secid="3.2.4.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2804"><span class="spec-secid" title="link to this section"><a href="#sec-Input-Field-Default-Mismatch">3.2.4.1</a></span>Input Field Default Mismatch</h4>
<section id="sec-Input-Field-Default-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2806"><a href="#sec-Input-Field-Default-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2808"><code>INPUT_FIELD_DEFAULT_MISMATCH</code></p>
</section>
<section id="sec-Input-Field-Default-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2810"><a href="#sec-Input-Field-Default-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2812-L2814">Let <var data-name="inputFieldsByName">inputFieldsByName</var> be a map where the key is the name of an input field and the value is a list of input fields from different source schemas from the same type with the same name.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2815-L2819">For each <var data-name="inputFields">inputFields</var> in <var data-name="inputFieldsByName">inputFieldsByName</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2816-L2817">Let <var data-name="defaultValues">defaultValues</var> be a set containing the default values of each input field in <var data-name="inputFields">inputFields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2818-L2819">If the size of <var data-name="defaultValues">defaultValues</var> is greater than 1:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2819"><span class="spec-call"><a href="#InputFieldsHaveConsistentDefaults()" data-name="InputFieldsHaveConsistentDefaults">InputFieldsHaveConsistentDefaults</a>(<var data-name="inputFields">inputFields</var>)</span> must be <span class="spec-keyword">true</span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="InputFieldsHaveConsistentDefaults()" data-source="spec/Section%204%20--%20Composition.md#L2821-L2829">
<span class="spec-call"><a href="#InputFieldsHaveConsistentDefaults()" data-name="InputFieldsHaveConsistentDefaults">InputFieldsHaveConsistentDefaults</a>(<var data-name="inputFields">inputFields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2823-L2828">Given each pair of input fields <var data-name="inputFieldA">inputFieldA</var> and <var data-name="inputFieldB">inputFieldB</var> in <var data-name="inputFields">inputFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2825-L2828">If <var data-name="inputFieldA">inputFieldA</var> has a default value and <var data-name="inputFieldB">inputFieldB</var> has a default value:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2826-L2828">If the default value of <var data-name="inputFieldA">inputFieldA</var> is not equal to the default value of <var data-name="inputFieldB">inputFieldB</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2828">return <span class="spec-keyword">false</span></li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2829">return <span class="spec-keyword">true</span></li>
</ol>
</div>
</section>
<section id="sec-Input-Field-Default-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2831"><a href="#sec-Input-Field-Default-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2833-L2835">Input fields in different source schemas that have the same name are required to have consistent default values. This ensures that there is no ambiguity or inconsistency when merging input fields from different source schemas.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2837-L2838">A mismatch in default values for input fields with the same name across different source schemas will result in a schema composition error.</p>
</section>
<section id="sec-Input-Field-Default-Mismatch.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2840"><a href="#sec-Input-Field-Default-Mismatch.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2842-L2843">In the the following example both source schemas have an input field <code>genre</code> with the same default value. This is valid:</p>
<pre id="example-36e64" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2845-L2866"><a href="#example-36e64">Example № 132</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">genre</span><span class="token punctuation">:</span> <span class="token class-name">Genre</span> <span class="token operator">=</span> <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
  <span class="token constant">SCIENCE_FICTION</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">genre</span><span class="token punctuation">:</span> <span class="token class-name">Genre</span> <span class="token operator">=</span> <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
  <span class="token constant">SCIENCE_FICTION</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2868-L2869">If only one of the source schemas defines a default value for a given input field, the composition is still valid:</p>
<pre id="example-7abbf" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2871-L2892"><a href="#example-7abbf">Example № 133</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">genre</span><span class="token punctuation">:</span> <span class="token class-name">Genre</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
  <span class="token constant">SCIENCE_FICTION</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">genre</span><span class="token punctuation">:</span> <span class="token class-name">Genre</span> <span class="token operator">=</span> <span class="token constant">FANTASY</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Genre</span> <span class="token punctuation">{</span>
  <span class="token constant">FANTASY</span>
  <span class="token constant">SCIENCE_FICTION</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2894-L2895">In the following example both source schemas define an input field <code>minPageCount</code> with different default values. This is invalid:</p>
<pre id="example-da97c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2897-L2909"><a href="#example-da97c">Counter Example № 134</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">minPageCount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">10</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">minPageCount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">20</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Input-Field-Types-mergeable" secid="3.2.4.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2911"><span class="spec-secid" title="link to this section"><a href="#sec-Input-Field-Types-mergeable">3.2.4.2</a></span>Input Field Types mergeable</h4>
<section id="sec-Input-Field-Types-mergeable.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2913"><a href="#sec-Input-Field-Types-mergeable.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2915"><code>INPUT_FIELD_TYPES_NOT_MERGEABLE</code></p>
</section>
<section id="sec-Input-Field-Types-mergeable.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2917"><a href="#sec-Input-Field-Types-mergeable.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2919-L2921">Let <var data-name="fieldsByName">fieldsByName</var> be a map of field lists where the key is the name of a field and the value is a list of fields from mergeable input types from different source schemas with the same name.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2922-L2923">For each <var data-name="fields">fields</var> in <var data-name="fieldsByName">fieldsByName</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2923"><span class="spec-call"><a href="#InputFieldsAreMergeable()" data-name="InputFieldsAreMergeable">InputFieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span> must be true.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="InputFieldsAreMergeable()" data-source="spec/Section%204%20--%20Composition.md#L2925-L2930">
<span class="spec-call"><a href="#InputFieldsAreMergeable()" data-name="InputFieldsAreMergeable">InputFieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2927-L2930">Given each pair of members <var data-name="fieldA">fieldA</var> and <var data-name="fieldB">fieldB</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2928">Let <var data-name="typeA">typeA</var> be the type of <var data-name="fieldA">fieldA</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2929">Let <var data-name="typeB">typeB</var> be the type of <var data-name="fieldB">fieldB</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2930"><span class="spec-call"><span data-name="SameTypeShape">SameTypeShape</span>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> must be true.</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Input-Field-Types-mergeable.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2932"><a href="#sec-Input-Field-Types-mergeable.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2934-L2936">The input fields of input objects with the same name must be mergeable. This rule ensures that input objects with the same name in different source schemas have fields that can be merged consistently without conflicts.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2938-L2942">Input fields are considered mergeable when they share the same name and have compatible types. The compatibility of types is determined by their structure (e.g., lists), excluding nullability. Mergeable input fields with different nullability are considered mergeable, and the resulting merged field will be the most permissive of the two.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2944-L2945">In this example, the field <code>name</code> in <code>AuthorInput</code> has compatible types across source schemas, making them mergeable:</p>
<pre id="example-98cb2" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2947-L2955"><a href="#example-98cb2">Example № 135</a><code><span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2957-L2958">The following example shows that fields are mergeable if they have different nullability but the named type is the same and the list structure is the same.</p>
<pre id="example-ba6e6" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2960-L2972"><a href="#example-ba6e6">Example № 136</a><code><span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2974-L2975">In this example, the field <code>birthdate</code> on <code>AuthorInput</code> is not mergeable as the field has different named types (<code>String</code> and <code>DateTime</code>) across source schemas:</p>
<pre id="example-c37d1" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2977-L2985"><a href="#example-c37d1">Counter Example № 137</a><code><span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">AuthorInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Input-With-Missing-Required-Fields" secid="3.2.4.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2987"><span class="spec-secid" title="link to this section"><a href="#sec-Input-With-Missing-Required-Fields">3.2.4.3</a></span>Input With Missing Required Fields</h4>
<section id="sec-Input-With-Missing-Required-Fields.Error-Code-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2989"><a href="#sec-Input-With-Missing-Required-Fields.Error-Code-" title="link to this subsection">Error Code:</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2991"><code>INPUT_WITH_MISSING_REQUIRED_FIELDS</code></p>
</section>
<section id="sec-Input-With-Missing-Required-Fields.Severity-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2993"><a href="#sec-Input-With-Missing-Required-Fields.Severity-" title="link to this subsection">Severity:</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2995">ERROR</p>
</section>
<section id="sec-Input-With-Missing-Required-Fields.Formal-Specification-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2997"><a href="#sec-Input-With-Missing-Required-Fields.Formal-Specification-" title="link to this subsection">Formal Specification:</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2999-L3000">Let <var data-name="typeNames">typeNames</var> be the set of all input object types names from all source schemas that are not declared as <code>@inaccessible</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3001-L3004">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3002-L3003">Let <var data-name="types">types</var> be the list of all input object types from different source schemas with the name <var data-name="typeName">typeName</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3004"><span class="spec-call"><a href="#AreTypesConsistent()" data-name="AreTypesConsistent">AreTypesConsistent</a>(<var data-name="types">types</var>)</span> must be true.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="AreTypesConsistent()" data-source="spec/Section%204%20--%20Composition.md#L3006-L3014">
<span class="spec-call"><a href="#AreTypesConsistent()" data-name="AreTypesConsistent">AreTypesConsistent</a>(<var data-name="inputs">inputs</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3008-L3010">Let <var data-name="requiredFields">requiredFields</var> be the intersection of all field names across all input objects in <var data-name="inputs">inputs</var> that are not marked as <code>@inaccessible</code> in any schema and have a non-nullable type in at least one schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3011-L3014">For each <var data-name="input">input</var> in <var data-name="inputs">inputs</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3012-L3014">For each <var data-name="requiredField">requiredField</var> in <var data-name="requiredFields">requiredFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3013-L3014">If <var data-name="requiredField">requiredField</var> is not in <var data-name="input">input</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3014">Return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Input-With-Missing-Required-Fields.Explanatory-Text-" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3016"><a href="#sec-Input-With-Missing-Required-Fields.Explanatory-Text-" title="link to this subsection">Explanatory Text:</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3018-L3021">Input types are merged by intersection, meaning that the merged input type will have all fields that are present in all input types with the same name. This rule ensures that input object types with the same name across different schemas share a consistent set of required fields.</p>
</section>
<section id="sec-Input-With-Missing-Required-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3023"><a href="#sec-Input-With-Missing-Required-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3025-L3026">If all schemas define <code>BookFilter</code> with the required field <code>title</code>, the rule is satisfied:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3028-L3040"><code><span class="token comment"># Schema A</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">yearPublished</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3042-L3043">If <code>title</code> is required in one source schema but missing in another, this violates the rule:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3045-L3057"><code><span class="token comment"># Schema A</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">yearPublished</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3059-L3060">In this invalid case, <code>title</code> is mandatory in Schema A but not defined in Schema B, causing inconsistency in required fields across schemas.</p>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation.Validate-External-Directives" secid="3.2.5">
<h3 data-source="spec/Section%204%20--%20Composition.md#L3062"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-External-Directives">3.2.5</a></span>Validate External Directives</h3>
<section id="sec-External-Argument-Default-Mismatch" secid="3.2.5.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3064"><span class="spec-secid" title="link to this section"><a href="#sec-External-Argument-Default-Mismatch">3.2.5.1</a></span>External Argument Default Mismatch</h4>
<section id="sec-External-Argument-Default-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3066"><a href="#sec-External-Argument-Default-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3068"><code>EXTERNAL_ARGUMENT_DEFAULT_MISMATCH</code></p>
</section>
<section id="sec-External-Argument-Default-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3070"><a href="#sec-External-Argument-Default-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3072">ERROR</p>
</section>
<section id="sec-External-Argument-Default-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3074"><a href="#sec-External-Argument-Default-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3076">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3077-L3097">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3078-L3079">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3080">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3081-L3097">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3082-L3083">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3084-L3085">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3086-L3097">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3087-L3088">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all fields in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3089-L3097">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3090-L3091">Let <var data-name="arguments">arguments</var> be the set of all arguments with the name <var data-name="argumentName">argumentName</var> from all fields in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3092">Let <var data-name="defaultValues">defaultValues</var> be all default values found in <var data-name="arguments">arguments</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3093-L3094">Let <var data-name="externalArguments">externalArguments</var> be the set of all arguments with the name <var data-name="argumentName">argumentName</var> from all fields in <var data-name="externalFields">externalFields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3095-L3097">For each <var data-name="externalArgument">externalArgument</var> in <var data-name="externalArguments">externalArguments</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3096-L3097">The default value of <var data-name="externalArgument">externalArgument</var> must be equal to all <var data-name="defaultValues">defaultValues</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Argument-Default-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3099"><a href="#sec-External-Argument-Default-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3101-L3106">This rule ensures that arguments on fields marked as <code>@external</code> have default values compatible with the corresponding arguments on fields from other source schemas where the field is defined (non-<code>@external</code>). Since <code>@external</code> fields represent fields that are resolved by other source schemas, their arguments and defaults must match to maintain consistent behavior across different source schemas.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3108-L3110">Here, the <code>name</code> field on <code>Product</code> is defined in one source schema and marked as <code>@external</code> in another. The argument <code>language</code> has the same default value in both source schemas, satisfying the rule:</p>
<pre id="example-64ce1" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3112-L3122"><a href="#example-64ce1">Example № 138</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span> <span class="token directive function">@external</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3124-L3126">Here, the <code>name</code> field on <code>Product</code> is defined in one source schema and marked as <code>@external</code> in another. The argument <code>language</code> has different default values in the two source schemas, violating the rule:</p>
<pre id="example-434fe" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3128-L3138"><a href="#example-434fe">Counter Example № 139</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"de"</span><span class="token punctuation">)</span> <span class="token directive function">@external</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3140-L3144">In the following counter example, the <code>name</code> field on <code>Product</code> is defined in one source schema and marked as <code>@external</code> in another. The argument <code>language</code> has a default value in the source schema where the field is defined, but it does not have a default value in the source schema where the field is marked as <code>@external</code>, violating the rule:</p>
<pre id="example-dd53e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3146-L3156"><a href="#example-dd53e">Counter Example № 140</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Argument-Missing" secid="3.2.5.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3158"><span class="spec-secid" title="link to this section"><a href="#sec-External-Argument-Missing">3.2.5.2</a></span>External Argument Missing</h4>
<section id="sec-External-Argument-Missing.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3160"><a href="#sec-External-Argument-Missing.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3162"><code>EXTERNAL_ARGUMENT_MISSING</code></p>
</section>
<section id="sec-External-Argument-Missing.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3164"><a href="#sec-External-Argument-Missing.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3166">ERROR</p>
</section>
<section id="sec-External-Argument-Missing.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3168"><a href="#sec-External-Argument-Missing.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3170">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3171-L3187">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3172-L3173">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3174">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3175-L3187">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3176-L3177">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3178-L3179">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3180-L3181">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3182-L3187">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3183-L3184">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all fields in <var data-name="nonExternalFields">nonExternalFields</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L3185-L3187">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3186-L3187">For each <var data-name="externalField">externalField</var> in <var data-name="externalFields">externalFields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3187"><var data-name="argumentName">argumentName</var> must be present in the arguments of <var data-name="externalField">externalField</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Argument-Missing.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3189"><a href="#sec-External-Argument-Missing.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3191-L3196">This rule ensures that fields marked with <code>@external</code> have all the necessary arguments that exist on the corresponding field definitions in other source schemas. Each argument defined on the base field (the field definition in the defining source schema) must be present on the <code>@external</code> field in other source schemas. If an argument is missing on an <code>@external</code> field, the field cannot be resolved correctly, which is an inconsistency.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3198-L3200">In this example, the <code>language</code> argument is present on both the <code>@external</code> field in source schema B and the base field in source schema A, satisfying the rule:</p>
<pre id="example-1b0de" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3202-L3212"><a href="#example-1b0de">Example № 141</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3214-L3216">Here, the <code>@external</code> field in source schema B is missing the <code>language</code> argument that is present in the base field definition in source schema A, violating the rule:</p>
<pre id="example-30492" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3218-L3228"><a href="#example-30492">Counter Example № 142</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Argument-Type-Mismatch" secid="3.2.5.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3230"><span class="spec-secid" title="link to this section"><a href="#sec-External-Argument-Type-Mismatch">3.2.5.3</a></span>External Argument Type Mismatch</h4>
<section id="sec-External-Argument-Type-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3232"><a href="#sec-External-Argument-Type-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3234"><code>EXTERNAL_ARGUMENT_TYPE_MISMATCH</code></p>
</section>
<section id="sec-External-Argument-Type-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3236"><a href="#sec-External-Argument-Type-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3238">ERROR</p>
</section>
<section id="sec-External-Argument-Type-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3240"><a href="#sec-External-Argument-Type-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3242">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3243-L3262">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3244-L3245">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3246">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3247-L3262">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3248-L3249">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3250-L3251">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3252-L3253">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3254-L3262">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3255-L3256">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all fields in <var data-name="nonExternalFields">nonExternalFields</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L3257-L3262">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3258-L3262">For each <var data-name="externalField">externalField</var> in <var data-name="externalFields">externalFields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3259-L3260">Let <var data-name="externalArgument">externalArgument</var> be the argument with the name <var data-name="argumentName">argumentName</var> from <var data-name="externalField">externalField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3261-L3262"><var data-name="externalArgument">externalArgument</var> must strictly equal all arguments with the name <var data-name="argumentName">argumentName</var> from <var data-name="nonExternalFields">nonExternalFields</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Argument-Type-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3264"><a href="#sec-External-Argument-Type-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3266-L3269">This rule ensures that arguments on fields marked as <code>@external</code> have types compatible with the corresponding arguments on the fields defined in other source schemas. The arguments must have the exact same type signature, including nullability and list nesting.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3271-L3272">Here, the <code>@external</code> field&rsquo;s <code>language</code> argument has the same type (<code>Language</code>) as the base field, satisfying the rule:</p>
<pre id="example-fc202" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3274-L3284"><a href="#example-fc202">Example № 143</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token class-name">Language</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token class-name">Language</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3286-L3288">In this example, the <code>@external</code> field&rsquo;s <code>language</code> argument type does not match the base field&rsquo;s <code>language</code> argument type (<code>Language</code> vs. <code>String</code>), violating the rule:</p>
<pre id="example-90399" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3290-L3300"><a href="#example-90399">Example № 144</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token class-name">Language</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Missing-on-Base" secid="3.2.5.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3302"><span class="spec-secid" title="link to this section"><a href="#sec-External-Missing-on-Base">3.2.5.4</a></span>External Missing on Base</h4>
<section id="sec-External-Missing-on-Base.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3304"><a href="#sec-External-Missing-on-Base.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3306"><code>EXTERNAL_MISSING_ON_BASE</code></p>
</section>
<section id="sec-External-Missing-on-Base.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3308"><a href="#sec-External-Missing-on-Base.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3310">ERROR</p>
</section>
<section id="sec-External-Missing-on-Base.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3312"><a href="#sec-External-Missing-on-Base.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3314">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3315-L3327">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3316-L3317">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3318">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3319-L3327">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3320-L3321">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3322-L3323">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3324-L3325">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3326-L3327">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3327"><var data-name="nonExternalFields">nonExternalFields</var> must not be empty.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Missing-on-Base.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3329"><a href="#sec-External-Missing-on-Base.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3331-L3335">This rule ensures that any field marked as <code>@external</code> in a source schema is actually defined (non-<code>@external</code>) in at least one other source schema. The <code>@external</code> directive is used to indicate that the field is not usually resolved by the source schema it is declared in, implying it should be resolvable by at least one other source schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3337-L3339">Here, the <code>name</code> field on <code>Product</code> is defined in source schema A and marked as <code>@external</code> in source schema B, which is valid because there is a base definition in source schema A:</p>
<pre id="example-998d2" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3341-L3353"><a href="#example-998d2">Example № 145</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3355-L3357">In this example, the <code>name</code> field on <code>Product</code> is marked as <code>@external</code> in source schema B but has no non-<code>@external</code> declaration in any other source schema, violating the rule:</p>
<pre id="example-35ced" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3359-L3370"><a href="#example-35ced">Counter Example № 146</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Type-Mismatch" secid="3.2.5.5">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3372"><span class="spec-secid" title="link to this section"><a href="#sec-External-Type-Mismatch">3.2.5.5</a></span>External Type Mismatch</h4>
<section id="sec-External-Type-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3374"><a href="#sec-External-Type-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3376"><code>EXTERNAL_TYPE_MISMATCH</code></p>
</section>
<section id="sec-External-Type-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3378"><a href="#sec-External-Type-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3380">ERROR</p>
</section>
<section id="sec-External-Type-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3382"><a href="#sec-External-Type-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3384">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3385-L3398">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3386-L3387">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3388">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3389-L3398">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3390-L3391">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3392-L3393">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3394-L3395">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3396-L3398">For each <var data-name="externalField">externalField</var> in <var data-name="externalFields">externalFields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3397-L3398">The type of <var data-name="externalField">externalField</var> must strictly equal all types of <var data-name="nonExternalFields">nonExternalFields</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Type-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3400"><a href="#sec-External-Type-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3402-L3405">This rule ensures that a field marked as <code>@external</code> has a return type compatible with the corresponding field defined in other source schemas. Fields with the same name must represent the same data type to maintain schema consistency</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3407-L3408">Here, the <code>@external</code> field <code>name</code> has the same return type (<code>String</code>) as the base field definition, satisfying the rule:</p>
<pre id="example-df40b" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3410-L3420"><a href="#example-df40b">Example № 147</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3422-L3423">In this example, the <code>@external</code> field <code>name</code> has a return type of <code>ProductName</code> that doesn&rsquo;t match the base field&rsquo;s return type <code>String</code>, violating the rule:</p>
<pre id="example-857ab" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3425-L3435"><a href="#example-857ab">Counter Example № 148</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token class-name">ProductName</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation.Validate-Override-Directives" secid="3.2.6">
<h3 data-source="spec/Section%204%20--%20Composition.md#L3437"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-Override-Directives">3.2.6</a></span>Validate Override Directives</h3>
<section id="sec-Override-Collision-with-Another-Directive" secid="3.2.6.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3439"><span class="spec-secid" title="link to this section"><a href="#sec-Override-Collision-with-Another-Directive">3.2.6.1</a></span>Override Collision with Another Directive</h4>
<section id="sec-Override-Collision-with-Another-Directive.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3441"><a href="#sec-Override-Collision-with-Another-Directive.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3443"><code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code></p>
</section>
<section id="sec-Override-Collision-with-Another-Directive.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3445"><a href="#sec-Override-Collision-with-Another-Directive.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3447">ERROR</p>
</section>
<section id="sec-Override-Collision-with-Another-Directive.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3449"><a href="#sec-Override-Collision-with-Another-Directive.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3451">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3452-L3458">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3453">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3454-L3458">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3455">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3456-L3458">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3457-L3458">If <var data-name="field">field</var> is annotated with <code>@override</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3458"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@external</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-Collision-with-Another-Directive.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3460"><a href="#sec-Override-Collision-with-Another-Directive.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3462-L3467">The <code>@override</code> directive designates that ownership of a field is transferred from one source schema to another in the resulting composite schema. When such a transfer occurs, that field <strong>cannot</strong> also be annotated <code>@external</code>. A field declared as <code>@external</code> is originally defined in a <strong>different</strong> source schema. Overriding a field and simultaneously claiming it is external to the local schema is contradictory.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3469-L3470">In this case composition fails with an <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error.</p>
</section>
<section id="sec-Override-Collision-with-Another-Directive.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3472"><a href="#sec-Override-Collision-with-Another-Directive.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3474-L3476">In this scenario, <code>User.fullName</code> is defined in <strong>Schema A</strong> but overridden in <strong>Schema B</strong>. Since <code>@override</code> is <strong>not</strong> combined with any of <code>@external</code> on the same field, no collision occurs.</p>
<pre id="example-3f8b1" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3478-L3490"><a href="#example-3f8b1">Example № 149</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3492-L3495">Here, <code>amount</code> is marked with both <code>@override</code> and <code>@external</code>. This violates the rule because the field is simultaneously labeled as &ldquo;override from another schema&rdquo; and &ldquo;external&rdquo; in the local schema, producing an <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error.</p>
<pre id="example-50a93" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3497-L3509"><a href="#example-50a93">Counter Example № 150</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Override-Source-Has-Override" secid="3.2.6.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3511"><span class="spec-secid" title="link to this section"><a href="#sec-Override-Source-Has-Override">3.2.6.2</a></span>Override Source Has Override</h4>
<section id="sec-Override-Source-Has-Override.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3513"><a href="#sec-Override-Source-Has-Override.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3515"><code>OVERRIDE_SOURCE_HAS_OVERRIDE</code></p>
</section>
<section id="sec-Override-Source-Has-Override.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3517"><a href="#sec-Override-Source-Has-Override.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3519">ERROR</p>
</section>
<section id="sec-Override-Source-Has-Override.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3521"><a href="#sec-Override-Source-Has-Override.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3523">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3524-L3525">Let <var data-name="groupedTypes">groupedTypes</var> be a map grouping all object types from <var data-name="schemas">schemas</var> by their type name.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3526-L3552">For each <var data-name="typeGroup">typeGroup</var> in <var data-name="groupedTypes">groupedTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3527">Let <var data-name="types">types</var> be the set of object types in <var data-name="typeGroup">typeGroup</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3528-L3529">Let <var data-name="groupedFields">groupedFields</var> be a map grouping every field across all <var data-name="types">types</var> by their field name.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3530-L3552">For each <var data-name="fieldGroup">fieldGroup</var> in <var data-name="groupedFields">groupedFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3531">Let <var data-name="fields">fields</var> be the set of field definitions in <var data-name="fieldGroup">fieldGroup</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3532-L3533">Let <var data-name="overrides">overrides</var> be the list of <code>@override</code> directives present among those <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3534-L3535">If <var data-name="overrides">overrides</var> has fewer than 2 elements:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3535">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3536">Let <var data-name="firstOverride">firstOverride</var> be the first directive in <var data-name="overrides">overrides</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3537">Let <var data-name="from">from</var> be the value of the <code>from</code> argument on <var data-name="firstOverride">firstOverride</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3538">Let <var data-name="sourceSchema">sourceSchema</var> be the schema defining <var data-name="firstOverride">firstOverride</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3539">Let <var data-name="visited">visited</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3540">Add <var data-name="sourceSchema">sourceSchema</var> to <var data-name="visited">visited</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3541-L3551">While <var data-name="from">from</var> is not null:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3542"><var data-name="from">from</var> must <strong>not</strong> be in <var data-name="visited">visited</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3543">Add <var data-name="from">from</var> to <var data-name="visited">visited</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3544-L3545">Let <var data-name="sourceField">sourceField</var> be the field in <var data-name="fields">fields</var> that belongs to the schema named <var data-name="from">from</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3546-L3547">If <var data-name="sourceField">sourceField</var> does not exist:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3547">Break</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3548-L3549">If <var data-name="sourceField">sourceField</var> is <strong>not</strong> annotated with <code>@override</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3549">Break</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3550-L3551">Let <var data-name="from">from</var> be the value of the <code>from</code> argument on that <code>@override</code> directive.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3552">The size of <var data-name="visited">visited</var> must be equal to the size of <var data-name="overrides">overrides</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-Source-Has-Override.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3554"><a href="#sec-Override-Source-Has-Override.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3556-L3560">A field marked with <code>@override</code> signifies that its ownership is being taken over by another schema. If multiple schemas try to override the same field, or if the ownership chain loops back on itself, the composed schema has more than one <code>@override</code> for a single field. This creates ambiguity about which schema ultimately owns that field.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3562-L3564">Hence, <strong>only one</strong> <code>@override</code> may ever apply to a particular field across all source schemas. Attempting multiple overrides, or forming any cycle of overrides for the same field, triggers the <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
</section>
<section id="sec-Override-Source-Has-Override.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3566"><a href="#sec-Override-Source-Has-Override.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3568-L3570">In this scenario, <code>Bill.amount</code> is originally owned by <strong>Schema A</strong> but is overridden in <strong>Schema B</strong>. No other schema further attempts to override the same field, so the composition is valid.</p>
<pre id="example-f4d46" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3572-L3584"><a href="#example-f4d46">Example № 151</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3586-L3589">Here, <strong>Schema A</strong> overrides <code>Bill.amount</code> from <strong>Schema B</strong>, while <strong>Schema B</strong> also overrides the same field from <strong>Schema A</strong>. This circular override makes it impossible to discern a single &ldquo;owner&rdquo; of the field <code>Bill.amount</code>, raising an <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
<pre id="example-e8e91" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3591-L3603"><a href="#example-e8e91">Counter Example № 152</a><code><span class="token comment"># Source Schema A (named "SchemaA")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaB"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B (named "SchemaB")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3605-L3607">In this case, the same field <code>Bill.amount</code> is overridden successively by A, then B, then C. Tracing these overrides forms a cycle (A &rarr; B &rarr; C &rarr; A). This again produces an <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
<pre id="example-147a2" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3609-L3627"><a href="#example-147a2">Counter Example № 153</a><code><span class="token comment"># Source Schema A (named "A")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"B"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B (named "B")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema C (named "C")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"A"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3629-L3632">In the following counter-example, the field <code>Bill.amount</code> is overridden by multiple schemas. The overrides do not form a cycle, hence there are multiple overrides for the same field, triggering an <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
<pre id="example-13b23" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3634-L3652"><a href="#example-13b23">Counter Example № 154</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaC"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaC"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema C</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Pre-Merge-Validation.Validate-Shareable-Directives" secid="3.2.7">
<h3 data-source="spec/Section%204%20--%20Composition.md#L3654"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation.Validate-Shareable-Directives">3.2.7</a></span>Validate Shareable Directives</h3>
<section id="sec-Invalid-Field-Sharing" secid="3.2.7.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3656"><span class="spec-secid" title="link to this section"><a href="#sec-Invalid-Field-Sharing">3.2.7.1</a></span>Invalid Field Sharing</h4>
<section id="sec-Invalid-Field-Sharing.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3658"><a href="#sec-Invalid-Field-Sharing.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3660"><code>INVALID_FIELD_SHARING</code></p>
</section>
<section id="sec-Invalid-Field-Sharing.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3662"><a href="#sec-Invalid-Field-Sharing.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3664">ERROR</p>
</section>
<section id="sec-Invalid-Field-Sharing.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3666"><a href="#sec-Invalid-Field-Sharing.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3668-L3669">Let <var data-name="typeNames">typeNames</var> be the set of all object type names from all source schemas that are not declared as <code>@internal</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L3670-L3681">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3671-L3672">Let <var data-name="typeDefinitions">typeDefinitions</var> be the list of all object type definitions from all source schemas with the name <var data-name="typeName">typeName</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3673-L3675">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all <var data-name="typeDefinitions">typeDefinitions</var> that are not declared as <code>@internal</code> or <code>@external</code>, part of a <code>@key</code> directive, or overridden.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3676-L3681">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3677-L3681">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the list of all field definitions from <var data-name="typeDefinitions">typeDefinitions</var> with the name <var data-name="fieldName">fieldName</var>.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3679-L3681">If <var data-name="fieldDefinitions">fieldDefinitions</var> has more than one element:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3680-L3681">For each <var data-name="fieldDefinition">fieldDefinition</var> in <var data-name="fieldDefinitions">fieldDefinitions</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3681"><var data-name="fieldDefinition">fieldDefinition</var> must be annotated with <code>@shareable</code>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Invalid-Field-Sharing.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3683"><a href="#sec-Invalid-Field-Sharing.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3685-L3688">A field in a federated GraphQL schema may be marked <code>@shareable</code>, indicating that the same field can be resolved by multiple schemas without conflict. When a field is <strong>not</strong> marked as <code>@shareable</code> (sometimes called &ldquo;non-shareable&rdquo;), it cannot be provided by more than one schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3690-L3692">Field definitions marked as <code>@external</code> and overridden fields are excluded when validating whether a field is shareable. These annotations indicate specific cases where field ownership lies with another schema or has been replaced.</p>
</section>
<section id="sec-Invalid-Field-Sharing.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3694"><a href="#sec-Invalid-Field-Sharing.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3696-L3697">In this example, the <code>User</code> type field <code>fullName</code> is marked as shareable in both schemas, allowing them to serve consistent data for that field without conflict.</p>
<pre id="example-7ca60" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3699-L3713"><a href="#example-7ca60">Example № 155</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3715-L3717">In the following example, <code>User.fullName</code> is overridden in one schema and therefore the field can be defined in the other schema without being marked as <code>@shareable</code>.</p>
<pre id="example-a076a" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3719-L3731"><a href="#example-a076a">Example № 156</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"B"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3733-L3735">In the following example, <code>User.fullName</code> is marked as <code>@external</code> in one schema and therefore the field can be defined in the other schema without being marked as <code>@shareable</code>.</p>
<pre id="example-794db" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3737-L3749"><a href="#example-794db">Example № 157</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3751-L3753">In the following counter-example, <code>User.fullName</code> is non-shareable but is defined and resolved by two different schemas, resulting in an <code>INVALID_FIELD_SHARING</code> error.</p>
<pre id="example-0d943" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3755-L3767"><a href="#example-0d943">Counter Example № 158</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Merge" secid="3.3">
<h2 data-source="spec/Section%204%20--%20Composition.md#L3769"><span class="spec-secid" title="link to this section"><a href="#sec-Merge">3.3</a></span>Merge</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L3771-L3774">During this stage, all definitions from each source schema are combined into a single schema. This section defines the rules for merging schema definitions. The goal is to create a composite schema that includes all type system members from each source schema that are publicly accessible.</p>
<div class="spec-algo" id="MergeSchemas()" data-source="spec/Section%204%20--%20Composition.md#L3776-L3787">
<span class="spec-call"><a href="#MergeSchemas()" data-name="MergeSchemas">MergeSchemas</a>(<var data-name="schemas">schemas</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3778">Let <var data-name="mergedSchema">mergedSchema</var> be an empty schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3779-L3780">Let <var data-name="memberNames">memberNames</var> be the set of all object, interface, union, enum and input type names in <var data-name="schemas">schemas</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3781-L3786">For each <var data-name="memberName">memberName</var> in <var data-name="memberNames">memberNames</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3782-L3783">Let <var data-name="types">types</var> be the set of all types named <var data-name="memberName">memberName</var> across all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3784">Let <var data-name="mergedType">mergedType</var> be the result of <span class="spec-call"><a href="#MergeTypes()" data-name="MergeTypes">MergeTypes</a>(<var data-name="types">types</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3785-L3786">If <var data-name="mergedType">mergedType</var> is not <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3786">Add <var data-name="mergedType">mergedType</var> to <var data-name="mergedSchema">mergedSchema</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3787">Return <var data-name="mergedSchema">mergedSchema</var>.</li>
</ol>
</div>
<div class="spec-algo" id="MergeTypes()" data-source="spec/Section%204%20--%20Composition.md#L3789-L3805">
<span class="spec-call"><a href="#MergeTypes()" data-name="MergeTypes">MergeTypes</a>(<var data-name="types">types</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3791">Let <var data-name="firstType">firstType</var> be the first type in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3792">Let <var data-name="kind">kind</var> be the kind of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3793">Assert: All types in <var data-name="types">types</var> have the same kind.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3794-L3795">If <var data-name="kind">kind</var> is <code>SCALAR</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3795">Return the result of <span class="spec-call"><a href="#MergeScalarTypes()" data-name="MergeScalarTypes">MergeScalarTypes</a>(<var data-name="types">types</var>)</span>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3796-L3797">If <var data-name="kind">kind</var> is <code>INTERFACE</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3797">Return the result of <span class="spec-call"><a href="#MergeInterfaceTypes()" data-name="MergeInterfaceTypes">MergeInterfaceTypes</a>(<var data-name="types">types</var>)</span>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3798-L3799">If <var data-name="kind">kind</var> is <code>ENUM</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3799">Return the result of <span class="spec-call"><a href="#MergeEnumTypes()" data-name="MergeEnumTypes">MergeEnumTypes</a>(<var data-name="types">types</var>)</span>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3800-L3801">If <var data-name="kind">kind</var> is <code>UNION</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3801">Return the result of <span class="spec-call"><a href="#MergeUnionTypes()" data-name="MergeUnionTypes">MergeUnionTypes</a>(<var data-name="types">types</var>)</span>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3802-L3803">If <var data-name="kind">kind</var> is <code>INPUT_OBJECT</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3803">Return the result of <span class="spec-call"><a href="#MergeInputTypes()" data-name="MergeInputTypes">MergeInputTypes</a>(<var data-name="types">types</var>)</span>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3804-L3805">If <var data-name="kind">kind</var> is <code>OBJECT</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3805">Return the result of <span class="spec-call"><a href="#MergeObjectTypes()" data-name="MergeObjectTypes">MergeObjectTypes</a>(<var data-name="types">types</var>)</span>.</li>
</ol>
</li>
</ol>
</div>
<section id="sec-Merge-Scalar-Types" secid="3.3.1">
<h3 data-source="spec/Section%204%20--%20Composition.md#L3807"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Scalar-Types">3.3.1</a></span>Merge Scalar Types</h3>
<section id="sec-Merge-Scalar-Types.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3809"><a href="#sec-Merge-Scalar-Types.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeScalarTypes()" data-source="spec/Section%204%20--%20Composition.md#L3811-L3821">
<span class="spec-call"><a href="#MergeScalarTypes()" data-name="MergeScalarTypes">MergeScalarTypes</a>(<var data-name="scalars">scalars</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3813-L3814">If any <var data-name="scalar">scalar</var> in <var data-name="scalars">scalars</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3814">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3815">Let <var data-name="firstScalar">firstScalar</var> be the first scalar in <var data-name="scalars">scalars</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3816">Let <var data-name="description">description</var> be the description of <var data-name="firstScalar">firstScalar</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3817-L3819">For each <var data-name="scalar">scalar</var> in <var data-name="scalars">scalars</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3818-L3819">If <var data-name="description">description</var> is <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3819">Set <var data-name="description">description</var> to the description of <var data-name="scalar">scalar</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3820-L3821">Return a new scalar type with the name of <var data-name="firstScalar">firstScalar</var> and description of <var data-name="description">description</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Scalar-Types.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3823"><a href="#sec-Merge-Scalar-Types.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3825-L3828"><span class="spec-call"><a href="#MergeScalarTypes()" data-name="MergeScalarTypes">MergeScalarTypes</a>(<var data-name="scalars">scalars</var>)</span> merges multiple scalar definitions that share the same name into a single scalar type. It filters out scalars marked with <code>@inaccessible</code> and unifies descriptions so that the final type retains the first available non-<code>null</code> description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3830"><em>Inaccessible Scalars</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3832-L3834">If any scalar is labeled with <code>@inaccessible</code>, the merge immediately returns <code>null</code>. A scalar that cannot be exposed to consumers renders the entire type unusable.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3836"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3838-L3840">The final description is determined by the first non-<code>null</code> description found in the list of scalars. If no descriptions are found, the final description is <code>null</code>.</p>
</section>
<section id="sec-Merge-Scalar-Types.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3842"><a href="#sec-Merge-Scalar-Types.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3844-L3845">Here, two <code>Date</code> scalar types from different schemas are merged into a single composed <code>Date</code> scalar type.</p>
<pre id="example-d83f2" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3847-L3861"><a href="#example-d83f2">Example № 159</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">scalar</span> <span class="token class-name">Date</span>

<span class="token comment"># Schema B</span>

<span class="token description string">"<span class="token language-markdown">A scalar representing a calendar date.</span>"</span>
<span class="token keyword">scalar</span> <span class="token class-name">Date</span>

<span class="token comment"># Composed Result</span>

<span class="token description string">"<span class="token language-markdown">A scalar representing a calendar date.</span>"</span>
<span class="token keyword">scalar</span> <span class="token class-name">Date</span>
</code></pre>
</section>
</section>
<section id="sec-Merge-Interface-Types" secid="3.3.2">
<h3 data-source="spec/Section%204%20--%20Composition.md#L3863"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Interface-Types">3.3.2</a></span>Merge Interface Types</h3>
<section id="sec-Merge-Interface-Types.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3865"><a href="#sec-Merge-Interface-Types.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeInterfaceTypes()" data-source="spec/Section%204%20--%20Composition.md#L3867-L3885">
<span class="spec-call"><a href="#MergeInterfaceTypes()" data-name="MergeInterfaceTypes">MergeInterfaceTypes</a>(<var data-name="types">types</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3869-L3870">If any <var data-name="type">type</var> in <var data-name="types">types</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3870">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3871">Let <var data-name="firstType">firstType</var> be the first type in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3872">Let <var data-name="typeName">typeName</var> be the name of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3873">Let <var data-name="description">description</var> be the description of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3874">Let <var data-name="mergedFields">mergedFields</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3875-L3877">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3876-L3877">If <var data-name="description">description</var> is <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3877">Set <var data-name="description">description</var> to the description of <var data-name="type">type</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3878">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3879-L3883">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3880">Let <var data-name="fields">fields</var> be the set of fields with the name <var data-name="fieldName">fieldName</var> in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3881">Let <var data-name="mergedField">mergedField</var> be the result of <span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3882-L3883">If <var data-name="mergedField">mergedField</var> is not <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3883">Add <var data-name="mergedField">mergedField</var> to <var data-name="mergedFields">mergedFields</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3884-L3885">Return a new interface type with the name of <var data-name="typeName">typeName</var>, description of <var data-name="description">description</var>, and fields of <var data-name="mergedFields">mergedFields</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Interface-Types.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3887"><a href="#sec-Merge-Interface-Types.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3889-L3892"><span class="spec-call"><a href="#MergeInterfaceTypes()" data-name="MergeInterfaceTypes">MergeInterfaceTypes</a>(<var data-name="types">types</var>)</span> unifies multiple interface definitions (all sharing the <em>same name</em>) into a single composed interface type. If any one of these interfaces is marked <code>@inaccessible</code>, the merge immediately returns <code>null</code>, preventing inclusion of that interface in the final schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3894"><em>Inaccessible Interfaces</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3896-L3897">A type marked <code>@inaccessible</code> disqualifies the entire merge, ensuring no references to inaccessible types appear in the final schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3899"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3901-L3903">Among the valid interfaces, the description is taken from the first non-<code>null</code> description encountered. If all interfaces lack a description, the resulting interface has none.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3905"><em>Merging Fields</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3907-L3910">Each interface contributes its fields. Those fields that share the same name across multiple interfaces are reconciled via <span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span>. This ensures any differences in type, nullability, or other constraints are resolved before appearing in the final interface.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3912-L3914">By applying these steps, <span class="spec-call"><a href="#MergeInterfaceTypes()" data-name="MergeInterfaceTypes">MergeInterfaceTypes</a>(<var data-name="types">types</var>)</span> produces a coherent interface type definition that reflects the fields from all compatible sources while adhering to accessibility constraints.</p>
</section>
<section id="sec-Merge-Interface-Types.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3916"><a href="#sec-Merge-Interface-Types.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3918-L3919">Here, two <code>Product</code> interface types from different schemas are merged into a single composed <code>Product</code> interface type.</p>
<pre id="example-2f1d4" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3921-L3943"><a href="#example-2f1d4">Example № 160</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">createdAt</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3945-L3948">In this example, the <code>Product</code> interface type from two schemas is merged. The <code>id</code> field is shared across both schemas, while <code>name</code> and <code>createdAt</code> fields are contributed by the individual source schemas. The resulting composed type includes all fields.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3950-L3951">The following example shows how the description is retained when merging interface types:</p>
<pre id="example-7f477" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3953-L3980"><a href="#example-7f477">Example № 161</a><code><span class="token comment"># Schema A</span>

<span class="token description string">"""<span class="token language-markdown">
First description
</span>"""</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token description string">"""<span class="token language-markdown">
Second description
</span>"""</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token description string">"""<span class="token language-markdown">
First description
</span>"""</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Merge-Enum-Types" secid="3.3.3">
<h3 data-source="spec/Section%204%20--%20Composition.md#L3982"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Enum-Types">3.3.3</a></span>Merge Enum Types</h3>
<section id="sec-Merge-Enum-Types.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3984"><a href="#sec-Merge-Enum-Types.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeEnumTypes()" data-source="spec/Section%204%20--%20Composition.md#L3986-L4005">
<span class="spec-call"><a href="#MergeEnumTypes()" data-name="MergeEnumTypes">MergeEnumTypes</a>(<var data-name="enums">enums</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3988-L3989">If any <var data-name="enum">enum</var> in <var data-name="enums">enums</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3989">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3990">Let <var data-name="firstEnum">firstEnum</var> be the first enum in <var data-name="enums">enums</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3991-L3994">If <var data-name="enums">enums</var> contains only one enum<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3992-L3994">Return a new enum type with the name of <var data-name="firstEnum">firstEnum</var>, description of <var data-name="firstEnum">firstEnum</var>, and enum values of <var data-name="firstEnum">firstEnum</var> excluding any marked with <code>@inaccessible</code>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3995">Let <var data-name="typeName">typeName</var> be the name of <var data-name="firstEnum">firstEnum</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3996">Let <var data-name="description">description</var> be the first non empty description of any <var data-name="enum">enum</var> in <var data-name="enums">enums</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3997">Let <var data-name="mergedValues">mergedValues</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3998">Let <var data-name="valueNames">valueNames</var> be the set of all enum value names in <var data-name="enums">enums</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3999-L4003">For each <var data-name="valueName">valueName</var> in <var data-name="valueNames">valueNames</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4000">Let <var data-name="values">values</var> be the set of enum values with the name <var data-name="valueName">valueName</var> in <var data-name="enums">enums</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4001">Let <var data-name="mergedValue">mergedValue</var> be the result of <span class="spec-call"><a href="#MergeEnumValues()" data-name="MergeEnumValues">MergeEnumValues</a>(<var data-name="values">values</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4002-L4003">If <var data-name="mergedValue">mergedValue</var> is not <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4003">Add <var data-name="mergedValue">mergedValue</var> to <var data-name="mergedValues">mergedValues</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4004-L4005">Return a new enum type with the name of <var data-name="typeName">typeName</var>, description of <var data-name="description">description</var>, and enum values of <var data-name="mergedValues">mergedValues</var>.</li>
</ol>
</div>
<div class="spec-algo" id="MergeEnumValues()" data-source="spec/Section%204%20--%20Composition.md#L4007-L4015">
<span class="spec-call"><a href="#MergeEnumValues()" data-name="MergeEnumValues">MergeEnumValues</a>(<var data-name="enumValues">enumValues</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4009-L4010">If any <var data-name="enumValue">enumValue</var> in <var data-name="enumValues">enumValues</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4010">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4011">Let <var data-name="name">name</var> be the name of the first <var data-name="enumValue">enumValue</var> in <var data-name="enumValues">enumValues</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4012-L4013">Let <var data-name="description">description</var> be the first non empty description of any <var data-name="enumValue">enumValue</var> in <var data-name="enumValues">enumValues</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4014-L4015">Return a new enum value with the name of <var data-name="name">name</var> and description of <var data-name="description">description</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Enum-Types.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4017"><a href="#sec-Merge-Enum-Types.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4019-L4021"><span class="spec-call"><a href="#MergeEnumTypes()" data-name="MergeEnumTypes">MergeEnumTypes</a>(<var data-name="enums">enums</var>)</span> consolidates multiple enum definitions (all sharing the <em>same name</em>) into one final enum type, while filtering out any parts marked with <code>@inaccessible</code>. If an entire enum is inaccessible, the merge returns <code>null</code>.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4023"><em>Inaccessible Enums</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4025-L4027">If any enum in the input set is marked <code>@inaccessible</code>, the entire merge operation is invalid. The algorithm immediately returns <code>null</code>, since that type cannot appear in the composed schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4029"><em>Single vs. Multiple Enum Definitions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4031-L4033">When only one enum definition is present (after removing any inaccessible ones), it is used as is, except that any values marked with <code>@inaccessible</code> are excluded.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4035-L4038">However, if an enum appears in multiple schemas, the enums must match exactly in their values and structure unless some values are excluded using the <code>@inaccessible</code> directive. This behavior is enforced by prior validation but is important to note as it determines how mismatched enums are handled.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4040"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4042-L4044">The first non-<code>null</code> description encountered among the enums is used for the final definition. If no definitions supply a description, the merged enum will have none.</p>
</section>
<section id="sec-Merge-Enum-Types.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4046"><a href="#sec-Merge-Enum-Types.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4048-L4050">Here, two <code>Status</code> enums from different schemas are merged into a single composed <code>Status</code> enum. The enums are identical, so the composed enum exactly matches the source enums.</p>
<pre id="example-65465" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4052-L4073"><a href="#example-65465">Example № 162</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span>
  <span class="token constant">INACTIVE</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span>
  <span class="token constant">INACTIVE</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span>
  <span class="token constant">INACTIVE</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4075-L4076">If the enums differ in their values, the source schemas <strong>must</strong> define their unique values as <code>@inaccessible</code> to exclude them from the composed enum.</p>
<pre id="example-4cc8f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4078-L4098"><a href="#example-4cc8f">Example № 163</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token constant">ACTIVE</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">INACTIVE</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token constant">PENDING</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">INACTIVE</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">enum</span> <span class="token class-name">Status</span> <span class="token punctuation">{</span>
  <span class="token constant">INACTIVE</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Merge-Union-Types" secid="3.3.4">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4100"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Union-Types">3.3.4</a></span>Merge Union Types</h3>
<section id="sec-Merge-Union-Types.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4102"><a href="#sec-Merge-Union-Types.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeUnionTypes()" data-source="spec/Section%204%20--%20Composition.md#L4104-L4119">
<span class="spec-call"><a href="#MergeUnionTypes()" data-name="MergeUnionTypes">MergeUnionTypes</a>(<var data-name="unions">unions</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4106-L4107">If any <var data-name="union">union</var> in <var data-name="unions">unions</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4107">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4108">Let <var data-name="firstUnion">firstUnion</var> be the first union in <var data-name="unions">unions</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4109">Let <var data-name="name">name</var> be the name of <var data-name="firstUnion">firstUnion</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4110">Let <var data-name="description">description</var> be the description of <var data-name="firstUnion">firstUnion</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4111">Let <var data-name="possibleTypes">possibleTypes</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4112-L4117">For each <var data-name="union">union</var> in <var data-name="unions">unions</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4113-L4114">If <var data-name="description">description</var> is <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4114">Set <var data-name="description">description</var> to the description of <var data-name="union">union</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4115-L4117">For each <var data-name="possibleType">possibleType</var> in the possible types of <var data-name="union">union</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4116-L4117">If <var data-name="possibleType">possibleType</var> is not marked with <code>@inaccessible</code> or <code>@internal</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4117">Add <var data-name="possibleType">possibleType</var> to <var data-name="possibleTypes">possibleTypes</var>.</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4118-L4119">Return a new union with the name of <var data-name="name">name</var>, description of <var data-name="description">description</var>, and possible types of <var data-name="possibleTypes">possibleTypes</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Union-Types.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4121"><a href="#sec-Merge-Union-Types.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4123-L4126"><span class="spec-call"><a href="#MergeUnionTypes()" data-name="MergeUnionTypes">MergeUnionTypes</a>(<var data-name="unions">unions</var>)</span> aggregates multiple union type definitions that share the <em>same name</em> into one unified union type. This process skips any union marked with <code>@inaccessible</code> and excludes possible types marked with <code>@inaccessible</code> or <code>@internal</code>.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4128"><em>Inaccessible Unions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4130-L4131">If any union in the input list is marked <code>@inaccessible</code>, the merged result must be <code>null</code> and cannot appear in the final schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4133"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4135-L4137">The first non-empty description that is found is used as the description for the merged union. If no descriptions are found, the merged union will have no description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4139"><em>Combining Possible Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4141-L4144">Each union&rsquo;s possible types are considered in turn. Only those that are <em>not</em> marked <code>@internal</code> or <code>@inaccessible</code> are included in the final composed union. This preserves the valid types from all sources while systematically filtering out anything inaccessible or intended for internal use only.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4146-L4147">In case there are no possible types left after filtering, the merged union is considered <code>@inaccessible</code> and cannot appear in the final schema.</p>
</section>
<section id="sec-Merge-Union-Types.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4149"><a href="#sec-Merge-Union-Types.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4151-L4152">Here, two <code>SearchResult</code> union types from different schemas are merged into a single composed <code>SearchResult</code> type.</p>
<pre id="example-711a7" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4154-L4166"><a href="#example-711a7">Example № 164</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Order</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">User</span> <span class="token operator">|</span> <span class="token property">Order</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Order</span> <span class="token operator">|</span> <span class="token property">User</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4168-L4171">In this example, the <code>SearchResult</code> union type from two schemas is merged. The <code>Order</code> type is shared across both schemas, while <code>Product</code> and <code>User</code> types are contributed by the individual source schemas. The resulting composed type includes all valid possible types.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4173">Another example shows how <code>@inaccessible</code> on a possible affects the merge:</p>
<pre id="example-431e0" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4175-L4191"><a href="#example-431e0">Example № 165</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Order</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">User</span> <span class="token operator">|</span> <span class="token property">Order</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Order</span> <span class="token operator">|</span> <span class="token property">User</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4193-L4195">In this case, the <code>Product</code> type is marked with <code>@inaccessible</code> in the first schema. As a result, the <code>Product</code> type is excluded from the composed <code>SearchResult</code></p>
</section>
</section>
<section id="sec-Merge-Input-Types" secid="3.3.5">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4197"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Input-Types">3.3.5</a></span>Merge Input Types</h3>
<section id="sec-Merge-Input-Types.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4199"><a href="#sec-Merge-Input-Types.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeInputTypes()" data-source="spec/Section%204%20--%20Composition.md#L4201-L4226">
<span class="spec-call"><a href="#MergeInputTypes()" data-name="MergeInputTypes">MergeInputTypes</a>(<var data-name="types">types</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4203-L4204">If any <var data-name="type">type</var> in <var data-name="types">types</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4204">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4205">Let <var data-name="firstType">firstType</var> be the first type in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4206">Let <var data-name="typeName">typeName</var> be the name of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4207">Let <var data-name="description">description</var> be the description of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4208">Let <var data-name="mergedFields">mergedFields</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4209-L4211">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4210-L4211">If <var data-name="description">description</var> is <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4211">Set <var data-name="description">description</var> to the description of <var data-name="type">type</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4212">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4213-L4222">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4214-L4215">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the set of fields with the name <var data-name="fieldName">fieldName</var> in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4216-L4217">If length of <var data-name="fieldDefinitions">fieldDefinitions</var> is not equal to the length of <var data-name="types">types</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4217">Continue</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4218-L4219">If any field in <var data-name="fieldDefinitions">fieldDefinitions</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4219">Continue</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4220">Let <var data-name="mergedField">mergedField</var> be the result of <span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fieldDefinitions">fieldDefinitions</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4221-L4222">If <var data-name="mergedField">mergedField</var> is not <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4222">Add <var data-name="mergedField">mergedField</var> to <var data-name="fields">fields</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4223-L4224">If <var data-name="fields">fields</var> is empty:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4224">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4225-L4226">Return a new input type with the name of <var data-name="typeName">typeName</var>, description of <var data-name="description">description</var>, and fields of <var data-name="fields">fields</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Input-Types.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4228"><a href="#sec-Merge-Input-Types.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4230-L4234">The <span class="spec-call"><a href="#MergeInputTypes()" data-name="MergeInputTypes">MergeInputTypes</a>(<var data-name="types">types</var>)</span> algorithm produces a single input type definition by unifying multiple input types that share the <em>same name</em>. Each of these input types may come from different sources, yet must align into one coherent definition. Any type marked <code>@inaccessible</code> disqualifies the entire merge result from inclusion in the composed schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4236"><em>Inaccessible Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4238-L4240">If an input type is annotated with <code>@inaccessible</code>, the algorithm immediately returns <code>null</code>. Including an inaccessible type would mean exposing a field that&rsquo;s not allowed in the composed schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4242"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4244-L4246">The first non-<code>null</code> description encountered is used for the final input type. If no such description exists among the source types, the resulting input type definition has no description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4248"><em>Merging Fields</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4250-L4256">After filtering out inaccessible types, the algorithm merges each input field name found across the remaining types. For each field, <span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fields">fields</var>)</span> is called to reconcile differences in type, nullability, default values, etc.. If a merged field ends up being <code>null</code> - for instance, because one of its underlying definitions was inaccessible &ndash; that field is not included in the final definition. The end result is a single input type that correctly unifies every compatible field from the various sources.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4258-L4263">After filtering out inaccessible types, the algorithm takes the <strong>intersection</strong> of the field names across the remaining types &ndash; only those fields that appear in <strong>every</strong> source definition are eligible. For each eligible field, it invokes <span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fieldsForName">fieldsForName</var>)</span> to reconcile differences in type, nullability, default values, etc. The end result is a single input type that correctly unifies every compatible field that appears in all source types.</p>
</section>
<section id="sec-Merge-Input-Types.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4265"><a href="#sec-Merge-Input-Types.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4267-L4269">Here, two <code>OrderInput</code> input types from different schemas are merged into a single composed <code>OrderInput</code> type. Notice that only the fields present in <em>both</em> schemas are included.</p>
<pre id="example-1bbc8" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4271-L4291"><a href="#example-1bbc8">Example № 166</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">OrderInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">OrderInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">total</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">OrderInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4293-L4294">Although <code>description</code> appears in Schema A and <code>total</code> appears in Schema B, neither field is defined in <em>both</em> schemas; therefore, only <code>id</code> remains.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4296">Another example demonstrates preserving descriptions during merging:</p>
<pre id="example-ded26" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4298-L4325"><a href="#example-ded26">Example № 167</a><code><span class="token comment"># Schema A</span>

<span class="token description string">"""<span class="token language-markdown">
First Description
</span>"""</span>
<span class="token keyword">input</span> <span class="token atom-input class-name">OrderInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token description string">"""<span class="token language-markdown">
Second Description
</span>"""</span>
<span class="token keyword">input</span> <span class="token atom-input class-name">OrderInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token description string">"""<span class="token language-markdown">
First Description
</span>"""</span>
<span class="token keyword">input</span> <span class="token atom-input class-name">OrderInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4327-L4328">In this case, the description from the first schema is retained, while the fields are merged from both schemas to create the final <code>OrderInput</code> type.</p>
</section>
</section>
<section id="sec-Merge-Object-Types" secid="3.3.6">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4330"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Object-Types">3.3.6</a></span>Merge Object Types</h3>
<section id="sec-Merge-Object-Types.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4332"><a href="#sec-Merge-Object-Types.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeObjectTypes()" data-source="spec/Section%204%20--%20Composition.md#L4334-L4355">
<span class="spec-call"><a href="#MergeObjectTypes()" data-name="MergeObjectTypes">MergeObjectTypes</a>(<var data-name="types">types</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4336-L4337">If any <var data-name="type">type</var> in <var data-name="types">types</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4337">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4338">Remove all types marked with <code>@internal</code> from <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4339-L4340">If <var data-name="types">types</var> is empty:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4340">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4341">Let <var data-name="firstType">firstType</var> be the first type in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4342">Let <var data-name="typeName">typeName</var> be the name of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4343">Let <var data-name="description">description</var> be the description of <var data-name="firstType">firstType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4344">Let <var data-name="mergedFields">mergedFields</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4345-L4347">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4346-L4347">If <var data-name="description">description</var> is <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4347">Set <var data-name="description">description</var> to the description of <var data-name="type">type</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4348">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4349-L4353">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4350">Let <var data-name="fields">fields</var> be the set of fields with the name <var data-name="fieldName">fieldName</var> in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4351">Let <var data-name="mergedField">mergedField</var> be the result of <span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4352-L4353">If <var data-name="mergedField">mergedField</var> is not <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4353">Add <var data-name="mergedField">mergedField</var> to <var data-name="mergedFields">mergedFields</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4354-L4355">Return a new object type with the name of <var data-name="typeName">typeName</var>, description of <var data-name="description">description</var>, fields of <var data-name="mergedFields">mergedFields</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Object-Types.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4357"><a href="#sec-Merge-Object-Types.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4359-L4362">The <span class="spec-call"><a href="#MergeObjectTypes()" data-name="MergeObjectTypes">MergeObjectTypes</a>(<var data-name="types">types</var>)</span> algorithm combines multiple object type definitions (all sharing the <em>same name</em>) into a single composed type. It processes each candidate type, discarding any that are inaccessible or internal, and then unifies their descriptions and fields.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4364"><em>Inaccessible Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4366-L4368">If an object type is marked with <code>@inaccessible</code>, the entire merged result must be <code>null</code>; we cannot include that type in the composed schema. Inaccessible types are disqualified at the outset.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4370"><em>Internal Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4372-L4374">Any type marked with <code>@internal</code> is removed from consideration before merging begins. None of its fields or descriptions will factor into the final composed type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4376"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4378-L4380">The first non-<code>null</code> description encountered is used for the final object type&rsquo;s description. If no non-<code>null</code> description is found, the resulting object type simply has no description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4382"><em>Merging Fields</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4384-L4389">All remaining object types contribute their fields. The algorithm gathers every field name across these types, then calls <span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span> for each name to reconcile any differences. If <span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span> returns <span class="spec-keyword">null</span> (for instance, because a field is marked <code>@inaccessible</code>), that field is excluded from the final object type. The result is a unified set of fields that reflects each source definition while maintaining compatibility across them.</p>
</section>
<section id="sec-Merge-Object-Types.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4391"><a href="#sec-Merge-Object-Types.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4393-L4394">Here, two <code>Product</code> object types from different schemas are merged into a single composed <code>Product</code> type.</p>
<pre id="example-ae3de" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4396-L4418"><a href="#example-ae3de">Example № 168</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4420-L4423">In this example, the <code>Product</code> type from two schemas is merged. The <code>id</code> field is shared across both schemas, while <code>name</code> and <code>price</code> fields are contributed by the individual source schemas. The resulting composed type includes all fields.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4425">Another example demonstrates preserving descriptions during merging:</p>
<pre id="example-94d82" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4427-L4456"><a href="#example-94d82">Example № 169</a><code><span class="token comment"># Schema A</span>

<span class="token description string">"""<span class="token language-markdown">
First Description
</span>"""</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token description string">"""<span class="token language-markdown">
Second Description
</span>"""</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">total</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token description string">"""<span class="token language-markdown">
First Description
</span>"""</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">total</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4458-L4459">In this case, the description from the first schema is retained, while the fields are merged from both schemas to create the final <code>Order</code> type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4461-L4462">In the following example, one of the <code>Product</code> types is marked with <code>@internal</code>. All its fields are excluded from the composed type.</p>
<pre id="example-28283" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4464-L4485"><a href="#example-28283">Example № 170</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@internal</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Merge-Output-Fields" secid="3.3.7">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4487"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Output-Fields">3.3.7</a></span>Merge Output Fields</h3>
<section id="sec-Merge-Output-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4489"><a href="#sec-Merge-Output-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeOutputFields()" data-source="spec/Section%204%20--%20Composition.md#L4491-L4522">
<span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4493-L4494">If any <var data-name="field">field</var> in <var data-name="fields">fields</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4494">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4495">Filter out all fields marked with <code>@internal</code> from <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4496-L4497">If <var data-name="fields">fields</var> is empty:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4497">Return <span class="spec-keyword">null</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4498">Let <var data-name="firstField">firstField</var> be the first field in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4499">Let <var data-name="fieldName">fieldName</var> be the name of <var data-name="firstField">firstField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4500">Let <var data-name="fieldType">fieldType</var> be the type of <var data-name="firstField">firstField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4501">Let <var data-name="description">description</var> be the description of <var data-name="firstField">firstField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4502-L4506">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4503">Let <var data-name="type">type</var> be the type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4504">Set <var data-name="fieldType">fieldType</var> to be the result of <span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="fieldType">fieldType</var>, <var data-name="type">type</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4505-L4506">If <var data-name="description">description</var> is <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4506">Let <var data-name="description">description</var> be the description of <var data-name="field">field</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4507">Let <var data-name="mergedArguments">mergedArguments</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4508">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4509-L4520">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4510-L4511">Let <var data-name="arguments">arguments</var> be the set of arguments with the name <var data-name="argumentName">argumentName</var> in <var data-name="fields">fields</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L4512-L4513">If length of <var data-name="arguments">arguments</var> is not equal to the length of <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4513">Continue.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4514-L4515">If any argument in <var data-name="arguments">arguments</var> is marked with <code>@inaccessible</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4515">Continue.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4516-L4517">If any argument in <var data-name="arguments">arguments</var> is marked with <code>@require</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4517">Continue.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4518">Let <var data-name="mergedArgument">mergedArgument</var> be the result of <span class="spec-call"><a href="#MergeArgumentDefinitions()" data-name="MergeArgumentDefinitions">MergeArgumentDefinitions</a>(<var data-name="arguments">arguments</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4519-L4520">If <var data-name="mergedArgument">mergedArgument</var> is not <span class="spec-keyword">null</span>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4520">Add <var data-name="mergedArgument">mergedArgument</var> to <var data-name="mergedArguments">mergedArguments</var>.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4521-L4522">Return a new field with the name of <var data-name="fieldName">fieldName</var>, type of <var data-name="fieldType">fieldType</var>, arguments of <var data-name="mergedArguments">mergedArguments</var>, and description of <var data-name="description">description</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Output-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4524"><a href="#sec-Merge-Output-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4526-L4530">The <span class="spec-call"><a href="#MergeOutputFields()" data-name="MergeOutputFields">MergeOutputFields</a>(<var data-name="fields">fields</var>)</span> algorithm is used when multiple fields across different object or interface types share the same field name and must be merged into a single composed field. This algorithm ensures that the final composed schema has one definitive definition for that field, resolving differences in type, description, and arguments.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4532"><em>Inaccessible Fields</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4534-L4536">If any of the fields is marked with <code>@inaccessible</code>, the entire merged field is discarded by returning <code>null</code>. A field that cannot be exposed in a composed schema prevents the field from being composed at all.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4538"><em>Internal Fields</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4540-L4544">Any field marked with <code>@internal</code> is removed from consideration before merging begins. This ensures that internal fields do not appear in the final composed schema and also do not affect the merging process. Internal fields are intended for internal use only and are not part of the composed schema and can collide in their definitions.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4546-L4547">In the case where all fields are marked with <code>@internal</code>, the field will not appear in the composed schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4549"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4551-L4553">The first field that defines a description is used as the description for the merged field. If no description is found, the merged field will have no description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4555"><em>Determining the Field Type</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4557-L4562">The return type of the composed field is determined by invoking <span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span>. This helper function computes a type that is compatible with all the provided field types, ensuring that the composed schema does not break schemas expecting any of those types. For example, <span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> might unify <code>String!</code> and <code>String</code> into <code>String</code>.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4564"><em>Merging Arguments</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4566-L4573">Each field can declare arguments. The algorithm collects all argument names across these fields and merges them using <span class="spec-call"><a href="#MergeArgumentDefinitions()" data-name="MergeArgumentDefinitions">MergeArgumentDefinitions</a>(<var data-name="arguments">arguments</var>)</span>. Before merging, any arguments marked with <code>@inaccessible</code> or <code>@require</code> are excluded. If this exclusion causes the number of arguments available for a given name to differ from the total number of fields &ndash; or if at least one schema omits the argument &ndash; the argument is skipped entirely. Otherwise, any differences in argument type, default value, or description are resolved via the merging rules in <span class="spec-call"><a href="#MergeArgumentDefinitions()" data-name="MergeArgumentDefinitions">MergeArgumentDefinitions</a>(<var data-name="arguments">arguments</var>)</span>.</p>
</section>
<section id="sec-Merge-Output-Fields.Example" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4575"><a href="#sec-Merge-Output-Fields.Example" title="link to this subsection">Example</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4577-L4578">Imagine two schemas with a <code>discountPercentage</code> field on a <code>Product</code> type that slightly differ in return type:</p>
<pre id="example-cfc76" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4580-L4604"><a href="#example-cfc76">Example № 171</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token description string">"""<span class="token language-markdown">
  Computes a discount as a percentage of the product's list price.
  </span>"""</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token description string">"""<span class="token language-markdown">
  Computes a discount as a percentage of the product's list price.
  </span>"""</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4606-L4607">If the argument is missing in one of the schemas, the composed field will not include that argument:</p>
<pre id="example-4ad7f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4609-L4624"><a href="#example-4ad7f">Example № 172</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4626-L4627">In case one argument is marked with <code>@inaccessible</code>, the composed field will not include that argument:</p>
<pre id="example-04271" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4629-L4644"><a href="#example-04271">Example № 173</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4646-L4647">In case a schema defines a requirement through the <code>@require</code> directive, the composed field will not include that argument</p>
<pre id="example-fbd01" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4649-L4665"><a href="#example-fbd01">Example № 174</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">discount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">discountPercentage</span><span class="token punctuation">(</span><span class="token attr-name">percent</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"discount"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">discountPercentage</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Merge-Input-Fields" secid="3.3.8">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4667"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Input-Fields">3.3.8</a></span>Merge Input Fields</h3>
<section id="sec-Merge-Input-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4669"><a href="#sec-Merge-Input-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeInputFields()" data-source="spec/Section%204%20--%20Composition.md#L4671-L4691">
<span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4673-L4674">If any <var data-name="field">field</var> in <var data-name="fields">fields</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4674">Return null</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4675">Let <var data-name="firstField">firstField</var> be the first field in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4676">Let <var data-name="fieldName">fieldName</var> be the name of <var data-name="firstField">firstField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4677">Let <var data-name="fieldType">fieldType</var> be the type of <var data-name="firstField">firstField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4678">Let <var data-name="description">description</var> be the description of <var data-name="firstField">firstField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4679-L4680">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="firstField">firstField</var> or undefined if none exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4681-L4689">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4682">Assert: <var data-name="field">field</var> is <strong>not</strong> marked with <code>@inaccessible</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L4683">Let <var data-name="type">type</var> be the type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4684">Set <var data-name="fieldType">fieldType</var> to be the result of <span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="fieldType">fieldType</var>, <var data-name="type">type</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4685-L4686">If <var data-name="description">description</var> is null:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4686">Let <var data-name="description">description</var> be the description of <var data-name="field">field</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4687-L4689">If <var data-name="defaultValue">defaultValue</var> is undefined:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4688-L4689">Set <var data-name="defaultValue">defaultValue</var> to the default value of <var data-name="field">field</var> or undefined if none exists.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4690-L4691">Return a new input field with the name of <var data-name="fieldName">fieldName</var>, type of <var data-name="fieldType">fieldType</var>, and description of <var data-name="description">description</var> and default value of <var data-name="defaultValue">defaultValue</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Input-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4693"><a href="#sec-Merge-Input-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4695-L4699">The <span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fields">fields</var>)</span> algorithm merges multiple input field definitions, all sharing the same field name, into a single composed input field. This ensures the final input type in a composed schema maintains a consistent type, description, and default value for that field. Below is a breakdown of how <span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fields">fields</var>)</span> operates:</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4701"><em>Inaccessible Fields</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4703-L4705">Before calling <span class="spec-call"><a href="#MergeInputFields()" data-name="MergeInputFields">MergeInputFields</a>(<var data-name="fields">fields</var>)</span>, all fields marked with <code>@inaccessible</code> must be filtered out. If any such field appears in the input, it is a precondition violation of this algorithm.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4707"><em>Combining Descriptions</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4709-L4711">The name of the merged field is taken from the first field in the list. The description is set to the first non-<code>null</code> description encountered among the fields. If no description is found, the merged field will have no description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4713"><em>Combining Field Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4715-L4721">The merged field type is computed by calling <span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> . Unlike output fields, where <span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> is used, input fields often follow stricter constraints. If one source schema defines a field as non-nullable and another as nullable, the merged field type must be non-nullable to satisfy both schemas. <span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> ensures a final input type that is compatible with all definitions of that field.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4723"><em>Inheriting Default Values</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4725-L4727">If multiple fields define default values, whichever appears first in the list effectively <em>wins</em>. If there are non compatible default values, the pre merge validation has already asserted that the default values are compatible.</p>
</section>
<section id="sec-Merge-Input-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4729"><a href="#sec-Merge-Input-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4731-L4732">Suppose we have two input type definitions for the same <code>OrderFilter</code> input field, defined in separate schemas:</p>
<pre id="example-e5e6c" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4734-L4758"><a href="#example-e5e6c">Example № 175</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">input</span> <span class="token object">OrderFilter</span> <span class="token punctuation">{</span>
  <span class="token description string">"""<span class="token language-markdown">
  Filter by the minimum order total
  </span>"""</span>
  <span class="token attr-name">minTotal</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">input</span> <span class="token object">OrderFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">minTotal</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">input</span> <span class="token object">OrderFilter</span> <span class="token punctuation">{</span>
  <span class="token description string">"""<span class="token language-markdown">
  Filter by the minimum order total
  </span>"""</span>
  <span class="token attr-name">minTotal</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4760-L4762">In the final schema, <code>minTotal</code> is defined using the most restrictive type (<code>Int!</code>), has a default value of <code>0</code>, and includes the description from the original field in <code>Schema A</code>.</p>
</section>
</section>
<section id="sec-Merge-Argument-Definitions" secid="3.3.9">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4764"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Argument-Definitions">3.3.9</a></span>Merge Argument Definitions</h3>
<section id="sec-Merge-Argument-Definitions.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4766"><a href="#sec-Merge-Argument-Definitions.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeArgumentDefinitions()" data-source="spec/Section%204%20--%20Composition.md#L4768-L4781">
<span class="spec-call"><a href="#MergeArgumentDefinitions()" data-name="MergeArgumentDefinitions">MergeArgumentDefinitions</a>(<var data-name="arguments">arguments</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4770-L4771">If any argument in <var data-name="arguments">arguments</var> is marked with <code>@inaccessible</code><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4771">Return null</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4772-L4773">Let <var data-name="mergedArgument">mergedArgument</var> be the first argument in <var data-name="arguments">arguments</var> that is not marked with <code>@require</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L4774-L4775">If <var data-name="mergedArgument">mergedArgument</var> is null<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4775">Return null</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4776-L4780">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4777">Assert: <var data-name="argument">argument</var> is <strong>not</strong> marked with <code>@inaccessible</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L4778">Assert: <var data-name="argument">argument</var> is <strong>not</strong> marked with <code>@require</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L4779-L4780">Set <var data-name="mergedArgument">mergedArgument</var> to the result of <span class="spec-call"><a href="#MergeArguments()" data-name="MergeArguments">MergeArguments</a>(<var data-name="mergedArgument">mergedArgument</var>, <var data-name="argument">argument</var>)</span></li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4781">Return <var data-name="mergedArgument">mergedArgument</var></li>
</ol>
</div>
</section>
<section id="sec-Merge-Argument-Definitions.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4783"><a href="#sec-Merge-Argument-Definitions.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4785-L4787"><span class="spec-call"><a href="#MergeArgumentDefinitions()" data-name="MergeArgumentDefinitions">MergeArgumentDefinitions</a>(<var data-name="arguments">arguments</var>)</span> merges multiple arguments that share the same name across different field definitions into a single composed argument definition.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4789"><em>Inaccessible Arguments</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4791-L4795">Inaccessible arguments (<code>@inaccessible</code>) should be handled and filtered out <strong>before</strong> calling <span class="spec-call"><a href="#MergeArgumentDefinitions()" data-name="MergeArgumentDefinitions">MergeArgumentDefinitions</a>(<var data-name="arguments">arguments</var>)</span>. By the time this algorithm is invoked, any arguments marked <code>@inaccessible</code> must already be removed. If such an argument somehow appears here, it is a precondition violation of this algorithm.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4797"><em>Handling <code>@require</code></em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4799-L4802">The <code>@require</code> directive is likewise handled <strong>before</strong> this algorithm. Arguments marked with <code>@require</code> do not participate in the merge process and must be filtered out of the input. If any <code>@require</code> arguments are included in this function, it is also a precondition violation.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4804"><em>Merging Arguments</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4806-L4809">All remaining arguments (those not marked <code>@inaccessible</code> or <code>@require</code>) are merged via <span class="spec-call"><a href="#MergeArguments()" data-name="MergeArguments">MergeArguments</a>(<var data-name="mergedArgument">mergedArgument</var>, <var data-name="argument">argument</var>)</span>. This algorithm ensures that the final composed argument is compatible with all definitions of that argument, resolving differences in type, default value, and description.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4811-L4814">By selectively merging differences where possible, this algorithm ensures that <code>@require</code>), and merging differences where possible, this algorithm ensures that the resulting composed argument is both valid and compatible with the source definitions.</p>
</section>
<section id="sec-Merge-Argument-Definitions.Example" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4816"><a href="#sec-Merge-Argument-Definitions.Example" title="link to this subsection">Example</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4818-L4819">Consider two field definitions that share the same <code>filter</code> argument, but with slightly different types and descriptions:</p>
<pre id="example-58ebf" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4821-L4854"><a href="#example-58ebf">Example № 176</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">searchProducts</span><span class="token punctuation">(</span>
    <span class="token description string">"""<span class="token language-markdown">
    Filter to apply to the search
    </span>"""</span>
    <span class="token attr-name">filter</span><span class="token punctuation">:</span> <span class="token class-name">ProductFilter</span><span class="token operator">!</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Product</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">searchProducts</span><span class="token punctuation">(</span>
    <span class="token description string">"""<span class="token language-markdown">
    Search filter to apply
    </span>"""</span>
    <span class="token attr-name">filter</span><span class="token punctuation">:</span> <span class="token class-name">ProductFilter</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Product</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composed Result</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">searchProducts</span><span class="token punctuation">(</span>
    <span class="token description string">"""<span class="token language-markdown">
    Filter to apply to the search
    </span>"""</span>
    <span class="token attr-name">filter</span><span class="token punctuation">:</span> <span class="token class-name">ProductFilter</span><span class="token operator">!</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Product</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L4856-L4858">In the merged schema, the <code>filter</code> argument is defined with the most restrictive type (<code>ProductFilter!</code>), includes the description from the original field in <code>Schema A</code>, and is marked as required.</p>
</section>
</section>
<section id="sec-Merge-Arguments" secid="3.3.10">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4860"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Arguments">3.3.10</a></span>Merge Arguments</h3>
<section id="sec-Merge-Arguments.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4862"><a href="#sec-Merge-Arguments.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MergeArguments()" data-source="spec/Section%204%20--%20Composition.md#L4864-L4879">
<span class="spec-call"><a href="#MergeArguments()" data-name="MergeArguments">MergeArguments</a>(<var data-name="argumentA">argumentA</var>, <var data-name="argumentB">argumentB</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4866">Let <var data-name="typeA">typeA</var> be the type of <var data-name="argumentA">argumentA</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4867">Let <var data-name="typeB">typeB</var> be the type of <var data-name="argumentB">argumentB</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4868">Let <var data-name="type">type</var> be <span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4869-L4870">Let <var data-name="description">description</var> be the description of <var data-name="argumentA">argumentA</var> or undefined if none exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4871-L4872">If <var data-name="description">description</var> is undefined:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4872">Let <var data-name="description">description</var> be the description of <var data-name="argumentB">argumentB</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4873-L4874">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="argumentA">argumentA</var> or undefined if none exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4875-L4877">If <var data-name="defaultValue">defaultValue</var> is undefined:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4876-L4877">Set <var data-name="defaultValue">defaultValue</var> to the default value of <var data-name="argumentB">argumentB</var> or undefined if none exists.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4878-L4879">Return a new argument with the name of <var data-name="argumentA">argumentA</var>, type of <var data-name="type">type</var>, description of <var data-name="description">description</var>, and default value of <var data-name="defaultValue">defaultValue</var>.</li>
</ol>
</div>
</section>
<section id="sec-Merge-Arguments.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4881"><a href="#sec-Merge-Arguments.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4883-L4885"><span class="spec-call"><a href="#MergeArguments()" data-name="MergeArguments">MergeArguments</a>(<var data-name="argumentA">argumentA</var>, <var data-name="argumentB">argumentB</var>)</span> takes two arguments with the same name but possibly differing in type, description, or default value, and returns a single, unified argument definition.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4887"><em>Unifying the Type</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4889-L4894">The algorithm uses <span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> to determine the final argument type. For input positions (like arguments), the most restrictive type is needed to ensure that the merged argument type accepts all values the sources demand. For instance, if one argument type is <code>String!</code> and the other is <code>String</code>, the merged type must be <code>String!</code> so that it remains valid from both perspectives.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4896"><em>Choosing the Description</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4898-L4899">The description of the first argument is used if it is defined, otherwise the description of the second argument is used.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4901"><em>Inheriting the Default Value</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4903-L4904">The algorithm takes the first defined default value it encounters. Pre-merge validation has already asserted that any differing defaults are compatible.</p>
</section>
<section id="sec-Merge-Arguments.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4906"><a href="#sec-Merge-Arguments.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4908-L4909">Suppose we have two variants of the same argument, <code>limit</code>, from different services:</p>
</section>
<section id="sec-Merge-Arguments.Service-A" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4911"><a href="#sec-Merge-Arguments.Service-A" title="link to this subsection">Service A</a></h6>
<pre id="example-cf898" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L4913-L4931"><a href="#example-cf898">Example № 177</a><code><span class="token comment"># Schema A</span>

<span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">10</span>

<span class="token comment"># Schema B</span>

<span class="token description string">"""<span class="token language-markdown">
Number of items to fetch
</span>"""</span>
<span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>

<span class="token comment"># Composed Result</span>

<span class="token description string">"""<span class="token language-markdown">
Number of items to fetch
</span>"""</span>
<span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token operator">=</span> <span class="token number">10</span>
</code></pre>
</section>
</section>
<section id="sec-Shared-Algorithms" secid="3.3.11">
<h3 data-source="spec/Section%204%20--%20Composition.md#L4933"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Algorithms">3.3.11</a></span>Shared Algorithms</h3>
<section id="sec-Least-Restrictive-Type" secid="3.3.11.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L4935"><span class="spec-secid" title="link to this section"><a href="#sec-Least-Restrictive-Type">3.3.11.1</a></span>Least Restrictive Type</h4>
<section id="sec-Least-Restrictive-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4937"><a href="#sec-Least-Restrictive-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="LeastRestrictiveType()" data-source="spec/Section%204%20--%20Composition.md#L4939-L4962">
<span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4941">Let <var data-name="isNullable">isNullable</var> be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4942-L4943">If <var data-name="typeA">typeA</var> and <var data-name="typeB">typeB</var> are non nullable types:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4943">Set <var data-name="isNullable">isNullable</var> to false.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4944-L4945">If <var data-name="typeA">typeA</var> is a non nullable type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4945">Set <var data-name="typeA">typeA</var> to the inner type of <var data-name="typeA">typeA</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4946-L4947">If <var data-name="typeB">typeB</var> is a non nullable type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4947">Set <var data-name="typeB">typeB</var> to the inner type of <var data-name="typeB">typeB</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4948-L4956">If <var data-name="typeA">typeA</var> is a list type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4949">Assert: <var data-name="typeB">typeB</var> is a list type.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4950">Let <var data-name="innerTypeA">innerTypeA</var> be the inner type of <var data-name="typeA">typeA</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4951">Let <var data-name="innerTypeB">innerTypeB</var> be the inner type of <var data-name="typeB">typeB</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4952">Let <var data-name="innerType">innerType</var> be <span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="innerTypeA">innerTypeA</var>, <var data-name="innerTypeB">innerTypeB</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4953-L4954">If <var data-name="isNullable">isNullable</var> is true:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4954">Return <var data-name="innerType">innerType</var> as a nullable list type.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4955-L4956">Otherwise:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4956">Return <var data-name="innerType">innerType</var> as a non nullable list type.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4957-L4962">Otherwise:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4958">Assert: <var data-name="typeA">typeA</var> is equal to <var data-name="typeB">typeB</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L4959-L4960">If <var data-name="isNullable">isNullable</var> is true:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4960">Return <var data-name="typeA">typeA</var> as a nullable type.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L4961-L4962">Otherwise:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L4962">Return <var data-name="typeA">typeA</var> as a non nullable type.</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Least-Restrictive-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4964"><a href="#sec-Least-Restrictive-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4966-L4971"><span class="spec-call"><a href="#LeastRestrictiveType()" data-name="LeastRestrictiveType">LeastRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> identifies a single type that safely handles all possible <em>runtime values</em> produced by the sources defining <code>typeA</code> and <code>typeB</code>. If one source can return <code>null</code> while another cannot, the merged type becomes nullable to avoid runtime exceptions &ndash; because a strictly non-null signature would be violated whenever <code>null</code> appears. Similarly, if both sources enforce non-null, the result remains non-null.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4973"><em>Nullability</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4975-L4978">When merging types of differing nullability (e.g., one <code>String!</code> vs. another <code>String</code>), the presence of a nullable type in one source effectively dictates that the final type must accept <code>null</code>. If either source can produce <code>null</code>, a strictly non-null field would break the contract if <code>null</code> were ever returned.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4980"><em>Lists</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4982-L4986">If both sources provide a list type, then the function unifies those list types by merging their inner types (e.g., the element type of the list). Whether the list itself is nullable depends on whether both sources treat the list as non-null. In other words, if any source can return <code>null</code> for the list, the final list type must also be nullable.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L4988"><em>Scalar Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L4990-L4994">When neither source specifies a list type, the algorithm confirms that both sources refer to the <em>same</em> underlying named type (e.g., <code>String</code> vs. <code>String</code>). If they differ (e.g., <code>String</code> vs. <code>Int</code>), the schemas are fundamentally incompatible for merging, yet the pre merge validation should have already caught this issue.</p>
</section>
<section id="sec-Least-Restrictive-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L4996"><a href="#sec-Least-Restrictive-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L4998-L4999">In the following scenario, one source might return <code>null</code>, so the resulting merged type must allow <code>null</code>.</p>
<pre id="example-59093" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5001-L5010"><a href="#example-59093">Example № 178</a><code><span class="token comment"># Schema A</span>
<span class="token attr-name">typeA</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>

<span class="token comment"># Schema B</span>
<span class="token attr-name">typeB</span><span class="token punctuation">:</span> <span class="token scalar">String</span>

<span class="token comment"># Merged Result</span>
<span class="token attr-name">type</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5012-L5014">Here, both sources use lists of <code>Int</code>, but they differ in nullability. Consequently, the merged list type is <code>[Int]</code>, which permits a <code>null</code> list or <code>null</code> elements.</p>
<pre id="example-fcf6c" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5016-L5025"><a href="#example-fcf6c">Example № 179</a><code><span class="token comment"># Schema A</span>
<span class="token attr-name">typeA</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">Int</span><span class="token punctuation">]</span><span class="token operator">!</span>

<span class="token comment"># Schema B</span>
<span class="token attr-name">typeB</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">Int</span><span class="token operator">!</span><span class="token punctuation">]</span>

<span class="token comment"># Merged Result</span>
<span class="token attr-name">type</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">Int</span><span class="token punctuation">]</span>
</code></pre>
</section>
</section>
<section id="sec-Most-Restrictive-Type" secid="3.3.11.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5027"><span class="spec-secid" title="link to this section"><a href="#sec-Most-Restrictive-Type">3.3.11.2</a></span>Most Restrictive Type</h4>
<section id="sec-Most-Restrictive-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5029"><a href="#sec-Most-Restrictive-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<div class="spec-algo" id="MostRestrictiveType()" data-source="spec/Section%204%20--%20Composition.md#L5031-L5054">
<span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5033">Let <var data-name="isNullable">isNullable</var> be false.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5034-L5035">If <var data-name="typeA">typeA</var> and <var data-name="typeB">typeB</var> are nullable types:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5035">Set <var data-name="isNullable">isNullable</var> to true.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5036-L5037">If <var data-name="typeA">typeA</var> is a non nullable type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5037">Set <var data-name="typeA">typeA</var> to the inner type of <var data-name="typeA">typeA</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5038-L5039">If <var data-name="typeB">typeB</var> is a non nullable type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5039">Set <var data-name="typeB">typeB</var> to the inner type of <var data-name="typeB">typeB</var>.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5040-L5048">If <var data-name="typeA">typeA</var> is a list type:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5041">Assert: <var data-name="typeB">typeB</var> is a list type.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5042">Let <var data-name="innerTypeA">innerTypeA</var> be the inner type of <var data-name="typeA">typeA</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5043">Let <var data-name="innerTypeB">innerTypeB</var> be the inner type of <var data-name="typeB">typeB</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5044">Let <var data-name="innerType">innerType</var> be <span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="innerTypeA">innerTypeA</var>, <var data-name="innerTypeB">innerTypeB</var>)</span>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5045-L5046">If <var data-name="isNullable">isNullable</var> is true:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5046">Return <var data-name="innerType">innerType</var> as a nullable list type.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5047-L5048">Otherwise:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5048">Return <var data-name="innerType">innerType</var> as a non nullable list type.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5049-L5054">Otherwise<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5050">Assert: <var data-name="typeA">typeA</var> is equal to <var data-name="typeB">typeB</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L5051-L5052">If <var data-name="isNullable">isNullable</var> is true:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5052">Return <var data-name="typeA">typeA</var> as a nullable type.</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5053-L5054">Otherwise:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5054">Return <var data-name="typeA">typeA</var> as a non nullable type.</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Most-Restrictive-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5056"><a href="#sec-Most-Restrictive-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5058-L5063"><span class="spec-call"><a href="#MostRestrictiveType()" data-name="MostRestrictiveType">MostRestrictiveType</a>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> determines a single input type that strictly honors the constraints of both sources. If either source requires a non-null value, the merged type also becomes non-null so that no invalid (e.g., <code>null</code>) data can be introduced at runtime. Conversely, if both sources allow <code>null</code>, the merged type remains nullable. The same principle applies to list types, where the more restrictive settings (non-null list or non-null elements) are used.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5065"><em>Nullability</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L5067-L5071">For input fields, if either source are non null, it&rsquo;s unsafe to allow <code>null</code> in the merged schema. Consequently, when one type is non-nullable (<code>String!</code>) and the other is nullable (<code>String</code>), the resulting type is non-nullable (<code>String!</code>). Only if <em>both</em> types are explicitly nullable does the merged type remain nullable (e.g., <code>String</code>).</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5073"><em>Lists</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L5075-L5079">When merging list types, both sources must be lists. Inside the list, the same merging logic applies: if either source disallows <code>null</code> elements (e.g., <code>[Int!]</code> vs. <code>[Int]</code>), the final merged list also disallows <code>null</code> elements to avoid unexpected runtime failures. If both lists can have <code>null</code> elements, then the merged list similarly allows <code>null</code>.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5081"><em>Scalar Types</em></p>
<p data-source="spec/Section%204%20--%20Composition.md#L5083-L5086">Like other merging steps, if the underlying base types (e.g., <code>String</code> vs. <code>Int</code>) differ, the types cannot be reconciled. A merged schema cannot reinterpret <code>String</code> as <code>Int</code>, so the process fails if there&rsquo;s a fundamental mismatch. This should already be caught by the pre merge validation.</p>
</section>
<section id="sec-Most-Restrictive-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5088"><a href="#sec-Most-Restrictive-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5090-L5092">Here, because one source disallows <code>null</code>, the final merged type must also disallow <code>null</code> to avoid a situation where a <code>null</code> could be passed where it isn&rsquo;t allowed:</p>
<pre id="example-f6e88" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5094-L5103"><a href="#example-f6e88">Example № 180</a><code><span class="token comment"># Schema A</span>
<span class="token attr-name">typeA</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>

<span class="token comment"># Schema B</span>
<span class="token attr-name">typeB</span><span class="token punctuation">:</span> <span class="token scalar">String</span>

<span class="token comment"># Merged Result</span>
<span class="token attr-name">type</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5105-L5109">In the following example, since one definition mandates non-null items (<code>[Int!]</code>), it is <em>more restrictive</em> and prevents <code>null</code> elements in the list. Additionally, the other source mandates a non-null list (<code>[Int]!</code>). The merged result, <code>[Int!]!</code>, preserves these constraints to ensure the field does not accept or produce values that violate either source.</p>
<pre id="example-2831f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5111-L5120"><a href="#example-2831f">Example № 181</a><code><span class="token comment"># Schema A</span>
<span class="token attr-name">typeA</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">Int</span><span class="token operator">!</span><span class="token punctuation">]</span>

<span class="token comment"># Schema B</span>
<span class="token attr-name">typeB</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">Int</span><span class="token punctuation">]</span><span class="token operator">!</span>

<span class="token comment"># Merged Result</span>
<span class="token attr-name">type</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">Int</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Post-Merge-Validation" secid="3.4">
<h2 data-source="spec/Section%204%20--%20Composition.md#L5122"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation">3.4</a></span>Post Merge Validation</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L5124-L5129">After the schema is composed, there are certain validations that are only possible in the context of the fully merged schema. These validations verify overall consistency: for example, ensuring that no type is left without accessible fields, or that interfaces and their implementors remain compatible. This stage confirms that the combined schema remains coherent when considered as a whole.</p>
<section id="sec-Post-Merge-Validation.Validate-Type-System" secid="3.4.1">
<h3 data-source="spec/Section%204%20--%20Composition.md#L5131"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation.Validate-Type-System">3.4.1</a></span>Validate Type System</h3>
<section id="sec-No-Queries" secid="3.4.1.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5133"><span class="spec-secid" title="link to this section"><a href="#sec-No-Queries">3.4.1.1</a></span>No Queries</h4>
<section id="sec-No-Queries.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5135"><a href="#sec-No-Queries.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5137"><code>NO_QUERIES</code></p>
</section>
<section id="sec-No-Queries.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5139"><a href="#sec-No-Queries.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5141">ERROR</p>
</section>
<section id="sec-No-Queries.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5143"><a href="#sec-No-Queries.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5145-L5146">Let <var data-name="fields">fields</var> be the set of all fields in the <code>Query</code> type of the merged schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5147"><var data-name="fields">fields</var> must not be empty.</li>
</ul>
</section>
<section id="sec-No-Queries.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5149"><a href="#sec-No-Queries.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5151-L5152">This rule ensures that the composed schema includes at least one accessible field on the root <code>Query</code> type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5154-L5156">In GraphQL, the <code>Query</code> type is essential as it defines the entry points for read operations. If none of the composed schemas expose any query fields, the composed schema would lack a root query, making it an invalid GraphQL schema.</p>
</section>
<section id="sec-No-Queries.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5158"><a href="#sec-No-Queries.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5160-L5161">In this example, at least one schema provides accessible query fields, satisfying the rule.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5163-L5172"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5174-L5185"><code><span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">review</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Review</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">content</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">rating</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5187-L5188">Even if some query fields are marked as <code>@inaccessible</code>, as long as there is at least one accessible query field in the composed schema, the rule is satisfied.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5190-L5193">In this case, Schema A exposes an internal query field <code>internalData</code> marked with <code>@inaccessible</code>, making it hidden in the composed schema. However, Schema B provides an accessible <code>product</code> query field. Therefore, the composed schema has at least one accessible query field, adhering to the rule.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5195-L5204"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">internalData</span><span class="token punctuation">:</span> <span class="token class-name">InternalData</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">InternalData</span> <span class="token punctuation">{</span>
  <span class="token attr-name">secret</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5206-L5216"><code><span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5218-L5219">If all query fields in all schemas are marked as <code>@inaccessible</code>, the composed schema will lack accessible query fields, violating the rule.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5221-L5222">In the following counter-example, both schemas have query fields, but all are marked as <code>@inaccessible</code>.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5224-L5225">This means there are no accessible query fields in the composed schema, triggering the <code>NO_QUERIES</code> error.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5227-L5236"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">internalData</span><span class="token punctuation">:</span> <span class="token class-name">InternalData</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">InternalData</span> <span class="token punctuation">{</span>
  <span class="token attr-name">secret</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5238-L5247"><code><span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">adminStats</span><span class="token punctuation">:</span> <span class="token class-name">AdminStats</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">AdminStats</span> <span class="token punctuation">{</span>
  <span class="token attr-name">userCount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Reference-To-Inaccessible-Type" secid="3.4.1.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5249"><span class="spec-secid" title="link to this section"><a href="#sec-Reference-To-Inaccessible-Type">3.4.1.2</a></span>Reference To Inaccessible Type</h4>
<section id="sec-Reference-To-Inaccessible-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5251"><a href="#sec-Reference-To-Inaccessible-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5253"><code>REFERENCE_TO_INACCESSIBLE_TYPE</code></p>
</section>
<section id="sec-Reference-To-Inaccessible-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5255"><a href="#sec-Reference-To-Inaccessible-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5257-L5258">Let <var data-name="inputFields">inputFields</var> be the set of all accessible fields of the input types in the composed schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5259-L5261">For each <var data-name="inputField">inputField</var> in <var data-name="inputFields">inputFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5260">Let <var data-name="namedType">namedType</var> be the named type that <var data-name="inputField">inputField</var> references</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5261"><var data-name="namedType">namedType</var> must be accessible.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5262-L5263">Let <var data-name="outputFields">outputFields</var> be the set of all accessible fields of the output types in the composed schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5264-L5266">For each <var data-name="outputField">outputField</var> in <var data-name="outputFields">outputFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5265">Let <var data-name="namedType">namedType</var> be the named type that <var data-name="outputField">outputField</var> references</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5266"><var data-name="namedType">namedType</var> must be accessible.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5267-L5268">Let <var data-name="arguments">arguments</var> be the set of all accessible arguments of the output fields in the composed schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5269-L5271">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5270">Let <var data-name="namedType">namedType</var> be the named type that <var data-name="argument">argument</var> references</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5271"><var data-name="namedType">namedType</var> must be accessible.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Reference-To-Inaccessible-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5273"><a href="#sec-Reference-To-Inaccessible-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5275-L5277">In a composed schema, fields and arguments must only reference types that are exposed. This requirement guarantees that public types do not reference inaccessible structures which are intended for internal use.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5279">A valid case where a public input field references another public input type:</p>
<pre id="example-02e7c" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5281-L5290"><a href="#example-02e7c">Example № 182</a><code><span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token class-name">Input2</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Input2</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5292">Another valid case is where the field is not exposed in the composed schema:</p>
<pre id="example-7811b" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5294-L5303"><a href="#example-7811b">Example № 183</a><code><span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token class-name">Input2</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token property">Input2</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5305">An invalid case is when an input field references an inaccessible type:</p>
<pre id="example-fd09c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5307-L5316"><a href="#example-fd09c">Counter Example № 184</a><code><span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token class-name">Input2</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token property">Input2</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Post-Merge-Validation.Validate-Composite-Types" secid="3.4.2">
<h3 data-source="spec/Section%204%20--%20Composition.md#L5318"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation.Validate-Composite-Types">3.4.2</a></span>Validate Composite Types</h3>
<section id="sec-Empty-Merged-Object-Type" secid="3.4.2.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5320"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Object-Type">3.4.2.1</a></span>Empty Merged Object Type</h4>
<section id="sec-Empty-Merged-Object-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5322"><a href="#sec-Empty-Merged-Object-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5324"><code>EMPTY_MERGED_OBJECT_TYPE</code></p>
</section>
<section id="sec-Empty-Merged-Object-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5326"><a href="#sec-Empty-Merged-Object-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5328">ERROR</p>
</section>
<section id="sec-Empty-Merged-Object-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5330"><a href="#sec-Empty-Merged-Object-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5332">Let <var data-name="types">types</var> be the set of all object types in the composed schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5333-L5335">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5334">Let <var data-name="fields">fields</var> be a set of all fields in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5335"><var data-name="fields">fields</var> must not be empty.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Empty-Merged-Object-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5337"><a href="#sec-Empty-Merged-Object-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5339-L5343">For object types defined across multiple source schemas, the merged object type is the superset of all fields defined in these source schemas. However, any field marked with <code>@inaccessible</code> in any source schema is hidden and not included in the merged object type. An object type with no fields, after considering <code>@inaccessible</code> annotations, is considered empty and invalid.</p>
</section>
<section id="sec-Empty-Merged-Object-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5345"><a href="#sec-Empty-Merged-Object-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5347-L5349">In the following example, the merged object type <code>Author</code> is valid. It includes all fields from both source schemas, with <code>age</code> being hidden due to the <code>@inaccessible</code> directive in one of the source schemas:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5351-L5364"><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">registered</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5366-L5368">If the <code>@inaccessible</code> directive is applied to an object type itself, the entire merged object type is excluded from the composite execution schema, and it is not required to contain any fields.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5370-L5382"><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">registered</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5384-L5387">This counter-example demonstrates an invalid merged object type. In this case, <code>Author</code> is defined in two source schemas, but all fields are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged object type:</p>
<pre id="example-45fca" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5389-L5403"><a href="#example-45fca">Counter Example № 185</a><code><span class="token comment"># Schema A</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">registered</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">registered</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Empty-Merged-Interface-Type" secid="3.4.2.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5405"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Interface-Type">3.4.2.2</a></span>Empty Merged Interface Type</h4>
<section id="sec-Empty-Merged-Interface-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5407"><a href="#sec-Empty-Merged-Interface-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5409"><code>EMPTY_MERGED_INTERFACE_TYPE</code></p>
</section>
<section id="sec-Empty-Merged-Interface-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5411"><a href="#sec-Empty-Merged-Interface-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5413">ERROR</p>
</section>
<section id="sec-Empty-Merged-Interface-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5415"><a href="#sec-Empty-Merged-Interface-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5417">Let <var data-name="types">types</var> be the set of all interface types in the composed schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5418-L5420">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5419">Let <var data-name="fields">fields</var> be a set of all fields in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5420"><var data-name="fields">fields</var> must not be empty.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Empty-Merged-Interface-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5422"><a href="#sec-Empty-Merged-Interface-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5424-L5428">For interface types defined across multiple source schemas, the merged interface type is the superset of all fields defined in these source schemas. However, any field marked with <code>@inaccessible</code> in any source schema is hidden and not included in the merged interface type. An interface type with no fields, after considering <code>@inaccessible</code> annotations, is considered empty and invalid.</p>
</section>
<section id="sec-Empty-Merged-Interface-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5430"><a href="#sec-Empty-Merged-Interface-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5432-L5434">In the following example, the merged object type <code>Product</code> is valid. It includes all fields from both source schemas, with <code>price</code> being hidden due to the <code>@inaccessible</code> directive in one of the source schemas:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5436-L5448"><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">inStock</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5450-L5452">If the <code>@inaccessible</code> directive is applied to an interface type itself, the entire merged interface type is excluded from the composite execution schema, and it is not required to contain any fields.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5454-L5466"><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">inStock</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5468-L5471">This counter-example demonstrates an invalid merged interface type. In this case, <code>Product</code> is defined in two source schemas, but all fields are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged interface type:</p>
<pre id="example-0e94b" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5473-L5485"><a href="#example-0e94b">Counter Example № 186</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Implemented-by-Inaccessible" secid="3.4.2.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5487"><span class="spec-secid" title="link to this section"><a href="#sec-Implemented-by-Inaccessible">3.4.2.3</a></span>Implemented by Inaccessible</h4>
<section id="sec-Implemented-by-Inaccessible.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5489"><a href="#sec-Implemented-by-Inaccessible.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5491"><code>IMPLEMENTED_BY_INACCESSIBLE</code></p>
</section>
<section id="sec-Implemented-by-Inaccessible.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5493"><a href="#sec-Implemented-by-Inaccessible.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5495">ERROR</p>
</section>
<section id="sec-Implemented-by-Inaccessible.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5497"><a href="#sec-Implemented-by-Inaccessible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5499">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5500">Let <var data-name="types">types</var> be the set of all object and interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5501-L5509">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5502-L5503">Let <var data-name="implementedInterfaces">implementedInterfaces</var> be the set of all interfaces implemented by <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5504-L5509">For each <var data-name="implementedInterface">implementedInterface</var> in <var data-name="implementedInterfaces">implementedInterfaces</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5505-L5506">Let <var data-name="interfaceFields">interfaceFields</var> be the set of all fields defined on <var data-name="implementedInterface">implementedInterface</var> that are visible in the merged schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5507-L5509">For each <var data-name="interfaceField">interfaceField</var> in <var data-name="interfaceFields">interfaceFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5508">Let <var data-name="fieldName">fieldName</var> be the name of <var data-name="interfaceField">interfaceField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5509"><var data-name="type">type</var> must have a field with the name <var data-name="fieldName">fieldName</var></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Implemented-by-Inaccessible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5511"><a href="#sec-Implemented-by-Inaccessible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5513-L5519">This rule ensures that inaccessible fields (<code>@inaccessible</code>) on an object or interface type are not exposed through an interface. A composite type that implements an interface must provide public access to each field defined by the interface. If a field on an object type is marked as <code>@inaccessible</code> but implements an interface field that is visible in the composed schema, this creates a contradiction: the interface contract requires that field to be accessible, yet the implementation hides it.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5521-L5523">This rule prevents inconsistencies in the composed schema, ensuring that every interface field visible in the composed schema is also publicly visible on all types implementing that interface.</p>
</section>
<section id="sec-Implemented-by-Inaccessible.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5525"><a href="#sec-Implemented-by-Inaccessible.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5527-L5528">In the following example, <code>User.id</code> is accessible and implements <code>Node.id</code> which is also accessible, no error occurs.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5530-L5540"><code><span class="token comment"># The interface field `id` is visible and provided by `User` without @inaccessible.</span>
<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5542-L5544">Since <code>Auditable</code> and its field <code>lastAudit</code> are <code>@inaccessible</code>, the <code>Order.lastAudit</code> field is allowed to be <code>@inaccessible</code> because it does not implement any visible interface field in the composed schema.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5546-L5556"><code><span class="token comment"># The entire interface is @inaccessible, thus its fields are not publicly visible.</span>
<span class="token keyword">interface</span> <span class="token class-name">Auditable</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lastAudit</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token keyword">implements</span> <span class="token class-name">Auditable</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lastAudit</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">orderNumber</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5558-L5561">In this example, <code>Node.id</code> is visible in the public schema (no <code>@inaccessible</code>), but <code>User.id</code> is marked <code>@inaccessible</code>. This violates the interface contract because <code>User</code> claims to implement <code>Node</code>, yet does not expose the <code>id</code> field to the public schema.</p>
<pre id="example-6c1d1" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5563-L5572"><a href="#example-6c1d1">Counter Example № 187</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Interface-Field-No-Implementation" secid="3.4.2.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5574"><span class="spec-secid" title="link to this section"><a href="#sec-Interface-Field-No-Implementation">3.4.2.4</a></span>Interface Field No Implementation</h4>
<section id="sec-Interface-Field-No-Implementation.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5576"><a href="#sec-Interface-Field-No-Implementation.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5578"><code>INTERFACE_FIELD_NO_IMPLEMENTATION</code></p>
</section>
<section id="sec-Interface-Field-No-Implementation.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5580"><a href="#sec-Interface-Field-No-Implementation.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5582">ERROR</p>
</section>
<section id="sec-Interface-Field-No-Implementation.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5584"><a href="#sec-Interface-Field-No-Implementation.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5586">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5587">Let <var data-name="objectTypes">objectTypes</var> be the set of all object types defined in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5588-L5595">For each <var data-name="objectType">objectType</var> in <var data-name="objectTypes">objectTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5589">Let <var data-name="interfaces">interfaces</var> be the set of interface types that <var data-name="objectType">objectType</var> implements.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5590-L5595">For each <var data-name="interface">interface</var> in <var data-name="interfaces">interfaces</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5591-L5592">Let <var data-name="interfaceFields">interfaceFields</var> be the set of fields defined on <var data-name="interface">interface</var> that are visible in the merged schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5593-L5595">For each <var data-name="field">field</var> in <var data-name="interfaceFields">interfaceFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5594-L5595">If <var data-name="field">field</var> is not present on <var data-name="objectType">objectType</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5595">Produce an <code>INTERFACE_FIELD_NO_IMPLEMENTATION</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Interface-Field-No-Implementation.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5597"><a href="#sec-Interface-Field-No-Implementation.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5599-L5603">In GraphQL, any object type that implements an interface must provide a field definition for every field declared by that interface. If an object type fails to implement a particular field required by one of its interfaces, the composite schema becomes invalid because the resulting schema breaks the contract defined by that interface.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5605-L5608">This rule checks that object types merged from different sources correctly implement all interface fields. In scenarios where a schema defines an interface field, but the implementing object type in another schema omits that field, an error is raised.</p>
</section>
<section id="sec-Interface-Field-No-Implementation.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5610"><a href="#sec-Interface-Field-No-Implementation.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5612-L5614">In this valid example, the <code>User</code> interface has three fields: <code>id</code>, <code>name</code>, and <code>email</code>. Both the <code>RegisteredUser</code> and <code>GuestUser</code> types implement all three fields, satisfying the interface contract.</p>
<pre id="example-2b227" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5616-L5644"><a href="#example-2b227">Example № 188</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RegisteredUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">lastLogin</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">GuestUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">temporaryCartId</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5646-L5648">In this counter-example, the <code>User</code> interface is defined with three fields, but the <code>GuestUser</code> type omits one of them (<code>email</code>), causing an <code>INTERFACE_FIELD_NO_IMPLEMENTATION</code> error.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5650-L5653">Although <code>GuestUser</code> implements <code>User</code>, it does not provide the <code>email</code> field. Since the merged schema sees that the interface <code>User</code> has <code>email</code> but <code>GuestUser</code> does not provide it, the schema composition fails with the <code>INTERFACE_FIELD_NO_IMPLEMENTATION</code> error.</p>
<pre id="example-bfdae" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5655-L5681"><a href="#example-bfdae">Counter Example № 189</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RegisteredUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">lastLogin</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">GuestUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">temporaryCartId</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Post-Merge-Validation.Validate-Input-Types" secid="3.4.3">
<h3 data-source="spec/Section%204%20--%20Composition.md#L5683"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation.Validate-Input-Types">3.4.3</a></span>Validate Input Types</h3>
<section id="sec-Empty-Merged-Input-Object-Type" secid="3.4.3.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5685"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Input-Object-Type">3.4.3.1</a></span>Empty Merged Input Object Type</h4>
<section id="sec-Empty-Merged-Input-Object-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5687"><a href="#sec-Empty-Merged-Input-Object-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5689"><code>EMPTY_MERGED_INPUT_OBJECT_TYPE</code></p>
</section>
<section id="sec-Empty-Merged-Input-Object-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5691"><a href="#sec-Empty-Merged-Input-Object-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5693">ERROR</p>
</section>
<section id="sec-Empty-Merged-Input-Object-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5695"><a href="#sec-Empty-Merged-Input-Object-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5697">Let <var data-name="inputTypes">inputTypes</var> be the set of all input object types in the composite schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5698-L5700">For each <var data-name="inputType">inputType</var> in <var data-name="inputTypes">inputTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5699">Let <var data-name="fields">fields</var> be a set of all fields in <var data-name="inputType">inputType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5700"><var data-name="fields">fields</var> must not be empty.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Empty-Merged-Input-Object-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5702"><a href="#sec-Empty-Merged-Input-Object-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5704-L5709">For input object types defined across multiple source schemas, the merged input object type is the intersection of all fields defined in these source schemas. Any field marked with the <code>@inaccessible</code> directive in any source schema is hidden and not included in the merged input object type. An input object type with no fields, after considering <code>@inaccessible</code> annotations, is considered empty and invalid.</p>
</section>
<section id="sec-Empty-Merged-Input-Object-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5711"><a href="#sec-Empty-Merged-Input-Object-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5713">In the following example, the merged input object type <code>BookFilter</code> is valid.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5715-L5723"><code><span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5725-L5727">If the <code>@inaccessible</code> directive is applied to an input object type itself, the entire merged input object type is excluded from the composite execution schema, and it is not required to contain any fields.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5729-L5738"><code><span class="token keyword">input</span> <span class="token property">BookFilter</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">minPageCount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5740-L5743">This counter-example demonstrates an invalid merged input object type. In this case, <code>BookFilter</code> is defined in two source schemas, but all fields are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged input object type:</p>
<pre id="example-27c30" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5745-L5755"><a href="#example-27c30">Counter Example № 190</a><code><span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">paperback</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">paperback</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5757-L5758">Here is another counter-example where the merged input object type is empty because no fields intersect between the two source schemas:</p>
<pre id="example-db290" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5760-L5768"><a href="#example-db290">Counter Example № 191</a><code><span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">paperback</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Non-Null-Input-Fields-cannot-be-inaccessible" secid="3.4.3.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5770"><span class="spec-secid" title="link to this section"><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible">3.4.3.2</a></span>Non-Null Input Fields cannot be inaccessible</h4>
<section id="sec-Non-Null-Input-Fields-cannot-be-inaccessible.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5772"><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5774"><code>NON_NULL_INPUT_FIELD_IS_INACCESSIBLE</code></p>
</section>
<section id="sec-Non-Null-Input-Fields-cannot-be-inaccessible.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5776"><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5778-L5779">Let <var data-name="fields">fields</var> be the set of all fields across all input types in all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5780-L5783">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5781-L5783">If <var data-name="field">field</var> is a non-null input field:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5782">Let <var data-name="coordinate">coordinate</var> be the coordinate of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5783"><var data-name="coordinate">coordinate</var> must be in the composed schema.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Non-Null-Input-Fields-cannot-be-inaccessible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5785"><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5787-L5792">When an input field is declared as non-null in any source schema, it imposes a hard requirement: queries or mutations that reference this field <em>must</em> provide a value for it. If the field is then marked as <code>@inaccessible</code> or removed during schema composition, the final schema would still implicitly demand a value for a field that no longer exists in the composed schema, making it impossible to fulfill the requirement.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L5794">As a result:</p>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5796-L5798"><strong>Nullable</strong> (optional) fields can be hidden or removed without invalidating the composed schema, because the user is never <em>required</em> to supply a value for them.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5799-L5801"><strong>Non-null</strong> (required) fields, however, must remain exposed in the composed schema so that users can provide values for those fields. Hiding a required input field breaks the schema contract and leads to an invalid composition.</li>
</ul>
</section>
<section id="sec-Non-Null-Input-Fields-cannot-be-inaccessible.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5803"><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5805-L5807">The following is valid because the <code>age</code> field, although <code>@inaccessible</code> in one source schema, is nullable and can be safely omitted in the final schema without breaking any mandatory input requirement.</p>
<pre id="example-f0168" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5809-L5826"><a href="#example-f0168">Example № 192</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5828">Another valid case is when a nullable input field is removed during merging:</p>
<pre id="example-0499f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5830-L5846"><a href="#example-0499f">Example № 193</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5848">An invalid case is when a non-null input field is inaccessible:</p>
<pre id="example-6611c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5850-L5867"><a href="#example-6611c">Counter Example № 194</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5869">Another invalid case is when a non-null input field is removed during merging:</p>
<pre id="example-4e685" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5871-L5887"><a href="#example-4e685">Counter Example № 195</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">age</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">input</span> <span class="token object">BookFilter</span> <span class="token punctuation">{</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Post-Merge-Validation.Validate-Enums" secid="3.4.4">
<h3 data-source="spec/Section%204%20--%20Composition.md#L5889"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation.Validate-Enums">3.4.4</a></span>Validate Enums</h3>
<section id="sec-Empty-Merged-Enum-Type" secid="3.4.4.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5891"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Enum-Type">3.4.4.1</a></span>Empty Merged Enum Type</h4>
<section id="sec-Empty-Merged-Enum-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5893"><a href="#sec-Empty-Merged-Enum-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5895"><code>EMPTY_MERGED_ENUM_TYPE</code></p>
</section>
<section id="sec-Empty-Merged-Enum-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5897"><a href="#sec-Empty-Merged-Enum-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5899">ERROR</p>
</section>
<section id="sec-Empty-Merged-Enum-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5901"><a href="#sec-Empty-Merged-Enum-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5903">Let <var data-name="enumTypes">enumTypes</var> be the set of all enum types in the composite schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5904-L5906">For each <var data-name="enumType">enumType</var> in <var data-name="enumTypes">enumTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5905">Let <var data-name="values">values</var> be a set of all values in <var data-name="enumType">enumType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5906"><var data-name="values">values</var> must not be empty.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Empty-Merged-Enum-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5908"><a href="#sec-Empty-Merged-Enum-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5910-L5913">Enum values have to be an exact match across all source schemas. If an enum value only exists in one source schema, it has to be marked as <code>@inaccessible</code>. Enum members that are marked as <code>@inaccessible</code> are not included in the merged enum type. An enum type with no values is considered empty and invalid.</p>
</section>
<section id="sec-Empty-Merged-Enum-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5915"><a href="#sec-Empty-Merged-Enum-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5917-L5919">In the following example, the merged enum type <code>DeliveryStatus</code> is valid. It includes all values from both source schemas, with <code>PENDING</code> being hidden due to the <code>@inaccessible</code> directive in one of the source schemas:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5921-L5934"><code><span class="token comment"># Schema A</span>
<span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">PENDING</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">SHIPPED</span>
  <span class="token constant">DELIVERED</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">SHIPPED</span>
  <span class="token constant">DELIVERED</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5936-L5938">If the <code>@inaccessible</code> directive is applied to an enum type itself, the entire merged enum type is excluded from the composite execution schema, and it is not required to contain any values.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5940-L5952"><code><span class="token comment"># Schema A</span>
<span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token constant">SHIPPED</span>
  <span class="token constant">DELIVERED</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">SHIPPED</span>
  <span class="token constant">DELIVERED</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L5954-L5957">This counter-example demonstrates an invalid merged enum type. In this case, <code>DeliveryStatus</code> is defined in two source schemas, but all values are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged enum type:</p>
<pre id="example-26816" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L5959-L5971"><a href="#example-26816">Counter Example № 196</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">PENDING</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">DELIVERED</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">PENDING</span>
  <span class="token constant">DELIVERED</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Enum-Type-Default-Value-Inaccessible" secid="3.4.4.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L5973"><span class="spec-secid" title="link to this section"><a href="#sec-Enum-Type-Default-Value-Inaccessible">3.4.4.2</a></span>Enum Type Default Value Inaccessible</h4>
<section id="sec-Enum-Type-Default-Value-Inaccessible.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5975"><a href="#sec-Enum-Type-Default-Value-Inaccessible.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L5977"><code>ENUM_TYPE_DEFAULT_VALUE_INACCESSIBLE</code></p>
</section>
<section id="sec-Enum-Type-Default-Value-Inaccessible.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L5979"><a href="#sec-Enum-Type-Default-Value-Inaccessible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L5981"><span class="spec-call"><a href="#ValidateArgumentDefaultValues()" data-name="ValidateArgumentDefaultValues">ValidateArgumentDefaultValues</a>()</span> must be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5982"><span class="spec-call"><a href="#ValidateInputFieldDefaultValues()" data-name="ValidateInputFieldDefaultValues">ValidateInputFieldDefaultValues</a>()</span> must be true.</li>
</ul>
<div class="spec-algo" id="ValidateArgumentDefaultValues()" data-source="spec/Section%204%20--%20Composition.md#L5984-L5992">
<span class="spec-call"><a href="#ValidateArgumentDefaultValues()" data-name="ValidateArgumentDefaultValues">ValidateArgumentDefaultValues</a>()</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5986">Let <var data-name="arguments">arguments</var> be the set of all arguments of fields in the composed schema</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5987-L5991">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5988-L5991">If <var data-name="argument">argument</var> has a default value:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5989">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="argument">argument</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L5990-L5991">If not <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="defaultValue">defaultValue</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5991">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5992">return true</li>
</ol>
</div>
<div class="spec-algo" id="ValidateInputFieldDefaultValues()" data-source="spec/Section%204%20--%20Composition.md#L5994-L6002">
<span class="spec-call"><a href="#ValidateInputFieldDefaultValues()" data-name="ValidateInputFieldDefaultValues">ValidateInputFieldDefaultValues</a>()</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5996">Let <var data-name="inputFields">inputFields</var> be the set of all input fields in the composed schema</li>
<li data-source="spec/Section%204%20--%20Composition.md#L5997-L6001">For each <var data-name="inputField">inputField</var> in <var data-name="inputFields">inputFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5998-L6001">If <var data-name="inputField">inputField</var> has a default value:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L5999">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="inputField">inputField</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L6000-L6001">If <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="defaultValue">defaultValue</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6001">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6002">return true</li>
</ol>
</div>
<div class="spec-algo" id="ValidateDefaultValue()" data-source="spec/Section%204%20--%20Composition.md#L6004-L6020">
<span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="defaultValue">defaultValue</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6006-L6009">If <var data-name="defaultValue">defaultValue</var> is a ListValue:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6007-L6009">For each <var data-name="valueNode">valueNode</var> in <var data-name="defaultValue">defaultValue</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6008-L6009">If <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="valueNode">valueNode</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6009">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6010-L6015">If <var data-name="defaultValue">defaultValue</var> is an ObjectValue:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6011">Let <var data-name="objectFields">objectFields</var> be a list of all fields of <var data-name="defaultValue">defaultValue</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L6012-L6015">For each <var data-name="objectField">objectField</var> in <var data-name="objectFields">objectFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6013">Let <var data-name="value">value</var> be the value of <var data-name="objectField">objectField</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L6014-L6015">If <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="value">value</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6015">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6016-L6019">If <var data-name="defaultValue">defaultValue</var> is an EnumValue:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6017">If <var data-name="enum">enum</var> be the enum type of <var data-name="defaultValue">defaultValue</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L6018-L6019">If <var data-name="enum">enum</var> does not have a value with the name of <var data-name="defaultValue">defaultValue</var><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L6019">return false</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6020">return true</li>
</ol>
</div>
</section>
<section id="sec-Enum-Type-Default-Value-Inaccessible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6022"><a href="#sec-Enum-Type-Default-Value-Inaccessible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6024-L6027">This rule ensures that inaccessible enum values are not exposed in the composed schema through default values. Output field arguments and input fields must only use enum values as their default value when not annotated with the <code>@inaccessible</code> directive.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L6029-L6030">In this example the <code>FOO</code> value in the <code>Enum1</code> enum is not marked with <code>@inaccessible</code>, hence it does not violate the rule.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6032-L6042"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Enum1</span> <span class="token punctuation">{</span>
  <span class="token constant">FOO</span>
  <span class="token constant">BAR</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6044-L6046">The following example violates this rule because the default value for the argument (<code>arg</code>) and the input field (<code>field</code>) references an enum value (<code>FOO</code>) that is marked as <code>@inaccessible</code>.</p>
<pre id="example-8a5fb" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6048-L6062"><a href="#example-8a5fb">Counter Example № 197</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Enum1</span> <span class="token punctuation">{</span>
  <span class="token constant">FOO</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">BAR</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6064-L6066">The following example violates this rule because the default value for the argument (<code>arg</code>) and the input field (<code>field2</code>) references an <code>@inaccessible</code> enum value (<code>FOO</code>) within an object value.</p>
<pre id="example-75995" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6068-L6087"><a href="#example-75995">Counter Example № 198</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token class-name">Input1</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token constant">FOO</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token class-name">Input2</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token constant">FOO</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Input2</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Enum1</span> <span class="token punctuation">{</span>
  <span class="token constant">FOO</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">BAR</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6089-L6091">The following example violates this rule because the default value for the argument (<code>arg</code>) and the input field (<code>field</code>) references an <code>@inaccessible</code> enum value (<code>FOO</code>) within a list.</p>
<pre id="example-c2a62" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6093-L6107"><a href="#example-c2a62">Counter Example № 199</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Enum1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">FOO</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Enum1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token constant">FOO</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Enum1</span> <span class="token punctuation">{</span>
  <span class="token constant">FOO</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">BAR</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Union-Types" secid="3.4.5">
<h3 data-source="spec/Section%204%20--%20Composition.md#L6109"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Union-Types">3.4.5</a></span>Validate Union Types</h3>
<section id="sec-Empty-Merged-Union-Type" secid="3.4.5.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L6111"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Union-Type">3.4.5.1</a></span>Empty Merged Union Type</h4>
<section id="sec-Empty-Merged-Union-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6113"><a href="#sec-Empty-Merged-Union-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6115"><code>EMPTY_MERGED_UNION_TYPE</code></p>
</section>
<section id="sec-Empty-Merged-Union-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6117"><a href="#sec-Empty-Merged-Union-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6119">ERROR</p>
</section>
<section id="sec-Empty-Merged-Union-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6121"><a href="#sec-Empty-Merged-Union-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6123">Let <var data-name="unionTypes">unionTypes</var> be the set of all union types in the composite schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6124-L6126">For each <var data-name="unionType">unionType</var> in <var data-name="unionTypes">unionTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6125">Let <var data-name="members">members</var> be a set of all member types in <var data-name="unionType">unionType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6126"><var data-name="members">members</var> must not be empty.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Empty-Merged-Union-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6128"><a href="#sec-Empty-Merged-Union-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6130-L6134">For union types defined across multiple source schemas, the merged union type is the union of all member types defined in these source schemas. However, any member type marked with <code>@inaccessible</code> in any source schema is hidden and not included in the merged union type. A union type with no members, after considering <code>@inaccessible</code> annotations, is considered empty and invalid.</p>
</section>
<section id="sec-Empty-Merged-Union-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6136"><a href="#sec-Empty-Merged-Union-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6138-L6140">In the following example, the merged union type <code>SearchResult</code> is valid. It includes all member types from both source schemas, with <code>User</code> being hidden due to the <code>@inaccessible</code> directive in one of the source schemas:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6142-L6167"><code><span class="token comment"># Schema A</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">User</span> <span class="token operator">|</span> <span class="token property">Product</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Order</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Composite Schema</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Order</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6169-L6171">If the <code>@inaccessible</code> directive is applied to a union type itself, the entire merged union type is excluded from the composite execution schema, and it is not required to contain any members.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6173-L6195"><code><span class="token comment"># Schema A</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token directive function">@inaccessible</span> <span class="token operator">=</span> <span class="token property">User</span> <span class="token operator">|</span> <span class="token property">Product</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Order</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6197-L6200">This counter-example demonstrates an invalid merged union type. In this case, <code>SearchResult</code> is defined in two source schemas, but all member types are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged union type:</p>
<pre id="example-1ea7e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6202-L6224"><a href="#example-1ea7e">Counter Example № 200</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">User</span> <span class="token operator">|</span> <span class="token property">Product</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">union</span> <span class="token class-name">SearchResult</span> <span class="token operator">=</span> <span class="token property">User</span> <span class="token operator">|</span> <span class="token property">Product</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Validate-Is-Directives" secid="3.4.6">
<h3 data-source="spec/Section%204%20--%20Composition.md#L6226"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Is-Directives">3.4.6</a></span>Validate Is Directives</h3>
<section id="sec-Is-Invalid-Fields" secid="3.4.6.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L6228"><span class="spec-secid" title="link to this section"><a href="#sec-Is-Invalid-Fields">3.4.6.1</a></span>Is Invalid Fields</h4>
<section id="sec-Is-Invalid-Fields.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6230"><a href="#sec-Is-Invalid-Fields.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6232"><code>IS_INVALID_FIELDS</code></p>
</section>
<section id="sec-Is-Invalid-Fields.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6234"><a href="#sec-Is-Invalid-Fields.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6236">ERROR</p>
</section>
<section id="sec-Is-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6238"><a href="#sec-Is-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6240">Let <var data-name="schemas">schemas</var> be all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6241">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schemas">schemas</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6242-L6263">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6243">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6244">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6245-L6263">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6246-L6247">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@is</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6247">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6248">Let <var data-name="schema">schema</var> be the schema that defines <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6249">Let <var data-name="declaringField">declaringField</var> be the field that defines <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6250">Let <var data-name="declaringType">declaringType</var> be the type that defines <var data-name="declaringField">declaringField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6251">Let <var data-name="otherSchemas">otherSchemas</var> be the set of all <var data-name="schemas">schemas</var> excluding <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6252-L6253">Let <var data-name="fieldArg">fieldArg</var> be the string value of the <code>field</code> argument of the <code>@is</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6254">Let <var data-name="parsedFieldArg">parsedFieldArg</var> be the parsed selection map from <var data-name="fieldArg">fieldArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6255-L6263">The parsed selection map <var data-name="parsedFieldArg">parsedFieldArg</var> must satisfy the validation rules defined in Appendix A, Section 6.3, using:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6257"><var data-name="declaringType">declaringType</var> as the initial root type.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6258-L6259">The combined schema context formed by the union of <var data-name="otherSchemas">otherSchemas</var> as the schema context except all fields marked as <code>@internal</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L6260-L6263">Validation succeeds if each required field selection path can be resolved across this combined schema context. Individual fields in the selection may exist in different schemas; it is not required that all fields referenced by <var data-name="parsedFieldArg">parsedFieldArg</var> reside within a single schema.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Is-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6265"><a href="#sec-Is-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6267-L6271">Even if the field selection map for <code>@is(field: "…")</code> is syntactically valid, its contents must also be valid within the composed schema. Fields must exist on the parent type for them to be referenced by <code>@is</code>. In addition, fields referencing unknown fields break the valid usage of <code>@is</code>, leading to an <code>IS_INVALID_FIELDS</code> error.</p>
</section>
<section id="sec-Is-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6273"><a href="#sec-Is-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6275-L6276">In the following example, the <code>@is</code> directive&rsquo;s <code>field</code> argument is a valid field selection map and satisfies the rule.</p>
<pre id="example-b9f65" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6278-L6288"><a href="#example-b9f65">Example № 201</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6290-L6292">In this counter-example, the <code>@is</code> directive references a field (<code>unknownField</code>) that does not exist on the return type (<code>Person</code>), causing an <code>IS_INVALID_FIELDS</code> error.</p>
<pre id="example-63aba" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6294-L6304"><a href="#example-63aba">Counter Example № 202</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"unknownField"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Post-Merge-Validation.Validate-Require-Directives" secid="3.4.7">
<h3 data-source="spec/Section%204%20--%20Composition.md#L6306"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation.Validate-Require-Directives">3.4.7</a></span>Validate Require Directives</h3>
<section id="sec-Require-Invalid-Fields" secid="3.4.7.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L6308"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Invalid-Fields">3.4.7.1</a></span>Require Invalid Fields</h4>
<section id="sec-Require-Invalid-Fields.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6310"><a href="#sec-Require-Invalid-Fields.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6312"><code>REQUIRE_INVALID_FIELDS</code></p>
</section>
<section id="sec-Require-Invalid-Fields.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6314"><a href="#sec-Require-Invalid-Fields.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6316">ERROR</p>
</section>
<section id="sec-Require-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6318"><a href="#sec-Require-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6320">Let <var data-name="schemas">schemas</var> be all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6321">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schemas">schemas</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6322-L6343">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6323">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6324">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6325-L6343">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6326-L6327">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6327">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6328">Let <var data-name="schema">schema</var> be the schema that defines <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6329">Let <var data-name="declaringField">declaringField</var> be the field that defines <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6330">Let <var data-name="declaringType">declaringType</var> be the type that defines <var data-name="declaringField">declaringField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6331">Let <var data-name="otherSchemas">otherSchemas</var> be the set of all <var data-name="schemas">schemas</var> excluding <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6332-L6333">Let <var data-name="fieldArg">fieldArg</var> be the string value of the <code>field</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6334">Let <var data-name="parsedFieldArg">parsedFieldArg</var> be the parsed selection map from <var data-name="fieldArg">fieldArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6335-L6343">The parsed selection map <var data-name="parsedFieldArg">parsedFieldArg</var> must satisfy the validation rules defined in Appendix A, Section 6.3, using:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L6337"><var data-name="declaringType">declaringType</var> as the initial root type.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L6338-L6339">The combined schema context formed by the union of <var data-name="otherSchemas">otherSchemas</var> as the schema context except all fields marked as <code>@internal</code></li>
<li data-source="spec/Section%204%20--%20Composition.md#L6340-L6343">Validation succeeds if each required field selection path can be resolved across this combined schema context. Individual fields in the selection may exist in different schemas; it is not required that all fields referenced by <var data-name="parsedFieldArg">parsedFieldArg</var> reside within a single schema.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Require-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6345"><a href="#sec-Require-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6347-L6351">Even if the selection map for <code>@require(field: "…")</code> is syntactically valid, its contents must also be valid. Required fields must exist on the parent type in a <strong>different schema than the one defining the requirement</strong> for them to be referenced by <code>@require</code>. Additionally, requiring unknown fields invalidates <code>@require</code>, resulting in a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
</section>
<section id="sec-Require-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L6353"><a href="#sec-Require-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L6355-L6356">In the following example, the <code>@require</code> directive&rsquo;s <code>field</code> argument is a valid selection set and satisfies the rule.</p>
<pre id="example-d5069" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6358-L6375"><a href="#example-d5069">Example № 203</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6377-L6379">In this counter-example, the <code>@require</code> directive references a field (<code>unknownField</code>) that does not exist on the parent type (<code>Book</code>), causing a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
<pre id="example-e09bc" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6381-L6386"><a href="#example-e09bc">Counter Example № 204</a><code><span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">pages</span><span class="token punctuation">(</span><span class="token attr-name">pageSize</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"unknownField"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L6388-L6390">In the following counter-example, the <code>@require</code> directive references a field from itself (<code>Book.size</code>) which is not allowed. This results in a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
<pre id="example-8646e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L6392-L6398"><a href="#example-8646e">Counter Example № 205</a><code><span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token property-query">pages</span><span class="token punctuation">(</span><span class="token attr-name">pageSize</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"size"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Validate-Satisfiability" secid="3.5">
<h2 data-source="spec/Section%204%20--%20Composition.md#L6400"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Satisfiability">3.5</a></span>Validate Satisfiability</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L6402-L6406">The final step confirms that the composite schema supports executable queries without leading to invalid conditions. Each query path defined in the merged schema is checked to ensure that every field can be resolved. If any query path is unresolvable, the schema is deemed unsatisfiable, and composition fails. </p>
</section>
</section>
<section id="sec-Executor" secid="4">
<h1 data-source="spec/Section%205%20--%20Execution.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Executor">4</a></span>Executor</h1>
<p data-source="spec/Section%205%20--%20Execution.md#L3-L6">A distributed GraphQL executor acts as an orchestrator that uses schema metadata to rewrite a GraphQL request into a query plan. This plan resolves the required data from subgraphs and coerces this data into the result of the GraphQL request.</p>
<section id="sec-Configuration" secid="4.1">
<h2 data-source="spec/Section%205%20--%20Execution.md#L8"><span class="spec-secid" title="link to this section"><a href="#sec-Configuration">4.1</a></span>Configuration</h2>
<p data-source="spec/Section%205%20--%20Execution.md#L10-L13">The supergraph is a GraphQL IDL document that contains metadata for the query planner that describes the relationship between type system members and the type system members on subgraphs. </p>
</section>
</section>
<section id="sec-Shared-Types" secid="5">
<h1 data-source="spec/Section%206%20--%20Shared%20Types.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Types">5</a></span>Shared Types</h1>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L3-L4">In this section we outline directives and types that are shared between the subgraph configuration and the gateway configuration document.</p>
<section id="sec-Shared-Types.Name" secid="5.1">
<h2 data-source="spec/Section%206%20--%20Shared%20Types.md#L6"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Types.Name">5.1</a></span>Name</h2>
<pre data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L8-L10"><code><span class="token keyword">scalar</span> <span class="token class-name">Name</span>
</code></pre>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L12">The scalar <code>Name</code> represents a valid GraphQL type name.</p>
</section>
<section id="sec-FieldSelection" secid="5.2">
<h2 data-source="spec/Section%206%20--%20Shared%20Types.md#L14"><span class="spec-secid" title="link to this section"><a href="#sec-FieldSelection">5.2</a></span>FieldSelection</h2>
<pre data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L16-L18"><code><span class="token keyword">scalar</span> <span class="token class-name">FieldSelection</span>
</code></pre>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L20">The scalar <code>FieldSelection</code> represents a GraphQL field selection syntax.</p>
<pre id="example-fa3a8" class="spec-example" data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L22-L24"><a href="#example-fa3a8">Example № 206</a><code><span class="token property-query">abc</span><span class="token punctuation">(</span><span class="token attr-name">def</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token property">ghi</span> <span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar" secid="6">
<h1 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar">6</a></span>Appendix A: Specification of FieldSelectionMap Scalar</h1>
<section id="sec-Introduction" secid="6.1">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L3"><span class="spec-secid" title="link to this section"><a href="#sec-Introduction">6.1</a></span>Introduction</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L5-L10">This appendix focuses on the specification of the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar type. <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is designed to express semantic equivalence between arguments of a field and fields within the result type. Specifically, it allows defining complex relationships between input arguments and fields in the output object by encapsulating these relationships within a parsable string format. It is used in the <code>@is</code> and <code>@require</code> directives.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L12">To illustrate, consider a simple example from a GraphQL schema:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L14-L18"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L20-L22">In this schema, the <code>userById</code> query uses the <code>@is</code> directive with <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> to declare that the <code>userId</code> argument is semantically equivalent to the <code>User.id</code> field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L24">An example query might look like this:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L26-L32"><code><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token string">"123"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">id</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L34-L35">Here, it is expected that the <code>userId</code> &ldquo;123&rdquo; corresponds directly to <code>User.id</code>, resulting in the following response if correctly implemented:</p>
<pre data-language="json" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L37-L45"><code><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"userById"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L47-L48">The <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar is represented as a string that, when parsed, produces a <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L50-L52">A <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> must exactly match the shape of the argument value to be considered valid. For non-scalar arguments, you must specify each field of the input type in <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>.</p>
<pre id="example-bafa3" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L54-L59"><a href="#example-bafa3">Example № 207</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUserByName</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ firstName: firstName }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span>
    <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-9edc6" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L61-L65"><a href="#example-9edc6">Counter Example № 208</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUserByName</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"firstName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec-Scope" secid="6.1.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L67"><span class="spec-secid" title="link to this section"><a href="#sec-Scope">6.1.1</a></span>Scope</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L69-L72">The <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar type is used to establish semantic equivalence between an argument and fields within a specific output type. This output type is always a composite type, but the way it&rsquo;s determined can vary depending on the directive and context in which the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is used.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L74-L77">For example, when used with the <code>@is</code> directive, the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> maps between the argument and fields in the return type of the field. However, when used with the <code>@require</code> directive, it maps between the argument and fields in the object type on which the field is defined.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L79">Consider this example:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L81-L90"><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.size"</span><span class="token punctuation">)</span>
    <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.weight"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L92-L93">In this case, <code>"dimension.size"</code> and <code>"dimension.weight"</code> refer to fields of the <code>Product</code> type, not the <code>DeliveryEstimates</code> return type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L95-L97">Consequently, a <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> must be interpreted in the context of a specific argument, its associated directive, and the relevant output type as determined by that directive&rsquo;s behavior.</p>
<section id="sec-Scope.Examples" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L99"><a href="#sec-Scope.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L101">Scalar fields can be mapped directly to arguments.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L103">This example maps the <code>Product.weight</code> field to the <code>weight</code> argument:</p>
<pre id="example-bbc71" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L105-L109"><a href="#example-bbc71">Example № 209</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L111">This example maps the <code>Product.shippingWeight</code> field to the <code>weight</code> argument:</p>
<pre id="example-c801d" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L113-L117"><a href="#example-c801d">Example № 210</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"shippingWeight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L119-L120">Nested fields can be mapped to arguments by specifying the path. This example maps the nested field <code>Product.packaging.weight</code> to the <code>weight</code> argument:</p>
<pre id="example-ed66f" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L122-L126"><a href="#example-ed66f">Example № 211</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"packaging.weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L128">Complex objects can be mapped to arguments by specifying each field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L130-L131">This example maps the <code>Product.width</code> and <code>Product.height</code> fields to the <code>dimension</code> argument:</p>
<pre id="example-81328" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L133-L140"><a href="#example-81328">Example № 212</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: width, height: height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L142">The shorthand equivalent is:</p>
<pre id="example-5f6d2" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L144-L150"><a href="#example-5f6d2">Example № 213</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width, height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L152-L153">In case the input field names do not match the output field names, explicit mapping is required.</p>
<pre id="example-9205f" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L155-L161"><a href="#example-9205f">Example № 214</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ w: width, h: height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L163-L164">Even if <code>Product.dimension</code> has all the fields needed for the input object, an explicit mapping is always required.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L166">This example is NOT allowed because it lacks explicit mapping:</p>
<pre id="example-9430e" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L168-L172"><a href="#example-9430e">Counter Example № 215</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L174">Instead, you can traverse into output fields by specifying the path.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L176">This example shows how to map nested fields explicitly:</p>
<pre id="example-6e097" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L178-L185"><a href="#example-6e097">Example № 216</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: dimension.width, height: dimension.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L187-L188">The path does NOT affect the structure of the input object. It is only used to traverse the output object:</p>
<pre id="example-3627a" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L190-L197"><a href="#example-3627a">Example № 217</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: size.width, height: size.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L199-L200">To avoid repeating yourself, you can prefix the selection with a path that ends in a dot to traverse INTO the output type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L202-L203">This affects how fields get interpreted but does NOT affect the structure of the input object:</p>
<pre id="example-62fd6" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L205-L211"><a href="#example-62fd6">Example № 218</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.{ width, height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L213">This example is equivalent to the previous one:</p>
<pre id="example-4a8d8" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L215-L221"><a href="#example-4a8d8">Example № 219</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"size.{ width, height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L223-L224">The path syntax is required for lists because list-valued path expressions would be ambiguous otherwise.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L226">This example is NOT allowed because it lacks the dot syntax for lists:</p>
<pre id="example-55ca5" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L228-L235"><a href="#example-55ca5">Counter Example № 220</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">DimensionInput</span><span class="token punctuation">]</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: dimensions.width, height: dimensions.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L237">Instead, use the path syntax and brackets to specify the list elements:</p>
<pre id="example-3271c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L239-L246"><a href="#example-3271c">Example № 221</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">DimensionInput</span><span class="token punctuation">]</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimensions[{ width, height }]"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L248-L249">With the path syntax it is possible to also select fields from a list of nested objects:</p>
<pre id="example-bcf9b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L251-L255"><a href="#example-bcf9b">Example № 222</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
    <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">partIds</span><span class="token punctuation">:</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L257-L258">For more complex input objects, all these constructs can be nested. This allows for detailed and precise mappings.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L260-L261">This example nests the <code>weight</code> field and the <code>dimension</code> object with its <code>width</code> and <code>height</code> fields:</p>
<pre id="example-45bec" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L263-L270"><a href="#example-45bec">Example № 223</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: dimension.{ width, height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L272-L273">This example nests the <code>weight</code> field and the <code>size</code> object with its <code>width</code> and <code>height</code> fields:</p>
<pre id="example-1dbbc" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L275-L282"><a href="#example-1dbbc">Example № 224</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, size: dimension.{ width, height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L284">The label can be used to nest values that aren&rsquo;t nested in the output.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L286">This example nests <code>Product.width</code> and <code>Product.height</code> under <code>dimension</code>:</p>
<pre id="example-96e80" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L288-L295"><a href="#example-96e80">Example № 225</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: { width, height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L297">In the following example, dimensions are nested under <code>dimension</code> in the output:</p>
<pre id="example-e276d" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L299-L306"><a href="#example-e276d">Example № 226</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: dimension.{ width, height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Language" secid="6.2">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L308"><span class="spec-secid" title="link to this section"><a href="#sec-Language">6.2</a></span>Language</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L310-L311">According to the GraphQL specification, an argument is a key-value pair in which the key is the name of the argument and the value is a <code>Value</code>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L313-L315">The <code>Value</code> of an argument can take various forms: it might be a scalar value (such as <code>Int</code>, <code>Float</code>, <code>String</code>, <code>Boolean</code>, <code>Null</code>, or <code>Enum</code>), a list (<code>ListValue</code>), an input object (<code>ObjectValue</code>), or a <code>Variable</code>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L317-L319">Within the scope of the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span>, the relationship between input and output is established by defining the <code>Value</code> of the argument as a selection of fields from the output object.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L321-L323">Yet only certain types of <code>Value</code> have a semantic meaning. <code>ObjectValue</code> and <code>ListValue</code> are used to define the structure of the value. Scalar values, on the other hand, do not carry semantic importance in this context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L325-L326">While variables may have legitimate use cases, they are considered out of scope for the current discussion.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L328-L329">However, it&rsquo;s worth noting that there could be potential applications for allowing them in the future.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L331-L333">Given that these potential values do not align with the standard literals defined in the GraphQL specification, a new literal called <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> is introduced, along with <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L335">Beyond these literals, an additional literal called <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is necessary.</p>
<section id="sec-Language.Name" secid="6.2.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L337"><span class="spec-secid" title="link to this section"><a href="#sec-Language.Name">6.2.1</a></span>Name</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L339-L340">Is equivalent to the <span class="spec-nt"><span data-name="Name">Name</span></span> defined in the <a href="https://spec.graphql.org/October2021/#Name">GraphQL specification</a></p>
</section>
<section id="sec-Path" secid="6.2.2">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L342"><span class="spec-secid" title="link to this section"><a href="#sec-Path">6.2.2</a></span>Path</h3>
<div class="spec-production d2" id="Path" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L344-L347">
<span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><div class="spec-rhs"><span class="spec-t">&lt;</span><span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><span class="spec-t">&gt;</span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
</div>
<div class="spec-production d2" id="PathSegment" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L349-L353">
<span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span><div class="spec-rhs"><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">&lt;</span><span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><span class="spec-t">&gt;</span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
</div>
<div class="spec-production d2" id="FieldName" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L355-L357">
<span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<div class="spec-production d2" id="TypeName" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L359-L361">
<span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L363-L365">The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> literal is a string used to select a single output value from the <em>return type</em> by specifying a path to that value. This path is defined as a sequence of field names, each separated by a period (<code>.</code>) to create segments.</p>
<pre id="example-0327e" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L367-L369"><a href="#example-0327e">Example № 227</a><code><span class="token property">book</span>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L371-L373">Each segment specifies a field in the context of the parent, with the root segment referencing a field in the <em>return type</em> of the query. Arguments are not allowed in a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L375-L377">To select a field when dealing with abstract types, the segment selecting the parent field must specify the concrete type of the field using angle brackets after the field name if the field is not defined on an interface.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L379-L380">In the following example, the path <code>mediaById&lt;Book&gt;.isbn</code> specifies that <code>mediaById</code> returns a <code>Book</code>, and the <code>isbn</code> field is selected from that <code>Book</code>.</p>
<pre id="example-db2de" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L382-L384"><a href="#example-db2de">Example № 228</a><code><span class="token property">mediaById</span>&lt;<span class="token property">Book</span>>.<span class="token property">isbn</span>
</code></pre>
</section>
<section id="sec-SelectedValue" secid="6.2.3">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L386"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedValue">6.2.3</a></span>SelectedValue</h3>
<div class="spec-production d2" id="SelectedValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L388-L391">
<span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><div class="spec-rhs"><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><span class="spec-t">|</span><span class="spec-nt"><a href="#SelectedValueEntry" data-name="SelectedValueEntry">SelectedValueEntry</a></span></div>
<div class="spec-rhs"><span class="spec-quantified"><span class="spec-t">|</span><span class="spec-quantifiers"><span class="spec-quantifier optional">opt</span></span></span><span class="spec-nt"><a href="#SelectedValueEntry" data-name="SelectedValueEntry">SelectedValueEntry</a></span></div>
</div>
<div class="spec-production d2" id="SelectedValueEntry" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L393-L398">
<span class="spec-nt"><a href="#SelectedValueEntry" data-name="SelectedValueEntry">SelectedValueEntry</a></span><div class="spec-rhs"><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><span class="spec-lookahead not"><span class="spec-t">.</span></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><span class="spec-t">.</span><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L400-L402">A <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> consists of one or more <span class="spec-nt"><a href="#SelectedValueEntry" data-name="SelectedValueEntry">SelectedValueEntry</a></span> components, which may be joined by a pipe (<code>|</code>) operator to indicate alternative selections based on type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L404">Each <span class="spec-nt"><a href="#SelectedValueEntry" data-name="SelectedValueEntry">SelectedValueEntry</a></span> may take one of the following forms:</p>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L406-L408">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> (when not immediately followed by a dot) that is designed to point to a single value, although it may reference multiple fields depending on its return type.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L409-L410">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> immediately followed by a dot and a <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> to denote a nested object selection.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L411-L412">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> immediately followed by a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> to denote selection from a list.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L413">A standalone <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></li>
</ul>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L415-L416">In the following example, the value could be <code>title</code> when referring to a <code>Book</code> and <code>movieTitle</code> when referring to a <code>Movie</code>.</p>
<pre id="example-1cfdd" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L418-L420"><a href="#example-1cfdd">Example № 229</a><code><span class="token property">mediaById</span>&lt;<span class="token property">Book</span>>.<span class="token property">title</span> <span class="token operator">|</span> <span class="token property">mediaById</span>&lt;<span class="token property">Movie</span>>.<span class="token property">movieTitle</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L422-L424">The <code>|</code> operator can be used to match multiple possible <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>. This operator is applied when mapping an abstract output type to a <code>@oneOf</code> input type.</p>
<pre id="example-ac7a2" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L426-L428"><a href="#example-ac7a2">Example № 230</a><code><span class="token punctuation">{</span> <span class="token attr-name">bookId</span><span class="token punctuation">:</span> &lt;<span class="token property">Book</span>>.<span class="token property">id</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token attr-name">movieId</span><span class="token punctuation">:</span> &lt;<span class="token property">Movie</span>>.<span class="token property">id</span> <span class="token punctuation">}</span>
</code></pre>
<pre id="example-4722a" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L430-L432"><a href="#example-4722a">Example № 231</a><code><span class="token punctuation">{</span> <span class="token attr-name">nested</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">bookId</span><span class="token punctuation">:</span> &lt;<span class="token property">Book</span>>.<span class="token property">id</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token attr-name">movieId</span><span class="token punctuation">:</span> &lt;<span class="token property">Movie</span>>.<span class="token property">id</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec-SelectedObjectValue" secid="6.2.4">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L434"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedObjectValue">6.2.4</a></span>SelectedObjectValue</h3>
<div class="spec-production d2" id="SelectedObjectValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L436-L438">
<span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span><div class="spec-rhs"><span class="spec-t">{</span><span class="spec-quantified"><span class="spec-nt"><a href="#SelectedObjectField" data-name="SelectedObjectField">SelectedObjectField</a></span><span class="spec-quantifiers"><span class="spec-quantifier list">list</span></span></span><span class="spec-t">}</span></div>
</div>
<div class="spec-production d2" id="SelectedObjectField" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L440-L443">
<span class="spec-nt"><a href="#SelectedObjectField" data-name="SelectedObjectField">SelectedObjectField</a></span><div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span><span class="spec-t">:</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L445-L447"><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> are unordered lists of keyed input values wrapped in curly-braces <code>{}</code>. It has to be used when the expected input type is an object type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L449-L452">This structure is similar to the <code>ObjectValue</code> defined in the GraphQL specification, but it differs by allowing the inclusion of <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> values within a <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>, thus extending the traditional <code>ObjectValue</code> capabilities to support direct path selections.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L454-L458">A <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> following a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is scoped to the type of the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. This means that the root of all <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> inside the selection is no longer scoped to the root (defined by <code>@is</code> or <code>@require</code>) but to the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> does not affect the structure of the input type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L460">This allows for reducing repetition in the selection.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L462-L463">Commas are optional throughout GraphQL so trailing commas are allowed and repeated commas do not represent missing values.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L465">The following example is valid:</p>
<pre id="example-56baf" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L467-L474"><a href="#example-56baf">Example № 232</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token class-name">Dimension</span><span class="token operator">!</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.{ size, weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L476">The following example is equivalent to the previous one:</p>
<pre id="example-bb22b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L478-L486"><a href="#example-bb22b">Example № 233</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token class-name">Dimension</span><span class="token operator">!</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ size: dimensions.size, weight: dimensions.weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec-SelectedListValue" secid="6.2.5">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L488"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedListValue">6.2.5</a></span>SelectedListValue</h3>
<div class="spec-production d2" id="SelectedListValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L490-L493">
<span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span><div class="spec-rhs"><span class="spec-t">[</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><span class="spec-t">]</span></div>
<div class="spec-rhs"><span class="spec-t">[</span><span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span><span class="spec-t">]</span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L495-L498">A <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> is an ordered list of <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> wrapped in square brackets <code>[]</code>. It is used to express semantic equivalence between an argument expecting a list of values and the values of a list field within the output object.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L500-L501">The <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> differs from the <code>ListValue</code> defined in the GraphQL specification by only allowing one <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> as an element.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L503">The following example is valid:</p>
<pre id="example-fa029" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L505-L510"><a href="#example-fa029">Example № 234</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">partIds</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L512-L513">In this example, the <code>partIds</code> argument is semantically equivalent to the <code>id</code> fields of the <code>parts</code> list.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L515-L516">The following example is invalid because it uses multiple <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> as elements:</p>
<pre id="example-0c7e0" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L518-L528"><a href="#example-0c7e0">Counter Example № 235</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id, name]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L530-L532">A <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> can be used as an element of a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> to select multiple object fields as long as the input type is a list of structurally equivalent objects.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L534-L538">Similar to <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>, a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> following a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is scoped to the type of the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. This means that the root of all <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> inside the selection is no longer scoped to the root (defined by <code>@is</code> or <code>@require</code>) but to the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> does not affect the structure of the input type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L540">The following example is valid:</p>
<pre id="example-f4e04" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L542-L552"><a href="#example-f4e04">Example № 236</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[{ id, name }]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L554-L555">In case the input type is a nested list, the shape of the input object must match the shape of the output object.</p>
<pre id="example-338b2" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L557-L569"><a href="#example-338b2">Example № 237</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span>
    <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[[{ id, name }]]"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L571">The following example is valid:</p>
<pre id="example-6a775" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L573-L598"><a href="#example-6a775">Example № 238</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findLocation</span><span class="token punctuation">(</span>
    <span class="token attr-name">location</span><span class="token punctuation">:</span> <span class="token atom-input class-name">LocationInput</span><span class="token operator">!</span>
      <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ coordinates: coordinates[{ lat: x, lon: y }]}"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Location</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Coordinate</span> <span class="token punctuation">{</span>
  <span class="token attr-name">x</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">y</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Location</span> <span class="token punctuation">{</span>
  <span class="token attr-name">coordinates</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Coordinate</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PositionInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lat</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">lon</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">LocationInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">coordinates</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PositionInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Validation" secid="6.3">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L600"><span class="spec-secid" title="link to this section"><a href="#sec-Validation">6.3</a></span>Validation</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L602-L603">Validation ensures that <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalars are semantically correct within the given context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L605-L607">Validation of <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalars occurs during the composition phase, ensuring that all <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> entries are syntactically correct and semantically meaningful relative to the context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L609-L611">Composition is only possible if the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is validated successfully. An invalid <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> results in undefined behavior, making composition impossible.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L613-L614">In this section, we will assume the following type system in order to demonstrate examples:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L616-L665"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mediaById</span><span class="token punctuation">(</span><span class="token attr-name">mediaId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Media</span>
  <span class="token attr-name">findMedia</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Media</span>
  <span class="token attr-name">searchStore</span><span class="token punctuation">(</span><span class="token attr-name">search</span><span class="token punctuation">:</span> <span class="token atom-input class-name">SearchStoreInput</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Store</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token attr-name">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">media</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Media</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token keyword">implements</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">isbn</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Movie</span> <span class="token keyword">implements</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">movieTitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">releaseDate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">books</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">FindMediaInput</span> <span class="token directive function">@oneOf</span> <span class="token punctuation">{</span>
  <span class="token attr-name">bookId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">movieId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">SearchStoreInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">hasInStock</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Nested</span> <span class="token punctuation">{</span>
  <span class="token attr-name">nested</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec-Path-Field-Selections" secid="6.3.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L667"><span class="spec-secid" title="link to this section"><a href="#sec-Path-Field-Selections">6.3.1</a></span>Path Field Selections</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L669-L670">Each segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must correspond to a valid field defined on the current type context.</p>
<section id="sec-Path-Field-Selections.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L672"><a href="#sec-Path-Field-Selections.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L674-L677">For each <var data-name="segment">segment</var> in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L675-L677">If the <var data-name="segment">segment</var> is a field<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L676">Let <var data-name="fieldName">fieldName</var> be the field name in the current <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L677"><var data-name="fieldName">fieldName</var> must be defined on the current type in scope.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Path-Field-Selections.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L679"><a href="#sec-Path-Field-Selections.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L681-L683">The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> literal is used to reference a specific output field from an input field. Each segment in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must correspond to a field that is valid within the current type scope.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L685">For example, the following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is valid in the context of <code>Book</code>:</p>
<pre id="example-db002" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L687-L689"><a href="#example-db002">Example № 239</a><code><span class="token property">title</span>
</code></pre>
<pre id="example-e6354" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L691-L693"><a href="#example-e6354">Example № 240</a><code>&lt;<span class="token property">Book</span>>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L695-L698">Incorrect paths where the field does not exist on the specified type are not valid and result in validation errors. For instance, if <code>&lt;Book&gt;.movieId</code> is referenced but <code>movieId</code> is not a field of <code>Book</code>, it will result in an invalid <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</p>
<pre id="example-3529a" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L700-L702"><a href="#example-3529a">Counter Example № 241</a><code><span class="token property">movieId</span>
</code></pre>
<pre id="example-9565a" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L704-L706"><a href="#example-9565a">Counter Example № 242</a><code>&lt;<span class="token property">Book</span>>.<span class="token property">movieId</span>
</code></pre>
</section>
</section>
<section id="sec-Path-Terminal-Field-Selections" secid="6.3.2">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L708"><span class="spec-secid" title="link to this section"><a href="#sec-Path-Terminal-Field-Selections">6.3.2</a></span>Path Terminal Field Selections</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L710-L711">Each terminal segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must follow the rules regarding whether the selected field is a leaf node.</p>
<section id="sec-Path-Terminal-Field-Selections.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L713"><a href="#sec-Path-Terminal-Field-Selections.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L715-L720">For each <var data-name="segment">segment</var> in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L716">Let <var data-name="selectedType">selectedType</var> be the unwrapped type of the current <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L717-L718">If <var data-name="selectedType">selectedType</var> is a scalar or enum:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L718">There must not be any further segments in <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</li>
</ul>
</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L719-L720">If <var data-name="selectedType">selectedType</var> is an object, interface, or union:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L720">There must be another segment in <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Path-Terminal-Field-Selections.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L722"><a href="#sec-Path-Terminal-Field-Selections.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L724-L727">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> that refers to scalar or enum fields must end at those fields. No further field selections are allowed after a scalar or enum. On the other hand, fields returning objects, interfaces, or unions must continue to specify further selections until you reach a scalar or enum field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L729-L730">For example, the following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is valid if <code>title</code> is a scalar field on the <code>Book</code> type:</p>
<pre id="example-3c0b2" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L732-L734"><a href="#example-3c0b2">Example № 243</a><code><span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L736">The following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is invalid because <code>title</code> should not have subselections:</p>
<pre id="example-4f776" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L738-L740"><a href="#example-4f776">Counter Example № 244</a><code><span class="token property">title</span>.<span class="token property">something</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L742-L743">For non-leaf fields, the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must continue to specify subselections until a leaf field is reached:</p>
<pre id="example-43d79" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L745-L747"><a href="#example-43d79">Example № 245</a><code><span class="token property">author</span>.<span class="token property">id</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L749">Invalid <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> where non-leaf fields do not have further selections:</p>
<pre id="example-8cc17" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L751-L753"><a href="#example-8cc17">Counter Example № 246</a><code><span class="token property">author</span>
</code></pre>
</section>
</section>
<section id="sec-Type-Reference-Is-Possible" secid="6.3.3">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L755"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Reference-Is-Possible">6.3.3</a></span>Type Reference Is Possible</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L757-L758">Each segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> that references a type, must be a type that is valid in the current context.</p>
<section id="sec-Type-Reference-Is-Possible.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L760"><a href="#sec-Type-Reference-Is-Possible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L762-L768">For each <var data-name="segment">segment</var> in a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L763-L768">If <var data-name="segment">segment</var> is a type reference:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L764">Let <var data-name="type">type</var> be the type referenced in the <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L765">Let <var data-name="parentType">parentType</var> be the type of the parent of the <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L766-L767">Let <var data-name="applicableTypes">applicableTypes</var> be the intersection of <span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="type">type</var>)</span> and <span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="parentType">parentType</var>)</span>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L768"><var data-name="applicableTypes">applicableTypes</var> must not be empty.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="GetPossibleTypes()" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L770-L774">
<span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L772">If <var data-name="type">type</var> is an object type, return a set containing <var data-name="type">type</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L773">If <var data-name="type">type</var> is an interface type, return the set of types implementing <var data-name="type">type</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L774">If <var data-name="type">type</var> is a union type, return the set of possible types of <var data-name="type">type</var>.</li>
</ol>
</div>
</section>
<section id="sec-Type-Reference-Is-Possible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L776"><a href="#sec-Type-Reference-Is-Possible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L778-L780">Type references inside a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must be valid within the context of the surrounding type. A type reference is only valid if the referenced type could logically apply within the parent type.</p>
</section>
</section>
<section id="sec-Values-of-Correct-Type" secid="6.3.4">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L782"><span class="spec-secid" title="link to this section"><a href="#sec-Values-of-Correct-Type">6.3.4</a></span>Values of Correct Type</h3>
<section id="sec-Values-of-Correct-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L784"><a href="#sec-Values-of-Correct-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L786-L788">For each SelectedValue <var data-name="value">value</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L787">Let <var data-name="type">type</var> be the type expected in the position <var data-name="value">value</var> is found.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L788"><var data-name="value">value</var> must be coercible to <var data-name="type">type</var>.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Values-of-Correct-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L790"><a href="#sec-Values-of-Correct-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L792-L793">Literal values must be compatible with the type expected in the position they are found.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L795-L796">The following examples are valid use of value literals in the context of <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar:</p>
<pre id="example-c9dc9" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L798-L807"><a href="#example-c9dc9">Example № 247</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L809">Non-coercible values are invalid. The following example is invalid:</p>
<pre id="example-d18c1" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L811-L820"><a href="#example-d18c1">Counter Example № 248</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Selected-Object-Field-Names" secid="6.3.5">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L822"><span class="spec-secid" title="link to this section"><a href="#sec-Selected-Object-Field-Names">6.3.5</a></span>Selected Object Field Names</h3>
<section id="sec-Selected-Object-Field-Names.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L824"><a href="#sec-Selected-Object-Field-Names.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L826-L830">For each Selected Object Field <var data-name="field">field</var> in the document:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L827">Let <var data-name="fieldName">fieldName</var> be the Name of <var data-name="field">field</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L828-L829">Let <var data-name="fieldDefinition">fieldDefinition</var> be the field definition provided by the parent selected object type named <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L830"><var data-name="fieldDefinition">fieldDefinition</var> must exist.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Selected-Object-Field-Names.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L832"><a href="#sec-Selected-Object-Field-Names.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L834-L835">Every field provided in an selected object value must be defined in the set of possible fields of that input object&rsquo;s expected type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L837">For example, the following is valid:</p>
<pre id="example-51bdc" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L839-L848"><a href="#example-51bdc">Example № 249</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L850-L851">In contrast, the following is invalid because it uses a field &ldquo;address&rdquo; which is not defined on the expected type:</p>
<pre id="example-185a0" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L853-L862"><a href="#example-185a0">Counter Example № 250</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Selected-Object-Field-Uniqueness" secid="6.3.6">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L864"><span class="spec-secid" title="link to this section"><a href="#sec-Selected-Object-Field-Uniqueness">6.3.6</a></span>Selected Object Field Uniqueness</h3>
<section id="sec-Selected-Object-Field-Uniqueness.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L866"><a href="#sec-Selected-Object-Field-Uniqueness.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L868-L873">For each selected object value <var data-name="selectedObject">selectedObject</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L869-L873">For every <var data-name="field">field</var> in <var data-name="selectedObject">selectedObject</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L870">Let <var data-name="name">name</var> be the Name of <var data-name="field">field</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L871-L872">Let <var data-name="fields">fields</var> be all Selected Object Fields named <var data-name="name">name</var> in <var data-name="selectedObject">selectedObject</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L873"><var data-name="fields">fields</var> must be the set containing only <var data-name="field">field</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Selected-Object-Field-Uniqueness.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L875"><a href="#sec-Selected-Object-Field-Uniqueness.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L877-L878">Selected objects must not contain more than one field with the same name, as it would create ambiguity and potential conflicts.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L880">For example, the following is invalid:</p>
<pre id="example-46ec1" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L882-L891"><a href="#example-46ec1">Counter Example № 251</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id, id }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Required-Selected-Object-Fields" secid="6.3.7">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L893"><span class="spec-secid" title="link to this section"><a href="#sec-Required-Selected-Object-Fields">6.3.7</a></span>Required Selected Object Fields</h3>
<section id="sec-Required-Selected-Object-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L895"><a href="#sec-Required-Selected-Object-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L897-L907">For each Selected Object:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L898">Let <var data-name="fields">fields</var> be the fields provided by that Selected Object.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L899-L900">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the set of input object field definitions of that Selected Object.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L901-L907">For each <var data-name="fieldDefinition">fieldDefinition</var> in <var data-name="fieldDefinitions">fieldDefinitions</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L902">Let <var data-name="type">type</var> be the expected type of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L903">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L904-L907">If <var data-name="type">type</var> is Non-Null and <var data-name="defaultValue">defaultValue</var> does not exist:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L905">Let <var data-name="fieldName">fieldName</var> be the name of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L906">Let <var data-name="field">field</var> be the input object field in <var data-name="fields">fields</var> named <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L907"><var data-name="field">field</var> must exist.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Required-Selected-Object-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L909"><a href="#sec-Required-Selected-Object-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L911-L913">Input object fields may be required. This means that a selected object field is required if the corresponding input field is required. Otherwise, the selected object field is optional.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L915">For instance, if the <code>UserInput</code> type requires the <code>id</code> field:</p>
<pre id="example-5e94b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L917-L922"><a href="#example-5e94b">Example № 252</a><code><span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L924">Then, an invalid selection would be missing the required <code>id</code> field:</p>
<pre id="example-c7272" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L926-L930"><a href="#example-c7272">Counter Example № 253</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name: name }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L932-L933">If the <code>UserInput</code> type has an optional <code>name</code> field, but the <code>User</code> type requires the <code>name</code> field, the following selection would be valid.</p>
<pre id="example-64b7f" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L935-L949"><a href="#example-64b7f">Example № 254</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name: name }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L951-L952">But if the <code>UserInput</code> type requires the <code>name</code> field but it&rsquo;s not defined in the <code>User</code> type, the selection would be invalid.</p>
<pre id="example-5953d" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L954-L967"><a href="#example-5953d">Counter Example № 255</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id: id }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="index" secid="index" class="spec-index">
<h1>
<span class="spec-secid" title="link to the index"><a href="#index">§</a></span>Index</h1>
<ol>
<li><a href="#AreTypesConsistent()">AreTypesConsistent</a></li>
<li><a href="#ArgumentsAreMergeable()">ArgumentsAreMergeable</a></li>
<li><a href="#EnumsAreMergeable()">EnumsAreMergeable</a></li>
<li><a href="#FieldName">FieldName</a></li>
<li><a href="#FieldsAreMergeable()">FieldsAreMergeable</a></li>
<li><a href="#GetPossibleTypes()">GetPossibleTypes</a></li>
<li><a href="#HasKeyFieldsArguments()">HasKeyFieldsArguments</a></li>
<li><a href="#HasProvidesDirective()">HasProvidesDirective</a></li>
<li><a href="#InputFieldsAreMergeable()">InputFieldsAreMergeable</a></li>
<li><a href="#InputFieldsHaveConsistentDefaults()">InputFieldsHaveConsistentDefaults</a></li>
<li><a href="#IsListType()">IsListType</a></li>
<li><a href="#IsValidKeyField()">IsValidKeyField</a></li>
<li><a href="#LeastRestrictiveType()">LeastRestrictiveType</a></li>
<li><a href="#MergeArgumentDefinitions()">MergeArgumentDefinitions</a></li>
<li><a href="#MergeArguments()">MergeArguments</a></li>
<li><a href="#MergeEnumTypes()">MergeEnumTypes</a></li>
<li><a href="#MergeEnumValues()">MergeEnumValues</a></li>
<li><a href="#MergeInputFields()">MergeInputFields</a></li>
<li><a href="#MergeInputTypes()">MergeInputTypes</a></li>
<li><a href="#MergeInterfaceTypes()">MergeInterfaceTypes</a></li>
<li><a href="#MergeObjectTypes()">MergeObjectTypes</a></li>
<li><a href="#MergeOutputFields()">MergeOutputFields</a></li>
<li><a href="#MergeScalarTypes()">MergeScalarTypes</a></li>
<li><a href="#MergeSchemas()">MergeSchemas</a></li>
<li><a href="#MergeTypes()">MergeTypes</a></li>
<li><a href="#MergeUnionTypes()">MergeUnionTypes</a></li>
<li><a href="#MostRestrictiveType()">MostRestrictiveType</a></li>
<li><a href="#Path">Path</a></li>
<li><a href="#PathSegment">PathSegment</a></li>
<li><a href="#ProvidesHasArguments()">ProvidesHasArguments</a></li>
<li><a href="#SelectedListValue">SelectedListValue</a></li>
<li><a href="#SelectedObjectField">SelectedObjectField</a></li>
<li><a href="#SelectedObjectValue">SelectedObjectValue</a></li>
<li><a href="#SelectedValue">SelectedValue</a></li>
<li><a href="#SelectedValueEntry">SelectedValueEntry</a></li>
<li><a href="#TypeName">TypeName</a></li>
<li><a href="#ValidateArgumentDefaultValues()">ValidateArgumentDefaultValues</a></li>
<li><a href="#ValidateDefaultValue()">ValidateDefaultValue</a></li>
<li><a href="#ValidateFieldSelectionSet()">ValidateFieldSelectionSet</a></li>
<li><a href="#ValidateInputFieldDefaultValues()">ValidateInputFieldDefaultValues</a></li>
</ol>
</section>
</article>
<footer>
Written in <a href="https://spec-md.com" target="_blank">Spec Markdown</a>.</footer>
<input hidden class="spec-sidebar-toggle" type="checkbox" id="spec-sidebar-toggle" aria-hidden /><label for="spec-sidebar-toggle" aria-hidden><div class="spec-sidebar-button">&#x2630;</div></label>
<div class="spec-sidebar" aria-hidden>
<div class="spec-toc">
<div class="title"><a href="#">GraphQL Composite Schemas Spec</a></div>
<ol><li id="_sidebar_1"><a href="#sec-Overview"><span class="spec-secid">1</span>Overview</a></li>
<li id="_sidebar_2"><a href="#sec-Source-Schema"><span class="spec-secid">2</span>Source Schema</a>
<input hidden class="toggle" type="checkbox" id="_toggle_2" /><label for="_toggle_2"></label>
<ol>
<li id="_sidebar_2.1"><a href="#sec--lookup"><span class="spec-secid">2.1</span>@lookup</a></li>
<li id="_sidebar_2.2"><a href="#sec--internal"><span class="spec-secid">2.2</span>@internal</a></li>
<li id="_sidebar_2.3"><a href="#sec--inaccessible"><span class="spec-secid">2.3</span>@inaccessible</a></li>
<li id="_sidebar_2.4"><a href="#sec--is"><span class="spec-secid">2.4</span>@is</a></li>
<li id="_sidebar_2.5"><a href="#sec--require"><span class="spec-secid">2.5</span>@require</a></li>
<li id="_sidebar_2.6"><a href="#sec--key"><span class="spec-secid">2.6</span>@key</a></li>
<li id="_sidebar_2.7"><a href="#sec--shareable"><span class="spec-secid">2.7</span>@shareable</a></li>
<li id="_sidebar_2.8"><a href="#sec--provides"><span class="spec-secid">2.8</span>@provides</a></li>
<li id="_sidebar_2.9"><a href="#sec--external"><span class="spec-secid">2.9</span>@external</a></li>
<li id="_sidebar_2.10"><a href="#sec--override"><span class="spec-secid">2.10</span>@override</a></li>
</ol>
</li>
<li id="_sidebar_3"><a href="#sec-Schema-Composition"><span class="spec-secid">3</span>Schema Composition</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3" /><label for="_toggle_3"></label>
<ol>
<li id="_sidebar_3.1"><a href="#sec-Validate-Source-Schemas"><span class="spec-secid">3.1</span>Validate Source Schemas</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1" /><label for="_toggle_3.1"></label>
<ol>
<li id="_sidebar_3.1.1"><a href="#sec-Validate-Source-Schemas.Validate-Type-System"><span class="spec-secid">3.1.1</span>Validate Type System</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.1" /><label for="_toggle_3.1.1"></label>
<ol>
<li id="_sidebar_3.1.1.1"><a href="#sec-Invalid-GraphQL"><span class="spec-secid">3.1.1.1</span>Invalid GraphQL</a></li>
<li id="_sidebar_3.1.1.2"><a href="#sec-Disallowed-Inaccessible-Elements"><span class="spec-secid">3.1.1.2</span>Disallowed Inaccessible Elements</a></li>
<li id="_sidebar_3.1.1.3"><a href="#sec-Type-Definition-Invalid"><span class="spec-secid">3.1.1.3</span>Type Definition Invalid</a></li>
<li id="_sidebar_3.1.1.4"><a href="#sec-Query-Root-Type-Inaccessible"><span class="spec-secid">3.1.1.4</span>Query Root Type Inaccessible</a></li>
<li id="_sidebar_3.1.1.5"><a href="#sec-Root-Mutation-Used"><span class="spec-secid">3.1.1.5</span>Root Mutation Used</a></li>
<li id="_sidebar_3.1.1.6"><a href="#sec-Root-Query-Used"><span class="spec-secid">3.1.1.6</span>Root Query Used</a></li>
<li id="_sidebar_3.1.1.7"><a href="#sec-Root-Subscription-Used"><span class="spec-secid">3.1.1.7</span>Root Subscription Used</a></li>
</ol>
</li>
<li id="_sidebar_3.1.2"><a href="#sec-Validate-Source-Schemas.Validate-External-Directives"><span class="spec-secid">3.1.2</span>Validate External Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.2" /><label for="_toggle_3.1.2"></label>
<ol>
<li id="_sidebar_3.1.2.1"><a href="#sec-External-Unused"><span class="spec-secid">3.1.2.1</span>External Unused</a></li>
<li id="_sidebar_3.1.2.2"><a href="#sec-External-Collision-with-Another-Directive"><span class="spec-secid">3.1.2.2</span>External Collision with Another Directive</a></li>
<li id="_sidebar_3.1.2.3"><a href="#sec-External-on-Interface"><span class="spec-secid">3.1.2.3</span>External on Interface</a></li>
</ol>
</li>
<li id="_sidebar_3.1.3"><a href="#sec-Validate-is-Directive"><span class="spec-secid">3.1.3</span>Validate `@is` Directive</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.3" /><label for="_toggle_3.1.3"></label>
<ol>
<li id="_sidebar_3.1.3.1"><a href="#sec-Is-Invalid-Syntax"><span class="spec-secid">3.1.3.1</span>Is Invalid Syntax</a></li>
<li id="_sidebar_3.1.3.2"><a href="#sec-Is-Invalid-Field-Type"><span class="spec-secid">3.1.3.2</span>Is Invalid Field Type</a></li>
<li id="_sidebar_3.1.3.3"><a href="#sec-Is-Invalid-Usage"><span class="spec-secid">3.1.3.3</span>Is Invalid Usage</a></li>
</ol>
</li>
<li id="_sidebar_3.1.4"><a href="#sec-Validate-Key-Directives"><span class="spec-secid">3.1.4</span>Validate Key Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.4" /><label for="_toggle_3.1.4"></label>
<ol>
<li id="_sidebar_3.1.4.1"><a href="#sec-Key-Fields-Select-Invalid-Type"><span class="spec-secid">3.1.4.1</span>Key Fields Select Invalid Type</a></li>
<li id="_sidebar_3.1.4.2"><a href="#sec-Key-Directive-in-Fields-Argument"><span class="spec-secid">3.1.4.2</span>Key Directive in Fields Argument</a></li>
<li id="_sidebar_3.1.4.3"><a href="#sec-Key-Fields-Has-Arguments"><span class="spec-secid">3.1.4.3</span>Key Fields Has Arguments</a></li>
<li id="_sidebar_3.1.4.4"><a href="#sec-Key-Invalid-Syntax"><span class="spec-secid">3.1.4.4</span>Key Invalid Syntax</a></li>
<li id="_sidebar_3.1.4.5"><a href="#sec-Key-Invalid-Fields"><span class="spec-secid">3.1.4.5</span>Key Invalid Fields</a></li>
<li id="_sidebar_3.1.4.6"><a href="#sec-Key-Invalid-Fields-Type"><span class="spec-secid">3.1.4.6</span>Key Invalid Fields Type</a></li>
</ol>
</li>
<li id="_sidebar_3.1.5"><a href="#sec-Validate-Lookup-Directives"><span class="spec-secid">3.1.5</span>Validate Lookup Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.5" /><label for="_toggle_3.1.5"></label>
<ol>
<li id="_sidebar_3.1.5.1"><a href="#sec-Lookup-Returns-Non-Nullable-Type"><span class="spec-secid">3.1.5.1</span>Lookup Returns Non-Nullable Type</a></li>
<li id="_sidebar_3.1.5.2"><a href="#sec-Lookup-Returns-List"><span class="spec-secid">3.1.5.2</span>Lookup Returns List</a></li>
</ol>
</li>
<li id="_sidebar_3.1.6"><a href="#sec-Validate-Source-Schemas.Validate-Override-Directives"><span class="spec-secid">3.1.6</span>Validate Override Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.6" /><label for="_toggle_3.1.6"></label>
<ol>
<li id="_sidebar_3.1.6.1"><a href="#sec-Override-from-Self"><span class="spec-secid">3.1.6.1</span>Override from Self</a></li>
<li id="_sidebar_3.1.6.2"><a href="#sec-Override-on-Interface"><span class="spec-secid">3.1.6.2</span>Override on Interface</a></li>
</ol>
</li>
<li id="_sidebar_3.1.7"><a href="#sec-Validate-Provides-Directives"><span class="spec-secid">3.1.7</span>Validate Provides Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.7" /><label for="_toggle_3.1.7"></label>
<ol>
<li id="_sidebar_3.1.7.1"><a href="#sec-Provides-Directive-in-Fields-Argument"><span class="spec-secid">3.1.7.1</span>Provides Directive in Fields Argument</a></li>
<li id="_sidebar_3.1.7.2"><a href="#sec-Provides-Fields-Has-Arguments"><span class="spec-secid">3.1.7.2</span>Provides Fields Has Arguments</a></li>
<li id="_sidebar_3.1.7.3"><a href="#sec-Provides-Fields-Missing-External"><span class="spec-secid">3.1.7.3</span>Provides Fields Missing External</a></li>
<li id="_sidebar_3.1.7.4"><a href="#sec-Provides-Invalid-Syntax"><span class="spec-secid">3.1.7.4</span>Provides Invalid Syntax</a></li>
<li id="_sidebar_3.1.7.5"><a href="#sec-Provides-Invalid-Fields"><span class="spec-secid">3.1.7.5</span>Provides Invalid Fields</a></li>
<li id="_sidebar_3.1.7.6"><a href="#sec-Provides-Invalid-Fields-Type"><span class="spec-secid">3.1.7.6</span>Provides Invalid Fields Type</a></li>
<li id="_sidebar_3.1.7.7"><a href="#sec-Provides-on-Non-Composite-Field"><span class="spec-secid">3.1.7.7</span>Provides on Non-Composite Field</a></li>
</ol>
</li>
<li id="_sidebar_3.1.8"><a href="#sec-Validate-Source-Schemas.Validate-Require-Directives"><span class="spec-secid">3.1.8</span>Validate Require Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.8" /><label for="_toggle_3.1.8"></label>
<ol>
<li id="_sidebar_3.1.8.1"><a href="#sec-Require-Invalid-Syntax"><span class="spec-secid">3.1.8.1</span>Require Invalid Syntax</a></li>
<li id="_sidebar_3.1.8.2"><a href="#sec-Require-Invalid-Fields-Type"><span class="spec-secid">3.1.8.2</span>Require Invalid Fields Type</a></li>
</ol>
</li>
<li id="_sidebar_3.1.9"><a href="#sec-Validate-Source-Schemas.Validate-Shareable-Directives"><span class="spec-secid">3.1.9</span>Validate Shareable Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.1.9" /><label for="_toggle_3.1.9"></label>
<ol>
<li id="_sidebar_3.1.9.1"><a href="#sec-Invalid-Shareable-Usage"><span class="spec-secid">3.1.9.1</span>Invalid Shareable Usage</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3.2"><a href="#sec-Pre-Merge-Validation"><span class="spec-secid">3.2</span>Pre Merge Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2" /><label for="_toggle_3.2"></label>
<ol>
<li id="_sidebar_3.2.1"><a href="#sec-Pre-Merge-Validation.Validate-Type-System"><span class="spec-secid">3.2.1</span>Validate Type System</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.1" /><label for="_toggle_3.2.1"></label>
<ol>
<li id="_sidebar_3.2.1.1"><a href="#sec-Type-Kind-Mismatch"><span class="spec-secid">3.2.1.1</span>Type Kind Mismatch</a></li>
</ol>
</li>
<li id="_sidebar_3.2.2"><a href="#sec-Pre-Merge-Validation.Validate-Enums"><span class="spec-secid">3.2.2</span>Validate Enums</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.2" /><label for="_toggle_3.2.2"></label>
<ol>
<li id="_sidebar_3.2.2.1"><a href="#sec-Enum-Values-Mismatch"><span class="spec-secid">3.2.2.1</span>Enum Values Mismatch</a></li>
</ol>
</li>
<li id="_sidebar_3.2.3"><a href="#sec-Pre-Merge-Validation.Validate-Composite-Types"><span class="spec-secid">3.2.3</span>Validate Composite Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.3" /><label for="_toggle_3.2.3"></label>
<ol>
<li id="_sidebar_3.2.3.1"><a href="#sec-Output-Field-Types-Mergeable"><span class="spec-secid">3.2.3.1</span>Output Field Types Mergeable</a></li>
<li id="_sidebar_3.2.3.2"><a href="#sec-Field-Argument-Types-Mergeable"><span class="spec-secid">3.2.3.2</span>Field Argument Types Mergeable</a></li>
<li id="_sidebar_3.2.3.3"><a href="#sec-Field-With-Missing-Required-Arguments"><span class="spec-secid">3.2.3.3</span>Field With Missing Required Arguments</a></li>
</ol>
</li>
<li id="_sidebar_3.2.4"><a href="#sec-Pre-Merge-Validation.Validate-Input-Types"><span class="spec-secid">3.2.4</span>Validate Input Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.4" /><label for="_toggle_3.2.4"></label>
<ol>
<li id="_sidebar_3.2.4.1"><a href="#sec-Input-Field-Default-Mismatch"><span class="spec-secid">3.2.4.1</span>Input Field Default Mismatch</a></li>
<li id="_sidebar_3.2.4.2"><a href="#sec-Input-Field-Types-mergeable"><span class="spec-secid">3.2.4.2</span>Input Field Types mergeable</a></li>
<li id="_sidebar_3.2.4.3"><a href="#sec-Input-With-Missing-Required-Fields"><span class="spec-secid">3.2.4.3</span>Input With Missing Required Fields</a></li>
</ol>
</li>
<li id="_sidebar_3.2.5"><a href="#sec-Pre-Merge-Validation.Validate-External-Directives"><span class="spec-secid">3.2.5</span>Validate External Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.5" /><label for="_toggle_3.2.5"></label>
<ol>
<li id="_sidebar_3.2.5.1"><a href="#sec-External-Argument-Default-Mismatch"><span class="spec-secid">3.2.5.1</span>External Argument Default Mismatch</a></li>
<li id="_sidebar_3.2.5.2"><a href="#sec-External-Argument-Missing"><span class="spec-secid">3.2.5.2</span>External Argument Missing</a></li>
<li id="_sidebar_3.2.5.3"><a href="#sec-External-Argument-Type-Mismatch"><span class="spec-secid">3.2.5.3</span>External Argument Type Mismatch</a></li>
<li id="_sidebar_3.2.5.4"><a href="#sec-External-Missing-on-Base"><span class="spec-secid">3.2.5.4</span>External Missing on Base</a></li>
<li id="_sidebar_3.2.5.5"><a href="#sec-External-Type-Mismatch"><span class="spec-secid">3.2.5.5</span>External Type Mismatch</a></li>
</ol>
</li>
<li id="_sidebar_3.2.6"><a href="#sec-Pre-Merge-Validation.Validate-Override-Directives"><span class="spec-secid">3.2.6</span>Validate Override Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.6" /><label for="_toggle_3.2.6"></label>
<ol>
<li id="_sidebar_3.2.6.1"><a href="#sec-Override-Collision-with-Another-Directive"><span class="spec-secid">3.2.6.1</span>Override Collision with Another Directive</a></li>
<li id="_sidebar_3.2.6.2"><a href="#sec-Override-Source-Has-Override"><span class="spec-secid">3.2.6.2</span>Override Source Has Override</a></li>
</ol>
</li>
<li id="_sidebar_3.2.7"><a href="#sec-Pre-Merge-Validation.Validate-Shareable-Directives"><span class="spec-secid">3.2.7</span>Validate Shareable Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.7" /><label for="_toggle_3.2.7"></label>
<ol>
<li id="_sidebar_3.2.7.1"><a href="#sec-Invalid-Field-Sharing"><span class="spec-secid">3.2.7.1</span>Invalid Field Sharing</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3.3"><a href="#sec-Merge"><span class="spec-secid">3.3</span>Merge</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.3" /><label for="_toggle_3.3"></label>
<ol>
<li id="_sidebar_3.3.1"><a href="#sec-Merge-Scalar-Types"><span class="spec-secid">3.3.1</span>Merge Scalar Types</a></li>
<li id="_sidebar_3.3.2"><a href="#sec-Merge-Interface-Types"><span class="spec-secid">3.3.2</span>Merge Interface Types</a></li>
<li id="_sidebar_3.3.3"><a href="#sec-Merge-Enum-Types"><span class="spec-secid">3.3.3</span>Merge Enum Types</a></li>
<li id="_sidebar_3.3.4"><a href="#sec-Merge-Union-Types"><span class="spec-secid">3.3.4</span>Merge Union Types</a></li>
<li id="_sidebar_3.3.5"><a href="#sec-Merge-Input-Types"><span class="spec-secid">3.3.5</span>Merge Input Types</a></li>
<li id="_sidebar_3.3.6"><a href="#sec-Merge-Object-Types"><span class="spec-secid">3.3.6</span>Merge Object Types</a></li>
<li id="_sidebar_3.3.7"><a href="#sec-Merge-Output-Fields"><span class="spec-secid">3.3.7</span>Merge Output Fields</a></li>
<li id="_sidebar_3.3.8"><a href="#sec-Merge-Input-Fields"><span class="spec-secid">3.3.8</span>Merge Input Fields</a></li>
<li id="_sidebar_3.3.9"><a href="#sec-Merge-Argument-Definitions"><span class="spec-secid">3.3.9</span>Merge Argument Definitions</a></li>
<li id="_sidebar_3.3.10"><a href="#sec-Merge-Arguments"><span class="spec-secid">3.3.10</span>Merge Arguments</a></li>
<li id="_sidebar_3.3.11"><a href="#sec-Shared-Algorithms"><span class="spec-secid">3.3.11</span>Shared Algorithms</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.3.11" /><label for="_toggle_3.3.11"></label>
<ol>
<li id="_sidebar_3.3.11.1"><a href="#sec-Least-Restrictive-Type"><span class="spec-secid">3.3.11.1</span>Least Restrictive Type</a></li>
<li id="_sidebar_3.3.11.2"><a href="#sec-Most-Restrictive-Type"><span class="spec-secid">3.3.11.2</span>Most Restrictive Type</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3.4"><a href="#sec-Post-Merge-Validation"><span class="spec-secid">3.4</span>Post Merge Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4" /><label for="_toggle_3.4"></label>
<ol>
<li id="_sidebar_3.4.1"><a href="#sec-Post-Merge-Validation.Validate-Type-System"><span class="spec-secid">3.4.1</span>Validate Type System</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.1" /><label for="_toggle_3.4.1"></label>
<ol>
<li id="_sidebar_3.4.1.1"><a href="#sec-No-Queries"><span class="spec-secid">3.4.1.1</span>No Queries</a></li>
<li id="_sidebar_3.4.1.2"><a href="#sec-Reference-To-Inaccessible-Type"><span class="spec-secid">3.4.1.2</span>Reference To Inaccessible Type</a></li>
</ol>
</li>
<li id="_sidebar_3.4.2"><a href="#sec-Post-Merge-Validation.Validate-Composite-Types"><span class="spec-secid">3.4.2</span>Validate Composite Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.2" /><label for="_toggle_3.4.2"></label>
<ol>
<li id="_sidebar_3.4.2.1"><a href="#sec-Empty-Merged-Object-Type"><span class="spec-secid">3.4.2.1</span>Empty Merged Object Type</a></li>
<li id="_sidebar_3.4.2.2"><a href="#sec-Empty-Merged-Interface-Type"><span class="spec-secid">3.4.2.2</span>Empty Merged Interface Type</a></li>
<li id="_sidebar_3.4.2.3"><a href="#sec-Implemented-by-Inaccessible"><span class="spec-secid">3.4.2.3</span>Implemented by Inaccessible</a></li>
<li id="_sidebar_3.4.2.4"><a href="#sec-Interface-Field-No-Implementation"><span class="spec-secid">3.4.2.4</span>Interface Field No Implementation</a></li>
</ol>
</li>
<li id="_sidebar_3.4.3"><a href="#sec-Post-Merge-Validation.Validate-Input-Types"><span class="spec-secid">3.4.3</span>Validate Input Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.3" /><label for="_toggle_3.4.3"></label>
<ol>
<li id="_sidebar_3.4.3.1"><a href="#sec-Empty-Merged-Input-Object-Type"><span class="spec-secid">3.4.3.1</span>Empty Merged Input Object Type</a></li>
<li id="_sidebar_3.4.3.2"><a href="#sec-Non-Null-Input-Fields-cannot-be-inaccessible"><span class="spec-secid">3.4.3.2</span>Non-Null Input Fields cannot be inaccessible</a></li>
</ol>
</li>
<li id="_sidebar_3.4.4"><a href="#sec-Post-Merge-Validation.Validate-Enums"><span class="spec-secid">3.4.4</span>Validate Enums</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.4" /><label for="_toggle_3.4.4"></label>
<ol>
<li id="_sidebar_3.4.4.1"><a href="#sec-Empty-Merged-Enum-Type"><span class="spec-secid">3.4.4.1</span>Empty Merged Enum Type</a></li>
<li id="_sidebar_3.4.4.2"><a href="#sec-Enum-Type-Default-Value-Inaccessible"><span class="spec-secid">3.4.4.2</span>Enum Type Default Value Inaccessible</a></li>
</ol>
</li>
<li id="_sidebar_3.4.5"><a href="#sec-Validate-Union-Types"><span class="spec-secid">3.4.5</span>Validate Union Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.5" /><label for="_toggle_3.4.5"></label>
<ol>
<li id="_sidebar_3.4.5.1"><a href="#sec-Empty-Merged-Union-Type"><span class="spec-secid">3.4.5.1</span>Empty Merged Union Type</a></li>
</ol>
</li>
<li id="_sidebar_3.4.6"><a href="#sec-Validate-Is-Directives"><span class="spec-secid">3.4.6</span>Validate Is Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.6" /><label for="_toggle_3.4.6"></label>
<ol>
<li id="_sidebar_3.4.6.1"><a href="#sec-Is-Invalid-Fields"><span class="spec-secid">3.4.6.1</span>Is Invalid Fields</a></li>
</ol>
</li>
<li id="_sidebar_3.4.7"><a href="#sec-Post-Merge-Validation.Validate-Require-Directives"><span class="spec-secid">3.4.7</span>Validate Require Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.4.7" /><label for="_toggle_3.4.7"></label>
<ol>
<li id="_sidebar_3.4.7.1"><a href="#sec-Require-Invalid-Fields"><span class="spec-secid">3.4.7.1</span>Require Invalid Fields</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3.5"><a href="#sec-Validate-Satisfiability"><span class="spec-secid">3.5</span>Validate Satisfiability</a></li>
</ol>
</li>
<li id="_sidebar_4"><a href="#sec-Executor"><span class="spec-secid">4</span>Executor</a>
<input hidden class="toggle" type="checkbox" id="_toggle_4" /><label for="_toggle_4"></label>
<ol>
<li id="_sidebar_4.1"><a href="#sec-Configuration"><span class="spec-secid">4.1</span>Configuration</a></li>
</ol>
</li>
<li id="_sidebar_5"><a href="#sec-Shared-Types"><span class="spec-secid">5</span>Shared Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5" /><label for="_toggle_5"></label>
<ol>
<li id="_sidebar_5.1"><a href="#sec-Shared-Types.Name"><span class="spec-secid">5.1</span>Name</a></li>
<li id="_sidebar_5.2"><a href="#sec-FieldSelection"><span class="spec-secid">5.2</span>FieldSelection</a></li>
</ol>
</li>
<li id="_sidebar_6"><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar"><span class="spec-secid">6</span>Appendix A: Specification of FieldSelectionMap Scalar</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6" /><label for="_toggle_6"></label>
<ol>
<li id="_sidebar_6.1"><a href="#sec-Introduction"><span class="spec-secid">6.1</span>Introduction</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.1" /><label for="_toggle_6.1"></label>
<ol>
<li id="_sidebar_6.1.1"><a href="#sec-Scope"><span class="spec-secid">6.1.1</span>Scope</a></li>
</ol>
</li>
<li id="_sidebar_6.2"><a href="#sec-Language"><span class="spec-secid">6.2</span>Language</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.2" /><label for="_toggle_6.2"></label>
<ol>
<li id="_sidebar_6.2.1"><a href="#sec-Language.Name"><span class="spec-secid">6.2.1</span>Name</a></li>
<li id="_sidebar_6.2.2"><a href="#sec-Path"><span class="spec-secid">6.2.2</span>Path</a></li>
<li id="_sidebar_6.2.3"><a href="#sec-SelectedValue"><span class="spec-secid">6.2.3</span>SelectedValue</a></li>
<li id="_sidebar_6.2.4"><a href="#sec-SelectedObjectValue"><span class="spec-secid">6.2.4</span>SelectedObjectValue</a></li>
<li id="_sidebar_6.2.5"><a href="#sec-SelectedListValue"><span class="spec-secid">6.2.5</span>SelectedListValue</a></li>
</ol>
</li>
<li id="_sidebar_6.3"><a href="#sec-Validation"><span class="spec-secid">6.3</span>Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.3" /><label for="_toggle_6.3"></label>
<ol>
<li id="_sidebar_6.3.1"><a href="#sec-Path-Field-Selections"><span class="spec-secid">6.3.1</span>Path Field Selections</a></li>
<li id="_sidebar_6.3.2"><a href="#sec-Path-Terminal-Field-Selections"><span class="spec-secid">6.3.2</span>Path Terminal Field Selections</a></li>
<li id="_sidebar_6.3.3"><a href="#sec-Type-Reference-Is-Possible"><span class="spec-secid">6.3.3</span>Type Reference Is Possible</a></li>
<li id="_sidebar_6.3.4"><a href="#sec-Values-of-Correct-Type"><span class="spec-secid">6.3.4</span>Values of Correct Type</a></li>
<li id="_sidebar_6.3.5"><a href="#sec-Selected-Object-Field-Names"><span class="spec-secid">6.3.5</span>Selected Object Field Names</a></li>
<li id="_sidebar_6.3.6"><a href="#sec-Selected-Object-Field-Uniqueness"><span class="spec-secid">6.3.6</span>Selected Object Field Uniqueness</a></li>
<li id="_sidebar_6.3.7"><a href="#sec-Required-Selected-Object-Fields"><span class="spec-secid">6.3.7</span>Required Selected Object Fields</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_index"><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</div>
</div>
</body>
</html>
