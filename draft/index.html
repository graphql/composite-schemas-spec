<!DOCTYPE html>
<!-- Built with spec-md https://spec-md.com -->
<html>
<head><meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"><title>GraphQL Composite Schemas Spec</title>
<style>@media (prefers-color-scheme: light){:root{--color-foreground: #333333;--color-background: #ffffff;--color-light-grey: #ccc;--color-grey: #666666;--color-white: #fff;--color-link: #3b5998;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #f0f0f0;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(0, 0, 0, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #fafafa;--color-pre-border: #e9e9e9;--color-code-background: rgba(0, 0, 0, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #fafaff;--color-spec-example-border: #bbbbff;--color-spec-counter-example: #fffafa;--color-spec-counter-border: #ffbbbb;--color-spec-counter-example-link: #98593b;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #83238e;--color-spec-condition: #1c7758;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #f4e925;--color-spec-note-background: #fefef3;--color-spec-note-first-link: #6c6613;--color-source-link: var(--color-light-grey);--color-table-header: #f9f9f9;--color-table-header-border: #d0d0d0;--color-token-inserted: hsla(241, 71%, 34%, .69);--color-token-deleted: hsla(324, 92%, 33%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #cacee0;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #3b5998}}@media (prefers-color-scheme: dark){:root{--color-foreground: #b6b6b6;--color-background: #262626;--color-light-grey: #373737;--color-grey: #828282;--color-white: rgb(29, 29, 29);--color-link: #89b7da;--color-subsection-link: var(--color-foreground);--color-toc-link: var(--color-foreground);--color-toc-id: var(--color-link);--color-toggle-border: #bbc;--color-sidebar-background: #323232;--color-sidebar-viewing-link: #8b9;--color-sidebar-toggle-button: rgba(220, 220, 220, .7);--color-sidebar-shadow-inset: rgba(0, 0, 0, .05);--color-sidebar-shadow: rgba(0, 0, 0, .04);--color-sidebar-large-shadow: rgba(0, 0, 0, .08);--color-pre-background: #2e2e2e;--color-pre-border: #3a3a3a;--color-code-background: rgba(41, 41, 41, .03);--color-spec-todo: var(--color-grey);--color-spec-example: #2b2b35;--color-spec-example-border: #4d4d6d;--color-spec-counter-example: #322828;--color-spec-counter-border: #664040;--color-spec-counter-example-link: #ff702d;--color-spec-added-border: #396;--color-spec-removed-border: #933;--color-spec-prose: var(--color-grey);--color-spec-quantifier-list: var(--color-link);--color-spec-quantifier-optional: #c689ce;--color-spec-condition: #6fa889;--color-spec-param: var(--color-grey);--color-spec-rx: var(--color-foreground);--color-spec-note-border: #605e39;--color-spec-note-background: #303028;--color-spec-note-first-link: #f0e330;--color-source-link: var(--color-grey);--color-table-header: #373737;--color-table-header-border: #525252;--color-token-inserted: hsla(241, 63%, 70%, .69);--color-token-deleted: hsla(325, 64%, 67%, .74);--color-inserts-background: rgba(0, 200, 30, .08);--color-deletions-background: rgba(200, 0, 0, .08);--selection-background-color: #656565;--selection-background-color-link: #f0babe}.selection-link:hover{--selection-background-color: #829edb}}:root{color:var(--color-foreground);background-color:var(--color-background);font-family:var(--font-family);font-size:15px;line-height:1.5;--mono-font-size: 13px;--indent: 1rem;--list-indent: 1.5rem;--dfn-indent: 0rem;--font-family: Cambria, "Palatino Linotype", Palatino, "Liberation Serif", serif;--font-family-monospace: Consolas, Monaco, "Andale Mono", "Ubuntu Mono", monospace}@media (min-width: 720px){:root{font-size:17px;--mono-font-size: 15px;--indent: 2rem;--list-indent: 2rem;--dfn-indent: 2rem}}body{margin:3rem 0 3rem}article{margin:0 1rem}@media (min-width: 720px){body{margin:6rem auto 3rem;max-width:800px;padding-left:75px;padding-right:clamp(0px,calc((100vw - 800px) * .25),75px)}}.source-link{display:none}@media screen and (min-width: 720px){.source-link{display:block;position:absolute;width:18px;fill:var(--color-source-link);opacity:.3}.source-link:hover{opacity:1}}.outdated-selection-link,.selection-link{position:absolute;display:block;color:var(--color-white);background:var(--selection-background-color);border-radius:4px;font-size:36px;height:23px;line-height:48px;text-align:center;text-decoration:none;width:25px;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.outdated-selection-link:hover,.selection-link:hover{text-decoration:none}.outdated-selection-link:before,.selection-link:before{border:5px solid transparent;content:"";height:0;margin-top:-5px;margin-right:-5px;position:absolute;right:1px;top:50%;width:0}@media (max-width: 719px){.outdated-selection-link:before,.selection-link:before{border-bottom-color:var(--selection-background-color);border-top:0;right:50%;top:1px}}@media (min-width: 720px){.outdated-selection-link:before,.selection-link:before{border-left-color:var(--selection-background-color);border-right:0;right:1px;top:50%}}.outdated-selection-link{background:var(--selection-background-color-link);font-size:21px;font-weight:800;line-height:27px}.outdated-selection-link:hover:after{content:"This selection content has changed since this link was created.";font:9pt/11pt var(--font-family);position:absolute;display:block;white-space:nowrap;padding:2px 5px 1px;top:-20px;background:black;color:var(--color-white)}a{color:var(--color-link);text-decoration:none}a:hover{text-decoration:underline}img{max-width:100%}dl{margin:1rem 0 1rem var(--dfn-indent)}dd{margin:.25em 0 .5em var(--indent)}dd+dd{margin-top:1rem}dfn,.spec-ref{font-style:italic}dfn>a,.spec-ref>a{color:inherit}h1,h2,h3,h4,h5,h6{font-weight:bold;margin:3em 0 1em;position:relative}@media (min-width: 720px){header>h1{margin:6em 0 3em}}h1{font-size:1.5em;margin-top:5em}h2,h3{font-size:1.25em}h4,h5,h6{font-size:1em}section{padding-top:1rem;margin-top:-1rem}section.subsec>h6{margin-top:2em}section.subsec>h6>a{color:var(--color-subsection-link)}section .spec-secid{margin-right:1ex}@media (min-width: 720px){section .spec-secid{position:absolute;right:100%;text-align:right;white-space:nowrap}}footer{font-size:75%;opacity:.5;text-align:center;margin-top:12rem}.spec-toc{margin:1rem 0 3rem}.spec-toc .title{content:"Contents";display:block;font-weight:bold;margin:5em 0 1em}.spec-toc .spec-secid{margin-right:1ex}.spec-toc ol{list-style:none;padding-left:0;margin-top:0;margin-bottom:0}.spec-toc ol ol{list-style:none;padding-left:2ex;margin-bottom:.25em}.spec-toc li{position:relative;padding:5px 0 0 30px;margin:-5px 0 0 -30px}.spec-toc a{color:var(--color-toc-link)}.spec-toc a:hover{text-decoration:none}.spec-toc a .spec-secid{color:var(--color-toc-id)}.spec-toc a:hover .spec-secid{text-decoration:underline}.spec-toc .toggle{display:none}.spec-toc .toggle+label{cursor:pointer;left:6px;opacity:1;padding:5px 6px 5px 7px;position:absolute;top:6px;transform:rotate(0deg);transition:all .18s ease-in-out}.spec-toc .toggle+label:after{border-color:transparent transparent transparent var(--color-toggle-border);border-style:solid;border-width:6px 0 6px 7px;content:" ";display:block;height:0;width:0}@media (pointer: fine){.spec-toc .toggle+label{left:10px;padding:3px 5px 3px 6px;top:8px}}.spec-toc .toggle:checked+label{transform:rotate(90deg)}@media (hover: hover){.spec-toc li:not(:hover)>.toggle:checked+label{opacity:0}}.spec-toc .toggle:not(:checked)~ol{max-height:0;overflow:hidden;margin:0}.spec-sidebar-toggle{display:none}.spec-sidebar-toggle+label>.spec-sidebar-button{position:fixed;right:0;top:0;padding:10px 15px;font-size:30px;color:var(--color-sidebar-toggle-button);z-index:2;cursor:pointer;user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked+label:after{content:"";position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:0}.spec-sidebar{display:none;position:fixed;right:0;top:0;width:min(320px,calc(100vw - 48px));font-size:14px;line-height:1.75;overflow-y:scroll;height:100%;padding:0 0 5rem 30px;box-sizing:border-box;background:var(--color-sidebar-background);box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),-4px 0 8px -2px var(--color-sidebar-shadow);overscroll-behavior:contain}.spec-sidebar{user-select:none;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none}.spec-sidebar-toggle:checked~.spec-sidebar{display:block}.spec-sidebar .viewing>a:after{color:var(--color-sidebar-viewing-link);content:"\2022";margin-left:1ex}@media (min-width: 1220px){.spec-sidebar-toggle+label{display:none}.spec-sidebar{display:block;box-shadow:inset 1px 0 var(--color-sidebar-shadow-inset),inset 4px 0 8px -2px var(--color-sidebar-large-shadow)!important}body{padding-right:345px}}.spec-note{background:var(--color-spec-note-background);border-left:solid 4px var(--color-spec-note-border);margin:1rem -1rem;min-width:70vw;padding:8px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content}@media (min-width: 720px){.spec-note{min-width:416px}}.spec-note>a:first-child{color:var(--color-spec-note-first-link);display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-todo{color:var(--color-spec-todo);margin:1em 0 1em 5em;min-height:1em}.spec-todo::before{content:"todo";display:block;float:left;margin-left:-5em;text-transform:uppercase}.spec-index ol{list-style-type:none;margin:0 0 0 var(--indent);padding:0;column-width:210px;column-gap:var(--indent)}.spec-index ol li{width:min-content;white-space:nowrap}pre,code{font-family:var(--font-family-monospace);font-size:var(--mono-font-size);font-weight:inherit}code{background:var(--color-code-background);margin:-2px -1px;padding:3px 3px;white-space:pre-wrap}pre>code{background:none;font-weight:inherit;margin:0;padding:0;white-space:pre}pre{background:var(--color-pre-background);border-left:solid 4px var(--color-pre-border);margin:1rem -1rem;min-width:70vw;padding:12px 1rem 12px calc(1rem - 4px);width:-moz-fit-content;width:-webkit-fit-content;width:fit-content;max-width:calc(100vw - 2rem);overflow-y:auto}@media (min-width: 720px){pre{min-width:40ch}}.spec-example{background:var(--color-spec-example);border-left:solid 4px var(--color-spec-example-border);padding-top:8px}.spec-counter-example{background:var(--color-spec-counter-example);border-left:solid 4px var(--color-spec-counter-border);padding-top:8px}.spec-example>a,.spec-counter-example>a{display:block;font:italic 11pt/18pt var(--font-family);opacity:.6;user-select:none}.spec-counter-example>a{color:var(--color-spec-counter-example-link)}table{border-collapse:collapse}th{background-color:var(--color-table-header)}td,th{border:1px solid var(--color-table-header-border);padding:.4em;vertical-align:baseline}ol,ul{padding-left:var(--list-indent)}li>ol,li>ul{margin-top:.25em;margin-bottom:.5em}li+li{margin-top:.25em}li.task{list-style-type:none;position:relative}li.task>input:first-child{margin-left:0;position:absolute;transform:translateX(calc(-100% - 1ch))}ins{background-color:var(--color-inserts-background);text-decoration:none}del{background-color:var(--color-deletions-background)}.spec-added,.spec-removed{border-left:4px solid;margin-left:-18px;padding-left:14px}.spec-added{border-color:var(--color-spec-added-border)}.spec-removed{border-color:var(--color-spec-removed-border);text-decoration:line-through}.spec-keyword{font-weight:bold}.spec-string{font-family:var(--font-family-monospace);font-size:85%;white-space:pre}var{font-style:italic}*[data-name]{transition:.15s background ease-out;border-radius:2px;padding:0 3px;margin:0 -3px}.spec-semantic,.spec-algo{margin:1rem 0 1rem var(--dfn-indent)}.spec-semantic>.spec-nt::after,.spec-algo>.spec-call:first-child::after{content:":";font-style:normal;font-weight:bold;margin-left:1ex}.spec-semantic ol,.spec-semantic ol ol ol ol,.spec-algo ol,.spec-algo ol ol ol ol{list-style-type:decimal}.spec-semantic ol ol,.spec-semantic ol ol ol ol ol,.spec-algo ol ol,.spec-algo ol ol ol ol ol{list-style-type:lower-alpha}.spec-semantic ol ol ol,.spec-semantic ol ol ol ol ol ol,.spec-algo ol ol ol,.spec-algo ol ol ol ol ol ol{list-style-type:lower-roman}.spec-call>a{color:inherit}.spec-production{margin:1rem 0 1rem var(--dfn-indent)}.spec-production>.spec-nt::after{content:":";font-style:normal;font-weight:bold;margin:0 1ex}.spec-semantic.d2>.spec-nt::after,.spec-production.d2>.spec-nt::after{content:"::"}.spec-semantic.d3>.spec-nt::after,.spec-production.d3>.spec-nt::after{content:":::"}.spec-production>.spec-rhs{line-height:1.1;margin:.25em 0 .5em calc(2 * var(--indent));text-indent:calc(-1 * var(--indent))}.spec-semantic>.spec-rhs{display:inline-block;text-indent:calc(-1 * var(--indent));margin-left:calc(1ex + var(--indent))}.spec-rhs>*{text-indent:0}.spec-oneof{display:inline}.spec-oneof::before{content:"one of";font-style:normal;font-weight:bold}.spec-oneof-grid{max-width:calc(100vw - 2rem);overflow:auto;margin:-1ex -1rem;padding:1ex 1rem}.spec-oneof-grid>table{margin-left:var(--indent)}.spec-oneof .spec-rhs{border:none;margin:0;padding:0 0 0 1rem;vertical-align:baseline;white-space:pre}.spec-oneof .spec-rhs:first-child{padding:0}.spec-rhs .spec-constrained:not(:first-child),.spec-rhs .spec-quantified:not(:first-child),.spec-rhs .spec-nt:not(:first-child),.spec-rhs .spec-t:not(:first-child),.spec-rhs .spec-rx:not(:first-child),.spec-rhs .spec-prose:not(:first-child),.spec-rhs .spec-empty:not(:first-child),.spec-rhs .spec-lookahead:not(:first-child){margin-left:1ex;display:inline-block}.spec-condition{font-size:85%}.spec-condition::before{content:"[if "}.spec-condition.not::before{content:"[if not "}.spec-condition::after{content:"]"}.spec-empty,.spec-prose{color:var(--color-spec-prose)}.spec-nt{font-style:italic}.spec-nt>a{color:inherit}.spec-quantifiers,.spec-params{font-size:65%;font-style:normal;vertical-align:sub}.spec-quantifier.list{color:var(--color-spec-quantifier-list)}.spec-quantifier.optional{color:var(--color-spec-quantifier-optional)}.spec-params,.spec-condition{color:var(--color-spec-condition)}.spec-params::before{content:"["}.spec-params::after{content:"]"}.spec-quantifier:not(:last-child)::after,.spec-param:not(:last-child)::after{color:var(--color-spec-param);content:", "}.spec-param.conditional::before{content:"?"}.spec-param.negated::before{content:"!"}.spec-t,.spec-rx{color:var(--color-spec-rx);font-family:var(--font-family-monospace);font-weight:bold}.spec-butnot::before{color:var(--color-grey);content:"but not";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-butnot>*:not(:first-child)::before{color:var(--color-grey);content:"or";font-family:var(--font-family);font-weight:normal;margin-right:1ex}.spec-rhs .spec-oneof::before,.spec-rhs .spec-butnot::before{margin-left:1ex}.spec-lookahead>*{margin:0!important}.spec-lookahead>*:not(:first-child)::before{color:var(--color-grey);content:", ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead::before{color:var(--color-grey);content:"[lookahead = ";font-family:var(--font-family);font-style:normal;font-weight:normal}.spec-lookahead.not::before{content:"[lookahead \2260  "}.spec-lookahead.set::before{content:"[lookahead \2208  {";margin-right:0}.spec-lookahead.set.not::before{content:"[lookahead \2209  {"}.spec-lookahead.ntset::before{content:"[lookahead \2208  ";margin-right:0}.spec-lookahead.ntset.not::before{content:"[lookahead \2209  "}.spec-lookahead::after{color:var(--color-grey);content:"]"}.spec-lookahead.set::after{content:"}]"}code[class*=language-],pre[class*=language-]{color:var(--color-prism-foreground);background:none;text-shadow:0 1px var(--color-prism-text-shadow);font-family:var(--font-family-monospace);font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection,code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection{text-shadow:none;background:var(--color-prism-background)}pre[class*=language-]::selection,pre[class*=language-] ::selection,code[class*=language-]::selection,code[class*=language-] ::selection{text-shadow:none;background:var(--color-prism-background)}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:var(--color-prism-block-background)}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.atrule,.token.attr-value,.token.keyword,.token.property,.token.selector,.token.attr-name,.token.builtin,.token.entity,.token.url,.token.inserted{color:var(--color-token-inserted);background:none}.token.tag,.token.boolean,.token.number,.token.string,.token.char,.token.constant,.token.symbol,.token.regex,.token.important,.token.variable,.token.function,.token.class-name,.token.deleted{color:var(--color-token-deleted)}.token.comment,.token.prolog,.token.doctype,.token.cdata,.token.description{color:inherit;opacity:.3}.token.punctuation{color:inherit;opacity:.5}.token.operator,.token.namespace{color:inherit;opacity:.7}</style>
<script>(function(){var r,a=[];document.addEventListener("readystatechange",function(){document.readyState==="interactive"&&u()});function u(){var n=document.querySelector('label[for="spec-sidebar-toggle"]');n.addEventListener("scroll",o),n.addEventListener("touchmove",o);function o(d){d.preventDefault()}for(var t=document.getElementsByTagName("section"),e=0;e<t.length;e++)t[e].getAttribute("secid")&&a.push(t[e]);var i=window.scrollY,c=!1;window.addEventListener("scroll",function(d){i=window.scrollY,c||(c=!0,window.requestAnimationFrame(function(){s(i),c=!1}))})}function s(n){for(var o=n+document.documentElement.clientHeight/4,t,e=a.length-1;e>=0;e--)if(a[e].offsetTop<o){t=a[e];break}var i=t&&t.getAttribute("secid");i!==r&&(r&&l(r,!1),i&&l(i,!0),r=i)}function l(n,o){document.getElementById("_sidebar_"+n).className=o?"viewing":"";for(var t=n.split(".");t.length;){var e=document.getElementById("_toggle_"+t.join("."));e&&(e.checked=o),t.pop()}}s(window.scrollY);})();</script>
<script>(function(){var n=document.getElementsByTagName("style")[0].sheet,e;function u(){e&&(n.deleteRule(e),e=void 0)}function d(t){u(),e=n.insertRule('*[data-name="'+t+'"] { background: rgba(230,215,0,0.12); }',n.cssRules.length)}document.documentElement.addEventListener("mouseover",function(t){var a=t.target.attributes["data-name"];a&&d(a.value)});document.documentElement.addEventListener("mouseout",u);})();</script>
<script>(function(){var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",o,p,r,g;document.addEventListener("selectionchange",E);window.addEventListener("resize",C);window.addEventListener("hashchange",x);window.addEventListener("load",x);function S(n){y(new URL(n.target.href))}function x(){y(window.location)}function y(n){var e=n.hash.match(/^#sel-([A-Za-z0-9-_]+)$/);if(!!e){g=e[1],r=k(g);var t=r.getBoundingClientRect(),d=Math.max(20,Math.floor((window.innerHeight-t.height)*.4));window.scrollTo(0,window.scrollY+t.y-d);var c=document.getSelection();c.empty(),c.addRange(r),C()}}function E(n){var e=document.getSelection();if(e.isCollapsed)o&&(o.parentNode.removeChild(o),o=null);else{var t=e.getRangeAt(0);(!r||t.compareBoundaryPoints(Range.START_TO_START,r)!==0||t.compareBoundaryPoints(Range.END_TO_END,r)!==0)&&(r=t,g=B(r),C())}}function C(){if(!!r){p||(p=document.getElementsByTagName("article")[0]),o||(o=document.createElement("a"),document.body.appendChild(o)),o.href="#sel-"+g,o.onclick=S,o.className=r.isOutdated?"outdated-selection-link":"selection-link",o.innerText=r.isOutdated?"!":"\u201F";var n=window.innerWidth<720,e=r.getBoundingClientRect();if(n)o.style.left=Math.floor(e.x+e.width/2+window.scrollX-13)+"px",o.style.top=Math.floor(e.bottom+window.scrollY+10)+"px";else{var t=p.getBoundingClientRect().x;o.style.left=Math.floor(t+window.scrollX-37)+"px",o.style.top=Math.floor(e.y+window.scrollY-3)+"px"}}}function B(n){var e="",t=N(n.startContainer),d=N(n.endContainer),c=M(t,d);return l(c),l(t.slice(c.length).concat(n.startOffset)),l(d.slice(c.length).concat(n.endOffset)),i(L(n.toString())),e;function i(a){do e+=R[a&31|(a>31?32:0)],a>>=5;while(a>0)}function l(a){i(a.length);for(var h=0;h<a.length;h++)i(a[h])}}function k(n){for(var e=new Array(64),t=0;t<64;t++)e[R.charCodeAt(t)]=t;var d=0,c=m(),i=m(),l=m(),a=w(),h=i.pop(),P=O(c.concat(i)),T=l.pop(),A=O(c.concat(l)),u=document.createRange();return u.setStart(P,h),u.setEnd(A,T),u.isOutdated=a!==void 0&&a!==L(u.toString()),u;function w(){for(var s=0,v=0;d<n.length;){var f=e[n.charCodeAt(d++)];if(s|=(f&31)<<v,v+=5,f<32)return s}}function m(){var s=w();if(s!=null){for(var v=new Array(s),f=0;f<s;f++)v[f]=w();return v}}}function N(n){for(var e=[];n!=document.body;){var t=n.parentNode;e.push(Array.prototype.indexOf.call(t.childNodes,n)),n=t}return e.reverse()}function O(n){for(var e=document.body,t=0;t<n.length&&e;t++)e=e.childNodes[n[t]];return e}function M(n,e){for(var t=0;t<n.length&&t<e.length&&n[t]===e[t];)t++;return n.slice(0,t)}function L(n){for(var e=2166136261,t=0;t<n.length;++t)e^=n.charCodeAt(t),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return(e>>15^e)&32767}})();</script>
<script>(function(){var a,i,t;document.addEventListener("pointerover",c);document.addEventListener("pointerleave",u);window.addEventListener("resize",d);var s={OL:1,UL:1};function c(r){var e=r.target;if(e.nodeType===Node.ELEMENT_NODE){for(;e&&!e.getAttribute("data-source");){if(s[e.nodeName])return;e=e.parentElement}e&&e!==a&&(a=e,d())}}function d(){if(!!a){i||(i=document.getElementsByTagName("article")[0]),t||(t=document.createElement("a"),t.className="source-link",t.target="_blank",t.innerHTML='<svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>',document.body.appendChild(t)),t.href=i.getAttribute("data-source-base")+a.getAttribute("data-source");var r=v(a),e=document.createRange();r.nodeType===Node.TEXT_NODE?e.setStart(r,0):e.selectNode(r);var n=e.getBoundingClientRect();e.detach();var o=n.y+n.height/2-9,l=i.getBoundingClientRect().x-95;t.style.left=Math.floor(window.scrollX+l)+"px",t.style.top=Math.floor(window.scrollY+o)+"px"}}function v(r){e:for(;r;){for(var e=r.childNodes,n=0;e&&n<e.length;n++){var o=e[n];if(o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE&&!/^\s*$/.test(o.data)){r=o;continue e}}return r}}function u(){t&&(t.parentNode.removeChild(t),t=null)}})();</script>
</head>
<body><article data-source-base="https://github.com/graphql/composite-schemas-spec/blame/main/">
<header>
<h1>GraphQL Composite Schemas Spec</h1>
<section id="intro">
<section id="sec-Introduction" class="subsec">
<h6 data-source="spec/Spec.md#L3"><a href="#sec-Introduction" title="link to this subsection">Introduction</a></h6>
<p data-source="spec/Spec.md#L5-L10">The GraphQL Composite Schemas Spec introduces a comprehensive specification for creating distributed GraphQL systems that seamlessly merges multiple GraphQL schemas. This specification describes the process of composing a federated GraphQL schema and outlines algorithms for executing GraphQL queries on the federated schema effectively by using query plans. This specification was originally created by ChilliCream and was transferred to the GraphQL foundation.</p>
<p data-source="spec/Spec.md#L12-L15">The GraphQL Foundation was formed in 2019 as a neutral focal point for organizations who support the GraphQL ecosystem, and the GraphQL Specification Project was established also in 2019 as the Joint Development Foundation Projects, LLC, GraphQL Series.</p>
<p data-source="spec/Spec.md#L17-L19">If your organization benefits from GraphQL, please consider becoming a member and helping us to sustain the activities that support the health of our neutral ecosystem.</p>
<p data-source="spec/Spec.md#L21-L24">The GraphQL Specification Project has evolved and may continue to evolve in future editions of this specification. Previous editions of the GraphQL specification can be found at permalinks that match their release tag. The latest working draft release can be found at https://spec.graphql.org/draft.</p>
</section>
<section id="sec-Copyright-notice" class="subsec">
<h6 data-source="spec/Spec.md#L26"><a href="#sec-Copyright-notice" title="link to this subsection">Copyright notice</a></h6>
<p data-source="spec/Spec.md#L28">Copyright © 2023-present, GraphQL contributors</p>
<p data-source="spec/Spec.md#L30-L40">THESE MATERIALS ARE PROVIDED &ldquo;AS IS&rdquo;. The parties expressly disclaim any warranties (express, implied, or otherwise), including implied warranties of merchantability, non-infringement, fitness for a particular purpose, or title, related to the materials. The entire risk as to implementing or otherwise using the materials is assumed by the implementer and user. IN NO EVENT WILL THE PARTIES BE LIABLE TO ANY OTHER PARTY FOR LOST PROFITS OR ANY FORM OF INDIRECT, SPECIAL, INCIDENTAL, OR CONSEQUENTIAL DAMAGES OF ANY CHARACTER FROM ANY CAUSES OF ACTION OF ANY KIND WITH RESPECT TO THIS DELIVERABLE OR ITS GOVERNING AGREEMENT, WHETHER BASED ON BREACH OF CONTRACT, TORT (INCLUDING NEGLIGENCE), OR OTHERWISE, AND WHETHER OR NOT THE OTHER MEMBER HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</section>
<section id="sec-Conformance" class="subsec">
<h6 data-source="spec/Spec.md#L42"><a href="#sec-Conformance" title="link to this subsection">Conformance</a></h6>
<p data-source="spec/Spec.md#L44-L47">A conforming implementation of the GraphQL Composite Schemas Spec must fulfill all normative requirements. Conformance requirements are described in this document via both descriptive assertions and key words with clearly defined meanings.</p>
<p data-source="spec/Spec.md#L49-L54">The key words &ldquo;MUST&rdquo;, &ldquo;MUST NOT&rdquo;, &ldquo;REQUIRED&rdquo;, &ldquo;SHALL&rdquo;, &ldquo;SHALL NOT&rdquo;, &ldquo;SHOULD&rdquo;, &ldquo;SHOULD NOT&rdquo;, &ldquo;RECOMMENDED&rdquo;, &ldquo;MAY&rdquo;, and &ldquo;OPTIONAL&rdquo; in the normative portions of this document are to be interpreted as described in <a href="https://tools.ietf.org/html/rfc2119">IETF RFC 2119</a>. These key words may appear in lowercase and still retain their meaning unless explicitly declared as non-normative.</p>
<p data-source="spec/Spec.md#L56-L58">A conforming implementation of the GraphQL Composite Schemas Spec may provide additional functionality, but must not where explicitly disallowed or would otherwise result in non-conformance.</p>
</section>
<section id="sec-Non-Normative-Portions" class="subsec">
<h6 data-source="spec/Spec.md#L60"><a href="#sec-Non-Normative-Portions" title="link to this subsection">Non-Normative Portions</a></h6>
<p data-source="spec/Spec.md#L62-L63">All contents of this document are normative except portions explicitly declared as non-normative.</p>
<p data-source="spec/Spec.md#L65-L68">Examples in this document are non-normative, and are presented to aid understanding of introduced concepts and the behavior of normative portions of the specification. Examples are either introduced explicitly in prose (e.g. &ldquo;for example&rdquo;) or are set apart in example or counter-example blocks, like this:</p>
<pre id="example-fed99" class="spec-example" data-source="spec/Spec.md#L70-L72"><a href="#example-fed99">Example № 1</a><code>This is an example of a non-normative example.
</code></pre>
<pre id="example-881bd" class="spec-counter-example" data-source="spec/Spec.md#L74-L76"><a href="#example-881bd">Counter Example № 2</a><code>This is an example of a non-normative counter-example.
</code></pre>
<p data-source="spec/Spec.md#L78-L81">Notes in this document are non-normative, and are presented to clarify intent, draw attention to potential edge-cases and pit-falls, and answer common questions that arise during implementation. Notes are either introduced explicitly in prose (e.g. &ldquo;Note: &ldquo;) or are set apart in a note block, like this:</p>
<div id="note-c0129" class="spec-note" data-source="spec/Spec.md#L83">
<a href="#note-c0129">Note</a>
This is an example of a non-normative note.</div>
</section>
</section>
<nav class="spec-toc">
<div class="title">Contents</div>
<ol>
<li><a href="#sec-Overview"><span class="spec-secid">1</span>Overview</a></li>
<li><a href="#sec-Source-Schema"><span class="spec-secid">2</span>Source Schema</a><ol>
<li><a href="#sec-Directives"><span class="spec-secid">2.1</span>Directives</a><ol>
<li><a href="#sec--lookup"><span class="spec-secid">2.1.1</span>@lookup</a></li>
<li><a href="#sec--internal"><span class="spec-secid">2.1.2</span>@internal</a></li>
<li><a href="#sec--is"><span class="spec-secid">2.1.3</span>@is</a></li>
<li><a href="#sec--require"><span class="spec-secid">2.1.4</span>@require</a></li>
<li><a href="#sec--key"><span class="spec-secid">2.1.5</span>@key</a></li>
<li><a href="#sec--shareable"><span class="spec-secid">2.1.6</span>@shareable</a></li>
<li><a href="#sec--provides"><span class="spec-secid">2.1.7</span>@provides</a></li>
<li><a href="#sec--external"><span class="spec-secid">2.1.8</span>@external</a></li>
<li><a href="#sec--override"><span class="spec-secid">2.1.9</span>@override</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Schema-Composition"><span class="spec-secid">3</span>Schema Composition</a><ol>
<li><a href="#sec-Validate-Source-Schemas"><span class="spec-secid">3.1</span>Validate Source Schemas</a></li>
<li><a href="#sec-Merge-Source-Schemas"><span class="spec-secid">3.2</span>Merge Source Schemas</a><ol>
<li><a href="#sec-Pre-Merge-Validation"><span class="spec-secid">3.2.1</span>Pre Merge Validation</a><ol>
<li><a href="#sec-Enum-Type-Default-Value-Uses-Inaccessible-Value"><span class="spec-secid">3.2.1.1</span>Enum Type Default Value Uses Inaccessible Value</a></li>
<li><a href="#sec-Output-Field-Types-Mergeable"><span class="spec-secid">3.2.1.2</span>Output Field Types Mergeable</a></li>
<li><a href="#sec-Disallowed-Inaccessible-Elements"><span class="spec-secid">3.2.1.3</span>Disallowed Inaccessible Elements</a></li>
<li><a href="#sec-External-Argument-Default-Mismatch"><span class="spec-secid">3.2.1.4</span>External Argument Default Mismatch</a></li>
<li><a href="#sec-External-Argument-Missing"><span class="spec-secid">3.2.1.5</span>External Argument Missing</a></li>
<li><a href="#sec-External-Argument-Type-Mismatch"><span class="spec-secid">3.2.1.6</span>External Argument Type Mismatch</a></li>
<li><a href="#sec-External-Missing-on-Base"><span class="spec-secid">3.2.1.7</span>External Missing on Base</a></li>
<li><a href="#sec-External-Type-Mismatch"><span class="spec-secid">3.2.1.8</span>External Type Mismatch</a></li>
<li><a href="#sec-External-Unused"><span class="spec-secid">3.2.1.9</span>External Unused</a></li>
<li><a href="#sec-Root-Mutation-Used"><span class="spec-secid">3.2.1.10</span>Root Mutation Used</a></li>
<li><a href="#sec-Root-Query-Used"><span class="spec-secid">3.2.1.11</span>Root Query Used</a></li>
<li><a href="#sec-Root-Subscription-Used"><span class="spec-secid">3.2.1.12</span>Root Subscription Used</a></li>
<li><a href="#sec-Key-Fields-Select-Invalid-Type"><span class="spec-secid">3.2.1.13</span>Key Fields Select Invalid Type</a></li>
<li><a href="#sec-Key-Directive-in-Fields-Argument"><span class="spec-secid">3.2.1.14</span>Key Directive in Fields Argument</a></li>
<li><a href="#sec-Key-Fields-Has-Arguments"><span class="spec-secid">3.2.1.15</span>Key Fields Has Arguments</a></li>
<li><a href="#sec-Key-Invalid-Syntax"><span class="spec-secid">3.2.1.16</span>Key Invalid Syntax</a></li>
<li><a href="#sec-Key-Invalid-Fields"><span class="spec-secid">3.2.1.17</span>Key Invalid Fields</a></li>
<li><a href="#sec-Provides-Directive-in-Fields-Argument"><span class="spec-secid">3.2.1.18</span>Provides Directive in Fields Argument</a></li>
<li><a href="#sec-Provides-Fields-Has-Arguments"><span class="spec-secid">3.2.1.19</span>Provides Fields Has Arguments</a></li>
<li><a href="#sec-Provides-Fields-Missing-External"><span class="spec-secid">3.2.1.20</span>Provides Fields Missing External</a></li>
<li><a href="#sec-Query-Root-Type-Inaccessible"><span class="spec-secid">3.2.1.21</span>Query Root Type Inaccessible</a></li>
<li><a href="#sec-Require-Directive-in-Fields-Argument"><span class="spec-secid">3.2.1.22</span>Require Directive in Fields Argument</a></li>
<li><a href="#sec-Require-Invalid-Fields-Type"><span class="spec-secid">3.2.1.23</span>Require Invalid Fields Type</a></li>
<li><a href="#sec-Require-Invalid-Syntax"><span class="spec-secid">3.2.1.24</span>Require Invalid Syntax</a></li>
<li><a href="#sec-Type-Definition-Invalid"><span class="spec-secid">3.2.1.25</span>Type Definition Invalid</a></li>
<li><a href="#sec-Type-Kind-Mismatch"><span class="spec-secid">3.2.1.26</span>Type Kind Mismatch</a></li>
<li><a href="#sec-Provides-Invalid-Syntax"><span class="spec-secid">3.2.1.27</span>Provides Invalid Syntax</a></li>
<li><a href="#sec-Invalid-GraphQL"><span class="spec-secid">3.2.1.28</span>Invalid GraphQL</a></li>
<li><a href="#sec-Override-Collision-with-Another-Directive"><span class="spec-secid">3.2.1.29</span>Override Collision with Another Directive</a></li>
<li><a href="#sec-Override-from-Self-Error"><span class="spec-secid">3.2.1.30</span>Override from Self Error</a></li>
<li><a href="#sec-Override-on-Interface"><span class="spec-secid">3.2.1.31</span>Override on Interface</a></li>
<li><a href="#sec-Override-Source-Has-Override"><span class="spec-secid">3.2.1.32</span>Override Source Has Override</a></li>
<li><a href="#sec-External-Collision-with-Another-Directive"><span class="spec-secid">3.2.1.33</span>External Collision with Another Directive</a></li>
<li><a href="#sec-Key-Invalid-Fields-Type"><span class="spec-secid">3.2.1.34</span>Key Invalid Fields Type</a></li>
<li><a href="#sec-Provides-Invalid-Fields-Type"><span class="spec-secid">3.2.1.35</span>Provides Invalid Fields Type</a></li>
<li><a href="#sec-Provides-on-Non-Composite-Field"><span class="spec-secid">3.2.1.36</span>Provides on Non-Composite Field</a></li>
<li><a href="#sec-External-on-Interface"><span class="spec-secid">3.2.1.37</span>External on Interface</a></li>
</ol>
</li>
<li><a href="#sec-Merge"><span class="spec-secid">3.2.2</span>Merge</a></li>
<li><a href="#sec-Post-Merge-Validation"><span class="spec-secid">3.2.3</span>Post Merge Validation</a><ol>
<li><a href="#sec-Empty-Merged-Object-Type"><span class="spec-secid">3.2.3.1</span>Empty Merged Object Type</a></li>
<li><a href="#sec-No-Queries"><span class="spec-secid">3.2.3.2</span>No Queries</a></li>
<li><a href="#sec-Implemented-by-Inaccessible"><span class="spec-secid">3.2.3.3</span>Implemented by Inaccessible</a></li>
<li><a href="#sec-Interface-Field-No-Implementation"><span class="spec-secid">3.2.3.4</span>Interface Field No Implementation</a></li>
<li><a href="#sec-Invalid-Field-Sharing"><span class="spec-secid">3.2.3.5</span>Invalid Field Sharing</a></li>
<li><a href="#sec-Invalid-Shareable-Usage"><span class="spec-secid">3.2.3.6</span>Invalid Shareable Usage</a></li>
<li><a href="#sec-Only-Inaccessible-Children"><span class="spec-secid">3.2.3.7</span>Only Inaccessible Children</a></li>
<li><a href="#sec-Require-Invalid-Fields"><span class="spec-secid">3.2.3.8</span>Require Invalid Fields</a></li>
<li><a href="#sec-Provides-Invalid-Fields"><span class="spec-secid">3.2.3.9</span>Provides Invalid Fields</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#sec-Validate-Satisfiability"><span class="spec-secid">3.3</span>Validate Satisfiability</a></li>
</ol>
</li>
<li><a href="#sec-Executor"><span class="spec-secid">4</span>Executor</a><ol>
<li><a href="#sec-Configuration"><span class="spec-secid">4.1</span>Configuration</a></li>
</ol>
</li>
<li><a href="#sec-Shared-Types"><span class="spec-secid">5</span>Shared Types</a><ol>
<li><a href="#sec-Shared-Types.Name"><span class="spec-secid">5.1</span>Name</a></li>
<li><a href="#sec-FieldSelection"><span class="spec-secid">5.2</span>FieldSelection</a></li>
</ol>
</li>
<li><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar"><span class="spec-secid">6</span>Appendix A: Specification of FieldSelectionMap Scalar</a><ol>
<li><a href="#sec-Introduction"><span class="spec-secid">6.1</span>Introduction</a><ol>
<li><a href="#sec-Scope"><span class="spec-secid">6.1.1</span>Scope</a></li>
</ol>
</li>
<li><a href="#sec-Language"><span class="spec-secid">6.2</span>Language</a><ol>
<li><a href="#sec-Language.Name"><span class="spec-secid">6.2.1</span>Name</a></li>
<li><a href="#sec-Path"><span class="spec-secid">6.2.2</span>Path</a></li>
<li><a href="#sec-SelectedValue"><span class="spec-secid">6.2.3</span>SelectedValue</a></li>
<li><a href="#sec-SelectedObjectValue"><span class="spec-secid">6.2.4</span>SelectedObjectValue</a></li>
<li><a href="#sec-SelectedListValue"><span class="spec-secid">6.2.5</span>SelectedListValue</a></li>
</ol>
</li>
<li><a href="#sec-Validation"><span class="spec-secid">6.3</span>Validation</a><ol>
<li><a href="#sec-Path-Field-Selections"><span class="spec-secid">6.3.1</span>Path Field Selections</a></li>
<li><a href="#sec-Path-Terminal-Field-Selections"><span class="spec-secid">6.3.2</span>Path Terminal Field Selections</a></li>
<li><a href="#sec-Type-Reference-Is-Possible"><span class="spec-secid">6.3.3</span>Type Reference Is Possible</a></li>
<li><a href="#sec-Values-of-Correct-Type"><span class="spec-secid">6.3.4</span>Values of Correct Type</a></li>
<li><a href="#sec-Selected-Object-Field-Names"><span class="spec-secid">6.3.5</span>Selected Object Field Names</a></li>
<li><a href="#sec-Selected-Object-Field-Uniqueness"><span class="spec-secid">6.3.6</span>Selected Object Field Uniqueness</a></li>
<li><a href="#sec-Required-Selected-Object-Fields"><span class="spec-secid">6.3.7</span>Required Selected Object Fields</a></li>
</ol>
</li>
</ol>
</li>
<li><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</nav>
</header>
<section id="sec-Overview" secid="1">
<h1 data-source="spec/Section%201%20--%20Overview.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Overview">1</a></span>Overview</h1>
<p data-source="spec/Section%201%20--%20Overview.md#L3-L5">The GraphQL Composite Schemas specification describes how to construct a single unified GraphQL schema, the <em>composite schema</em>, from multiple GraphQL schemas, each termed a <em>source schema</em>.</p>
<p data-source="spec/Section%201%20--%20Overview.md#L7-L10">The <em>composite schema</em> presents itself as a regular <span class="spec-ref"><a href="https://spec.graphql.org/draft/#sec-Schema" data-name="graphql-schema" target="_blank">GraphQL schema</a></span>; the implementation details and complexities of the underlying distributed systems are not visible to clients, all observable behavior is the same as described by the <span class="spec-ref"><a href="https://spec.graphql.org/draft/" data-name="graphql-specification" target="_blank">GraphQL specification</a></span>.</p>
<p data-source="spec/Section%201%20--%20Overview.md#L12">The GraphQL Composite Schemas specification has a number of design principles:</p>
<ul>
<li data-source="spec/Section%201%20--%20Overview.md#L14-L21"><strong>Composable</strong>: Rather than defining each <em>source schema</em> in isolation and reshaping it to fit the <em>composite schema</em> later, this specification encourages developers to design the source schemas as part of a larger whole from the start. Each source schema defines the types and fields it is responsible for serving within the context of the larger schema, referencing and extending that which is provided by other source schemas. The GraphQL Composite Schemas specification does not describe how to combine arbitrary schemas.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L23-L29"><strong>Collaborative</strong>: The GraphQL Composite Schemas specification is explicitly designed around team collaboration. By building on a principled composition model, it ensures that conflicts and inconsistencies are surfaced early and can be resolved before deployment. This allows many teams to contribute to a single schema without the danger of breaking it. The GraphQL Composite Schemas specification facilitates the coordinated effort of combining collaboratively designed source schemas into a single coherent composite schema.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L31-L37"><strong>Evolvable</strong>: A <em>composite schema</em> enables offering an integrated, product-centric API interface to clients; source schema boundaries are an implementation detail, a detail that is not exposed to clients. As each underlying <span class="spec-ref"><a href="https://spec.graphql.org/draft/#sec-Overview" data-name="graphql-service" target="_blank">GraphQL service</a></span> evolves, the same functionality may be provided from a different combination of services. This specification helps to ensure that changes to underlying services can be made whilst maintaining support for existing requests from all clients to the composite schema interface.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L39-L42"><strong>Explicitness</strong>: To make the composition process easier to understand and to avoid ambiguities that can lead to confusing failures as the system grows, the GraphQL Composite Schemas specification prefers to be explicit about intentions and minimize reliance on inference and convention.</li>
</ul>
<p data-source="spec/Section%201%20--%20Overview.md#L44-L46">To enable greater interoperability between different implementations of tooling and gateways, this specification focuses on two core components: schema composition and distributed execution.</p>
<ul>
<li data-source="spec/Section%201%20--%20Overview.md#L48-L53"><strong>Schema Composition</strong>: Schema composition describes the process of merging multiple <em>source schema</em> into a single GraphQL schema, the <em>composite schema</em>. During this process, an intermediary schema, the <em>composite execution schema</em>, is generated. This composite execution schema is annotated with directives to describe execution, and may have additional internal fields or arguments that won&rsquo;t be exposed in the client-facing composite schema.</li>
<li data-source="spec/Section%201%20--%20Overview.md#L55-L58"><strong>Distributed Execution</strong>: The <em>distributed GraphQL executor</em> specifies the core execution behavior and algorithms that enable fulfillment of a <span class="spec-ref"><a href="https://spec.graphql.org/draft/#request" data-name="graphql-request" target="_blank">GraphQL request</a></span> performed against the <em>composite schema</em>. </li>
</ul>
</section>
<section id="sec-Source-Schema" secid="2">
<h1 data-source="spec/Section%202%20--%20Source%20Schema.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Source-Schema">2</a></span>Source Schema</h1>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L3-L6">A <em>source schema</em> is a GraphQL schema that is part of a larger <em>composite schema</em>. Source schemas use directives to express intent and requirements for the composition process. In the following chapters, we will describe the directives that are used to annotate a source schema.</p>
<section id="sec-Directives" secid="2.1">
<h2 data-source="spec/Section%202%20--%20Source%20Schema.md#L8"><span class="spec-secid" title="link to this section"><a href="#sec-Directives">2.1</a></span>Directives</h2>
<section id="sec--lookup" secid="2.1.1">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L10"><span class="spec-secid" title="link to this section"><a href="#sec--lookup">2.1.1</a></span>@lookup</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L12-L14"><code><span class="token keyword">directive</span> <span class="token directive function">@lookup</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L16-L18">The <code>@lookup</code> directive is used within a <em>source schema</em> to specify output fields that can be used by the <em>distributed GraphQL executor</em> to resolve an entity by a stable key.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L20-L21">The stable key is defined by the arguments of the field. Each argument must match a field on the return type of the lookup field.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L23-L24">Source schemas can provide multiple lookup fields for the same entity that resolve the entity by different keys.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L26-L28">In this example, the source schema specifies that the <code>Product</code> entity can be resolved with the <code>productById</code> field or the <code>productByName</code> field. Both lookup fields are able to resolve the <code>Product</code> entity but do so with different keys.</p>
<pre id="example-b8759" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L30-L41"><a href="#example-b8759">Example № 3</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">version</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token comment"># NOT a lookup field.</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
  <span class="token attr-name">productByName</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L43-L44">The arguments of a lookup field must correspond to fields specified as an entity key with the <code>@key</code> directive on the entity type.</p>
<pre id="example-5394c" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L46-L54"><a href="#example-5394c">Example № 4</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">node</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Node</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L56-L59">Lookup fields may return object, interface, or union types. In case a lookup field returns an abstract type (interface type or union type), all possible object types are considered entities and must have keys that correspond with the field&rsquo;s argument signature.</p>
<pre id="example-a4069" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L61-L83"><a href="#example-a4069">Example № 5</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token property">Electronics</span> <span class="token operator">|</span> <span class="token property">Clothing</span>

<span class="token keyword">type</span> <span class="token class-name">Electronics</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id categoryId"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">brand</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id categoryId"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L85-L86">The following example shows an invalid lookup field as the <code>Clothing</code> type does not declare a key that corresponds with the lookup field&rsquo;s argument signature.</p>
<pre id="example-2de20" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L88-L112"><a href="#example-2de20">Counter Example № 6</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">,</span> <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Product</span> <span class="token operator">=</span> <span class="token property">Electronics</span> <span class="token operator">|</span> <span class="token property">Clothing</span>

<span class="token keyword">type</span> <span class="token class-name">Electronics</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id categoryId"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">brand</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>

<span class="token comment"># Clothing does not have a key that corresponds</span>
<span class="token comment"># with the lookup field's argument signature.</span>
<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">categoryId</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L114-L115">If the lookup returns an interface, the interface must also be annotated with a <code>@key</code> directive and declare its keys.</p>
<pre id="example-4521f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L117-L121"><a href="#example-4521f">Example № 7</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L123-L125">Lookup fields must be accessible from the Query type. If not directly on the Query type, they must be accessible via fields that do not require arguments, starting from the Query root type.</p>
<pre id="example-c623c" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L127-L139"><a href="#example-c623c">Example № 8</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lookups</span><span class="token punctuation">:</span> <span class="token class-name">Lookups</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Lookups</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L141-L145">Lookups can also be nested within other lookups and allow resolving nested entities that are part of an aggregate. In the following example the <code>Product</code> can be resolved by its ID but also the <code>ProductPrice</code> can be resolved by passing in a composite key containing the product ID and region name of the product price.</p>
<pre id="example-1c46f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L147-L162"><a href="#example-1c46f">Example № 9</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">(</span><span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"regionName product { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L164-L165">Nested lookups must immediately follow the parent lookup and cannot be nested with fields in between.</p>
<pre id="example-17ffb" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L167-L186"><a href="#example-17ffb">Counter Example № 10</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">ProductDetails</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">(</span><span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductPrice</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"regionName product { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">regionName</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--internal" secid="2.1.2">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L188"><span class="spec-secid" title="link to this section"><a href="#sec--internal">2.1.2</a></span>@internal</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L190-L192"><code><span class="token keyword">directive</span> <span class="token directive function">@internal</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L194-L197">The <code>@internal</code> directive is used to mark lookup fields as internal. Internal lookup fields are not used as entry points in the composite schema and can only be used by the <em>distributed GraphQL executor</em> to resolve additional data for an entity.</p>
<pre id="example-e6333" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L199-L207"><a href="#example-e6333">Example № 11</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token comment"># lookup field and possible entry point</span>
  <span class="token attr-name">reviewById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Review</span> <span class="token directive function">@lookup</span>

  <span class="token comment"># internal lookup field</span>
  <span class="token attr-name">productById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span> <span class="token directive function">@internal</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L209-L212">The <code>@internal</code> directive provides control over which source schemas are used to resolve entities and which source schemas merely contribute data to entities. Further, using <code>@internal</code> allows hiding &ldquo;technical&rdquo; lookup fields that are not meant for the client-facing composite schema.</p>
</section>
<section id="sec--is" secid="2.1.3">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L214"><span class="spec-secid" title="link to this section"><a href="#sec--is">2.1.3</a></span>@is</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L216-L218"><code><span class="token keyword">directive</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L220-L224">The <code>@is</code> directive is utilized on lookup fields to describe how the arguments can be mapped from the entity type that the lookup field resolves. The mapping establishes semantic equivalence between disparate type system members across source schemas and is used in cases where the argument does not 1:1 align with a field on the entity type.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L226-L228">In the following example, the directive specifies that the <code>id</code> argument on the field <code>Query.personById</code> and the field <code>Person.id</code> on the return type of the field are semantically the same.</p>
<div id="note-ecb66" class="spec-note" data-source="spec/Section%202%20--%20Source%20Schema.md#L230-L231">
<a href="#note-ecb66">Note</a>
In this case the <code>@is</code> directive could also be omitted as the argument and field names match.</div>
<pre id="example-68bd0" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L233-L237"><a href="#example-68bd0">Example № 12</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L239">The <code>@is</code> directive also allows referring to nested fields relative to <code>Person</code>.</p>
<pre id="example-ed8f8" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L241-L245"><a href="#example-ed8f8">Example № 13</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personByAddressId</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address.id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L247">The <code>@is</code> directive is not limited to a single argument.</p>
<pre id="example-11615" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L249-L256"><a href="#example-11615">Example № 14</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">personByAddressId</span><span class="token punctuation">(</span>
    <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address.id"</span><span class="token punctuation">)</span>
    <span class="token attr-name">kind</span><span class="token punctuation">:</span> <span class="token class-name">PersonKind</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"kind"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L258-L259">The <code>@is</code> directive can also be used in combination with <code>@oneOf</code> to specify lookup fields that can resolve entities by different keys.</p>
<pre id="example-519a7" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L261-L274"><a href="#example-519a7">Example № 15</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">person</span><span class="token punctuation">(</span>
    <span class="token attr-name">by</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PersonByInput</span>
      <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id } | { addressId: address.id } | { name }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Person</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PersonByInput</span> <span class="token directive function">@oneOf</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">addressId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--is.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L276"><a href="#sec--is.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L278"><code>field</code>: Represents a selection path map syntax.</li>
</ul>
</section>
</section>
<section id="sec--require" secid="2.1.4">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L280"><span class="spec-secid" title="link to this section"><a href="#sec--require">2.1.4</a></span>@require</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L282-L284"><code><span class="token keyword">directive</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L286-L289">The <code>@require</code> directive is used to express data requirements with other source schemas. Arguments annotated with the <code>@require</code> directive are removed from the <em>composite schema</em> and the value for these will be resolved by the <em>distributed executor</em>.</p>
<pre id="example-3d648" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L291-L300"><a href="#example-3d648">Example № 16</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.size"</span><span class="token punctuation">)</span>
    <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.weight"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L302">The above example would translate to the following in the <em>composite schema</em>.</p>
<pre id="example-20429" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L304-L309"><a href="#example-20429">Example № 17</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">delivery</span><span class="token punctuation">(</span><span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L311-L314">This can also be done by using input types. The selection path map specifies which data is required and needs to be resolved from other source schemas. If the input type is only used to express requirements it is removed from the composite schema.</p>
<pre id="example-88e3b" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L316-L324"><a href="#example-88e3b">Example № 18</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">ProductDimensionInput</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ size: dimension.size, weight: dimension.weight }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L326-L327">If the input types do not match the output type structure the selection map syntax can be used to specify how requirements translate to the input object.</p>
<pre id="example-41596" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L329-L348"><a href="#example-41596">Example № 19</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">ProductDimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ productSize: dimension.size, productWeight: dimension.weight }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDimension</span> <span class="token punctuation">{</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">ProductDimensionInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productSize</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">productWeight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--require.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L350"><a href="#sec--require.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L352"><code>field</code>: Represents a selection path map syntax.</li>
</ul>
</section>
</section>
<section id="sec--key" secid="2.1.5">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L354"><span class="spec-secid" title="link to this section"><a href="#sec--key">2.1.5</a></span>@key</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L356-L358"><code><span class="token keyword">directive</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">SelectionSet</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">INTERFACE</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L360-L363">The @key directive is used to designate an entity&rsquo;s unique key, which identifies how to uniquely reference an instance of an entity across different source schemas. It allows a source schema to indicate which fields form a unique identifier, or <strong>key</strong>, for an entity.</p>
<pre id="example-ad2f9" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L365-L372"><a href="#example-ad2f9">Example № 20</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L374-L376">Each occurrence of the @key directive on an object or interface type specifies one distinct unique key for that entity, which enables a gateway to perform lookups and resolve instances of the entity based on that key.</p>
<pre id="example-12197" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L378-L385"><a href="#example-12197">Example № 21</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"key"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L387-L389">While multiple keys define separate ways to reference the same entity based on different sets of fields, a composite key allows for uniquely identifying an entity by using a combination of multiple fields.</p>
<pre id="example-4e25f" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L391-L398"><a href="#example-4e25f">Example № 22</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L400-L403">The directive is applicable to both OBJECT and INTERFACE types. This allows entities that implement an interface to inherit the key(s) defined at the interface level, ensuring consistent identification across different implementations of that interface.</p>
<section id="sec--key.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L405"><a href="#sec--key.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L407"><code>fields</code>: Represents a selection set syntax.</li>
</ul>
</section>
</section>
<section id="sec--shareable" secid="2.1.6">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L409"><span class="spec-secid" title="link to this section"><a href="#sec--shareable">2.1.6</a></span>@shareable</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L411-L413"><code><span class="token keyword">directive</span> <span class="token directive function">@shareable</span> <span class="token keyword">repeatable</span> <span class="token keyword">on</span> <span class="token constant">OBJECT</span> <span class="token operator">|</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L415-L417">By default, only a single source schema is allowed to contribute a particular field to an object type. This prevents source schemas from inadvertently defining similarly named fields that are semantically not the same.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L419-L421">Fields have to be explicitly marked as <code>@shareable</code> to allow multiple source schemas to define it, and this ensures that the step of allowing a field to be served from multiple source schemas is an explicit, coordinated decision.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L423-L425">If multiple source schemas define the same field, these are assumed to be semantically equivalent, and the executor is free to choose between them as it sees fit.</p>
<div id="note-1634f" class="spec-note" data-source="spec/Section%202%20--%20Source%20Schema.md#L427">
<a href="#note-1634f">Note</a>
Key fields are always considered sharable.</div>
</section>
<section id="sec--provides" secid="2.1.7">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L429"><span class="spec-secid" title="link to this section"><a href="#sec--provides">2.1.7</a></span>@provides</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L431-L433"><code><span class="token keyword">directive</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token class-name">SelectionSet</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L435-L437">The <code>@provides</code> directive indicates that a field can provide certain subfields of its return type from the same source schema, without requiring an additional resolution step elsewhere.</p>
<pre id="example-ce7f2" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L439-L456"><a href="#example-ce7f2">Example № 23</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">body</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"email"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">reviews</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Review</span><span class="token operator">!</span><span class="token punctuation">]</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L458-L461">When a field annotated with <code>@provides</code> returns an object, interface or union type that may also be contributed by other source schemas, this directive declares which of that type&rsquo;s subfields the current source schema can resolve directly.</p>
<pre id="example-a9913" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L463-L473"><a href="#example-a9913">Example № 24</a><code><span class="token punctuation">{</span>
  <span class="token object">reviews</span> <span class="token punctuation">{</span>
    <span class="token property">body</span>
    <span class="token object">author</span> <span class="token punctuation">{</span>
      <span class="token property">name</span>
      <span class="token property">email</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L475-L477">If a client tries to fetch the same subfield (<code>User.email</code>) through a different path (e.g., users query field), the source schema will not be able to resolve it and will throw an error.</p>
<pre id="example-79352" class="spec-counter-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L479-L487"><a href="#example-79352">Counter Example № 25</a><code><span class="token punctuation">{</span>
  <span class="token object">users</span> <span class="token punctuation">{</span>
    <span class="token comment"># The source schema does NOT provide email in this context,</span>
    <span class="token comment"># and this field will fail at runtime.</span>
    <span class="token property">email</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L489">The <code>@provides</code> directive may reference multiple fields or nested fields:</p>
<pre id="example-ec820" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L491-L507"><a href="#example-ec820">Example № 26</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku variation { size }"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku variation { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">variation</span><span class="token punctuation">:</span> <span class="token class-name">ProductVariation</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductVariation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L509-L511">When a field annotated with the provides directive has an abstract return type the fields syntax can leverage inline fragments to express fields that can be resolved locally.</p>
<pre id="example-8757d" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L513-L546"><a href="#example-8757d">Example № 27</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token comment"># The @provides directive tells us that this source schema can supply different</span>
  <span class="token comment"># fields depending on which concrete type of Product is returned.</span>
  <span class="token attr-name">product</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
    <span class="token directive function">@provides</span><span class="token punctuation">(</span>
      <span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"""
      ... on Book { author }
      ... on Clothing { size }
      """</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Clothing</span> <span class="token keyword">implements</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">reviews</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Review</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--provides.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L548"><a href="#sec--provides.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L550-L551"><code>fields</code>: Represents a selection set syntax describing the subfields of the returned type that can be provided by the current source schema.</li>
</ul>
</section>
</section>
<section id="sec--external" secid="2.1.8">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L553"><span class="spec-secid" title="link to this section"><a href="#sec--external">2.1.8</a></span>@external</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L555-L557"><code><span class="token keyword">directive</span> <span class="token directive function">@external</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L559-L561">The @external directive indicates that a field is recognized by the current source schema but is not directly contributed (resolved) by it. Instead, this schema references the field for specific composition purposes.</p>
<section id="sec--external.Entity-Keys" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L563"><a href="#sec--external.Entity-Keys" title="link to this subsection">Entity Keys</a></h6>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L565-L566">When combined with one or more <code>@key</code> directives, an external field can serve as an entity identifier (or part of a composite identifier).</p>
<pre id="example-15e0b" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L568-L579"><a href="#example-15e0b">Example № 28</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productBySku</span><span class="token punctuation">(</span><span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
  <span class="token attr-name">productByUpc</span><span class="token punctuation">(</span><span class="token attr-name">upc</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"upc"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">upc</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec--external.Field-Resolution" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L581"><a href="#sec--external.Field-Resolution" title="link to this subsection">Field Resolution</a></h6>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L583-L584">When another field in the same source schema uses <code>@provides</code> to declare that it can resolve certain external fields in a single data-fetching step.</p>
<pre id="example-1cb9a" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L586-L597"><a href="#example-1cb9a">Example № 29</a><code><span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">text</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"email"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L599-L603">When a field is marked <code>@external</code>, the composition process understands that the field is provided by another source schema. The current source schema references it only for entity identification (via <code>@key</code>) or for providing a field through <code>@provides</code>. If no such usage exists, the presence of an <code>@external</code> field produces a composition error.</p>
</section>
</section>
<section id="sec--override" secid="2.1.9">
<h3 data-source="spec/Section%202%20--%20Source%20Schema.md#L605"><span class="spec-secid" title="link to this section"><a href="#sec--override">2.1.9</a></span>@override</h3>
<pre data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L607-L609"><code><span class="token keyword">directive</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L611-L616">The <code>@override</code> directive is used to migrate a field from one source schema to another. When a field in the local schema is annotated with <code>@override(from: "Catalog")</code>, it signals that the local schema overrides the field previously contributed by the <code>Catalog</code> source schema. As a result, the composite schema will source this field from the local schema, rather than from the original source schema.</p>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L618-L620">The following example shows how a field can be migrated from the <code>Catalog</code> schema to the new <code>Payments</code> schema. By using <code>@override</code>, a field can be moved to a new schema without requiring any change to the original <code>Catalog</code> schema.</p>
<pre id="example-e7d46" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L622-L636"><a href="#example-e7d46">Example № 30</a><code><span class="token comment"># The original "Catalog" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Payments" schema:</span>
<span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Catalog"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L638">Fields that are annotated can themselves be migrated.</p>
<pre id="example-0c09a" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L640-L661"><a href="#example-0c09a">Example № 31</a><code><span class="token comment"># The original "Catalog" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Payments" schema:</span>
<span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Catalog"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Pricing" schema:</span>
<span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Payments"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%202%20--%20Source%20Schema.md#L663">If the composition detects cyclic overrides it must throw a composition error.</p>
<pre id="example-26490" class="spec-example" data-language="graphql" data-source="spec/Section%202%20--%20Source%20Schema.md#L665-L679"><a href="#example-26490">Example № 32</a><code><span class="token comment"># The original "Catalog" schema:</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Pricing"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># The new "Payments" schema:</span>
<span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"Catalog"</span><span class="token punctuation">)</span>
  <span class="token attr-name">tax</span><span class="token punctuation">:</span> <span class="token scalar">Float</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec--override.Arguments-" class="subsec">
<h6 data-source="spec/Section%202%20--%20Source%20Schema.md#L681"><a href="#sec--override.Arguments-" title="link to this subsection">Arguments:</a></h6>
<ul>
<li data-source="spec/Section%202%20--%20Source%20Schema.md#L683-L684"><code>from</code>: The name of the source schema that originally provided this field. </li>
</ul>
</section>
</section>
</section>
</section>
<section id="sec-Schema-Composition" secid="3">
<h1 data-source="spec/Section%204%20--%20Composition.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Schema-Composition">3</a></span>Schema Composition</h1>
<p data-source="spec/Section%204%20--%20Composition.md#L3-L9">The schema composition describes the process of merging multiple source schemas into a single GraphQL schema, known as the <em>composite execution schema</em>, which is a valid GraphQL schema annotated with execution directives. This composite execution schema is the output of the schema composition process. The schema composition process is divided into three main steps: <strong>Validate Source Schemas</strong>, <strong>Merge Source Schemas</strong>, and <strong>Validate Satisfiability</strong>, which are run in sequence to produce the composite execution schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L11-L17">Although this chapter describes schema composition as a sequence of phases, an implementation is not required to implement these steps exactly as presented. Implementations may interleave or reorder the specified checks, or introduce additional processing stages, provided that the final composed schema complies with the requirements set forth in this specification. The composition rules and resulting schema must remain consistent, but the specific structure or timing of each validation step is left to the implementer.</p>
<section id="sec-Validate-Source-Schemas" secid="3.1">
<h2 data-source="spec/Section%204%20--%20Composition.md#L19"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Source-Schemas">3.1</a></span>Validate Source Schemas</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L21-L25">In this phase, each source schema is validated in isolation to ensure that it satisfies the GraphQL specification and composition requirements. No cross-schema references are considered here. Each source schema must have valid syntax, well-formed type definitions, and correct directive usage. If any source schema fails these checks, composition does not proceed.</p>
</section>
<section id="sec-Merge-Source-Schemas" secid="3.2">
<h2 data-source="spec/Section%204%20--%20Composition.md#L27"><span class="spec-secid" title="link to this section"><a href="#sec-Merge-Source-Schemas">3.2</a></span>Merge Source Schemas</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L29-L31">Once all source schemas have passed individual validation, they are merged into a single composite schema. This merging process is subdivided into three stages: pre-merge validation, merge, and post-merge validation.</p>
<section id="sec-Pre-Merge-Validation" secid="3.2.1">
<h3 data-source="spec/Section%204%20--%20Composition.md#L33"><span class="spec-secid" title="link to this section"><a href="#sec-Pre-Merge-Validation">3.2.1</a></span>Pre Merge Validation</h3>
<p data-source="spec/Section%204%20--%20Composition.md#L35-L39">Prior to merging the schemas, additional validations are performed that require visibility into all source schemas but treat them as separate entities. This step detects conflicts such as incompatible fields or default argument values that would render the merged schema unusable. Detecting such conflicts early prevents errors that would otherwise be discovered during the merge process.</p>
<section id="sec-Enum-Type-Default-Value-Uses-Inaccessible-Value" secid="3.2.1.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L41"><span class="spec-secid" title="link to this section"><a href="#sec-Enum-Type-Default-Value-Uses-Inaccessible-Value">3.2.1.1</a></span>Enum Type Default Value Uses Inaccessible Value</h4>
<section id="sec-Enum-Type-Default-Value-Uses-Inaccessible-Value.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L43"><a href="#sec-Enum-Type-Default-Value-Uses-Inaccessible-Value.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L45"><code>ENUM_TYPE_DEFAULT_VALUE_INACCESSIBLE</code></p>
</section>
<section id="sec-Enum-Type-Default-Value-Uses-Inaccessible-Value.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L47"><a href="#sec-Enum-Type-Default-Value-Uses-Inaccessible-Value.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L49"><span class="spec-call"><a href="#ValidateArgumentDefaultValues()" data-name="ValidateArgumentDefaultValues">ValidateArgumentDefaultValues</a>()</span> must be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L50"><span class="spec-call"><a href="#ValidateInputFieldDefaultValues()" data-name="ValidateInputFieldDefaultValues">ValidateInputFieldDefaultValues</a>()</span> must be true.</li>
</ul>
<div class="spec-algo" id="ValidateArgumentDefaultValues()" data-source="spec/Section%204%20--%20Composition.md#L52-L61">
<span class="spec-call"><a href="#ValidateArgumentDefaultValues()" data-name="ValidateArgumentDefaultValues">ValidateArgumentDefaultValues</a>()</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L54-L55">Let <var data-name="arguments">arguments</var> be all arguments of fields and directives across all source schemas</li>
<li data-source="spec/Section%204%20--%20Composition.md#L56-L60">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L57-L60">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="argument">argument</var>)</span> is true and has a default value:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L58">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="argument">argument</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L59-L60">If not <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="defaultValue">defaultValue</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L60">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L61">return true</li>
</ol>
</div>
<div class="spec-algo" id="ValidateInputFieldDefaultValues()" data-source="spec/Section%204%20--%20Composition.md#L63-L71">
<span class="spec-call"><a href="#ValidateInputFieldDefaultValues()" data-name="ValidateInputFieldDefaultValues">ValidateInputFieldDefaultValues</a>()</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L65">Let <var data-name="inputFields">inputFields</var> be all input fields across all source schemas</li>
<li data-source="spec/Section%204%20--%20Composition.md#L66-L70">For each <var data-name="inputField">inputField</var> in <var data-name="inputFields">inputFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L67-L70">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="inputField">inputField</var>)</span> is true and <var data-name="inputField">inputField</var> has a default value:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L68">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="inputField">inputField</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L69-L70">If <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="defaultValue">defaultValue</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L70">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L71">return true</li>
</ol>
</div>
<div class="spec-algo" id="ValidateDefaultValue()" data-source="spec/Section%204%20--%20Composition.md#L73-L91">
<span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="defaultValue">defaultValue</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L75-L78">If <var data-name="defaultValue">defaultValue</var> is a ListValue:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L76-L78">For each <var data-name="valueNode">valueNode</var> in <var data-name="defaultValue">defaultValue</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L77-L78">If <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="valueNode">valueNode</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L78">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L79-L87">If <var data-name="defaultValue">defaultValue</var> is an ObjectValue:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L80">Let <var data-name="objectFields">objectFields</var> be a list of all fields of <var data-name="defaultValue">defaultValue</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L81">Let <var data-name="fields">fields</var> be a list of all fields <var data-name="objectFields">objectFields</var> are referring to</li>
<li data-source="spec/Section%204%20--%20Composition.md#L82-L84">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L83-L84">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="field">field</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L84">return false</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L85-L87">For each <var data-name="objectField">objectField</var> in <var data-name="objectFields">objectFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L86">Let <var data-name="value">value</var> be the value of <var data-name="objectField">objectField</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L87">return <span class="spec-call"><a href="#ValidateDefaultValue()" data-name="ValidateDefaultValue">ValidateDefaultValue</a>(<var data-name="value">value</var>)</span></li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L88-L90">If <var data-name="defaultValue">defaultValue</var> is an EnumValue:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L89-L90">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="defaultValue">defaultValue</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L90">return false</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L91">return true</li>
</ol>
</div>
</section>
<section id="sec-Enum-Type-Default-Value-Uses-Inaccessible-Value.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L93"><a href="#sec-Enum-Type-Default-Value-Uses-Inaccessible-Value.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L95-L98">This rule ensures that inaccessible enum values are not exposed in the composed schema through default values. Output field arguments, input fields, and directive arguments must only use enum values as their default value when not annotated with the <code>@inaccessible</code> directive.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L100-L101">In this example the <code>FOO</code> value in the <code>Enum1</code> enum is not marked with <code>@inaccessible</code>, hence it does not violate the rule.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L103-L112"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">type</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">Enum1</span> <span class="token punctuation">{</span>
  <span class="token constant">FOO</span>
  <span class="token constant">BAR</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L114-L116">The following example violates this rule because the default value for the field <code>field</code> in type <code>Input1</code> references an enum value (<code>FOO</code>) that is marked as <code>@inaccessible</code>.</p>
<pre id="example-bfabf" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L118-L133"><a href="#example-bfabf">Counter Example № 33</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span>
<span class="token punctuation">}</span>

<span class="token keyword">directive</span> <span class="token directive function">@directive1</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token class-name">Enum1</span> <span class="token operator">=</span> <span class="token constant">FOO</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">enum</span> <span class="token class-name">Enum1</span> <span class="token punctuation">{</span>
  <span class="token constant">FOO</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">BAR</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-1031b" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L135-L146"><a href="#example-1031b">Counter Example № 34</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token class-name">Input1</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token string">"ERROR"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Baz</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">directive</span> <span class="token directive function">@directive1</span><span class="token punctuation">(</span><span class="token attr-name">arg</span><span class="token punctuation">:</span> <span class="token class-name">Input1</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token string">"ERROR"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">input</span> <span class="token object">Input1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Output-Field-Types-Mergeable" secid="3.2.1.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L148"><span class="spec-secid" title="link to this section"><a href="#sec-Output-Field-Types-Mergeable">3.2.1.2</a></span>Output Field Types Mergeable</h4>
<section id="sec-Output-Field-Types-Mergeable.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L150"><a href="#sec-Output-Field-Types-Mergeable.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L152"><code>OUTPUT_FIELD_TYPES_NOT_MERGEABLE</code></p>
</section>
<section id="sec-Output-Field-Types-Mergeable.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L154"><a href="#sec-Output-Field-Types-Mergeable.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L156">ERROR</p>
</section>
<section id="sec-Output-Field-Types-Mergeable.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L158"><a href="#sec-Output-Field-Types-Mergeable.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L160">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L161-L168">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L162-L163">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L164">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L165-L168">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L166-L167">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L168"><span class="spec-call"><a href="#FieldsAreMergeable()" data-name="FieldsAreMergeable">FieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="FieldsAreMergeable()" data-source="spec/Section%204%20--%20Composition.md#L170-L175">
<span class="spec-call"><a href="#FieldsAreMergeable()" data-name="FieldsAreMergeable">FieldsAreMergeable</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L172-L175">Given each pair of members <var data-name="fieldA">fieldA</var> and <var data-name="fieldB">fieldB</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L173">Let <var data-name="typeA">typeA</var> be the type of <var data-name="fieldA">fieldA</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L174">Let <var data-name="typeB">typeB</var> be the type of <var data-name="fieldB">fieldB</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L175"><span class="spec-call"><span data-name="SameTypeShape">SameTypeShape</span>(<var data-name="typeA">typeA</var>, <var data-name="typeB">typeB</var>)</span> must be true.</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Output-Field-Types-Mergeable.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L177"><a href="#sec-Output-Field-Types-Mergeable.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L179-L180">Fields on objects or interfaces that have the same name are considered semantically equivalent and mergeable when they have a mergeable field type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L182">Fields with the same type are mergeable.</p>
<pre id="example-65bd6" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L184-L192"><a href="#example-65bd6">Example № 35</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L194-L195">Fields with different nullability are mergeable, resulting in a merged field with a nullable type.</p>
<pre id="example-6c133" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L197-L205"><a href="#example-6c133">Example № 36</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-a9f42" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L207-L219"><a href="#example-a9f42">Example № 37</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L221">Fields are not mergeable if the named types are different in kind or name.</p>
<pre id="example-1b751" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L223-L231"><a href="#example-1b751">Counter Example № 38</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">birthdate</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-70adb" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L233-L247"><a href="#example-70adb">Counter Example № 39</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Tag</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Tag</span> <span class="token punctuation">{</span>
  <span class="token attr-name">value</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Tag</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">scalar</span> <span class="token class-name">Tag</span>
</code></pre>
</section>
</section>
<section id="sec-Disallowed-Inaccessible-Elements" secid="3.2.1.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L249"><span class="spec-secid" title="link to this section"><a href="#sec-Disallowed-Inaccessible-Elements">3.2.1.3</a></span>Disallowed Inaccessible Elements</h4>
<section id="sec-Disallowed-Inaccessible-Elements.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L251"><a href="#sec-Disallowed-Inaccessible-Elements.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L253"><code>DISALLOWED_INACCESSIBLE</code></p>
</section>
<section id="sec-Disallowed-Inaccessible-Elements.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L255"><a href="#sec-Disallowed-Inaccessible-Elements.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L257">ERROR</p>
</section>
<section id="sec-Disallowed-Inaccessible-Elements.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L259"><a href="#sec-Disallowed-Inaccessible-Elements.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L261">Let <var data-name="type">type</var> be the set of all types from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L262-L268">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L263-L268">If <var data-name="type">type</var> is a built-in scalar type or introspection type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L264"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="type">type</var>)</span> must be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L265-L268">For each <var data-name="field">field</var> in <var data-name="type">type</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L266"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="field">field</var>)</span> must be true.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L267-L268">For each <var data-name="argument">argument</var> in <var data-name="field">field</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L268"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="argument">argument</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L269-L272">For each <var data-name="directive">directive</var> in <var data-name="directives">directives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L270-L272">If <var data-name="directive">directive</var> is a built-in directive:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L271-L272">For each <var data-name="argument">argument</var> in <var data-name="directive">directive</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L272"><span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="argument">argument</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Disallowed-Inaccessible-Elements.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L274"><a href="#sec-Disallowed-Inaccessible-Elements.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L276-L279">This rule ensures that certain essential elements of a GraphQL schema, particularly built-in scalars, directive arguments, and introspection types, cannot be marked as <code>@inaccessible</code>. These types are fundamental to GraphQL. Making these elements inaccessible would break core GraphQL functionality.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L281-L282">Here, the <code>String</code> type is not marked as <code>@inaccessible</code>, which adheres to the rule:</p>
<pre id="example-99a08" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L284-L289"><a href="#example-99a08">Example № 40</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L291-L293">In this example, the <code>String</code> scalar is marked as <code>@inaccessible</code>. This violates the rule because <code>String</code> is a required built-in type that cannot be inaccessible:</p>
<pre id="example-23d3f" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L295-L302"><a href="#example-23d3f">Counter Example № 41</a><code><span class="token keyword">scalar</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L304-L306">In this example, the introspection type <code>__Type</code> is marked as <code>@inaccessible</code>. This violates the rule because introspection types must remain accessible for GraphQL introspection queries to work.</p>
<pre id="example-f1652" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L308-L314"><a href="#example-f1652">Counter Example № 42</a><code><span class="token keyword">type</span> <span class="token class-name">__Type</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">kind</span><span class="token punctuation">:</span> <span class="token class-name">__TypeKind</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">fields</span><span class="token punctuation">(</span><span class="token attr-name">includeDeprecated</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">__Field</span><span class="token operator">!</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Argument-Default-Mismatch" secid="3.2.1.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L316"><span class="spec-secid" title="link to this section"><a href="#sec-External-Argument-Default-Mismatch">3.2.1.4</a></span>External Argument Default Mismatch</h4>
<section id="sec-External-Argument-Default-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L318"><a href="#sec-External-Argument-Default-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L320"><code>EXTERNAL_ARGUMENT_DEFAULT_MISMATCH</code></p>
</section>
<section id="sec-External-Argument-Default-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L322"><a href="#sec-External-Argument-Default-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L324">ERROR</p>
</section>
<section id="sec-External-Argument-Default-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L326"><a href="#sec-External-Argument-Default-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L328">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L329-L349">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L330-L331">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L332">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L333-L349">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L334-L335">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L336-L337">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L338-L349">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L339-L340">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all fields in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L341-L349">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L342-L343">Let <var data-name="arguments">arguments</var> be the set of all arguments with the name <var data-name="argumentName">argumentName</var> from all fields in <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L344">Let <var data-name="defaultValue">defaultValue</var> be the first default value found in <var data-name="arguments">arguments</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L345-L346">Let <var data-name="externalArguments">externalArguments</var> be the set of all arguments with the name <var data-name="argumentName">argumentName</var> from all fields in <var data-name="externalFields">externalFields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L347-L349">For each <var data-name="externalArgument">externalArgument</var> in <var data-name="externalArguments">externalArguments</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L348-L349">The default value of <var data-name="externalArgument">externalArgument</var> must be equal to <var data-name="defaultValue">defaultValue</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Argument-Default-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L351"><a href="#sec-External-Argument-Default-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L353-L358">This rule ensures that arguments on fields marked as <code>@external</code> have default values compatible with the corresponding arguments on fields from other source schemas where the field is defined (non-<code>@external</code>). Since <code>@external</code> fields represent fields that are resolved by other source schemas, their arguments and defaults must match to maintain consistent behavior across different source schemas.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L360-L362">Here, the <code>name</code> field on <code>Product</code> is defined in one source schema and marked as <code>@external</code> in another. The argument <code>language</code> has the same default value in both source schemas, satisfying the rule:</p>
<pre id="example-64ce1" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L364-L374"><a href="#example-64ce1">Example № 43</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span> <span class="token directive function">@external</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L376-L378">Here, the <code>name</code> field on <code>Product</code> is defined in one source schema and marked as <code>@external</code> in another. The argument <code>language</code> has different default values in the two source schemas, violating the rule:</p>
<pre id="example-434fe" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L380-L390"><a href="#example-434fe">Counter Example № 44</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"de"</span><span class="token punctuation">)</span> <span class="token directive function">@external</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L392-L396">In the following counter example, the <code>name</code> field on <code>Product</code> is defined in one source schema and marked as <code>@external</code> in another. The argument <code>language</code> has a default value in the source schema where the field is defined, but it does not have a default value in the source schema where the field is marked as <code>@external</code>, violating the rule:</p>
<pre id="example-dd53e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L398-L408"><a href="#example-dd53e">Counter Example № 45</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token operator">=</span> <span class="token string">"en"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Argument-Missing" secid="3.2.1.5">
<h4 data-source="spec/Section%204%20--%20Composition.md#L410"><span class="spec-secid" title="link to this section"><a href="#sec-External-Argument-Missing">3.2.1.5</a></span>External Argument Missing</h4>
<section id="sec-External-Argument-Missing.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L412"><a href="#sec-External-Argument-Missing.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L414"><code>EXTERNAL_ARGUMENT_MISSING</code></p>
</section>
<section id="sec-External-Argument-Missing.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L416"><a href="#sec-External-Argument-Missing.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L418">ERROR</p>
</section>
<section id="sec-External-Argument-Missing.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L420"><a href="#sec-External-Argument-Missing.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L422">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L423-L439">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L424-L425">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L426">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L427-L439">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L428-L429">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L430-L431">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L432-L433">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L434-L439">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L435-L436">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all fields in <var data-name="nonExternalFields">nonExternalFields</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L437-L439">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L438-L439">For each <var data-name="externalField">externalField</var> in <var data-name="externalFields">externalFields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L439"><var data-name="argumentName">argumentName</var> must be present in the arguments of <var data-name="externalField">externalField</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Argument-Missing.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L441"><a href="#sec-External-Argument-Missing.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L443-L448">This rule ensures that fields marked with <code>@external</code> have all the necessary arguments that exist on the corresponding field definitions in other source schemas. Each argument defined on the base field (the field definition in the source source schema) must be present on the <code>@external</code> field in other source schemas. If an argument is missing on an <code>@external</code> field, the field cannot be resolved correctly, which is an inconsistency.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L450-L452">In this example, the <code>language</code> argument is present on both the <code>@external</code> field in source schema B and the base field in source schema A, satisfying the rule:</p>
<pre id="example-1b0de" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L454-L464"><a href="#example-1b0de">Example № 46</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L466-L468">Here, the <code>@external</code> field in source schema B is missing the <code>language</code> argument that is present in the base field definition in source schema A, violating the rule:</p>
<pre id="example-30492" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L470-L480"><a href="#example-30492">Counter Example № 47</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Argument-Type-Mismatch" secid="3.2.1.6">
<h4 data-source="spec/Section%204%20--%20Composition.md#L482"><span class="spec-secid" title="link to this section"><a href="#sec-External-Argument-Type-Mismatch">3.2.1.6</a></span>External Argument Type Mismatch</h4>
<section id="sec-External-Argument-Type-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L484"><a href="#sec-External-Argument-Type-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L486"><code>EXTERNAL_ARGUMENT_TYPE_MISMATCH</code></p>
</section>
<section id="sec-External-Argument-Type-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L488"><a href="#sec-External-Argument-Type-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L490">ERROR</p>
</section>
<section id="sec-External-Argument-Type-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L492"><a href="#sec-External-Argument-Type-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L494">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L495-L514">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L496-L497">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L498">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L499-L514">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L500-L501">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L502-L503">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L504-L505">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L506-L514">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L507-L508">Let <var data-name="argumentNames">argumentNames</var> be the set of all argument names from all fields in <var data-name="nonExternalFields">nonExternalFields</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L509-L514">For each <var data-name="argumentName">argumentName</var> in <var data-name="argumentNames">argumentNames</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L510-L514">For each <var data-name="externalField">externalField</var> in <var data-name="externalFields">externalFields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L511-L512">Let <var data-name="externalArgument">externalArgument</var> be the argument with the name <var data-name="argumentName">argumentName</var> from <var data-name="externalField">externalField</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L513-L514"><var data-name="externalArgument">externalArgument</var> must strictly equal all arguments with the name <var data-name="argumentName">argumentName</var> from <var data-name="nonExternalFields">nonExternalFields</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Argument-Type-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L516"><a href="#sec-External-Argument-Type-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L518-L521">This rule ensures that arguments on fields marked as <code>@external</code> have types compatible with the corresponding arguments on the fields defined in other source schemas. The arguments must have the exact same type signature, including nullability and list nesting.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L523-L524">Here, the <code>@external</code> field&rsquo;s <code>language</code> argument has the same type (<code>Language</code>) as the base field, satisfying the rule:</p>
<pre id="example-6bb90" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L526-L536"><a href="#example-6bb90">Example № 48</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token class-name">Language</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token class-name">Language</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L538-L540">In this example, the <code>@external</code> field&rsquo;s <code>language</code> argument type does not match the base field&rsquo;s <code>language</code> argument type (<code>Language</code> vs. <code>String</code>), violating the rule:</p>
<pre id="example-cbf2f" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L542-L552"><a href="#example-cbf2f">Example № 49</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token class-name">Language</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">(</span><span class="token attr-name">language</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Missing-on-Base" secid="3.2.1.7">
<h4 data-source="spec/Section%204%20--%20Composition.md#L554"><span class="spec-secid" title="link to this section"><a href="#sec-External-Missing-on-Base">3.2.1.7</a></span>External Missing on Base</h4>
<section id="sec-External-Missing-on-Base.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L556"><a href="#sec-External-Missing-on-Base.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L558"><code>EXTERNAL_MISSING_ON_BASE</code></p>
</section>
<section id="sec-External-Missing-on-Base.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L560"><a href="#sec-External-Missing-on-Base.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L562">ERROR</p>
</section>
<section id="sec-External-Missing-on-Base.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L564"><a href="#sec-External-Missing-on-Base.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L566">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L567-L579">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L568-L569">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L570">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L571-L579">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L572-L573">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L574-L575">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L576-L577">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L578-L579">If <var data-name="externalFields">externalFields</var> is not empty<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L579"><var data-name="nonExternalFields">nonExternalFields</var> must not be empty.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Missing-on-Base.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L581"><a href="#sec-External-Missing-on-Base.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L583-L587">This rule ensures that any field marked as <code>@external</code> in a source schema is actually defined (non-<code>@external</code>) in at least one other source schema. The <code>@external</code> directive is used to indicate that the field is not usually resolved by the source schema it is declared in, implying it should be resolvable by at least one other source schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L589-L591">Here, the <code>name</code> field on <code>Product</code> is defined in source schema A and marked as <code>@external</code> in source schema B, which is valid because there is a base definition in source schema A:</p>
<pre id="example-998d2" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L593-L605"><a href="#example-998d2">Example № 50</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L607-L609">In this example, the <code>name</code> field on <code>Product</code> is marked as <code>@external</code> in source schema B but has no non-<code>@external</code> declaration in any other source schema, violating the rule:</p>
<pre id="example-35ced" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L611-L622"><a href="#example-35ced">Counter Example № 51</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Type-Mismatch" secid="3.2.1.8">
<h4 data-source="spec/Section%204%20--%20Composition.md#L624"><span class="spec-secid" title="link to this section"><a href="#sec-External-Type-Mismatch">3.2.1.8</a></span>External Type Mismatch</h4>
<section id="sec-External-Type-Mismatch.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L626"><a href="#sec-External-Type-Mismatch.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L628"><code>EXTERNAL_TYPE_MISMATCH</code></p>
</section>
<section id="sec-External-Type-Mismatch.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L630"><a href="#sec-External-Type-Mismatch.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L632">ERROR</p>
</section>
<section id="sec-External-Type-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L634"><a href="#sec-External-Type-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L636">Let <var data-name="typeNames">typeNames</var> be the set of all output type names from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L637-L650">For each <var data-name="typeName">typeName</var> in <var data-name="typeNames">typeNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L638-L639">Let <var data-name="types">types</var> be the set of all types with the name <var data-name="typeName">typeName</var> from all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L640">Let <var data-name="fieldNames">fieldNames</var> be the set of all field names from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L641-L650">For each <var data-name="fieldName">fieldName</var> in <var data-name="fieldNames">fieldNames</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L642-L643">Let <var data-name="fields">fields</var> be the set of all fields with the name <var data-name="fieldName">fieldName</var> from all types in <var data-name="types">types</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L644-L645">Let <var data-name="externalFields">externalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L646-L647">Let <var data-name="nonExternalFields">nonExternalFields</var> be the set of all fields in <var data-name="fields">fields</var> that are not marked with <code>@external</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L648-L650">For each <var data-name="externalField">externalField</var> in <var data-name="externalFields">externalFields</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L649-L650">The type of <var data-name="externalField">externalField</var> must strictly equal all types of <var data-name="nonExternalFields">nonExternalFields</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Type-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L652"><a href="#sec-External-Type-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L654-L657">This rule ensures that a field marked as <code>@external</code> has a return type compatible with the corresponding field defined in other source schemas. Fields with the same name must represent the same data type to maintain schema consistency</p>
<p data-source="spec/Section%204%20--%20Composition.md#L659-L660">Here, the <code>@external</code> field <code>name</code> has the same return type (<code>String</code>) as the base field definition, satisfying the rule:</p>
<pre id="example-df40b" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L662-L672"><a href="#example-df40b">Example № 52</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L674-L675">In this example, the <code>@external</code> field <code>name</code> has a return type of <code>ProductName</code> that doesn&rsquo;t match the base field&rsquo;s return type <code>String</code>, violating the rule:</p>
<pre id="example-857ab" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L677-L687"><a href="#example-857ab">Counter Example № 53</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token class-name">ProductName</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Unused" secid="3.2.1.9">
<h4 data-source="spec/Section%204%20--%20Composition.md#L689"><span class="spec-secid" title="link to this section"><a href="#sec-External-Unused">3.2.1.9</a></span>External Unused</h4>
<section id="sec-External-Unused.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L691"><a href="#sec-External-Unused.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L693"><code>EXTERNAL_UNUSED</code></p>
</section>
<section id="sec-External-Unused.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L695"><a href="#sec-External-Unused.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L697">ERROR</p>
</section>
<section id="sec-External-Unused.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L699"><a href="#sec-External-Unused.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L701-L711">For each <var data-name="schema">schema</var> in all source schemas<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L702-L703">Let <var data-name="types">types</var> be the set of all composite types (object, interface) in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L704-L711">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L705">Let <var data-name="fields">fields</var> be the set of fields for <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L706-L711">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L707-L711">If <var data-name="field">field</var> is marked with <code>@external</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L708-L709">Let <var data-name="referencingFields">referencingFields</var> be the set of fields in <var data-name="schema">schema</var> that reference <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L710-L711"><var data-name="referencingFields">referencingFields</var> must contain at least one field that references <var data-name="field">field</var> in <code>@provides</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Unused.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L713"><a href="#sec-External-Unused.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L715-L716">This rule ensures that every field marked as <code>@external</code> in a source schema is actually used by that source schema in a <code>@provides</code> directive.</p>
</section>
<section id="sec-External-Unused.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L718"><a href="#sec-External-Unused.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L720-L721">In this example, the <code>name</code> field is marked with <code>@external</code> and is used by the <code>@provides</code> directive, satisfying the rule:</p>
<pre id="example-51c97" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L723-L733"><a href="#example-51c97">Example № 54</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productByName</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L735-L736">In this example, the <code>name</code> field is marked with <code>@external</code> but is not used by the <code>@provides</code> directive, violating the rule:</p>
<pre id="example-30f36" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L738-L744"><a href="#example-30f36">Counter Example № 55</a><code><span class="token comment"># Source schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Root-Mutation-Used" secid="3.2.1.10">
<h4 data-source="spec/Section%204%20--%20Composition.md#L746"><span class="spec-secid" title="link to this section"><a href="#sec-Root-Mutation-Used">3.2.1.10</a></span>Root Mutation Used</h4>
<section id="sec-Root-Mutation-Used.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L748"><a href="#sec-Root-Mutation-Used.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L750"><code>ROOT_MUTATION_USED</code></p>
</section>
<section id="sec-Root-Mutation-Used.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L752"><a href="#sec-Root-Mutation-Used.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L754">ERROR</p>
</section>
<section id="sec-Root-Mutation-Used.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L756"><a href="#sec-Root-Mutation-Used.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L758">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L759-L766">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L760-L761">Let <var data-name="rootMutation">rootMutation</var> be the root mutation type defined in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L762-L763">Let <var data-name="namedMutationType">namedMutationType</var> be the type with the name <code>Mutation</code> in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L764-L765">If <var data-name="rootMutation">rootMutation</var> is defined:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L765"><var data-name="rootMutation">rootMutation</var> must be named <code>Mutation</code>.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L766">Otherwise, <var data-name="namedMutationType">namedMutationType</var> must not be defined.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Root-Mutation-Used.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L768"><a href="#sec-Root-Mutation-Used.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L770-L774">This rule enforces that, for any source schema, if a root mutation type is defined, it must be named <code>Mutation</code>. Defining a root mutation type with a name other than <code>Mutation</code> or using a differently named type alongside a type explicitly named <code>Mutation</code> creates inconsistencies in schema design and violates the composite schema specification.</p>
</section>
<section id="sec-Root-Mutation-Used.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L776"><a href="#sec-Root-Mutation-Used.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L778">Valid example:</p>
<pre id="example-b6c3a" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L780-L793"><a href="#example-b6c3a">Example № 56</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mutation</span><span class="token punctuation">:</span> <span class="token class-name">Mutation</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createProduct</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L795-L796">The following counter-example violates the rule because <code>RootMutation</code> is used as the root mutation type, but a type named <code>Mutation</code> is also defined.</p>
<pre id="example-a2861" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L798-L810"><a href="#example-a2861">Counter Example № 57</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mutation</span><span class="token punctuation">:</span> <span class="token class-name">RootMutation</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RootMutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">createProduct</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Mutation</span> <span class="token punctuation">{</span>
  <span class="token attr-name">deprecatedField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Root-Query-Used" secid="3.2.1.11">
<h4 data-source="spec/Section%204%20--%20Composition.md#L812"><span class="spec-secid" title="link to this section"><a href="#sec-Root-Query-Used">3.2.1.11</a></span>Root Query Used</h4>
<section id="sec-Root-Query-Used.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L814"><a href="#sec-Root-Query-Used.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L816"><code>ROOT_QUERY_USED</code></p>
</section>
<section id="sec-Root-Query-Used.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L818"><a href="#sec-Root-Query-Used.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L820">ERROR</p>
</section>
<section id="sec-Root-Query-Used.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L822"><a href="#sec-Root-Query-Used.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L824">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L825-L831">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L826">Let <var data-name="rootQuery">rootQuery</var> be the root mutation type defined in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L827-L828">Let <var data-name="namedQueryType">namedQueryType</var> be the type with the name <code>Query</code> in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L829-L830">If <var data-name="rootQuery">rootQuery</var> is defined:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L830"><var data-name="rootQuery">rootQuery</var> must be named <code>Query</code>.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L831">Otherwise, <var data-name="namedQueryType">namedQueryType</var> must not be defined.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Root-Query-Used.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L833"><a href="#sec-Root-Query-Used.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L835-L839">This rule enforces that the root query type in any source schema must be named <code>Query</code>. Defining a root query type with a name other than <code>Query</code> or using a differently named type alongside a type explicitly named <code>Query</code> creates inconsistencies in schema design and violates the composite schema specification.</p>
</section>
<section id="sec-Root-Query-Used.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L841"><a href="#sec-Root-Query-Used.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L843">Valid example:</p>
<pre id="example-9d912" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L845-L858"><a href="#example-9d912">Example № 58</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">Query</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L860-L861">The following counter-example violates the rule because <code>RootQuery</code> is used as the root query type, but a type named <code>Query</code> is also defined.</p>
<pre id="example-17e1c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L863-L875"><a href="#example-17e1c">Counter Example № 59</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">RootQuery</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RootQuery</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">deprecatedField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Root-Subscription-Used" secid="3.2.1.12">
<h4 data-source="spec/Section%204%20--%20Composition.md#L877"><span class="spec-secid" title="link to this section"><a href="#sec-Root-Subscription-Used">3.2.1.12</a></span>Root Subscription Used</h4>
<section id="sec-Root-Subscription-Used.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L879"><a href="#sec-Root-Subscription-Used.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L881"><code>ROOT_SUBSCRIPTION_USED</code></p>
</section>
<section id="sec-Root-Subscription-Used.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L883"><a href="#sec-Root-Subscription-Used.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L885">ERROR</p>
</section>
<section id="sec-Root-Subscription-Used.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L887"><a href="#sec-Root-Subscription-Used.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L889">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L890-L897">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L891-L892">Let <var data-name="rootSubscription">rootSubscription</var> be the root mutation type defined in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L893-L894">Let <var data-name="namedSubscriptionType">namedSubscriptionType</var> be the type with the name <code>Subscription</code> in <var data-name="schema">schema</var>, if it exists.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L895-L896">If <var data-name="rootSubscription">rootSubscription</var> is defined:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L896"><var data-name="rootSubscription">rootSubscription</var> must be named <code>Subscription</code>.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L897">Otherwise, <var data-name="namedSubscriptionType">namedSubscriptionType</var> must not be defined.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Root-Subscription-Used.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L899"><a href="#sec-Root-Subscription-Used.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L901-L905">This rule enforces that, for any source schema, if a root subscription type is defined, it must be named <code>Subscription</code>. Defining a root subscription type with a name other than <code>Subscription</code> or using a differently named type alongside a type explicitly named <code>Subscription</code> creates inconsistencies in schema design and violates the composite schema specification.</p>
</section>
<section id="sec-Root-Subscription-Used.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L907"><a href="#sec-Root-Subscription-Used.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L909">Valid example:</p>
<pre id="example-9ffc3" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L911-L924"><a href="#example-9ffc3">Example № 60</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">subscription</span><span class="token punctuation">:</span> <span class="token class-name">Subscription</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productCreated</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L926-L928">The following counter-example violates the rule because <code>RootSubscription</code> is used as the root subscription type, but a type named <code>Subscription</code> is also defined.</p>
<pre id="example-4dbd7" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L930-L942"><a href="#example-4dbd7">Counter Example № 61</a><code><span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">subscription</span><span class="token punctuation">:</span> <span class="token class-name">RootSubscription</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RootSubscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">productCreated</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">deprecatedField</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type" secid="3.2.1.13">
<h4 data-source="spec/Section%204%20--%20Composition.md#L944"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Fields-Select-Invalid-Type">3.2.1.13</a></span>Key Fields Select Invalid Type</h4>
<section id="sec-Key-Fields-Select-Invalid-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L946"><a href="#sec-Key-Fields-Select-Invalid-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L948"><code>KEY_FIELDS_SELECT_INVALID_TYPE</code></p>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L950"><a href="#sec-Key-Fields-Select-Invalid-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L952">ERROR</p>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L954"><a href="#sec-Key-Fields-Select-Invalid-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L956-L966">Let <var data-name="schema">schema</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L957-L958">Let <var data-name="types">types</var> be the set of all object or interface types that are annotated with the <code>@key</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L959-L966">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L960">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L961-L966">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L962-L963">Let <var data-name="keyFields">keyFields</var> be the set of all fields (including nested) referenced by the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L964-L966">For each <var data-name="field">field</var> in <var data-name="keyFields">keyFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L965">Let <var data-name="fieldType">fieldType</var> be the type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L966"><var data-name="fieldType">fieldType</var> must not be a <code>List</code>, <code>Interface</code>, or <code>Union</code> type.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L968"><a href="#sec-Key-Fields-Select-Invalid-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L970-L974">The <code>@key</code> directive is used to define the set of fields that uniquely identify an entity. These fields must reference scalars or object types to ensure a valid and consistent representation of the entity across schemas. Fields of types <code>List</code>, <code>Interface</code>, or <code>Union</code> cannot be part of a <code>@key</code> because they do not have a well-defined unique value.</p>
</section>
<section id="sec-Key-Fields-Select-Invalid-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L976"><a href="#sec-Key-Fields-Select-Invalid-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L978-L979">In this valid example, the <code>Product</code> type has a valid <code>@key</code> directive referencing the scalar field <code>sku</code>.</p>
<pre id="example-110ef" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L981-L986"><a href="#example-110ef">Example № 62</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L988-L990">In the following counter-example, the <code>Product</code> type has an invalid <code>@key</code> directive referencing a field (<code>featuredItem</code>) whose type is an interface, violating the rule.</p>
<pre id="example-76a99" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L992-L1001"><a href="#example-76a99">Counter Example № 63</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"featuredItem { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1003-L1004">In this counter example, the <code>@key</code> directive references a field (<code>tags</code>) of type <code>List</code>, which is also not allowed.</p>
<pre id="example-f52f6" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1006-L1011"><a href="#example-f52f6">Counter Example № 64</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1013-L1014">In this counter example, the <code>@key</code> directive references a field (<code>relatedItems</code>) of type <code>Union</code>, which violates the rule.</p>
<pre id="example-4a122" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1016-L1027"><a href="#example-4a122">Counter Example № 65</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"relatedItems"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">relatedItems</span><span class="token punctuation">:</span> <span class="token class-name">Related</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">union</span> <span class="token class-name">Related</span> <span class="token operator">=</span> <span class="token property">Product</span> <span class="token operator">|</span> <span class="token property">Service</span>

<span class="token keyword">type</span> <span class="token class-name">Service</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Directive-in-Fields-Argument" secid="3.2.1.14">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1029"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Directive-in-Fields-Argument">3.2.1.14</a></span>Key Directive in Fields Argument</h4>
<section id="sec-Key-Directive-in-Fields-Argument.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1031"><a href="#sec-Key-Directive-in-Fields-Argument.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1033"><code>KEY_DIRECTIVE_IN_FIELDS_ARG</code></p>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1035"><a href="#sec-Key-Directive-in-Fields-Argument.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1037">ERROR</p>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1039"><a href="#sec-Key-Directive-in-Fields-Argument.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1041-L1048">Let <var data-name="schema">schema</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1042">Let <var data-name="types">types</var> be the set of all object and interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1043-L1048">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1044">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1045-L1048">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1046-L1047">Let <var data-name="fields">fields</var> be the string value of the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1048"><var data-name="fields">fields</var> must not contain a directive application.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1050"><a href="#sec-Key-Directive-in-Fields-Argument.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1052-L1055">The <code>@key</code> directive specifies the set of fields used to uniquely identify an entity. The <code>fields</code> argument must consist of a valid GraphQL selection set that does not include any directive applications. Directives in the <code>fields</code> argument are not supported.</p>
</section>
<section id="sec-Key-Directive-in-Fields-Argument.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1057"><a href="#sec-Key-Directive-in-Fields-Argument.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1059-L1060">In this example, the <code>fields</code> argument of the <code>@key</code> directive does not include any directive applications, satisfying the rule.</p>
<pre id="example-73ed9" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1062-L1067"><a href="#example-73ed9">Example № 66</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1069-L1070">In this counter-example, the <code>fields</code> argument of the <code>@key</code> directive includes a directive application <code>@lowercase</code>, which is not allowed.</p>
<pre id="example-5a41e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1072-L1079"><a href="#example-5a41e">Counter Example № 67</a><code><span class="token keyword">directive</span> <span class="token directive function">@lowercase</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name @lowercase"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1081-L1082">In this example, the <code>fields</code> argument includes a directive application <code>@lowercase</code> nested inside the selection set, which is also invalid.</p>
<pre id="example-6873f" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1084-L1096"><a href="#example-6873f">Counter Example № 68</a><code><span class="token keyword">directive</span> <span class="token directive function">@lowercase</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name { firstName @lowercase }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token class-name">FullName</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">FullName</span> <span class="token punctuation">{</span>
  <span class="token attr-name">firstName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">lastName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Fields-Has-Arguments" secid="3.2.1.15">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1098"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Fields-Has-Arguments">3.2.1.15</a></span>Key Fields Has Arguments</h4>
<section id="sec-Key-Fields-Has-Arguments.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1100"><a href="#sec-Key-Fields-Has-Arguments.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1102"><code>KEY_FIELDS_HAS_ARGS</code></p>
</section>
<section id="sec-Key-Fields-Has-Arguments.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1104"><a href="#sec-Key-Fields-Has-Arguments.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1106">ERROR</p>
</section>
<section id="sec-Key-Fields-Has-Arguments.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1108"><a href="#sec-Key-Fields-Has-Arguments.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1110-L1117">Let <var data-name="schema">schema</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1111-L1112">Let <var data-name="types">types</var> be the set of all object types that are annotated with the <code>@key</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1113-L1117">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1114-L1115">Let <var data-name="keyFields">keyFields</var> be the set of fields referenced by the <code>fields</code> argument of the <code>@key</code> directive on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1116-L1117">For each <var data-name="field">field</var> in <var data-name="keyFields">keyFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1117">HasKeyFieldsArguments(field) must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="HasKeyFieldsArguments()" data-source="spec/Section%204%20--%20Composition.md#L1119-L1127">
<span class="spec-call"><a href="#HasKeyFieldsArguments()" data-name="HasKeyFieldsArguments">HasKeyFieldsArguments</a>(<var data-name="field">field</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1121-L1122">If <var data-name="field">field</var> has arguments:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1122">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1123-L1126">If <var data-name="field">field</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1124">Let <var data-name="subFields">subFields</var> be the set of all fields in the selection set of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1125-L1126">For each <var data-name="subField">subField</var> in <var data-name="subFields">subFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1126">HasKeyFieldsArguments(subField) must be true.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1127">return true</li>
</ol>
</div>
</section>
<section id="sec-Key-Fields-Has-Arguments.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1129"><a href="#sec-Key-Fields-Has-Arguments.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1131-L1135">The <code>@key</code> directive is used to define the set of fields that uniquely identify an entity. These fields must not include any field that is defined with arguments, as arguments introduce variability that prevents consistent and valid entity resolution across schemas. Fields included in the <code>fields</code> argument of the <code>@key</code> directive must be static and consistently resolvable.</p>
</section>
<section id="sec-Key-Fields-Has-Arguments.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1137"><a href="#sec-Key-Fields-Has-Arguments.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1139-L1140">In this example, the <code>User</code> type has a valid <code>@key</code> directive that references the argument-free fields <code>id</code> and <code>name</code>.</p>
<pre id="example-5ab80" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1142-L1148"><a href="#example-5ab80">Example № 69</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1150-L1151">In this counter-example, the <code>@key</code> directive references a field (<code>tags</code>) that is defined with arguments (<code>limit</code>), which is not allowed.</p>
<pre id="example-959e5" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1153-L1158"><a href="#example-959e5">Counter Example № 70</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id tags"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">(</span><span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Invalid-Syntax" secid="3.2.1.16">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1160"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Invalid-Syntax">3.2.1.16</a></span>Key Invalid Syntax</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L1162-L1163"><strong>Error Code</strong> <code>KEY_INVALID_SYNTAX</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L1165-L1166"><strong>Severity</strong> ERROR</p>
<section id="sec-Key-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1168"><a href="#sec-Key-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1170-L1179">Let <var data-name="schemas">schemas</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1171">Let <var data-name="types">types</var> be the set of all object or interface types in each <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1172-L1179">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1173">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1174-L1179">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1175-L1176">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1177">Attempt to parse <var data-name="fieldsArg">fieldsArg</var> as a valid GraphQL selection set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1178-L1179">Parsing must <strong>not</strong> fail (e.g., missing braces, invalid tokens, unbalanced curly braces, or other syntax errors).</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1181"><a href="#sec-Key-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1183-L1187">Each <code>@key</code> directive must specify the fields that uniquely identify an entity using a valid GraphQL selection set in its <code>fields</code> argument. If the <code>fields</code> argument string is syntactically incorrect&mdash;missing closing braces, containing invalid tokens, or otherwise malformed &ndash; it cannot be composed into a valid schema and triggers the <code>KEY_INVALID_SYNTAX</code> error.</p>
</section>
<section id="sec-Key-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1189"><a href="#sec-Key-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1191-L1193">In this valid scenario, the <code>fields</code> argument is a correctly formed selection set: <code>"sku featuredItem { id }"</code> is properly balanced and contains no syntax errors.</p>
<pre id="example-e08e6" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1195-L1204"><a href="#example-e08e6">Example № 71</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku featuredItem { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1206-L1207">Here, the selection set <code>"featuredItem { id"</code> is missing the closing brace <code>}</code>. It is thus invalid syntax, causing a <code>KEY_INVALID_SYNTAX</code> error.</p>
<pre id="example-f764a" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1209-L1218"><a href="#example-f764a">Counter Example № 72</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"featuredItem { id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Invalid-Fields" secid="3.2.1.17">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1220"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Invalid-Fields">3.2.1.17</a></span>Key Invalid Fields</h4>
<section id="sec-Key-Invalid-Fields.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1222"><a href="#sec-Key-Invalid-Fields.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1224"><code>KEY_INVALID_FIELDS</code></p>
</section>
<section id="sec-Key-Invalid-Fields.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1226"><a href="#sec-Key-Invalid-Fields.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1228">ERROR</p>
</section>
<section id="sec-Key-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1230"><a href="#sec-Key-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1232-L1242">Let <var data-name="schema">schema</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1233">Let <var data-name="types">types</var> be the set of all object and interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1234-L1242">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1235">Let <var data-name="keyDirectives">keyDirectives</var> be the set of all <code>@key</code> directives on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1236-L1242">For each <var data-name="keyDirective">keyDirective</var> in <var data-name="keyDirectives">keyDirectives</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1237-L1238">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of <var data-name="keyDirective">keyDirective</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1239-L1240">Let <var data-name="selections">selections</var> be the set of fields in the selection set of <var data-name="fieldsArg">fieldsArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1241-L1242">For each <var data-name="selection">selection</var> in <var data-name="selections">selections</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1242"><span class="spec-call"><a href="#IsValidKeyField()" data-name="IsValidKeyField">IsValidKeyField</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="IsValidKeyField()" data-source="spec/Section%204%20--%20Composition.md#L1244-L1253">
<span class="spec-call"><a href="#IsValidKeyField()" data-name="IsValidKeyField">IsValidKeyField</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1246-L1247">If <var data-name="selection">selection</var> is not defined on <var data-name="type">type</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1247">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1248-L1252">If <var data-name="selection">selection</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1249">Let <var data-name="subType">subType</var> be the return type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1250">Let <var data-name="subFields">subFields</var> be the set of all fields in the selection set of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1251-L1252">For each <var data-name="subField">subField</var> in <var data-name="subFields">subFields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1252"><span class="spec-call"><a href="#IsValidKeyField()" data-name="IsValidKeyField">IsValidKeyField</a>(<var data-name="subField">subField</var>, <var data-name="subType">subType</var>)</span> must be true.</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1253">return true</li>
</ol>
</div>
</section>
<section id="sec-Key-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1255"><a href="#sec-Key-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1257-L1262">Even if the selection set for <code>@key(fields: "…")</code> is syntactically valid, field references within that selection set must also refer to <strong>actual</strong> fields on the annotated type. This includes nested selections, which must appear on the corresponding return type. If any referenced field is missing or incorrectly named, composition fails with a <code>KEY_INVALID_FIELDS</code> error because the entity key cannot be resolved correctly.</p>
</section>
<section id="sec-Key-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1264"><a href="#sec-Key-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1266-L1267">In this valid example, the <code>fields</code> argument of the <code>@key</code> directive is properly defined with valid syntax and references existing fields.</p>
<pre id="example-ddbd0" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1269-L1278"><a href="#example-ddbd0">Example № 73</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"sku featuredItem { id }"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">featuredItem</span><span class="token punctuation">:</span> <span class="token class-name">Node</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1280-L1281">In this counter-example, the <code>fields</code> argument of the <code>@key</code> directive references a field <code>id</code>, which does not exist on the <code>Product</code> type.</p>
<pre id="example-4f50b" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1283-L1287"><a href="#example-4f50b">Counter Example № 74</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument" secid="3.2.1.18">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1289"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Directive-in-Fields-Argument">3.2.1.18</a></span>Provides Directive in Fields Argument</h4>
<section id="sec-Provides-Directive-in-Fields-Argument.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1291"><a href="#sec-Provides-Directive-in-Fields-Argument.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1293"><code>PROVIDES_DIRECTIVE_IN_FIELDS_ARG</code></p>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1295"><a href="#sec-Provides-Directive-in-Fields-Argument.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1297">ERROR</p>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1299"><a href="#sec-Provides-Directive-in-Fields-Argument.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1301-L1308">Let <var data-name="schema">schema</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1302-L1303">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1304-L1308">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1305-L1306">Let <var data-name="fields">fields</var> be the selected fields of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1307-L1308">For each <var data-name="selection">selection</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1308"><span class="spec-call"><a href="#HasProvidesDirective()" data-name="HasProvidesDirective">HasProvidesDirective</a>(<var data-name="selection">selection</var>)</span> must be false</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="HasProvidesDirective()" data-source="spec/Section%204%20--%20Composition.md#L1310-L1318">
<span class="spec-call"><a href="#HasProvidesDirective()" data-name="HasProvidesDirective">HasProvidesDirective</a>(<var data-name="selection">selection</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1312-L1313">If <var data-name="selection">selection</var> has a directive application:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1313">return true</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1314-L1318">If <var data-name="selection">selection</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1315">Let <var data-name="subSelections">subSelections</var> be the selections in <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1316-L1318">For each <var data-name="subSelection">subSelection</var> in <var data-name="subSelections">subSelections</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1317-L1318">If <span class="spec-call"><a href="#HasProvidesDirective()" data-name="HasProvidesDirective">HasProvidesDirective</a>(<var data-name="subSelection">subSelection</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1318">return true</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1320"><a href="#sec-Provides-Directive-in-Fields-Argument.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1322-L1325">The <code>@provides</code> directive is used to specify the set of fields on an object type that a resolver provides for the parent type. The <code>fields</code> argument must consist of a valid GraphQL selection set without any directive applications, as directives within the <code>fields</code> argument are not supported.</p>
</section>
<section id="sec-Provides-Directive-in-Fields-Argument.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1327"><a href="#sec-Provides-Directive-in-Fields-Argument.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1329-L1330">In this example, the <code>fields</code> argument of the <code>@provides</code> directive does not have any directive applications, satisfying the rule.</p>
<pre id="example-77349" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1332-L1343"><a href="#example-77349">Example № 75</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1345-L1346">In this counter-example, the <code>fields</code> argument of the <code>@provides</code> directive has a directive application <code>@lowercase</code>, which is not allowed.</p>
<pre id="example-fa578" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1348-L1361"><a href="#example-fa578">Counter Example № 76</a><code><span class="token keyword">directive</span> <span class="token directive function">@lowercase</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name @lowercase"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Fields-Has-Arguments" secid="3.2.1.19">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1363"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Fields-Has-Arguments">3.2.1.19</a></span>Provides Fields Has Arguments</h4>
<section id="sec-Provides-Fields-Has-Arguments.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1365"><a href="#sec-Provides-Fields-Has-Arguments.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1367"><code>PROVIDES_FIELDS_HAS_ARGS</code></p>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1369"><a href="#sec-Provides-Fields-Has-Arguments.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1371">ERROR</p>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1373"><a href="#sec-Provides-Fields-Has-Arguments.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1375-L1383">Let <var data-name="schema">schema</var> be the set of all source schemas.<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1376-L1377">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1378-L1383">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1379-L1380">Let <var data-name="selections">selections</var> be the field selections of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1381">Let <var data-name="type">type</var> be the return type of <var data-name="field">field</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1382-L1383">For each <var data-name="selection">selection</var> in <var data-name="selections">selections</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1383"><span class="spec-call"><a href="#ProvidesHasArguments()" data-name="ProvidesHasArguments">ProvidesHasArguments</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span> must be false</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="ProvidesHasArguments()" data-source="spec/Section%204%20--%20Composition.md#L1385-L1395">
<span class="spec-call"><a href="#ProvidesHasArguments()" data-name="ProvidesHasArguments">ProvidesHasArguments</a>(<var data-name="selection">selection</var>, <var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1387">Let <var data-name="field">field</var> be the field of <var data-name="type">type</var> selected by <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1388-L1389">If <var data-name="field">field</var> has arguments:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1389">return true</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1390-L1395">If <var data-name="selection">selection</var> has a selection set:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1391">Let <var data-name="subSelections">subSelections</var> be the selections in <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1392">Let <var data-name="subType">subType</var> be the return type of <var data-name="field">field</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1393-L1395">For each <var data-name="subSelection">subSelection</var> in <var data-name="subSelections">subSelections</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1394-L1395">If <span class="spec-call"><a href="#ProvidesHasArguments()" data-name="ProvidesHasArguments">ProvidesHasArguments</a>(<var data-name="subField">subField</var>, <var data-name="subSelection">subSelection</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L1395">return true</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
</ol>
</div>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1397"><a href="#sec-Provides-Fields-Has-Arguments.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1399-L1402">The <code>@provides</code> directive specifies fields that a resolver provides for the parent type. The <code>fields</code> argument must reference fields that do not have arguments, as fields with arguments introduce variability that is incompatible with the consistent behavior expected of <code>@provides</code>.</p>
</section>
<section id="sec-Provides-Fields-Has-Arguments.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1404"><a href="#sec-Provides-Fields-Has-Arguments.Examples" title="link to this subsection">Examples</a></h6>
<pre id="example-59a88" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1406-L1416"><a href="#example-59a88">Example № 77</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Article</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1418-L1420">This violates the rule because the <code>tags</code> field referenced in the <code>fields</code> argument of the <code>@provides</code> directive is defined with arguments (<code>limit: UserType = ADMIN</code>).</p>
<pre id="example-f8a39" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1422-L1437"><a href="#example-f8a39">Counter Example № 78</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">tags</span><span class="token punctuation">(</span><span class="token attr-name">limit</span><span class="token punctuation">:</span> <span class="token class-name">UserType</span> <span class="token operator">=</span> <span class="token constant">ADMIN</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">enum</span> <span class="token class-name">UserType</span> <span class="token punctuation">{</span>
  <span class="token constant">REGULAR</span>
  <span class="token constant">ADMIN</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Article</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Fields-Missing-External" secid="3.2.1.20">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1439"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Fields-Missing-External">3.2.1.20</a></span>Provides Fields Missing External</h4>
<section id="sec-Provides-Fields-Missing-External.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1441"><a href="#sec-Provides-Fields-Missing-External.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1443"><code>PROVIDES_FIELDS_MISSING_EXTERNAL</code></p>
</section>
<section id="sec-Provides-Fields-Missing-External.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1445"><a href="#sec-Provides-Fields-Missing-External.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1447">ERROR</p>
</section>
<section id="sec-Provides-Fields-Missing-External.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1449"><a href="#sec-Provides-Fields-Missing-External.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1451">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1452-L1462">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1453">Let <var data-name="objectTypes">objectTypes</var> be the set of all object types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1454-L1462">For each <var data-name="objectType">objectType</var> in <var data-name="objectTypes">objectTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1455-L1456">Let <var data-name="providingFields">providingFields</var> be the set of fields on <var data-name="objectType">objectType</var> annotated with <code>@provides</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1457-L1462">For each <var data-name="field">field</var> in <var data-name="providingFields">providingFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1458-L1459">Let <var data-name="referencedFields">referencedFields</var> be the set of fields referenced by the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1460-L1462">For each <var data-name="referencedField">referencedField</var> in <var data-name="referencedFields">referencedFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1461-L1462">If <var data-name="referencedField">referencedField</var> is <strong>not</strong> marked as <code>@external</code><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1462">Produce a <code>PROVIDES_FIELDS_MISSING_EXTERNAL</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-Fields-Missing-External.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1464"><a href="#sec-Provides-Fields-Missing-External.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1466-L1470">The <code>@provides</code> directive indicates that an object type field will supply additional fields belonging to the return type in this execution specific path. Any field listed in the <code>@provides(fields: ...)</code> argument must therefore be <em>external</em> in the local schema, meaning that the local schema itself does <strong>not</strong> provide it.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1472-L1474">This rule disallows selecting non-external fields in a <code>@provides</code> selection set. If a field is already provided by the same schema in all execution paths, there is no need to <code>@provide</code>.</p>
</section>
<section id="sec-Provides-Fields-Missing-External.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1476"><a href="#sec-Provides-Fields-Missing-External.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1478-L1481">Here, the <code>Order</code> type from this schema is providing fields on <code>User</code> through <code>@provides</code>. The <code>name</code> field of <code>User</code> is <strong>not</strong> defined in this schema; it is declared with <code>@external</code> indicating that the <code>name</code> field comes from elsewhere. Thus, referencing <code>name</code> under <code>@provides(fields: "name")</code> is valid.</p>
<pre id="example-854d4" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1483-L1493"><a href="#example-854d4">Example № 79</a><code><span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">customer</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1495-L1498">In this counter-example, <code>User.address</code> is <strong>not</strong> marked as <code>@external</code> in the same schema that applies <code>@provides</code>. This means the schema already provides the <code>address</code> field in all possible paths, so using <code>@provides(fields: "address")</code> is invalid.</p>
<pre id="example-ea819" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1500-L1510"><a href="#example-ea819">Counter Example № 80</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">address</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">buyer</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"address"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Query-Root-Type-Inaccessible" secid="3.2.1.21">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1512"><span class="spec-secid" title="link to this section"><a href="#sec-Query-Root-Type-Inaccessible">3.2.1.21</a></span>Query Root Type Inaccessible</h4>
<section id="sec-Query-Root-Type-Inaccessible.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1514"><a href="#sec-Query-Root-Type-Inaccessible.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1516"><code>QUERY_ROOT_TYPE_INACCESSIBLE</code></p>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1518"><a href="#sec-Query-Root-Type-Inaccessible.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1520">ERROR</p>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1522"><a href="#sec-Query-Root-Type-Inaccessible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1524">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1525-L1528">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1526">Let <var data-name="queryType">queryType</var> be the query operation type defined in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1527-L1528">If <var data-name="queryType">queryType</var> is annotated with <code>@inaccessible</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1528">Produce a <code>QUERY_ROOT_TYPE_INACCESSIBLE</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1530"><a href="#sec-Query-Root-Type-Inaccessible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1532-L1535">Every source schema that contributes to the final composite schema must expose a public (accessible) root query type. Marking the root query type as <code>@inaccessible</code> makes it invisible to the gateway, defeating its purpose as the primary entry point for queries and lookups.</p>
</section>
<section id="sec-Query-Root-Type-Inaccessible.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1537"><a href="#sec-Query-Root-Type-Inaccessible.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1539-L1540">In this example, no <code>@inaccessible</code> annotation is applied to the query root, so the rule is satisfied.</p>
<pre id="example-a1b97" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1542-L1555"><a href="#example-a1b97">Example № 81</a><code><span class="token keyword">extend</span> <span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">Query</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">allBooks</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1557-L1559">Since the schema marks the query root type as <code>@inaccessible</code>, the rule is violated. <code>QUERY_ROOT_TYPE_INACCESSIBLE</code> is raised because a schema&rsquo;s root query type cannot be hidden from consumers.</p>
<pre id="example-90aba" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1561-L1574"><a href="#example-90aba">Counter Example № 82</a><code><span class="token keyword">extend</span> <span class="token keyword">schema</span> <span class="token punctuation">{</span>
  <span class="token attr-name">query</span><span class="token punctuation">:</span> <span class="token class-name">Query</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">allBooks</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Require-Directive-in-Fields-Argument" secid="3.2.1.22">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1576"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Directive-in-Fields-Argument">3.2.1.22</a></span>Require Directive in Fields Argument</h4>
<section id="sec-Require-Directive-in-Fields-Argument.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1578"><a href="#sec-Require-Directive-in-Fields-Argument.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1580"><code>REQUIRE_DIRECTIVE_IN_FIELDS_ARG</code></p>
</section>
<section id="sec-Require-Directive-in-Fields-Argument.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1582"><a href="#sec-Require-Directive-in-Fields-Argument.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1584">ERROR</p>
</section>
<section id="sec-Require-Directive-in-Fields-Argument.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1586"><a href="#sec-Require-Directive-in-Fields-Argument.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1588">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1589-L1600">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1590">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1591-L1600">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1592">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1593">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1594-L1600">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1595-L1596">If <var data-name="argument">argument</var> is <strong>not</strong> marked with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1596">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1597-L1598">Let <var data-name="fieldsArg">fieldsArg</var> be the value of the <code>fields</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1599-L1600">If <var data-name="fieldsArg">fieldsArg</var> contains a directive application:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1600">Produce a <code>REQUIRE_DIRECTIVE_IN_FIELDS_ARG</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Require-Directive-in-Fields-Argument.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1602"><a href="#sec-Require-Directive-in-Fields-Argument.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1604-L1609">The <code>@require</code> directive is used to specify fields on the same type that an argument depends on in order to resolve the annotated field. When using <code>@require(fields: "…")</code>, the <code>fields</code> argument must be a valid selection set string <strong>without</strong> any additional directive applications. Applying a directive (e.g., <code>@lowercase</code>) inside this selection set is not supported and triggers the <code>REQUIRE_DIRECTIVE_IN_FIELDS_ARG</code> error.</p>
</section>
<section id="sec-Require-Directive-in-Fields-Argument.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1611"><a href="#sec-Require-Directive-in-Fields-Argument.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1613-L1614">In this valid usage, the <code>@require</code> directive&rsquo;s <code>fields</code> argument references <code>name</code> without any directive applications, avoiding the error.</p>
<pre id="example-194c1" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1616-L1626"><a href="#example-194c1">Example № 83</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1628-L1630">Because the <code>@require</code> selection (<code>name @lowercase</code>) includes a directive application (<code>@lowercase</code>), this violates the rule and triggers a <code>REQUIRE_DIRECTIVE_IN_FIELDS_ARG</code> error.</p>
<pre id="example-1a598" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1632-L1643"><a href="#example-1a598">Counter Example № 84</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id name"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name @lowercase"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Require-Invalid-Fields-Type" secid="3.2.1.23">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1645"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Invalid-Fields-Type">3.2.1.23</a></span>Require Invalid Fields Type</h4>
<section id="sec-Require-Invalid-Fields-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1647"><a href="#sec-Require-Invalid-Fields-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1649"><code>REQUIRE_INVALID_FIELDS_TYPE</code></p>
</section>
<section id="sec-Require-Invalid-Fields-Type.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1651"><a href="#sec-Require-Invalid-Fields-Type.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1653">ERROR</p>
</section>
<section id="sec-Require-Invalid-Fields-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1655"><a href="#sec-Require-Invalid-Fields-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1657">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1658-L1669">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1659">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1660-L1669">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1661">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1662">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1663-L1669">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1664-L1665">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1665">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1666-L1667">Let <var data-name="fieldsArg">fieldsArg</var> be the value of the <code>fields</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1668-L1669">If <var data-name="fieldsArg">fieldsArg</var> is <strong>not</strong> a string:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1669">Produce a <code>REQUIRE_INVALID_FIELDS_TYPE</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Require-Invalid-Fields-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1671"><a href="#sec-Require-Invalid-Fields-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1673-L1677">When using the <code>@require</code> directive, the <code>fields</code> argument must always be a string that defines a (potentially nested) selection set of fields from the same type. If the <code>fields</code> argument is provided as a type other than a string (such as an integer, boolean, or enum), the directive usage is invalid and will cause schema composition to fail.</p>
</section>
<section id="sec-Require-Invalid-Fields-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1679"><a href="#sec-Require-Invalid-Fields-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1681-L1682">In the following example, the <code>@require</code> directive&rsquo;s <code>fields</code> argument is a valid string and satisfies the rule.</p>
<pre id="example-d693b" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1684-L1694"><a href="#example-d693b">Example № 85</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1696-L1697">Since <code>fields</code> is set to <code>123</code> (an integer) instead of a string, this violates the rule and triggers a <code>REQUIRE_INVALID_FIELDS_TYPE</code> error.</p>
<pre id="example-fbd4e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1699-L1709"><a href="#example-fbd4e">Counter Example № 86</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Require-Invalid-Syntax" secid="3.2.1.24">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1711"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Invalid-Syntax">3.2.1.24</a></span>Require Invalid Syntax</h4>
<section id="sec-Require-Invalid-Syntax.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1713"><a href="#sec-Require-Invalid-Syntax.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1715"><code>REQUIRE_INVALID_SYNTAX</code></p>
</section>
<section id="sec-Require-Invalid-Syntax.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1717"><a href="#sec-Require-Invalid-Syntax.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1719">ERROR</p>
</section>
<section id="sec-Require-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1721"><a href="#sec-Require-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1723">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1724-L1734">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1725">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1726-L1734">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1727">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1728">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1729-L1734">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1730-L1731">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1731">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1732-L1733">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1734"><var data-name="fieldsArg">fieldsArg</var> must be be parsable as a valid selection map</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Require-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1736"><a href="#sec-Require-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1738-L1741">The <code>@require</code> directive&rsquo;s <code>fields</code> argument must be syntactically valid GraphQL. If the selection map string is malformed (e.g., missing closing braces, unbalanced quotes, invalid tokens), then the schema cannot be composed correctly. In such cases, the error <code>REQUIRE_INVALID_SYNTAX</code> is raised.</p>
</section>
<section id="sec-Require-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1743"><a href="#sec-Require-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1745-L1746">In the following example, the <code>@require</code> directive&rsquo;s <code>fields</code> argument is a valid selection map and satisfies the rule.</p>
<pre id="example-e0298" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1748-L1758"><a href="#example-e0298">Example № 87</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1760-L1761">In the following counter-example, the <code>@require</code> directive&rsquo;s <code>fields</code> argument has invalid syntax because it is missing a closing brace.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1763">This violates the rule and triggers a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
<pre id="example-ea62c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1765-L1774"><a href="#example-ea62c">Counter Example № 88</a><code><span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">title</span><span class="token punctuation">(</span><span class="token attr-name">lang</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"author { name "</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Type-Definition-Invalid" secid="3.2.1.25">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1776"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Definition-Invalid">3.2.1.25</a></span>Type Definition Invalid</h4>
<section id="sec-Type-Definition-Invalid.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1778"><a href="#sec-Type-Definition-Invalid.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1780"><code>TYPE_DEFINITION_INVALID</code></p>
</section>
<section id="sec-Type-Definition-Invalid.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1782"><a href="#sec-Type-Definition-Invalid.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1784">ERROR</p>
</section>
<section id="sec-Type-Definition-Invalid.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1786"><a href="#sec-Type-Definition-Invalid.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1788">Let <var data-name="schema">schema</var> be one of the source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1789-L1790">Let <var data-name="types">types</var> be the set of built-in types (for example, <code>FieldSelectionMap</code>) defined by the composition specification.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1791-L1793">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1792-L1793"><var data-name="type">type</var> must strictly equal the built-in type defined by the composition specification.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Type-Definition-Invalid.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1795"><a href="#sec-Type-Definition-Invalid.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1797-L1802">Certain types are reserved in composite schema specification for specific purposes and must adhere to the specification&rsquo;s definitions. For example, <code>FieldSelectionMap</code> is a built-in scalar that represents a selection of fields as a string. Redefining these built-in types with a different kind (e.g., an input object, enum, union, or object type) is disallowed and makes the composition invalid.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1804-L1805">This rule ensures that built-in types maintain their expected shapes and semantics so the composed schema can correctly interpret them.</p>
</section>
<section id="sec-Type-Definition-Invalid.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1807"><a href="#sec-Type-Definition-Invalid.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1809-L1812">In the following counter-example, <code>FieldSelectionMap</code> is declared as an <code>input</code> type instead of the required <code>scalar</code>. This leads to a <code>TYPE_DEFINITION_INVALID</code> error because the defined scalar <code>FieldSelectionMap</code> is being overridden by an incompatible definition.</p>
<pre id="example-414cc" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1814-L1820"><a href="#example-414cc">Counter Example № 89</a><code><span class="token keyword">directive</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token class-name">FieldSelectionMap</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">ARGUMENT_DEFINITION</span>

<span class="token keyword">input</span> <span class="token object">FieldSelectionMap</span> <span class="token punctuation">{</span>
  <span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Type-Kind-Mismatch" secid="3.2.1.26">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1822"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Kind-Mismatch">3.2.1.26</a></span>Type Kind Mismatch</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L1824-L1825"><strong>Error Code</strong> <code>TYPE_KIND_MISMATCH</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L1827-L1828"><strong>Severity</strong> ERROR</p>
<section id="sec-Type-Kind-Mismatch.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1830"><a href="#sec-Type-Kind-Mismatch.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1832">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1833-L1839">For each type name <var data-name="typeName">typeName</var> defined in at least one of these schemas:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1834-L1835">Let <var data-name="types">types</var> be the set of all types named <var data-name="typeName">typeName</var> across all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1836-L1838">Let <var data-name="typeKinds">typeKinds</var> be the set of <a href="https://spec.graphql.org/October2021/#sec-Type-Kinds">type kinds</a> in <var data-name="types">types</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L1839"><var data-name="typeKinds">typeKinds</var> must contain exactly one element.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Type-Kind-Mismatch.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1841"><a href="#sec-Type-Kind-Mismatch.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1843-L1848">Each named type must represent the <strong>same</strong> kind of GraphQL type across all source schemas. For instance, a type named <code>User</code> must consistently be an object type, or consistently be an interface, and so forth. If one schema defines <code>User</code> as an object type, while another schema declares <code>User</code> as an interface (or input object, union, etc.), the schema composition process cannot merge these definitions coherently.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L1850-L1851">This rule ensures semantic consistency: a single type name cannot serve multiple, incompatible purposes in the final composed schema.</p>
</section>
<section id="sec-Type-Kind-Mismatch.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1853"><a href="#sec-Type-Kind-Mismatch.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1855">All schemas agree that <code>User</code> is an object type:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1857-L1875"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema C</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">joinedAt</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1877-L1878">In the following counter-example, <code>User</code> is defined as an object type in one of the schemas and as an interface in another. This violates the rule and results</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1880-L1897"><code><span class="token comment"># Schema A: `User` is an object type</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B: `User` is an interface</span>
<span class="token keyword">extend</span> <span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">friends</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema C: `User` is an input object</span>
<span class="token keyword">extend</span> <span class="token keyword">input</span> <span class="token object">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Invalid-Syntax" secid="3.2.1.27">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1899"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Invalid-Syntax">3.2.1.27</a></span>Provides Invalid Syntax</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L1901-L1902"><strong>Error Code</strong> <code>PROVIDES_INVALID_SYNTAX</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L1904-L1905"><strong>Severity</strong> ERROR</p>
<section id="sec-Provides-Invalid-Syntax.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1907"><a href="#sec-Provides-Invalid-Syntax.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1909">Let <var data-name="schemas">schemas</var> be the set of all source schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1910-L1916">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1911-L1912">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1913-L1916">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1914-L1915">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1916"><var data-name="fieldsArg">fieldsArg</var> must be a valid selection set string</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-Invalid-Syntax.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1918"><a href="#sec-Provides-Invalid-Syntax.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1920-L1923">The <code>@provides</code> directive&rsquo;s <code>fields</code> argument must be a syntactically valid selection set string, as if you were selecting fields in a GraphQL query. If the selection set is malformed (e.g., missing braces, unbalanced quotes, or invalid tokens), the schema composition fails with a <code>PROVIDES_INVALID_SYNTAX</code> error.</p>
</section>
<section id="sec-Provides-Invalid-Syntax.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1925"><a href="#sec-Provides-Invalid-Syntax.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1927">Here, the <code>@provides</code> directive&rsquo;s <code>fields</code> argument is a valid selection set:</p>
<pre id="example-69105" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1929-L1939"><a href="#example-69105">Example № 90</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">address</span><span class="token punctuation">:</span> <span class="token class-name">Address</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"street city"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Address</span> <span class="token punctuation">{</span>
  <span class="token attr-name">street</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L1941-L1943">In this counter-example, the <code>fields</code> argument is missing a closing brace. It cannot be parsed as a valid GraphQL selection set, triggering a <code>PROVIDES_INVALID_SYNTAX</code> error.</p>
<pre id="example-5e66d" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1945-L1950"><a href="#example-5e66d">Counter Example № 91</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">address</span><span class="token punctuation">:</span> <span class="token class-name">Address</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"{ street city "</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Invalid-GraphQL" secid="3.2.1.28">
<h4 data-source="spec/Section%204%20--%20Composition.md#L1952"><span class="spec-secid" title="link to this section"><a href="#sec-Invalid-GraphQL">3.2.1.28</a></span>Invalid GraphQL</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L1954-L1955"><strong>Error Code</strong> <code>INVALID_GRAPHQL</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L1957-L1958"><strong>Severity</strong> ERROR</p>
<section id="sec-Invalid-GraphQL.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1960"><a href="#sec-Invalid-GraphQL.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1962">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1963-L1966">For Each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var><ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1964"><var data-name="schema">schema</var> must be a syntactically valid</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1965-L1966"><var data-name="schema">schema</var> must be a semantically valid GraphQL schema according to the <a href="https://spec.graphql.org/">GraphQL specification</a>.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Invalid-GraphQL.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1968"><a href="#sec-Invalid-GraphQL.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1970-L1972">Before composition, every individual source schema must be valid as per the official GraphQL specification. Common reasons a schema may be considered &ldquo;invalid GraphQL&rdquo; include:</p>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L1974"><strong>Syntax Errors</strong>: Missing braces, invalid tokens, or misplaced punctuation.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1975-L1976"><strong>Unknown Types</strong>: Referencing types that are not defined within the schema or imported from elsewhere.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1977-L1978"><strong>Invalid Directive Usage</strong>: Omitting required arguments to directives or using directives in disallowed locations.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1979-L1981"><strong>Invalid Default Values</strong>: Providing default values for arguments or fields that do not conform to the type (e.g., a default of <code>null</code> for a non-null field, an invalid enum value, etc.).</li>
<li data-source="spec/Section%204%20--%20Composition.md#L1982-L1983"><strong>Conflicting Type Definitions</strong>: Defining or overriding a built-in type or directive incorrectly.</li>
</ul>
<p data-source="spec/Section%204%20--%20Composition.md#L1985-L1989">When any of these validation checks fail for a particular source schema, that schema does not meet the baseline requirements for composition, and the composition process cannot proceed. An <code>INVALID_GRAPHQL</code> error is raised, prompting the schema owner to correct the GraphQL violations before retrying composition.</p>
</section>
<section id="sec-Invalid-GraphQL.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L1991"><a href="#sec-Invalid-GraphQL.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L1993-L1994">In the following counter-example, the schema is invalid because the type <code>User</code> is referenced in the <code>Query</code> type but never defined:</p>
<pre id="example-0b1aa" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L1996-L2002"><a href="#example-0b1aa">Counter Example № 92</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token class-name">User</span>
<span class="token punctuation">}</span>

<span class="token comment"># The type "User" is never defined; this is invalid GraphQL.</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2004-L2005">In this counter-example, <code>"INVALID_VALUE"</code> is not a valid <code>Role</code>, causing <code>INVALID_GRAPHQL</code>.</p>
<pre id="example-5cc30" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2007-L2016"><a href="#example-5cc30">Counter Example № 93</a><code><span class="token keyword">enum</span> <span class="token class-name">Role</span> <span class="token punctuation">{</span>
  <span class="token constant">ADMIN</span>
  <span class="token constant">USER</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">users</span><span class="token punctuation">(</span><span class="token attr-name">role</span><span class="token punctuation">:</span> <span class="token class-name">Role</span> <span class="token operator">=</span> <span class="token string">"INVALID_VALUE"</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2018-L2020">The GraphQL spec requires all non-null directive arguments to be supplied. The omission of the <code>fields</code> argument in the <code>@provides</code> directive triggers <code>INVALID_GRAPHQL</code>.</p>
<pre id="example-10884" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2022-L2029"><a href="#example-10884">Counter Example № 94</a><code><span class="token keyword">directive</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span><span class="token punctuation">)</span> <span class="token keyword">on</span> <span class="token constant">FIELD_DEFINITION</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@provides</span>
  <span class="token comment"># "fields" argument is required, but not provided.</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Override-Collision-with-Another-Directive" secid="3.2.1.29">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2031"><span class="spec-secid" title="link to this section"><a href="#sec-Override-Collision-with-Another-Directive">3.2.1.29</a></span>Override Collision with Another Directive</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2033-L2034"><strong>Error Code</strong> <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2036-L2037"><strong>Severity</strong> ERROR</p>
<section id="sec-Override-Collision-with-Another-Directive.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2039"><a href="#sec-Override-Collision-with-Another-Directive.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2041">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2042-L2048">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2043">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2044-L2048">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2045">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2046-L2048">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2047-L2048">If <var data-name="field">field</var> is annotated with <code>@override</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2048"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@external</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-Collision-with-Another-Directive.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2050"><a href="#sec-Override-Collision-with-Another-Directive.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2052-L2057">The <code>@override</code> directive designates that ownership of a field is transferred from one source schema to another in the resulting composite schema. When such a transfer occurs, that field <strong>cannot</strong> also be annotated <code>@external</code>. A field declared as <code>@external</code> is originally defined in a <strong>different</strong> source schema. Overriding a field and simultaneously claiming it is external to the local schema is contradictory.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2059-L2060">In this case composition fails with an <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error.</p>
</section>
<section id="sec-Override-Collision-with-Another-Directive.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2062"><a href="#sec-Override-Collision-with-Another-Directive.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2064-L2066">In this scenario, <code>User.fullName</code> is defined in <strong>Schema A</strong> but overridden in <strong>Schema B</strong>. Since <code>@override</code> is <strong>not</strong> combined with any of <code>@external</code> on the same field, no collision occurs.</p>
<pre id="example-3f8b1" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2068-L2080"><a href="#example-3f8b1">Example № 95</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2082-L2085">Here, <code>amount</code> is marked with both <code>@override</code> and <code>@external</code>. This violates the rule because the field is simultaneously labeled as &ldquo;override from another schema&rdquo; and &ldquo;external&rdquo; in the local schema, producing an <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error.</p>
<pre id="example-50a93" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2087-L2099"><a href="#example-50a93">Counter Example № 96</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Override-from-Self-Error" secid="3.2.1.30">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2101"><span class="spec-secid" title="link to this section"><a href="#sec-Override-from-Self-Error">3.2.1.30</a></span>Override from Self Error</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2103-L2104"><strong>Error Code</strong> <code>OVERRIDE_FROM_SELF_ERROR</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2106-L2107"><strong>Severity</strong> ERROR</p>
<section id="sec-Override-from-Self-Error.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2109"><a href="#sec-Override-from-Self-Error.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2111">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2112-L2120">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2113">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2114-L2120">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2115">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2116-L2120">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2117-L2120">If <var data-name="field">field</var> is annotated with <code>@override</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2118-L2119">Let <var data-name="from">from</var> be the value of the <code>from</code> argument of the <code>@override</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2120"><var data-name="from">from</var> must <strong>not</strong> be the same as the name of <var data-name="schema">schema</var>:</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-from-Self-Error.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2122"><a href="#sec-Override-from-Self-Error.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2124-L2128">When using <code>@override</code>, the <code>from</code> argument indicates the name of the source schema that originally owns the field. Overriding from the <strong>same</strong> schema creates a contradiction, as it implies both local and transferred ownership of the field within one schema. If the <code>from</code> value matches the local schema name, it triggers an <code>OVERRIDE_FROM_SELF_ERROR</code>.</p>
</section>
<section id="sec-Override-from-Self-Error.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2130"><a href="#sec-Override-from-Self-Error.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2132-L2133">In the following example, <strong>Schema B</strong> overrides the field <code>amount</code> from <strong>Schema A</strong>. The two schema names are different, so no error is raised.</p>
<pre id="example-1c62b" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2135-L2147"><a href="#example-1c62b">Example № 97</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2149-L2151">In the following counter-example, the local schema is also <code>"SchemaA"</code>, and the <code>from</code> argument is <code>"SchemaA"</code>. Overriding a field from the same schema is not allowed, causing an <code>OVERRIDE_FROM_SELF_ERROR</code>.</p>
<pre id="example-fa30e" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2153-L2159"><a href="#example-fa30e">Counter Example № 98</a><code><span class="token comment"># Source Schema A (named "SchemaA")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Override-on-Interface" secid="3.2.1.31">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2161"><span class="spec-secid" title="link to this section"><a href="#sec-Override-on-Interface">3.2.1.31</a></span>Override on Interface</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2163-L2164"><strong>Error Code</strong> <code>OVERRIDE_ON_INTERFACE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2166-L2167"><strong>Severity</strong> ERROR</p>
<section id="sec-Override-on-Interface.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2169"><a href="#sec-Override-on-Interface.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2171">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2172-L2177">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2173">Let <var data-name="types">types</var> be the set of all interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2174-L2177">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2175">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2176-L2177">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2177"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@override</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-on-Interface.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2179"><a href="#sec-Override-on-Interface.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2181-L2187">The <code>@override</code> directive designates that ownership of a field is transferred from one source schema to another. In the context of interface types, fields are abstract&mdash;objects that implement the interface are responsible for providing the actual fields. Consequently, it is invalid to attach <code>@override</code> directly to an interface field. Doing so leads to an <code>OVERRIDE_ON_INTERFACE</code> error because there is no concrete field implementation on the interface itself that can be overridden.</p>
</section>
<section id="sec-Override-on-Interface.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2189"><a href="#sec-Override-on-Interface.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2191-L2193">In this valid example, <code>@override</code> is used on a field of an object type, ensuring that the field definition is concrete and can be reassigned to another schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2195">Since <code>@override</code> is <strong>not</strong> used on any interface fields, no error is produced.</p>
<pre id="example-eed64" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2197-L2209"><a href="#example-eed64">Example № 99</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2211-L2214">In the following counter-example, <code>Bill.amount</code> is declared on an <strong>interface</strong> type and annotated with <code>@override</code>. This violates the rule because the interface field itself is not eligible for ownership transfer. The composition fails with an <code>OVERRIDE_ON_INTERFACE</code> error.</p>
<pre id="example-22325" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2216-L2222"><a href="#example-22325">Counter Example № 100</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaB"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Override-Source-Has-Override" secid="3.2.1.32">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2224"><span class="spec-secid" title="link to this section"><a href="#sec-Override-Source-Has-Override">3.2.1.32</a></span>Override Source Has Override</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2226-L2227"><strong>Error Code</strong> <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2229-L2230"><strong>Severity</strong> ERROR</p>
<section id="sec-Override-Source-Has-Override.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2232"><a href="#sec-Override-Source-Has-Override.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2234">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2235-L2236">Let <var data-name="groupedTypes">groupedTypes</var> be a map grouping all object types from <var data-name="schemas">schemas</var> by their type name.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2237-L2263">For each <var data-name="typeGroup">typeGroup</var> in <var data-name="groupedTypes">groupedTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2238">Let <var data-name="types">types</var> be the set of object types in <var data-name="typeGroup">typeGroup</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2239-L2240">Let <var data-name="groupedFields">groupedFields</var> be a map grouping every field across all <var data-name="types">types</var> by their field name.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2241-L2263">For each <var data-name="fieldGroup">fieldGroup</var> in <var data-name="groupedFields">groupedFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2242">Let <var data-name="fields">fields</var> be the set of field definitions in <var data-name="fieldGroup">fieldGroup</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2243-L2244">Let <var data-name="overrides">overrides</var> be the list of <code>@override</code> directives present among those <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2245-L2246">If <var data-name="overrides">overrides</var> has fewer than 2 elements:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2246">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2247">Let <var data-name="firstOverride">firstOverride</var> be the first directive in <var data-name="overrides">overrides</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2248">Let <var data-name="from">from</var> be the value of the <code>from</code> argument on <var data-name="firstOverride">firstOverride</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2249">Let <var data-name="sourceSchema">sourceSchema</var> be the schema defining <var data-name="firstOverride">firstOverride</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2250">Let <var data-name="visited">visited</var> be an empty set.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2251">Add <var data-name="sourceSchema">sourceSchema</var> to <var data-name="visited">visited</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2252-L2262">While <var data-name="from">from</var> is not null:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2253"><var data-name="from">from</var> must <strong>not</strong> be in <var data-name="visited">visited</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2254">Add <var data-name="from">from</var> to <var data-name="visited">visited</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2255-L2256">Let <var data-name="sourceField">sourceField</var> be the field in <var data-name="fields">fields</var> that belongs to the schema named <var data-name="from">from</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2257-L2258">If <var data-name="sourceField">sourceField</var> does not exist:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2258">Break</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2259-L2260">If <var data-name="sourceField">sourceField</var> is <strong>not</strong> annotated with <code>@override</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2260">Break</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2261-L2262">Let <var data-name="from">from</var> be the value of the <code>from</code> argument on that <code>@override</code> directive.</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2263">The size of <var data-name="visited">visited</var> must be equal to the size of <var data-name="overrides">overrides</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Override-Source-Has-Override.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2265"><a href="#sec-Override-Source-Has-Override.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2267-L2271">A field marked with <code>@override</code> signifies that its ownership is being taken over by another schema. If multiple schemas try to override the same field, or if the ownership chain loops back on itself, the composed schema has more than one <code>@override</code> for a single field. This creates ambiguity about which schema ultimately owns that field.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2273-L2275">Hence, <strong>only one</strong> <code>@override</code> may ever apply to a particular field across all source schemas. Attempting multiple overrides, or forming any cycle of overrides for the same field, triggers the <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
</section>
<section id="sec-Override-Source-Has-Override.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2277"><a href="#sec-Override-Source-Has-Override.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2279-L2281">In this scenario, <code>Bill.amount</code> is originally owned by <strong>Schema A</strong> but is overridden in <strong>Schema B</strong>. No other schema further attempts to override the same field, so the composition is valid.</p>
<pre id="example-f4d46" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2283-L2295"><a href="#example-f4d46">Example № 101</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2297-L2300">Here, <strong>Schema A</strong> overrides <code>Bill.amount</code> from <strong>Schema B</strong>, while <strong>Schema B</strong> also overrides the same field from <strong>Schema A</strong>. This circular override makes it impossible to discern a single &ldquo;owner&rdquo; of the field <code>Bill.amount</code>, raising an <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
<pre id="example-e8e91" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2302-L2314"><a href="#example-e8e91">Counter Example № 102</a><code><span class="token comment"># Source Schema A (named "SchemaA")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaB"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B (named "SchemaB")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaA"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2316-L2318">In this case, the same field <code>Bill.amount</code> is overridden successively by A, then B, then C. Tracing these overrides forms a cycle (A &rarr; B &rarr; C &rarr; A). This again produces an <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
<pre id="example-147a2" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2320-L2338"><a href="#example-147a2">Counter Example № 103</a><code><span class="token comment"># Source Schema A (named "A")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"B"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B (named "B")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"C"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema C (named "C")</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"A"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2340-L2343">In the following counter-example, the field <code>Bill.amount</code> is overridden by multiple schemas. The overrides do not form a cycle, hence there are multiple overrides for the same field, triggering an <code>OVERRIDE_SOURCE_HAS_OVERRIDE</code> error.</p>
<pre id="example-13b23" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2345-L2363"><a href="#example-13b23">Counter Example № 104</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaC"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token attr-name">from</span><span class="token punctuation">:</span> <span class="token string">"SchemaC"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema C</span>
<span class="token keyword">type</span> <span class="token class-name">Bill</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">amount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-Collision-with-Another-Directive" secid="3.2.1.33">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2365"><span class="spec-secid" title="link to this section"><a href="#sec-External-Collision-with-Another-Directive">3.2.1.33</a></span>External Collision with Another Directive</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2367-L2368"><strong>Error Code</strong> <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2370-L2371"><strong>Severity</strong> ERROR</p>
<section id="sec-External-Collision-with-Another-Directive.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2373"><a href="#sec-External-Collision-with-Another-Directive.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2375">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2376-L2384">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2377">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2378-L2384">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2379">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2380-L2384">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2381-L2384">If <var data-name="field">field</var> is annotated with <code>@external</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2382-L2383">For each <var data-name="argument">argument</var> in <var data-name="field">field</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2383"><var data-name="argument">argument</var> must <strong>not</strong> be annotated with <code>@require</code></li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2384"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@provides</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-Collision-with-Another-Directive.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2386"><a href="#sec-External-Collision-with-Another-Directive.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2388-L2391">The <code>@external</code> directive indicates that a field is <strong>defined</strong> in a different source schema, and the current schema merely references it. Therefore, a field marked with <code>@external</code> must <strong>not</strong> simultaneously carry directives that assume local ownership or resolution responsibility, such as:</p>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2393-L2395"><strong><code>@provides</code></strong>: Declares that the field can supply additional nested fields from the local schema, which conflicts with the notion of an external field whose definition resides elsewhere.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2397-L2399"><strong><code>@require</code></strong>: Specifies dependencies on other fields to resolve this field. Since <code>@external</code> fields are not locally resolved, there is no need for <code>@require</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2401-L2403"><strong><code>@override</code></strong>: Transfers ownership of the field&rsquo;s definition from one schema to another, which is incompatible with an already-external field definition. Yet this is covered by the <code>OVERRIDE_COLLISION_WITH_ANOTHER_DIRECTIVE</code> rule.</li>
</ul>
<p data-source="spec/Section%204%20--%20Composition.md#L2405-L2407">Any combination of <code>@external</code> with either <code>@provides</code> or <code>@require</code> on the same field results in inconsistent semantics. In such scenarios, an <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error is raised.</p>
</section>
<section id="sec-External-Collision-with-Another-Directive.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2409"><a href="#sec-External-Collision-with-Another-Directive.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2411-L2412">In this example, <code>method</code> is <strong>only</strong> annotated with <code>@external</code> in Schema B, without any other directive. This usage is valid.</p>
<pre id="example-f01cf" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2414-L2427"><a href="#example-f01cf">Example № 105</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">method</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Payment</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token comment"># This field is external, defined in Schema A.</span>
  <span class="token attr-name">method</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2429-L2431">In this counter-example, <code>description</code> is annotated with <code>@external</code> and also with <code>@provides</code>. Because <code>@external</code> and <code>@provides</code> cannot co-exist on the same field, an <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error is produced.</p>
<pre id="example-3b199" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2433-L2445"><a href="#example-3b199">Counter Example № 106</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Invoice</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Invoice</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">description</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"length"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2447-L2449">The following example is invalid, since <code>title</code> is marked with both <code>@external</code> and has an argument that is annotated with <code>@require</code>. This conflict leads to an <code>EXTERNAL_COLLISION_WITH_ANOTHER_DIRECTIVE</code> error.</p>
<pre id="example-8d6ce" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2451-L2464"><a href="#example-8d6ce">Counter Example № 107</a><code><span class="token comment"># Source Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">subtitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Source Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">title</span><span class="token punctuation">(</span><span class="token attr-name">subtitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"subtitle"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Key-Invalid-Fields-Type" secid="3.2.1.34">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2466"><span class="spec-secid" title="link to this section"><a href="#sec-Key-Invalid-Fields-Type">3.2.1.34</a></span>Key Invalid Fields Type</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2468-L2469"><strong>Error Code</strong> <code>KEY_INVALID_FIELDS_TYPE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2471-L2472"><strong>Severity</strong> ERROR</p>
<section id="sec-Key-Invalid-Fields-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2474"><a href="#sec-Key-Invalid-Fields-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2476">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2477-L2483">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2478">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2479-L2483">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2480-L2483">If <var data-name="type">type</var> is annotated with <code>@key</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2481-L2482">Let <var data-name="fieldsArg">fieldsArg</var> be the value of the <code>fields</code> argument in the <code>@key</code> directive.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2483"><var data-name="fieldsArg">fieldsArg</var> must be a string.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Key-Invalid-Fields-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2485"><a href="#sec-Key-Invalid-Fields-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2487-L2491">The <code>@key</code> directive designates the fields used to identify a particular object uniquely. The <code>fields</code> argument accepts a <strong>string</strong> that represents a selection set (for example, <code>"id"</code>, or <code>"id otherField"</code>). If the <code>fields</code> argument is provided as any non-string type (e.g., <code>Boolean</code>, <code>Int</code>, <code>Array</code>), the schema fails to compose correctly because it cannot parse a valid field selection.</p>
</section>
<section id="sec-Key-Invalid-Fields-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2493"><a href="#sec-Key-Invalid-Fields-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2495-L2497">In this example, the <code>@key</code> directive&rsquo;s <code>fields</code> argument is the string <code>"id uuid"</code>, identifying two fields that form the object key. This usage is valid.</p>
<pre id="example-0025a" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2499-L2509"><a href="#example-0025a">Example № 108</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id uuid"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">uuid</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">users</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">User</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2511-L2513">Here, the <code>fields</code> argument is provided as a boolean (<code>true</code>) instead of a string. This violates the directive requirement and triggers a <code>KEY_INVALID_FIELDS_TYPE</code> error.</p>
<pre id="example-60ed5" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2515-L2519"><a href="#example-60ed5">Counter Example № 109</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Invalid-Fields-Type" secid="3.2.1.35">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2521"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Invalid-Fields-Type">3.2.1.35</a></span>Provides Invalid Fields Type</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2523-L2524"><strong>Error Code</strong> <code>PROVIDES_INVALID_FIELDS_TYPE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2526-L2527"><strong>Severity</strong> ERROR</p>
<section id="sec-Provides-Invalid-Fields-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2529"><a href="#sec-Provides-Invalid-Fields-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2531">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2532-L2540">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2533">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2534-L2540">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2535">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2536-L2540">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2537-L2540">If <var data-name="field">field</var> is annotated with <code>@provides</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2538-L2539">Let <var data-name="fieldsArg">fieldsArg</var> be the value of the <code>fields</code> argument on the <code>@provides</code> directive.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2540"><var data-name="fieldsArg">fieldsArg</var> must be a string.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-Invalid-Fields-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2542"><a href="#sec-Provides-Invalid-Fields-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2544-L2549">The <code>@provides</code> directive indicates that a field is <strong>providing</strong> one or more additional fields on the returned (child) type. The <code>fields</code> argument accepts a <strong>string</strong> representing a GraphQL selection set (for example, <code>"title author"</code>). If the <code>fields</code> argument is given as a non-string type (e.g., <code>Boolean</code>, <code>Int</code>, <code>Array</code>), the schema fails to compose because it cannot interpret a valid selection set.</p>
</section>
<section id="sec-Provides-Invalid-Fields-Type.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2551"><a href="#sec-Provides-Invalid-Fields-Type.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2553-L2555">In this valid example, the <code>@provides</code> directive on <code>details</code> uses the string <code>"features specifications"</code> to specify that both fields are provided in the child type <code>ProductDetails</code>.</p>
<pre id="example-1d352" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2557-L2571"><a href="#example-1d352">Example № 110</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">ProductDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"features specifications"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">features</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
  <span class="token attr-name">specifications</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">products</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Product</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2573-L2575">Here, the <code>@provides</code> directive includes a numeric value (<code>123</code>) instead of a string in its <code>fields</code> argument. This invalid usage raises a <code>PROVIDES_INVALID_FIELDS_TYPE</code> error.</p>
<pre id="example-d2d72" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2577-L2587"><a href="#example-d2d72">Counter Example № 111</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">ProductDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ProductDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">features</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
  <span class="token attr-name">specifications</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-on-Non-Composite-Field" secid="3.2.1.36">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2589"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-on-Non-Composite-Field">3.2.1.36</a></span>Provides on Non-Composite Field</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2591-L2592"><strong>Error Code</strong> <code>PROVIDES_ON_NON_COMPOSITE_FIELD</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2594-L2595"><strong>Severity</strong> ERROR</p>
<section id="sec-Provides-on-Non-Composite-Field.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2597"><a href="#sec-Provides-on-Non-Composite-Field.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2599">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2600-L2608">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2601">Let <var data-name="types">types</var> be the set of all object and interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2602-L2608">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2603">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2604-L2608">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2605-L2608">If <var data-name="field">field</var> is annotated with <code>@provides</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2606-L2607">Let <var data-name="fieldType">fieldType</var> be the base return type of <var data-name="field">field</var> (i.e., unwrapped of any <code>[ ]</code> or <code>!</code>).</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2608"><var data-name="fieldType">fieldType</var> must be a interface or object type.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Provides-on-Non-Composite-Field.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2610"><a href="#sec-Provides-on-Non-Composite-Field.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2612-L2617">The <code>@provides</code> directive allows a field to &ldquo;provide&rdquo; additional nested fields on the composite type it returns. If a field&rsquo;s base type is not an object or interface type (e.g., <code>String</code>, <code>Int</code>, <code>Boolean</code>, <code>Enum</code>, <code>Union</code>, or an <code>Input</code> type), it cannot hold nested fields for <code>@provides</code> to select. Consequently, attaching <code>@provides</code> to such a field is invalid and raises a <code>PROVIDES_ON_NON_OBJECT_FIELD</code> error.</p>
</section>
<section id="sec-Provides-on-Non-Composite-Field.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2619"><a href="#sec-Provides-on-Non-Composite-Field.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2621-L2622">Here, <code>profile</code> has an <strong>object</strong> base type <code>Profile</code>. The <code>@provides</code> directive can validly specify sub-fields like <code>settings { theme }</code>.</p>
<pre id="example-36e15" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2624-L2639"><a href="#example-36e15">Example № 112</a><code><span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">settings</span><span class="token punctuation">:</span> <span class="token class-name">Settings</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Settings</span> <span class="token punctuation">{</span>
  <span class="token attr-name">notificationsEnabled</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
  <span class="token attr-name">theme</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"settings { theme }"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2641-L2643">In this counter-example, <code>email</code> has a scalar base type (<code>String</code>). Because scalars do not expose sub-fields, attaching <code>@provides</code> to <code>email</code> triggers a <code>PROVIDES_ON_NON_OBJECT_FIELD</code> error.</p>
<pre id="example-6a7d1" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2645-L2650"><a href="#example-6a7d1">Counter Example № 113</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"length"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-External-on-Interface" secid="3.2.1.37">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2652"><span class="spec-secid" title="link to this section"><a href="#sec-External-on-Interface">3.2.1.37</a></span>External on Interface</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L2654-L2655"><strong>Error Code</strong> <code>EXTERNAL_ON_INTERFACE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2657-L2658"><strong>Severity</strong> ERROR</p>
<section id="sec-External-on-Interface.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2660"><a href="#sec-External-on-Interface.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2662">Let <var data-name="schemas">schemas</var> be the set of all source schemas to be composed.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2663-L2669">For each <var data-name="schema">schema</var> in <var data-name="schemas">schemas</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2664">Let <var data-name="types">types</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2665-L2669">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2666-L2669">If <var data-name="type">type</var> is an interface type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2667">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2668-L2669">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2669"><var data-name="field">field</var> must <strong>not</strong> be annotated with <code>@external</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-External-on-Interface.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2671"><a href="#sec-External-on-Interface.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2673-L2680">The <code>@external</code> directive indicates that a field is <strong>defined</strong> and <strong>resolved</strong> elsewhere, not in the current schema. In the case of an <strong>interface</strong> type, fields are <strong>abstract</strong> - they do not have direct resolutions at the interface level. Instead, each implementing object type provides the concrete field implementations. Marking an <strong>interface</strong> field with <code>@external</code> is therefore nonsensical, as there is no actual field resolution in the interface itself to &ldquo;borrow&rdquo; from another schema. Such usage raises an <code>EXTERNAL_ON_INTERFACE</code> error.</p>
</section>
<section id="sec-External-on-Interface.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2682"><a href="#sec-External-on-Interface.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2684-L2686">Here, the interface <code>Node</code> merely describes the field <code>id</code>. Object types <code>User</code> and <code>Product</code> implement and resolve <code>id</code>. No <code>@external</code> usage occurs on the interface itself, so no error is triggered.</p>
<pre id="example-35150" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2688-L2702"><a href="#example-35150">Example № 114</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">price</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2704-L2707">Since <code>id</code> is declared on an <strong>interface</strong> and marked with <code>@external</code>, the composition fails with <code>EXTERNAL_ON_INTERFACE</code>. An interface does not own the concrete field resolution, so it is invalid to mark any of its fields as external.</p>
<pre id="example-20eaa" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2709-L2713"><a href="#example-20eaa">Counter Example № 115</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Merge" secid="3.2.2">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2715"><span class="spec-secid" title="link to this section"><a href="#sec-Merge">3.2.2</a></span>Merge</h3>
<p data-source="spec/Section%204%20--%20Composition.md#L2717-L2720">During this stage, all definitions from each source schema are combined into a single schema. This section defines the rules for merging schema definitions. The goal is to create a composite schema that includes all type system members from each source schema that are publicly accessible.</p>
</section>
<section id="sec-Post-Merge-Validation" secid="3.2.3">
<h3 data-source="spec/Section%204%20--%20Composition.md#L2722"><span class="spec-secid" title="link to this section"><a href="#sec-Post-Merge-Validation">3.2.3</a></span>Post Merge Validation</h3>
<p data-source="spec/Section%204%20--%20Composition.md#L2724-L2729">After the schema is composed, there are certain validations that are only possible in the context of the fully merged schema. These validations verify overall consistency: for example, ensuring that no type is left without accessible fields, or that interfaces and their implementors remain compatible. This stage confirms that the combined schema remains coherent when considered as a whole.</p>
<section id="sec-Empty-Merged-Object-Type" secid="3.2.3.1">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2731"><span class="spec-secid" title="link to this section"><a href="#sec-Empty-Merged-Object-Type">3.2.3.1</a></span>Empty Merged Object Type</h4>
<section id="sec-Empty-Merged-Object-Type.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2733"><a href="#sec-Empty-Merged-Object-Type.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2735"><code>EMPTY_MERGED_OBJECT_TYPE</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L2737"><strong>Severity</strong> ERROR</p>
</section>
<section id="sec-Empty-Merged-Object-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2739"><a href="#sec-Empty-Merged-Object-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2741">Let <var data-name="types">types</var> be the set of all object types across all source schemas</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2742-L2743">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2743"><span class="spec-call"><a href="#IsObjectTypeEmpty()" data-name="IsObjectTypeEmpty">IsObjectTypeEmpty</a>(<var data-name="type">type</var>)</span> must be false.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="IsObjectTypeEmpty()" data-source="spec/Section%204%20--%20Composition.md#L2745-L2753">
<span class="spec-call"><a href="#IsObjectTypeEmpty()" data-name="IsObjectTypeEmpty">IsObjectTypeEmpty</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2747">If <var data-name="type">type</var> has <code>@inaccessible</code> directive</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2748">return false</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2749">Let <var data-name="fields">fields</var> be a set of all fields in <var data-name="type">type</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2750-L2752">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2751-L2752">If <span class="spec-call"><span data-name="IsAccessible">IsAccessible</span>(<var data-name="field">field</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2752">return false</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2753">return true</li>
</ol>
</div>
</section>
<section id="sec-Empty-Merged-Object-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2755"><a href="#sec-Empty-Merged-Object-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2757-L2761">For object types defined across multiple source schemas, the merged object type is the superset of all fields defined in these source schemas. However, any field marked with <code>@inaccessible</code> in any source schema is hidden and not included in the merged object type. An object type with no fields, after considering <code>@inaccessible</code> annotations, is considered empty and invalid.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2763-L2765">In the following example, the merged object type <code>ObjectType1</code> is valid. It includes all fields from both source schemas, with <code>field2</code> being hidden due to the <code>@inaccessible</code> directive in one of the source schemas:</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2767-L2777"><code><span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2779-L2781">If the <code>@inaccessible</code> directive is applied to an object type itself, the entire merged object type is excluded from the composite execution schema, and it is not required to contain any fields.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2783-L2792"><code><span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field3</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2794-L2797">This counter-example demonstrates an invalid merged object type. In this case, <code>ObjectType1</code> is defined in two source schemas, but all fields are marked as <code>@inaccessible</code> in at least one of the source schemas, resulting in an empty merged object type:</p>
<pre id="example-a5d81" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2799-L2809"><a href="#example-a5d81">Counter Example № 116</a><code><span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">ObjectType1</span> <span class="token punctuation">{</span>
  <span class="token attr-name">field1</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">field2</span><span class="token punctuation">:</span> <span class="token scalar">Boolean</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-No-Queries" secid="3.2.3.2">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2811"><span class="spec-secid" title="link to this section"><a href="#sec-No-Queries">3.2.3.2</a></span>No Queries</h4>
<section id="sec-No-Queries.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2813"><a href="#sec-No-Queries.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2815"><code>NO_QUERIES</code></p>
</section>
<section id="sec-No-Queries.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2817"><a href="#sec-No-Queries.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2819">ERROR</p>
</section>
<section id="sec-No-Queries.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2821"><a href="#sec-No-Queries.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2823-L2824">Let <var data-name="fields">fields</var> be the set of all fields in the <code>Query</code> type of the merged schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2825"><span class="spec-call"><a href="#HasPublicField()" data-name="HasPublicField">HasPublicField</a>(<var data-name="fields">fields</var>)</span> must be true.</li>
</ul>
<div class="spec-algo" id="HasPublicField()" data-source="spec/Section%204%20--%20Composition.md#L2827-L2832">
<span class="spec-call"><a href="#HasPublicField()" data-name="HasPublicField">HasPublicField</a>(<var data-name="fields">fields</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2829-L2831">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2830-L2831">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="field">field</var>)</span> is true<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L2831">return true</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2832">return false</li>
</ol>
</div>
</section>
<section id="sec-No-Queries.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2834"><a href="#sec-No-Queries.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2836-L2837">This rule ensures that the composed schema includes at least one accessible field on the root <code>Query</code> type.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2839-L2841">In GraphQL, the <code>Query</code> type is essential as it defines the entry points for read operations. If none of the composed schemas expose any query fields, the composed schema would lack a root query, making it a invalid GraphQL schema.</p>
</section>
<section id="sec-No-Queries.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2843"><a href="#sec-No-Queries.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2845-L2846">In this example, at least one schema provides accessible query fields, satisfying the rule.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2848-L2857"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2859-L2870"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">review</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Review</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Review</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">content</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">rating</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2872-L2873">Even if some query fields are marked as <code>@inaccessible</code>, as long as there is at least one accessible query field in the composed schema, the rule is satisfied.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2875-L2878">In this case, Schema A exposes an internal query field <code>internalData</code> marked with <code>@inaccessible</code>, making it hidden in the composed schema. However, Schema B provides an accessible <code>product</code> query field. Therefore, the composed schema has at least one accessible query field, adhering to the rule.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2880-L2889"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">internalData</span><span class="token punctuation">:</span> <span class="token class-name">InternalData</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">InternalData</span> <span class="token punctuation">{</span>
  <span class="token attr-name">secret</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2891-L2901"><code><span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">product</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Product</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2903-L2904">If all query fields in all schemas are marked as <code>@inaccessible</code>, the composed schema will lack accessible query fields, violating the rule.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2906-L2907">In the following counter-example, both schemas have query fields, but all are marked as <code>@inaccessible</code>.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2909-L2910">This means there are no accessible query fields in the composed schema, triggering the <code>NO_QUERIES</code> error.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2912-L2921"><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">internalData</span><span class="token punctuation">:</span> <span class="token class-name">InternalData</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">InternalData</span> <span class="token punctuation">{</span>
  <span class="token attr-name">secret</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2923-L2932"><code><span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">adminStats</span><span class="token punctuation">:</span> <span class="token class-name">AdminStats</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">AdminStats</span> <span class="token punctuation">{</span>
  <span class="token attr-name">userCount</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Implemented-by-Inaccessible" secid="3.2.3.3">
<h4 data-source="spec/Section%204%20--%20Composition.md#L2934"><span class="spec-secid" title="link to this section"><a href="#sec-Implemented-by-Inaccessible">3.2.3.3</a></span>Implemented by Inaccessible</h4>
<section id="sec-Implemented-by-Inaccessible.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2936"><a href="#sec-Implemented-by-Inaccessible.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2938"><code>IMPLEMENTED_BY_INACCESSIBLE</code></p>
</section>
<section id="sec-Implemented-by-Inaccessible.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2940"><a href="#sec-Implemented-by-Inaccessible.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2942">ERROR</p>
</section>
<section id="sec-Implemented-by-Inaccessible.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2944"><a href="#sec-Implemented-by-Inaccessible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2946">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2947">Let <var data-name="types">types</var> be the set of all object types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2948-L2958">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2949-L2958">If <var data-name="type">type</var> is not marked with <code>@inaccessible</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2950-L2951">Let <var data-name="implementedInterfaces">implementedInterfaces</var> be the set of all interfaces implemented by <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L2952-L2958">For each <var data-name="field">field</var> in <var data-name="type">type</var>&lsquo;s fields:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2953-L2958">If <var data-name="field">field</var> is marked with <code>@inaccessible</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2954-L2958">For each <var data-name="implementedInterface">implementedInterface</var> in <var data-name="implementedInterfaces">implementedInterfaces</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2955-L2956">Let <var data-name="interfaceField">interfaceField</var> be the field on <var data-name="implementedInterface">implementedInterface</var> that has the same name as <var data-name="field">field</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L2957-L2958">If <var data-name="interfaceField">interfaceField</var> exists:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L2958"><span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="interfaceField">interfaceField</var>)</span> must be false</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Implemented-by-Inaccessible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2960"><a href="#sec-Implemented-by-Inaccessible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2962-L2968">This rule ensures that inaccessible fields (<code>@inaccessible</code>) on an object type are not exposed through an interface. An object type that implements an interface must provide public access to each field defined by the interface. If a field on an object type is marked as <code>@inaccessible</code> but implements an interface field that is visible in the composed schema, this creates a contradiction: the interface contract requires that field to be accessible, yet the object type implementation hides it.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L2970-L2972">This rule prevents inconsistencies in the composed schema, ensuring that every interface field visible in the composed schema is also publicly visible on all types implementing that interface.</p>
</section>
<section id="sec-Implemented-by-Inaccessible.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L2974"><a href="#sec-Implemented-by-Inaccessible.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L2976-L2977">In the following example, <code>User.id</code> is accessible and implements <code>Node.id</code> which is also accessible, no error occurs.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2979-L2989"><code><span class="token comment"># The interface field `id` is visible and provided by `User` without @inaccessible.</span>
<span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L2991-L2993">Since <code>Auditable</code> and its field <code>lastAudit</code> are <code>@inaccessible</code>, the <code>Order.lastAudit</code> field is allowed to be <code>@inaccessible</code> because it does not implement any visible interface field in the composed schema.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L2995-L3005"><code><span class="token comment"># The entire interface is @inaccessible, thus its fields are not publicly visible.</span>
<span class="token keyword">interface</span> <span class="token class-name">Auditable</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lastAudit</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token keyword">implements</span> <span class="token class-name">Auditable</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lastAudit</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span><span class="token operator">!</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">orderNumber</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3007-L3010">In this example, <code>Node.id</code> is visible in the public schema (no <code>@inaccessible</code>), but <code>User.id</code> is marked <code>@inaccessible</code>. This violates the interface contract because <code>User</code> claims to implement <code>Node</code>, yet does not expose the <code>id</code> field to the public schema.</p>
<pre id="example-6c1d1" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3012-L3021"><a href="#example-6c1d1">Counter Example № 117</a><code><span class="token keyword">interface</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token keyword">implements</span> <span class="token class-name">Node</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Interface-Field-No-Implementation" secid="3.2.3.4">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3023"><span class="spec-secid" title="link to this section"><a href="#sec-Interface-Field-No-Implementation">3.2.3.4</a></span>Interface Field No Implementation</h4>
<section id="sec-Interface-Field-No-Implementation.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3025"><a href="#sec-Interface-Field-No-Implementation.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3027"><code>INTERFACE_FIELD_NO_IMPLEMENTATION</code></p>
</section>
<section id="sec-Interface-Field-No-Implementation.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3029"><a href="#sec-Interface-Field-No-Implementation.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3031">ERROR</p>
</section>
<section id="sec-Interface-Field-No-Implementation.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3033"><a href="#sec-Interface-Field-No-Implementation.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3035">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3036">Let <var data-name="objectTypes">objectTypes</var> be the set of all object types defined in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3037-L3044">For each <var data-name="objectType">objectType</var> in <var data-name="objectTypes">objectTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3038">Let <var data-name="interfaces">interfaces</var> be the set of interface types that <var data-name="objectType">objectType</var> implements.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3039-L3044">For each <var data-name="interface">interface</var> in <var data-name="interfaces">interfaces</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3040-L3041">Let <var data-name="interfaceFields">interfaceFields</var> be the set of fields defined on <var data-name="interface">interface</var> that are visible in the merged schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3042-L3044">For each <var data-name="field">field</var> in <var data-name="interfaceFields">interfaceFields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3043-L3044">If <var data-name="field">field</var> is not present on <var data-name="objectType">objectType</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3044">Produce an <code>INTERFACE_FIELD_NO_IMPLEMENTATION</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Interface-Field-No-Implementation.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3046"><a href="#sec-Interface-Field-No-Implementation.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3048-L3052">In GraphQL, any object type that implements an interface must provide a field definition for every field declared by that interface. If an object type fails to implement a particular field required by one of its interfaces, the composite schema becomes invalid because the resulting schema breaks the contract defined by that interface.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3054-L3057">This rule checks that object types merged from different sources correctly implement all interface fields. In scenarios where a schema defines an interface field, but the implementing object type in another schema omits that field, an error is raised.</p>
</section>
<section id="sec-Interface-Field-No-Implementation.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3059"><a href="#sec-Interface-Field-No-Implementation.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3061-L3063">In this valid example, the <code>User</code> interface has three fields: <code>id</code>, <code>name</code>, and <code>email</code>. Both the <code>RegisteredUser</code> and <code>GuestUser</code> types implement all three fields, satisfying the interface contract.</p>
<pre id="example-2b227" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3065-L3093"><a href="#example-2b227">Example № 118</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RegisteredUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">lastLogin</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">GuestUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">temporaryCartId</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3095-L3097">In this counter-example, the <code>User</code> interface is defined with three fields, but the <code>GuestUser</code> type omits one of them (<code>email</code>), causing an <code>INTERFACE_FIELD_NO_IMPLEMENTATION</code> error.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3099-L3102">Although <code>GuestUser</code> implements <code>User</code>, it does not provide the <code>email</code> field. Since the merged schema sees that the interface <code>User</code> has <code>email</code> but <code>GuestUser</code> does not provide it, the schema composition fails with the <code>INTERFACE_FIELD_NO_IMPLEMENTATION</code> error.</p>
<pre id="example-bfdae" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3104-L3130"><a href="#example-bfdae">Counter Example № 119</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">RegisteredUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">lastLogin</span><span class="token punctuation">:</span> <span class="token class-name">DateTime</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">interface</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">GuestUser</span> <span class="token keyword">implements</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">temporaryCartId</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Invalid-Field-Sharing" secid="3.2.3.5">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3132"><span class="spec-secid" title="link to this section"><a href="#sec-Invalid-Field-Sharing">3.2.3.5</a></span>Invalid Field Sharing</h4>
<section id="sec-Invalid-Field-Sharing.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3134"><a href="#sec-Invalid-Field-Sharing.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3136"><code>INVALID_FIELD_SHARING</code></p>
</section>
<section id="sec-Invalid-Field-Sharing.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3138"><a href="#sec-Invalid-Field-Sharing.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3140">ERROR</p>
</section>
<section id="sec-Invalid-Field-Sharing.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3142"><a href="#sec-Invalid-Field-Sharing.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3144">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3145">Let <var data-name="types">types</var> be the set of all object and interface types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3146-L3160">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3147-L3151">If <var data-name="type">type</var> is the <code>Subscription</code> type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3148">Let <var data-name="fields">fields</var> be the set of all fields in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3149-L3151">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3150-L3151">If <var data-name="field">field</var> is marked with <code>@shareable</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3151">Produce an <code>INVALID_FIELD_SHARING</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3152-L3160">Otherwise:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3153">Let <var data-name="fields">fields</var> be the set of all fields on <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3154-L3160">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3155-L3160">If <var data-name="field">field</var> is not part of a <code>@key</code> directive:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3156-L3158">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the set of all field definitions for <var data-name="field">field</var> across all source schemas excluding fields marked with <code>@external</code> or <code>@override</code>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3159-L3160">If <var data-name="fieldDefinitions">fieldDefinitions</var> has more than one element:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3160"><var data-name="field">field</var> must be marked as <code>@shareable</code> in at least one schema.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Invalid-Field-Sharing.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3162"><a href="#sec-Invalid-Field-Sharing.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3164-L3167">A field in a federated GraphQL schema may be marked <code>@shareable</code>, indicating that the same field can be resolved by multiple schemas without conflict. When a field is <strong>not</strong> marked as <code>@shareable</code> (sometimes called &ldquo;non-shareable&rdquo;), it cannot be provided by more than one schema.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3169-L3171">Field definitions marked as <code>@external</code> or <code>@override</code> are excluded when validating whether a field is shareable. These annotations indicate specific cases where field ownership lies with another schema or has been replaced.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3173-L3176">Additionally, subscription root fields cannot be shared (i.e., they are effectively non-shareable), as subscription events from multiple schemas would create conflicts in the composed schema. Attempting to mark a subscription field as shareable or to define it in multiple schemas triggers the same error.</p>
</section>
<section id="sec-Invalid-Field-Sharing.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3178"><a href="#sec-Invalid-Field-Sharing.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3180-L3181">In this example, the <code>User</code> type field <code>fullName</code> is marked as shareable in both schemas, allowing them to serve consistent data for that field without conflict.</p>
<pre id="example-7ca60" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3183-L3197"><a href="#example-7ca60">Example № 120</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">username</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3199-L3201">In the following example, <code>User.fullName</code> is overridden in one schema and therefore the field can be define in multiple schemas without being marked as <code>@shareable</code>.</p>
<pre id="example-e72bc" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3203-L3215"><a href="#example-e72bc">Example № 121</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@override</span><span class="token punctuation">(</span><span class="token property">from</span><span class="token description string">"<span class="token language-markdown">: </span>"</span><span class="token constant">B</span>"<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3217-L3219">In the following example, <code>User.fullName</code> is marked as <code>@external</code> in one schema and therefore the field can be define in the other schema without being marked as <code>@shareable</code>.</p>
<pre id="example-794db" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3221-L3233"><a href="#example-794db">Example № 122</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@external</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">fullName</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3235-L3237">In the following counter-example, <code>User.profile</code> is non-shareable but is defined and resolved by two different schemas, resulting in an <code>INVALID_FIELD_SHARING</code> error.</p>
<pre id="example-14c20" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3239-L3259"><a href="#example-14c20">Counter Example № 123</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">avatarUrl</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">avatarUrl</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3261-L3263">By definition, root subscription fields cannot be shared across multiple schemas. In this example, both schemas define a subscription field <code>newOrderPlaced</code>:</p>
<pre id="example-877ca" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3265-L3280"><a href="#example-877ca">Counter Example № 124</a><code><span class="token comment"># Schema A</span>
<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newOrderPlaced</span><span class="token punctuation">:</span> <span class="token class-name">Order</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">items</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

<span class="token comment"># Schema B</span>
<span class="token keyword">type</span> <span class="token class-name">Subscription</span> <span class="token punctuation">{</span>
  <span class="token attr-name">newOrderPlaced</span><span class="token punctuation">:</span> <span class="token class-name">Order</span> <span class="token directive function">@shareable</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Invalid-Shareable-Usage" secid="3.2.3.6">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3282"><span class="spec-secid" title="link to this section"><a href="#sec-Invalid-Shareable-Usage">3.2.3.6</a></span>Invalid Shareable Usage</h4>
<section id="sec-Invalid-Shareable-Usage.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3284"><a href="#sec-Invalid-Shareable-Usage.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3286"><code>INVALID_SHAREABLE_USAGE</code></p>
</section>
<section id="sec-Invalid-Shareable-Usage.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3288"><a href="#sec-Invalid-Shareable-Usage.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3290">ERROR</p>
</section>
<section id="sec-Invalid-Shareable-Usage.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3292"><a href="#sec-Invalid-Shareable-Usage.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3294">Let <var data-name="schema">schema</var> be one of the composed schemas.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3295">Let <var data-name="types">types</var> be the set of types defined in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3296-L3300">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3297-L3300">If <var data-name="type">type</var> is an interface type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3298-L3300">For each field definition <var data-name="field">field</var> in <var data-name="type">type</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3299-L3300">If <var data-name="field">field</var> is annotated with <code>@shareable</code>, produce an <code>INVALID_SHAREABLE_USAGE</code> error.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Invalid-Shareable-Usage.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3302"><a href="#sec-Invalid-Shareable-Usage.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3304-L3307">The <code>@shareable</code> directive is intended to indicate that a field on an <strong>object type</strong> can be resolved by multiple schemas without conflict. As a result, it is only valid to use <code>@shareable</code> on fields <strong>of object types</strong> (or on the entire object type itself).</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3309-L3312">Applying <code>@shareable</code> to interface fields is disallowed and violates the valid usage of the directive. This rule prevents schema composition errors and data conflicts by ensuring that <code>@shareable</code> is used only in contexts where shared field resolution is meaningful and unambiguous.</p>
</section>
<section id="sec-Invalid-Shareable-Usage.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3314"><a href="#sec-Invalid-Shareable-Usage.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3316-L3318">In this example, the field <code>orderStatus</code> on the <code>Order</code> object type is marked with <code>@shareable</code>, which is allowed. It signals that this field can be served from multiple schemas without creating a conflict.</p>
<pre id="example-dcf02" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3320-L3326"><a href="#example-dcf02">Example № 125</a><code><span class="token keyword">type</span> <span class="token class-name">Order</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">orderStatus</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">total</span><span class="token punctuation">:</span> <span class="token scalar">Float</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3328-L3330">In this example, the <code>InventoryItem</code> interface has a field <code>sku</code> marked with <code>@shareable</code>, which is invalid usage. Marking an interface field as shareable leads to an <code>INVALID_SHAREABLE_USAGE</code> error.</p>
<pre id="example-b7d31" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3332-L3337"><a href="#example-b7d31">Counter Example № 126</a><code><span class="token keyword">interface</span> <span class="token class-name">InventoryItem</span> <span class="token punctuation">{</span>
  <span class="token attr-name">sku</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@shareable</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Only-Inaccessible-Children" secid="3.2.3.7">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3339"><span class="spec-secid" title="link to this section"><a href="#sec-Only-Inaccessible-Children">3.2.3.7</a></span>Only Inaccessible Children</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L3341-L3342"><strong>Error Code</strong> <code>ONLY_INACCESSIBLE_CHILDREN</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3344-L3345"><strong>Severity</strong> ERROR</p>
<section id="sec-Only-Inaccessible-Children.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3347"><a href="#sec-Only-Inaccessible-Children.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3349">Let <var data-name="schema">schema</var> be the composed schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3350">Let <var data-name="types">types</var> be the set of all types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3351-L3365">For each <var data-name="type">type</var> in <var data-name="types">types</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3352-L3353">If <span class="spec-call"><span data-name="IsExposed">IsExposed</span>(<var data-name="type">type</var>)</span> is false:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3353">continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3354-L3355">If <var data-name="type">type</var> is the query, mutation, or subscription root type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3355">continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3356-L3357">If <var data-name="type">type</var> is an object type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3357"><span class="spec-call"><a href="#HasObjectTypeAccessibleChildren()" data-name="HasObjectTypeAccessibleChildren">HasObjectTypeAccessibleChildren</a>(<var data-name="type">type</var>)</span> must be true</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3358-L3359">If <var data-name="type">type</var> is an enum type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3359"><span class="spec-call"><a href="#HasEnumAccessibleChildren()" data-name="HasEnumAccessibleChildren">HasEnumAccessibleChildren</a>(<var data-name="type">type</var>)</span> must be true</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3360-L3361">If <var data-name="type">type</var> is an input object type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3361"><span class="spec-call"><a href="#HasInputObjectAccessibleChildren()" data-name="HasInputObjectAccessibleChildren">HasInputObjectAccessibleChildren</a>(<var data-name="type">type</var>)</span> must be true</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3362-L3363">If <var data-name="type">type</var> is an interface type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3363"><span class="spec-call"><a href="#HasInterfaceAccessibleChildren()" data-name="HasInterfaceAccessibleChildren">HasInterfaceAccessibleChildren</a>(<var data-name="type">type</var>)</span> must be true</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3364-L3365">If <var data-name="type">type</var> is a union type:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3365"><span class="spec-call"><a href="#HasUnionAccessibleChildren()" data-name="HasUnionAccessibleChildren">HasUnionAccessibleChildren</a>(<var data-name="type">type</var>)</span> must be true</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="HasObjectTypeAccessibleChildren()" data-source="spec/Section%204%20--%20Composition.md#L3367-L3373">
<span class="spec-call"><a href="#HasObjectTypeAccessibleChildren()" data-name="HasObjectTypeAccessibleChildren">HasObjectTypeAccessibleChildren</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3369">Let <var data-name="fields">fields</var> be the set of all fields in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3370-L3372">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3371-L3372">If <var data-name="field">field</var> is <strong>not</strong> marked with <code>@inaccessible</code> and <strong>not</strong> <code>@internal</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3372">return true</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3373">return false</li>
</ol>
</div>
<div class="spec-algo" id="HasEnumAccessibleChildren()" data-source="spec/Section%204%20--%20Composition.md#L3375-L3381">
<span class="spec-call"><a href="#HasEnumAccessibleChildren()" data-name="HasEnumAccessibleChildren">HasEnumAccessibleChildren</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3377">Let <var data-name="values">values</var> be the set of all values in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3378-L3380">For each <var data-name="value">value</var> in <var data-name="values">values</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3379-L3380">If <var data-name="value">value</var> is <strong>not</strong> marked with <code>@inaccessible</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3380">return true</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3381">return false</li>
</ol>
</div>
<div class="spec-algo" id="HasInputObjectAccessibleChildren()" data-source="spec/Section%204%20--%20Composition.md#L3383-L3389">
<span class="spec-call"><a href="#HasInputObjectAccessibleChildren()" data-name="HasInputObjectAccessibleChildren">HasInputObjectAccessibleChildren</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3385">Let <var data-name="fields">fields</var> be the set of all fields in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3386-L3388">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3387-L3388">If <var data-name="value">value</var> is <strong>not</strong> marked with <code>@inaccessible</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3388">return true</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3389">return false</li>
</ol>
</div>
<div class="spec-algo" id="HasInterfaceAccessibleChildren()" data-source="spec/Section%204%20--%20Composition.md#L3391-L3397">
<span class="spec-call"><a href="#HasInterfaceAccessibleChildren()" data-name="HasInterfaceAccessibleChildren">HasInterfaceAccessibleChildren</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3393">Let <var data-name="fields">fields</var> be the set of all fields in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3394-L3396">For each <var data-name="field">field</var> in <var data-name="fields">fields</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3395-L3396">If <var data-name="field">field</var> is <strong>not</strong> marked with <code>@inaccessible</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3396">return true</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3397">return false</li>
</ol>
</div>
<div class="spec-algo" id="HasUnionAccessibleChildren()" data-source="spec/Section%204%20--%20Composition.md#L3399-L3406">
<span class="spec-call"><a href="#HasUnionAccessibleChildren()" data-name="HasUnionAccessibleChildren">HasUnionAccessibleChildren</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3401">Let <var data-name="members">members</var> be the set of all member types in <var data-name="type">type</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3402-L3405">For each <var data-name="member">member</var> in <var data-name="members">members</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3403">Let <var data-name="type">type</var> be the type of <var data-name="member">member</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3404-L3405">If <var data-name="type">type</var> is <strong>not</strong> marked with <code>@inaccessible</code>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3405">return true</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3406">return false</li>
</ol>
</div>
</section>
<section id="sec-Only-Inaccessible-Children.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3408"><a href="#sec-Only-Inaccessible-Children.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3410-L3414">A type that is <strong>not</strong> annotated with <code>@inaccessible</code> is expected to appear in the composed schema. If, however, all of its child elements (fields in an object or interface, values in an enum, fields in an input object or all types of a union) are individually marked <code>@inaccessible</code> (or <code>@internal</code>), then there are no accessible sub-parts of that type for consumers to query or reference.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3416-L3421">Allowing such a type to remain in the composed schema despite having no publicly visible fields or values leads to an invalid schema. This rule enforces that a type visible in the composed schema must have at least one accessible child. Otherwise, it triggers an <code>ONLY_INACCESSIBLE_CHILDREN</code> error, prompting the user to either make the entire type <code>@inaccessible</code> or expose at least one child element.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3423-L3424">Additionally, the rule applies to all types except the query, mutation, and subscription root types.</p>
</section>
<section id="sec-Only-Inaccessible-Children.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3426"><a href="#sec-Only-Inaccessible-Children.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3428-L3430">In the following example, the <code>Profile</code> type is included in the composed schema, and <code>Profile.email</code> is <strong>not</strong> marked with <code>@inaccessible</code>. This satisfies the rule, as there is at least one accessible child element.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3432-L3442"><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3444-L3446">In the following example, all fields of the <code>Profile</code> type are marked with <code>@inaccessible</code>. But since <code>Profile</code> itself is marked with <code>@inaccessible</code>, it is not required to have any accessible children.</p>
<pre data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3448-L3458"><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token directive function">@inaccessible</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3460-L3462">The <code>Profile</code> type is included in the composed schema (no <code>@inaccessible</code> on the type), but <strong>all</strong> of its fields are marked <code>@inaccessible</code>, triggering an <code>ONLY_INACCESSIBLE_CHILDREN</code> error.</p>
<pre id="example-9d31c" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3464-L3474"><a href="#example-9d31c">Counter Example № 127</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">profile</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
  <span class="token attr-name">email</span><span class="token punctuation">:</span> <span class="token scalar">String</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3476-L3477">In this example, the <code>DeliveryStatus</code> enum is not annotated with <code>@inaccessible</code>, yet all of its values are.</p>
<p data-source="spec/Section%204%20--%20Composition.md#L3479-L3480">Since there are no publicly visible values, an <code>ONLY_INACCESSIBLE_CHILDREN</code> error is produced.</p>
<pre id="example-e3340" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3482-L3488"><a href="#example-e3340">Counter Example № 128</a><code><span class="token keyword">enum</span> <span class="token class-name">DeliveryStatus</span> <span class="token punctuation">{</span>
  <span class="token constant">PENDING</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">SHIPPED</span> <span class="token directive function">@inaccessible</span>
  <span class="token constant">DELIVERED</span> <span class="token directive function">@inaccessible</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Require-Invalid-Fields" secid="3.2.3.8">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3490"><span class="spec-secid" title="link to this section"><a href="#sec-Require-Invalid-Fields">3.2.3.8</a></span>Require Invalid Fields</h4>
<section id="sec-Require-Invalid-Fields.Error-Code" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3492"><a href="#sec-Require-Invalid-Fields.Error-Code" title="link to this subsection">Error Code</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3494"><code>REQUIRE_INVALID_FIELDS</code></p>
</section>
<section id="sec-Require-Invalid-Fields.Severity" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3496"><a href="#sec-Require-Invalid-Fields.Severity" title="link to this subsection">Severity</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3498">ERROR</p>
</section>
<section id="sec-Require-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3500"><a href="#sec-Require-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3502">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3503">Let <var data-name="compositeTypes">compositeTypes</var> be the set of all composite types in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3504-L3513">For each <var data-name="composite">composite</var> in <var data-name="compositeTypes">compositeTypes</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3505">Let <var data-name="fields">fields</var> be the set of fields on <var data-name="composite">composite</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3506">Let <var data-name="arguments">arguments</var> be the set of all arguments on <var data-name="fields">fields</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3507-L3513">For each <var data-name="argument">argument</var> in <var data-name="arguments">arguments</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3508-L3509">If <var data-name="argument">argument</var> is <strong>not</strong> annotated with <code>@require</code>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3509">Continue</li>
</ul>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3510-L3511">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of the <code>@require</code> directive on <var data-name="argument">argument</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3512">Let <var data-name="parsedFieldsArg">parsedFieldsArg</var> be the parsed selection map from <var data-name="fieldsArg">fieldsArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3513"><span class="spec-call"><a href="#ValidateSelectionMap()" data-name="ValidateSelectionMap">ValidateSelectionMap</a>(<var data-name="parsedFieldsArg">parsedFieldsArg</var>, <var data-name="parentType">parentType</var>)</span> must be true.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="ValidateSelectionMap()" data-source="spec/Section%204%20--%20Composition.md#L3515-L3528">
<span class="spec-call"><a href="#ValidateSelectionMap()" data-name="ValidateSelectionMap">ValidateSelectionMap</a>(<var data-name="selectionMap">selectionMap</var>, <var data-name="parentType">parentType</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3517-L3527">For each <var data-name="selection">selection</var> in <var data-name="selectionMap">selectionMap</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3518">Let <var data-name="field">field</var> be the field selected by <var data-name="selection">selection</var> on <var data-name="parentType">parentType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3519-L3520">If <var data-name="field">field</var> is <strong>not</strong> defined on <var data-name="parentType">parentType</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3520">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3521">Let <var data-name="fieldType">fieldType</var> be the type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3522-L3527">If <var data-name="fieldType">fieldType</var> is not a scalar type<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3523">Let <var data-name="subSelections">subSelections</var> be the selections in <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L3524-L3525">If <var data-name="subSelections">subSelections</var> is empty<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3525">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3526-L3527">If <span class="spec-call"><a href="#ValidateSelectionMap()" data-name="ValidateSelectionMap">ValidateSelectionMap</a>(<var data-name="subSelections">subSelections</var>, <var data-name="fieldType">fieldType</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3527">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3528">return true</li>
</ol>
</div>
</section>
<section id="sec-Require-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3530"><a href="#sec-Require-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3532-L3536">Even if the selection map for <code>@require(fields: "…")</code> is syntactically valid, its contents must also be valid within the composed schema. Fields must exist on the parent type for them to be referenced by <code>@require</code>. In addition, fields requiring unknown fields break the valid usage of <code>@require</code>, leading to a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
</section>
<section id="sec-Require-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3538"><a href="#sec-Require-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3540-L3541">In the following example, the <code>@require</code> directive&rsquo;s <code>fields</code> argument is a valid selection set and satisfies the rule.</p>
<pre id="example-6c28c" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3543-L3554"><a href="#example-6c28c">Example № 129</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token property-query">profile</span><span class="token punctuation">(</span><span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"name"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Profile</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3556-L3557">In this counter-example, the <code>@require</code> directive does not have a valid selection set and triggers a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
<pre id="example-32088" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3559-L3568"><a href="#example-32088">Counter Example № 130</a><code><span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">title</span><span class="token punctuation">(</span><span class="token attr-name">lang</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"author { }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3570-L3572">In this counter-example, the <code>@require</code> directive references a field (<code>unknown</code>) that does not exist on the parent type (<code>Book</code>), causing a <code>REQUIRE_INVALID_FIELDS</code> error.</p>
<pre id="example-9be16" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3574-L3579"><a href="#example-9be16">Counter Example № 131</a><code><span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">pages</span><span class="token punctuation">(</span><span class="token attr-name">pageSize</span><span class="token punctuation">:</span> <span class="token scalar">Int</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"unknownField"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Provides-Invalid-Fields" secid="3.2.3.9">
<h4 data-source="spec/Section%204%20--%20Composition.md#L3581"><span class="spec-secid" title="link to this section"><a href="#sec-Provides-Invalid-Fields">3.2.3.9</a></span>Provides Invalid Fields</h4>
<p data-source="spec/Section%204%20--%20Composition.md#L3583-L3584"><strong>Error Code</strong> <code>PROVIDES_INVALID_FIELDS</code></p>
<p data-source="spec/Section%204%20--%20Composition.md#L3586-L3587"><strong>Severity</strong> ERROR</p>
<section id="sec-Provides-Invalid-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3589"><a href="#sec-Provides-Invalid-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3591">Let <var data-name="schema">schema</var> be the merged composite execution schema.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3592-L3593">Let <var data-name="fieldsWithProvides">fieldsWithProvides</var> be the set of all fields annotated with the <code>@provides</code> directive in <var data-name="schema">schema</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3594-L3599">For each <var data-name="field">field</var> in <var data-name="fieldsWithProvides">fieldsWithProvides</var>:<ul>
<li data-source="spec/Section%204%20--%20Composition.md#L3595-L3596">Let <var data-name="fieldsArg">fieldsArg</var> be the string value of the <code>fields</code> argument of the <code>@provides</code> directive on <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3597">Let <var data-name="parsedSelectionSet">parsedSelectionSet</var> be the parsed selection set from <var data-name="fieldsArg">fieldsArg</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3598">Let <var data-name="returnType">returnType</var> be the return type of <var data-name="field">field</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3599"><span class="spec-call"><a href="#ValidateSelectionSet()" data-name="ValidateSelectionSet">ValidateSelectionSet</a>(<var data-name="parsedSelectionSet">parsedSelectionSet</var>, <var data-name="returnType">returnType</var>)</span> must be true.</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="ValidateSelectionSet()" data-source="spec/Section%204%20--%20Composition.md#L3601-L3613">
<span class="spec-call"><a href="#ValidateSelectionSet()" data-name="ValidateSelectionSet">ValidateSelectionSet</a>(<var data-name="selectionSet">selectionSet</var>, <var data-name="parentType">parentType</var>)</span><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3603-L3612">For each <var data-name="selection">selection</var> in <var data-name="selectionSet">selectionSet</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3604">Let <var data-name="selectedField">selectedField</var> be the field named by <var data-name="selection">selection</var> in <var data-name="parentType">parentType</var>.</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3605-L3606">If <var data-name="selectedField">selectedField</var> does not exist on <var data-name="parentType">parentType</var>:<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3606">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3607-L3612">If <var data-name="selectedField">selectedField</var> returns a composite type then <var data-name="selection">selection</var><ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3608">Let <var data-name="subSelections">subSelections</var> be the selections in <var data-name="selection">selection</var></li>
<li data-source="spec/Section%204%20--%20Composition.md#L3609-L3610">If <var data-name="subSelections">subSelections</var> is empty<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3610">return false</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3611-L3612">If <span class="spec-call"><a href="#ValidateSelectionSet()" data-name="ValidateSelectionSet">ValidateSelectionSet</a>(<var data-name="subSelections">subSelections</var>, <var data-name="fieldType">fieldType</var>)</span> is false<ol>
<li data-source="spec/Section%204%20--%20Composition.md#L3612">return false</li>
</ol>
</li>
</ol>
</li>
</ol>
</li>
<li data-source="spec/Section%204%20--%20Composition.md#L3613">return true</li>
</ol>
</div>
</section>
<section id="sec-Provides-Invalid-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3615"><a href="#sec-Provides-Invalid-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3617-L3621">Even if the <code>@provides(fields: "…")</code> argument is well-formed syntactically, the selected fields must actually exist on the return type of the field. Invalid field references&mdash; e.g., selecting non-existent fields, referencing fields on the wrong type, or incorrectly omitting required nested selections&mdash;lead to a <code>PROVIDES_INVALID_FIELDS</code> error.</p>
</section>
<section id="sec-Provides-Invalid-Fields.Examples" class="subsec">
<h6 data-source="spec/Section%204%20--%20Composition.md#L3623"><a href="#sec-Provides-Invalid-Fields.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Section%204%20--%20Composition.md#L3625-L3626">In the following example, the <code>@provides</code> directive references a valid field (<code>hobbies</code>) on the <code>UserDetails</code> type.</p>
<pre id="example-270d7" class="spec-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3628-L3637"><a href="#example-270d7">Example № 132</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">UserDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"hobbies"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hobbies</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Section%204%20--%20Composition.md#L3639-L3641">In the following counter-example, the <code>@provides</code> directive specifies a field named <code>unknownField</code> which is not defined on <code>UserDetails</code>. This raises a <code>PROVIDES_INVALID_FIELDS</code> error.</p>
<pre id="example-a93fe" class="spec-counter-example" data-language="graphql" data-source="spec/Section%204%20--%20Composition.md#L3643-L3652"><a href="#example-a93fe">Counter Example № 133</a><code><span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token directive function">@key</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">details</span><span class="token punctuation">:</span> <span class="token class-name">UserDetails</span> <span class="token directive function">@provides</span><span class="token punctuation">(</span><span class="token attr-name">fields</span><span class="token punctuation">:</span> <span class="token string">"unknownField"</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">UserDetails</span> <span class="token punctuation">{</span>
  <span class="token attr-name">hobbies</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">String</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="sec-Validate-Satisfiability" secid="3.3">
<h2 data-source="spec/Section%204%20--%20Composition.md#L3654"><span class="spec-secid" title="link to this section"><a href="#sec-Validate-Satisfiability">3.3</a></span>Validate Satisfiability</h2>
<p data-source="spec/Section%204%20--%20Composition.md#L3656-L3660">The final step confirms that the composite schema supports executable queries without leading to invalid conditions. Each query path defined in the merged schema is checked to ensure that every field can be resolved. If any query path is unresolvable, the schema is deemed unsatisfiable, and composition fails. </p>
</section>
</section>
<section id="sec-Executor" secid="4">
<h1 data-source="spec/Section%205%20--%20Execution.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Executor">4</a></span>Executor</h1>
<p data-source="spec/Section%205%20--%20Execution.md#L3-L6">A distributed GraphQL executor acts as an orchestrator that uses schema metadata to rewrite a GraphQL request into a query plan. This plan resolves the required data from subgraphs and coerces this data into the result of the GraphQL request.</p>
<section id="sec-Configuration" secid="4.1">
<h2 data-source="spec/Section%205%20--%20Execution.md#L8"><span class="spec-secid" title="link to this section"><a href="#sec-Configuration">4.1</a></span>Configuration</h2>
<p data-source="spec/Section%205%20--%20Execution.md#L10-L13">The supergraph is a GraphQL IDL document that contains metadata for the query planner that describes the relationship between type system members and the type system members on subgraphs. </p>
</section>
</section>
<section id="sec-Shared-Types" secid="5">
<h1 data-source="spec/Section%206%20--%20Shared%20Types.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Types">5</a></span>Shared Types</h1>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L3-L4">In this section we outline directives and types that are shared between the subgraph configuration and the gateway configuration document.</p>
<section id="sec-Shared-Types.Name" secid="5.1">
<h2 data-source="spec/Section%206%20--%20Shared%20Types.md#L6"><span class="spec-secid" title="link to this section"><a href="#sec-Shared-Types.Name">5.1</a></span>Name</h2>
<pre data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L8-L10"><code><span class="token keyword">scalar</span> <span class="token class-name">Name</span>
</code></pre>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L12">The scalar <code>Name</code> represents a valid GraphQL type name.</p>
</section>
<section id="sec-FieldSelection" secid="5.2">
<h2 data-source="spec/Section%206%20--%20Shared%20Types.md#L14"><span class="spec-secid" title="link to this section"><a href="#sec-FieldSelection">5.2</a></span>FieldSelection</h2>
<pre data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L16-L18"><code><span class="token keyword">scalar</span> <span class="token class-name">FieldSelection</span>
</code></pre>
<p data-source="spec/Section%206%20--%20Shared%20Types.md#L20">The scalar <code>FieldSelection</code> represents a GraphQL field selection syntax.</p>
<pre id="example-fa3a8" class="spec-example" data-language="graphql" data-source="spec/Section%206%20--%20Shared%20Types.md#L22-L24"><a href="#example-fa3a8">Example № 134</a><code><span class="token property-query">abc</span><span class="token punctuation">(</span><span class="token attr-name">def</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token property">ghi</span> <span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar" secid="6">
<h1 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L1"><span class="spec-secid" title="link to this section"><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar">6</a></span>Appendix A: Specification of FieldSelectionMap Scalar</h1>
<section id="sec-Introduction" secid="6.1">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L3"><span class="spec-secid" title="link to this section"><a href="#sec-Introduction">6.1</a></span>Introduction</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L5-L10">This appendix focuses on the specification of the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar type. <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is designed to express semantic equivalence between arguments of a field and fields within the result type. Specifically, it allows defining complex relationships between input arguments and fields in the output object by encapsulating these relationships within a parsable string format. It is used in the <code>@is</code> and <code>@require</code> directives.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L12">To illustrate, consider a simple example from a GraphQL schema:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L14-L18"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L20-L22">In this schema, the <code>userById</code> query uses the <code>@is</code> directive with <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> to declare that the <code>userId</code> argument is semantically equivalent to the <code>User.id</code> field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L24">An example query might look like this:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L26-L32"><code><span class="token keyword">query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">userId</span><span class="token punctuation">:</span> <span class="token string">"123"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token property">id</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L34-L35">Here, it is expected that the <code>userId</code> &ldquo;123&rdquo; corresponds directly to <code>User.id</code>, resulting in the following response if correctly implemented:</p>
<pre data-language="json" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L37-L45"><code><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"userById"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"id"</span><span class="token operator">:</span> <span class="token string">"123"</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L47-L48">The <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar is represented as a string that, when parsed, produces a <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L50-L52">A <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> must exactly match the shape of the argument value to be considered valid. For non-scalar arguments, you must specify each field of the input type in <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>.</p>
<pre id="example-4e764" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L54-L59"><a href="#example-4e764">Example № 135</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUserByName</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ firstName: firstName }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span>
    <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<pre id="example-b659f" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L61-L65"><a href="#example-b659f">Counter Example № 136</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUserByName</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"firstName"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec-Scope" secid="6.1.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L67"><span class="spec-secid" title="link to this section"><a href="#sec-Scope">6.1.1</a></span>Scope</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L69-L72">The <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar type is used to establish semantic equivalence between an argument and fields within a specific output type. This output type is always a composite type, but the way it&rsquo;s determined can vary depending on the directive and context in which the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is used.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L74-L77">For example, when used with the <code>@is</code> directive, the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> maps between the argument and fields in the return type of the field. However, when used with the <code>@require</code> directive, it maps between the argument and fields in the object type on which the field is defined.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L79">Consider this example:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L81-L90"><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token property-query">delivery</span><span class="token punctuation">(</span>
    <span class="token attr-name">zip</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
    <span class="token attr-name">size</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.size"</span><span class="token punctuation">)</span>
    <span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.weight"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">DeliveryEstimates</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L92-L93">In this case, <code>"dimension.size"</code> and <code>"dimension.weight"</code> refer to fields of the <code>Product</code> type, not the <code>DeliveryEstimates</code> return type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L95-L97">Consequently, a <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> must be interpreted in the context of a specific argument, its associated directive, and the relevant output type as determined by that directive&rsquo;s behavior.</p>
<section id="sec-Scope.Examples" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L99"><a href="#sec-Scope.Examples" title="link to this subsection">Examples</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L101">Scalar fields can be mapped directly to arguments.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L103">This example maps the <code>Product.weight</code> field to the <code>weight</code> argument:</p>
<pre id="example-bbc71" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L105-L109"><a href="#example-bbc71">Example № 137</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L111">This example maps the <code>Product.shippingWeight</code> field to the <code>weight</code> argument:</p>
<pre id="example-c801d" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L113-L117"><a href="#example-c801d">Example № 138</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"shippingWeight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L119-L120">Nested fields can be mapped to arguments by specifying the path. This example maps the nested field <code>Product.packaging.weight</code> to the <code>weight</code> argument:</p>
<pre id="example-ed66f" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L122-L126"><a href="#example-ed66f">Example № 139</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">weight</span><span class="token punctuation">:</span> <span class="token scalar">Float</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"packaging.weight"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L128">Complex objects can be mapped to arguments by specifying each field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L130-L131">This example maps the <code>Product.width</code> and <code>Product.height</code> fields to the <code>dimension</code> argument:</p>
<pre id="example-55571" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L133-L139"><a href="#example-55571">Example № 140</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: width height: height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L141">The shorthand equivalent is:</p>
<pre id="example-59fba" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L143-L149"><a href="#example-59fba">Example № 141</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L151-L152">In case the input field names do not match the output field names, explicit mapping is required.</p>
<pre id="example-e314c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L154-L160"><a href="#example-e314c">Example № 142</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ w: width h: height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L162-L163">Even if <code>Product.dimension</code> has all the fields needed for the input object, an explicit mapping is always required.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L165">This example is NOT allowed because it lacks explicit mapping:</p>
<pre id="example-9430e" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L167-L171"><a href="#example-9430e">Counter Example № 143</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L173">Instead, you can traverse into output fields by specifying the path.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L175">This example shows how to map nested fields explicitly:</p>
<pre id="example-be69a" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L177-L184"><a href="#example-be69a">Example № 144</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: dimension.width height: dimension.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L186-L187">The path does NOT affect the structure of the input object. It is only used to traverse the output object:</p>
<pre id="example-e916c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L189-L196"><a href="#example-e916c">Example № 145</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: size.width height: size.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L198-L199">To avoid repeating yourself, you can prefix the selection with a path that ends in a dot to traverse INTO the output type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L201-L202">This affects how fields get interpreted but does NOT affect the structure of the input object:</p>
<pre id="example-fd4cb" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L204-L210"><a href="#example-fd4cb">Example № 146</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.{ width height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L212">This example is equivalent to the previous one:</p>
<pre id="example-27e4c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L214-L220"><a href="#example-27e4c">Example № 147</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"size.{ width height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L222-L223">The path syntax is required for lists because list-valued path expressions would be ambiguous otherwise.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L225">This example is NOT allowed because it lacks the dot syntax for lists:</p>
<pre id="example-fa3c5" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L227-L234"><a href="#example-fa3c5">Counter Example № 148</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">DimensionInput</span><span class="token punctuation">]</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ width: dimensions.width height: dimensions.height }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L236">Instead, use the path syntax and brackets to specify the list elements:</p>
<pre id="example-e3457" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L238-L244"><a href="#example-e3457">Example № 149</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">DimensionInput</span><span class="token punctuation">]</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimensions[{ width height }]"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L246-L247">With the path syntax it is possible to also select fields from a list of nested objects:</p>
<pre id="example-bcf9b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L249-L253"><a href="#example-bcf9b">Example № 150</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
    <span class="token property-query">shippingCost</span><span class="token punctuation">(</span><span class="token attr-name">partIds</span><span class="token punctuation">:</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L255-L256">For more complex input objects, all these constructs can be nested. This allows for detailed and precise mappings.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L258-L259">This example nests the <code>weight</code> field and the <code>dimension</code> object with its <code>width</code> and <code>height</code> fields:</p>
<pre id="example-c07d2" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L261-L268"><a href="#example-c07d2">Example № 151</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: dimension.{ width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L270-L271">This example nests the <code>weight</code> field and the <code>size</code> object with its <code>width</code> and <code>height</code> fields:</p>
<pre id="example-40460" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L273-L280"><a href="#example-40460">Example № 152</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, size: dimension.{ width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L282">The label can be used to nest values that aren&rsquo;t nested in the output.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L284">This example nests <code>Product.width</code> and <code>Product.height</code> under <code>dimension</code>:</p>
<pre id="example-79bb3" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L286-L293"><a href="#example-79bb3">Example № 153</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: { width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L295">In the following example, dimensions are nested under <code>dimension</code> in the output:</p>
<pre id="example-70210" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L297-L304"><a href="#example-70210">Example № 154</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">package</span><span class="token punctuation">:</span> <span class="token atom-input class-name">PackageInput</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ weight, dimension: dimension.{ width height } }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Currency</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
<section id="sec-Language" secid="6.2">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L306"><span class="spec-secid" title="link to this section"><a href="#sec-Language">6.2</a></span>Language</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L308-L309">According to the GraphQL specification, an argument is a key-value pair in which the key is the name of the argument and the value is a <code>Value</code>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L311-L313">The <code>Value</code> of an argument can take various forms: it might be a scalar value (such as <code>Int</code>, <code>Float</code>, <code>String</code>, <code>Boolean</code>, <code>Null</code>, or <code>Enum</code>), a list (<code>ListValue</code>), an input object (<code>ObjectValue</code>), or a <code>Variable</code>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L315-L317">Within the scope of the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span>, the relationship between input and output is established by defining the <code>Value</code> of the argument as a selection of fields from the output object.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L319-L321">Yet only certain types of <code>Value</code> have a semantic meaning. <code>ObjectValue</code> and <code>ListValue</code> are used to define the structure of the value. Scalar values, on the other hand, do not carry semantic importance in this context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L323-L324">While variables may have legitimate use cases, they are considered out of scope for the current discussion.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L326-L327">However, it&rsquo;s worth noting that there could be potential applications for allowing them in the future.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L329-L331">Given that these potential values do not align with the standard literals defined in the GraphQL specification, a new literal called <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> is introduced, along with <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L333">Beyond these literals, an additional literal called <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is necessary.</p>
<section id="sec-Language.Name" secid="6.2.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L335"><span class="spec-secid" title="link to this section"><a href="#sec-Language.Name">6.2.1</a></span>Name</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L337-L338">Is equivalent to the <span class="spec-nt"><span data-name="Name">Name</span></span> defined in the <a href="https://spec.graphql.org/October2021/#Name">GraphQL specification</a></p>
</section>
<section id="sec-Path" secid="6.2.2">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L340"><span class="spec-secid" title="link to this section"><a href="#sec-Path">6.2.2</a></span>Path</h3>
<div class="spec-production d2" id="Path" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L342-L345">
<span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><div class="spec-rhs"><span class="spec-t">&lt;</span><span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><span class="spec-t">&gt;</span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
</div>
<div class="spec-production d2" id="PathSegment" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L347-L351">
<span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span><div class="spec-rhs"><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><span class="spec-t">&lt;</span><span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><span class="spec-t">&gt;</span><span class="spec-t">.</span><span class="spec-nt"><a href="#PathSegment" data-name="PathSegment">PathSegment</a></span></div>
</div>
<div class="spec-production d2" id="FieldName" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L353-L355">
<span class="spec-nt"><a href="#FieldName" data-name="FieldName">FieldName</a></span><div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<div class="spec-production d2" id="TypeName" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L357-L359">
<span class="spec-nt"><a href="#TypeName" data-name="TypeName">TypeName</a></span><div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L361-L363">The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> literal is a string used to select a single output value from the <em>return type</em> by specifying a path to that value. This path is defined as a sequence of field names, each separated by a period (<code>.</code>) to create segments.</p>
<pre id="example-0327e" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L365-L367"><a href="#example-0327e">Example № 155</a><code><span class="token property">book</span>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L369-L371">Each segment specifies a field in the context of the parent, with the root segment referencing a field in the <em>return type</em> of the query. Arguments are not allowed in a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L373-L375">To select a field when dealing with abstract types, the segment selecting the parent field must specify the concrete type of the field using angle brackets after the field name if the field is not defined on an interface.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L377-L378">In the following example, the path <code>mediaById&lt;Book&gt;.isbn</code> specifies that <code>mediaById</code> returns a <code>Book</code>, and the <code>isbn</code> field is selected from that <code>Book</code>.</p>
<pre id="example-db2de" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L380-L382"><a href="#example-db2de">Example № 156</a><code><span class="token property">mediaById</span>&lt;<span class="token property">Book</span>>.<span class="token property">isbn</span>
</code></pre>
</section>
<section id="sec-SelectedValue" secid="6.2.3">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L384"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedValue">6.2.3</a></span>SelectedValue</h3>
<div class="spec-production d2" id="SelectedValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L386-L391">
<span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><div class="spec-rhs"><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span><span class="spec-t">.</span><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></div>
<div class="spec-rhs"><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><span class="spec-t">|</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L393">A <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> is defined as either a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> or a <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span></p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L395-L398">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is designed to point to only a single value, although it may reference multiple fields depending on the return type. To allow selection from different paths based on type, a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> can include multiple paths separated by a pipe (<code>|</code>).</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L400-L401">In the following example, the value could be <code>title</code> when referring to a <code>Book</code> and <code>movieTitle</code> when referring to a <code>Movie</code>.</p>
<pre id="example-1cfdd" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L403-L405"><a href="#example-1cfdd">Example № 157</a><code><span class="token property">mediaById</span>&lt;<span class="token property">Book</span>>.<span class="token property">title</span> <span class="token operator">|</span> <span class="token property">mediaById</span>&lt;<span class="token property">Movie</span>>.<span class="token property">movieTitle</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L407-L409">The <code>|</code> operator can be used to match multiple possible <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>. This operator is applied when mapping an abstract output type to a <code>@oneOf</code> input type.</p>
<pre id="example-cf298" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L411-L413"><a href="#example-cf298">Example № 158</a><code><span class="token punctuation">{</span> <span class="token attr-name">movieId</span><span class="token punctuation">:</span> &lt;<span class="token property">Movie</span>>.<span class="token property">id</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token attr-name">productId</span><span class="token punctuation">:</span> &lt;<span class="token property">Product</span>>.<span class="token property">id</span> <span class="token punctuation">}</span>
</code></pre>
<pre id="example-a050b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L415-L417"><a href="#example-a050b">Example № 159</a><code><span class="token punctuation">{</span> <span class="token attr-name">nested</span><span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token attr-name">movieId</span><span class="token punctuation">:</span> &lt;<span class="token property">Movie</span>>.<span class="token property">id</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token attr-name">productId</span><span class="token punctuation">:</span> &lt;<span class="token property">Product</span>>.<span class="token property">id</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec-SelectedObjectValue" secid="6.2.4">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L419"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedObjectValue">6.2.4</a></span>SelectedObjectValue</h3>
<div class="spec-production d2" id="SelectedObjectValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L421-L423">
<span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span><div class="spec-rhs"><span class="spec-t">{</span><span class="spec-quantified"><span class="spec-nt"><a href="#SelectedObjectField" data-name="SelectedObjectField">SelectedObjectField</a></span><span class="spec-quantifiers"><span class="spec-quantifier list">list</span></span></span><span class="spec-t">}</span></div>
</div>
<div class="spec-production d2" id="SelectedObjectField" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L425-L427">
<span class="spec-nt"><a href="#SelectedObjectField" data-name="SelectedObjectField">SelectedObjectField</a></span><div class="spec-rhs"><span class="spec-nt"><span data-name="Name">Name</span></span><span class="spec-t">:</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L429-L431"><span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> are unordered lists of keyed input values wrapped in curly-braces <code>{}</code>. It has to be used when the expected input type is an object type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L433-L436">This structure is similar to the <code>ObjectValue</code> defined in the GraphQL specification, but it differs by allowing the inclusion of <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> values within a <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span>, thus extending the traditional <code>ObjectValue</code> capabilities to support direct path selections.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L438-L442">A <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> following a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is scoped to the type of the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. This means that the root of all <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> inside the selection is no longer scoped to the root (defined by <code>@is</code> or <code>@require</code>) but to the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> does not affect the structure of the input type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L444">This allows for reducing repetition in the selection.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L446">The following example is valid:</p>
<pre id="example-50236" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L448-L455"><a href="#example-50236">Example № 160</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token class-name">Dimension</span><span class="token operator">!</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimension</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"dimension.{ size weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L457">The following example is equivalent to the previous one:</p>
<pre id="example-733bd" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L459-L467"><a href="#example-733bd">Example № 161</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token class-name">Dimension</span><span class="token operator">!</span>
  <span class="token property-query">shippingCost</span><span class="token punctuation">(</span>
    <span class="token attr-name">dimensions</span><span class="token punctuation">:</span> <span class="token atom-input class-name">DimensionInput</span><span class="token operator">!</span>
      <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ size: dimensions.size weight: dimensions.weight }"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
<section id="sec-SelectedListValue" secid="6.2.5">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L469"><span class="spec-secid" title="link to this section"><a href="#sec-SelectedListValue">6.2.5</a></span>SelectedListValue</h3>
<div class="spec-production d2" id="SelectedListValue" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L471-L473">
<span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span><div class="spec-rhs"><span class="spec-t">[</span><span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span><span class="spec-t">]</span></div>
</div>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L475-L478">A <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> is an ordered list of <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> wrapped in square brackets <code>[]</code>. It is used to express semantic equivalence between an argument expecting a list of values and the values of a list field within the output object.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L480-L481">The <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> differs from the <code>ListValue</code> defined in the GraphQL specification by only allowing one <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> as an element.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L483">The following example is valid:</p>
<pre id="example-fa029" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L485-L490"><a href="#example-fa029">Example № 162</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">partIds</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L492-L493">In this example, the <code>partIds</code> argument is semantically equivalent to the <code>id</code> fields of the <code>parts</code> list.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L495-L496">The following example is invalid because it uses multiple <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> as elements:</p>
<pre id="example-6046e" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L498-L508"><a href="#example-6046e">Counter Example № 163</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[id name]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L510-L512">A <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span> can be used as an element of a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> to select multiple object fields as long as the input type is a list of structurally equivalent objects.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L514-L518">Similar to <span class="spec-nt"><a href="#SelectedObjectValue" data-name="SelectedObjectValue">SelectedObjectValue</a></span>, a <span class="spec-nt"><a href="#SelectedListValue" data-name="SelectedListValue">SelectedListValue</a></span> following a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is scoped to the type of the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. This means that the root of all <span class="spec-nt"><a href="#SelectedValue" data-name="SelectedValue">SelectedValue</a></span> inside the selection is no longer scoped to the root (defined by <code>@is</code> or <code>@require</code>) but to the field selected by the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>. The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> does not affect the structure of the input type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L520">The following example is valid:</p>
<pre id="example-1e02e" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L522-L532"><a href="#example-1e02e">Example № 164</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span><span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[{ id name }]"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L534-L535">In case the input type is a nested list, the shape of the input object must match the shape of the output object.</p>
<pre id="example-60610" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L537-L549"><a href="#example-60610">Example № 165</a><code><span class="token keyword">type</span> <span class="token class-name">Product</span> <span class="token punctuation">{</span>
  <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token class-name">Part</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token property-query">partIds</span><span class="token punctuation">(</span>
    <span class="token attr-name">parts</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token atom-input class-name">PartInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token operator">!</span> <span class="token directive function">@require</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"parts[[{ id name }]]"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PartInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L551">The following example is valid:</p>
<pre id="example-39bac" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L553-L578"><a href="#example-39bac">Example № 166</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findLocation</span><span class="token punctuation">(</span>
    <span class="token attr-name">location</span><span class="token punctuation">:</span> <span class="token atom-input class-name">LocationInput</span><span class="token operator">!</span>
      <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ coordinates: coordinates[{lat: x lon: y}]}"</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Location</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Coordinate</span> <span class="token punctuation">{</span>
  <span class="token attr-name">x</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">y</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Location</span> <span class="token punctuation">{</span>
  <span class="token attr-name">coordinates</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Coordinate</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">PositionInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">lat</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
  <span class="token attr-name">lon</span><span class="token punctuation">:</span> <span class="token scalar">Int</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">LocationInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">coordinates</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token atom-input class-name">PositionInput</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Validation" secid="6.3">
<h2 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L580"><span class="spec-secid" title="link to this section"><a href="#sec-Validation">6.3</a></span>Validation</h2>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L582-L583">Validation ensures that <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalars are semantically correct within the given context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L585-L587">Validation of <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalars occurs during the composition phase, ensuring that all <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> entries are syntactically correct and semantically meaningful relative to the context.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L589-L591">Composition is only possible if the <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> is validated successfully. An invalid <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> results in undefined behavior, making composition impossible.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L593-L594">In this section, we will assume the following type system in order to demonstrate examples:</p>
<pre data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L596-L641"><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token attr-name">mediaById</span><span class="token punctuation">(</span><span class="token attr-name">mediaId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Media</span>
  <span class="token attr-name">findMedia</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Media</span>
  <span class="token attr-name">searchStore</span><span class="token punctuation">(</span><span class="token attr-name">search</span><span class="token punctuation">:</span> <span class="token atom-input class-name">SearchStoreInput</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Store</span><span class="token punctuation">]</span><span class="token operator">!</span>
  <span class="token attr-name">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">media</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Media</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Book</span> <span class="token keyword">implements</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">title</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">isbn</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">author</span><span class="token punctuation">:</span> <span class="token class-name">Author</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Movie</span> <span class="token keyword">implements</span> <span class="token class-name">Media</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">movieTitle</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
  <span class="token attr-name">releaseDate</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Author</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">books</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">Book</span><span class="token operator">!</span><span class="token punctuation">]</span><span class="token operator">!</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">FindMediaInput</span> <span class="token directive function">@oneOf</span> <span class="token punctuation">{</span>
  <span class="token attr-name">bookId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">movieId</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token atom-input class-name">SearchStoreInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
  <span class="token attr-name">hasInStock</span><span class="token punctuation">:</span> <span class="token atom-input class-name">FindMediaInput</span>
<span class="token punctuation">}</span>
</code></pre>
<section id="sec-Path-Field-Selections" secid="6.3.1">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L643"><span class="spec-secid" title="link to this section"><a href="#sec-Path-Field-Selections">6.3.1</a></span>Path Field Selections</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L645-L646">Each segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must correspond to a valid field defined on the current type context.</p>
<section id="sec-Path-Field-Selections.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L648"><a href="#sec-Path-Field-Selections.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L650-L653">For each <var data-name="segment">segment</var> in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L651-L653">If the <var data-name="segment">segment</var> is a field<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L652">Let <var data-name="fieldName">fieldName</var> be the field name in the current <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L653"><var data-name="fieldName">fieldName</var> must be defined on the current type in scope.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Path-Field-Selections.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L655"><a href="#sec-Path-Field-Selections.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L657-L659">The <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> literal is used to reference a specific output field from a input field. Each segment in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must correspond to a field that is valid within the current type scope.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L661">For example, the following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is valid in the context of <code>Book</code>:</p>
<pre id="example-db002" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L663-L665"><a href="#example-db002">Example № 167</a><code><span class="token property">title</span>
</code></pre>
<pre id="example-e6354" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L667-L669"><a href="#example-e6354">Example № 168</a><code>&lt;<span class="token property">Book</span>>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L671-L674">Incorrect paths where the field does not exist on the specified type is not valid result in validation errors. For instance, if <code>&lt;Book&gt;.movieId</code> is referenced but <code>movieId</code> is not a field of <code>Book</code>, will result in an invalid <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</p>
<pre id="example-3529a" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L676-L678"><a href="#example-3529a">Counter Example № 169</a><code><span class="token property">movieId</span>
</code></pre>
<pre id="example-9565a" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L680-L682"><a href="#example-9565a">Counter Example № 170</a><code>&lt;<span class="token property">Book</span>>.<span class="token property">movieId</span>
</code></pre>
</section>
</section>
<section id="sec-Path-Terminal-Field-Selections" secid="6.3.2">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L684"><span class="spec-secid" title="link to this section"><a href="#sec-Path-Terminal-Field-Selections">6.3.2</a></span>Path Terminal Field Selections</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L686-L687">Each terminal segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must follow the rules regarding whether the selected field is a leaf node.</p>
<section id="sec-Path-Terminal-Field-Selections.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L689"><a href="#sec-Path-Terminal-Field-Selections.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L691-L696">For each <var data-name="segment">segment</var> in the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L692">Let <var data-name="selectedType">selectedType</var> be the unwrapped type of the current <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L693-L694">If <var data-name="selectedType">selectedType</var> is a scalar or enum:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L694">There must not be any further segments in <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</li>
</ul>
</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L695-L696">If <var data-name="selectedType">selectedType</var> is an object, interface, or union:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L696">There must be another segment in <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Path-Terminal-Field-Selections.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L698"><a href="#sec-Path-Terminal-Field-Selections.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L700-L703">A <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> that refers to scalar or enum fields must end at those fields. No further field selections are allowed after a scalar or enum. On the other hand, fields returning objects, interfaces, or unions must continue to specify further selections until you reach a scalar or enum field.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L705-L706">For example, the following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is valid if <code>title</code> is a scalar field on the <code>Book</code> type:</p>
<pre id="example-82d9a" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L708-L710"><a href="#example-82d9a">Example № 171</a><code><span class="token property">book</span>.<span class="token property">title</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L712">The following <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> is invalid because <code>title</code> should not have subselections:</p>
<pre id="example-3e7a3" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L714-L716"><a href="#example-3e7a3">Counter Example № 172</a><code><span class="token property">book</span>.<span class="token property">title</span>.<span class="token property">something</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L718-L719">For non-leaf fields, the <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must continue to specify subselections until a leaf field is reached:</p>
<pre id="example-6187c" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L721-L723"><a href="#example-6187c">Example № 173</a><code><span class="token property">book</span>.<span class="token property">author</span>.<span class="token property">id</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L725">Invalid <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> where non-leaf fields do not have further selections:</p>
<pre id="example-f9b6d" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L727-L729"><a href="#example-f9b6d">Counter Example № 174</a><code><span class="token property">book</span>.<span class="token property">author</span>
</code></pre>
</section>
</section>
<section id="sec-Type-Reference-Is-Possible" secid="6.3.3">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L731"><span class="spec-secid" title="link to this section"><a href="#sec-Type-Reference-Is-Possible">6.3.3</a></span>Type Reference Is Possible</h3>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L733-L734">Each segment of a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> that references a type, must be a type that is valid in the current context.</p>
<section id="sec-Type-Reference-Is-Possible.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L736"><a href="#sec-Type-Reference-Is-Possible.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L738-L744">For each <var data-name="segment">segment</var> in a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L739-L744">If <var data-name="segment">segment</var> is a type reference:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L740">Let <var data-name="type">type</var> be the type referenced in the <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L741">Let <var data-name="parentType">parentType</var> be the type of the parent of the <var data-name="segment">segment</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L742-L743">Let <var data-name="applicableTypes">applicableTypes</var> be the intersection of <span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="type">type</var>)</span> and <span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="parentType">parentType</var>)</span>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L744"><var data-name="applicableTypes">applicableTypes</var> must not be empty.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="spec-algo" id="GetPossibleTypes()" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L746-L750">
<span class="spec-call"><a href="#GetPossibleTypes()" data-name="GetPossibleTypes">GetPossibleTypes</a>(<var data-name="type">type</var>)</span><ol>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L748">If <var data-name="type">type</var> is an object type, return a set containing <var data-name="type">type</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L749">If <var data-name="type">type</var> is an interface type, return the set of types implementing <var data-name="type">type</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L750">If <var data-name="type">type</var> is a union type, return the set of possible types of <var data-name="type">type</var>.</li>
</ol>
</div>
</section>
<section id="sec-Type-Reference-Is-Possible.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L752"><a href="#sec-Type-Reference-Is-Possible.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L754-L756">Type references inside a <span class="spec-nt"><a href="#Path" data-name="Path">Path</a></span> must be valid within the context of the surrounding type. A type reference is only valid if the referenced type could logically apply within the parent type.</p>
</section>
</section>
<section id="sec-Values-of-Correct-Type" secid="6.3.4">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L758"><span class="spec-secid" title="link to this section"><a href="#sec-Values-of-Correct-Type">6.3.4</a></span>Values of Correct Type</h3>
<section id="sec-Values-of-Correct-Type.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L760"><a href="#sec-Values-of-Correct-Type.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L762-L764">For each SelectedValue <var data-name="value">value</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L763">Let <var data-name="type">type</var> be the type expected in the position <var data-name="value">value</var> is found.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L764"><var data-name="value">value</var> must be coercible to <var data-name="type">type</var>.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Values-of-Correct-Type.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L766"><a href="#sec-Values-of-Correct-Type.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L768-L769">Literal values must be compatible with the type expected in the position they are found.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L771-L772">The following examples are valid use of value literals in the context of <span class="spec-nt"><span data-name="FieldSelectionMap">FieldSelectionMap</span></span> scalar:</p>
<pre id="example-c9dc9" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L774-L783"><a href="#example-c9dc9">Example № 175</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L785">Non-coercible values are invalid. The following examples are invalid:</p>
<pre id="example-d18c1" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L787-L796"><a href="#example-d18c1">Counter Example № 176</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">Int</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Selected-Object-Field-Names" secid="6.3.5">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L798"><span class="spec-secid" title="link to this section"><a href="#sec-Selected-Object-Field-Names">6.3.5</a></span>Selected Object Field Names</h3>
<section id="sec-Selected-Object-Field-Names.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L800"><a href="#sec-Selected-Object-Field-Names.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L802-L806">For each Selected Object Field <var data-name="field">field</var> in the document:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L803">Let <var data-name="fieldName">fieldName</var> be the Name of <var data-name="field">field</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L804-L805">Let <var data-name="fieldDefinition">fieldDefinition</var> be the field definition provided by the parent selected object type named <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L806"><var data-name="fieldDefinition">fieldDefinition</var> must exist.</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Selected-Object-Field-Names.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L808"><a href="#sec-Selected-Object-Field-Names.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L810-L811">Every field provided in an selected object value must be defined in the set of possible fields of that input object&rsquo;s expected type.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L813">For example, the following is valid:</p>
<pre id="example-51bdc" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L815-L824"><a href="#example-51bdc">Example № 177</a><code><span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L826-L827">In contrast, the following is invalid because it uses a field &ldquo;address&rdquo; which is not defined on the expected type:</p>
<pre id="example-fa9d0" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L829-L838"><a href="#example-fa9d0">Counter Example № 178</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"address"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Selected-Object-Field-Uniqueness" secid="6.3.6">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L840"><span class="spec-secid" title="link to this section"><a href="#sec-Selected-Object-Field-Uniqueness">6.3.6</a></span>Selected Object Field Uniqueness</h3>
<section id="sec-Selected-Object-Field-Uniqueness.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L842"><a href="#sec-Selected-Object-Field-Uniqueness.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L844-L849">For each selected object value <var data-name="selectedObject">selectedObject</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L845-L849">For every <var data-name="field">field</var> in <var data-name="selectedObject">selectedObject</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L846">Let <var data-name="name">name</var> be the Name of <var data-name="field">field</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L847-L848">Let <var data-name="fields">fields</var> be all Selected Object Fields named <var data-name="name">name</var> in <var data-name="selectedObject">selectedObject</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L849"><var data-name="fields">fields</var> must be the set containing only <var data-name="field">field</var>.</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Selected-Object-Field-Uniqueness.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L851"><a href="#sec-Selected-Object-Field-Uniqueness.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L853-L854">Selected objects must not contain more than one field with the same name, as it would create ambiguity and potential conflicts.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L856">For example, the following is invalid:</p>
<pre id="example-c77ac" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L858-L867"><a href="#example-c77ac">Counter Example № 179</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">storeById</span><span class="token punctuation">(</span><span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"id id"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">Store</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">Store</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">city</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
<section id="sec-Required-Selected-Object-Fields" secid="6.3.7">
<h3 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L869"><span class="spec-secid" title="link to this section"><a href="#sec-Required-Selected-Object-Fields">6.3.7</a></span>Required Selected Object Fields</h3>
<section id="sec-Required-Selected-Object-Fields.Formal-Specification" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L871"><a href="#sec-Required-Selected-Object-Fields.Formal-Specification" title="link to this subsection">Formal Specification</a></h6>
<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L873-L883">For each Selected Object:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L874">Let <var data-name="fields">fields</var> be the fields provided by that Selected Object.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L875-L876">Let <var data-name="fieldDefinitions">fieldDefinitions</var> be the set of input object field definitions of that Selected Object.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L877-L883">For each <var data-name="fieldDefinition">fieldDefinition</var> in <var data-name="fieldDefinitions">fieldDefinitions</var>:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L878">Let <var data-name="type">type</var> be the expected type of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L879">Let <var data-name="defaultValue">defaultValue</var> be the default value of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L880-L883">If <var data-name="type">type</var> is Non-Null and <var data-name="defaultValue">defaultValue</var> does not exist:<ul>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L881">Let <var data-name="fieldName">fieldName</var> be the name of <var data-name="fieldDefinition">fieldDefinition</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L882">Let <var data-name="field">field</var> be the input object field in <var data-name="fields">fields</var> named <var data-name="fieldName">fieldName</var>.</li>
<li data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L883"><var data-name="field">field</var> must exist.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="sec-Required-Selected-Object-Fields.Explanatory-Text" class="subsec">
<h6 data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L885"><a href="#sec-Required-Selected-Object-Fields.Explanatory-Text" title="link to this subsection">Explanatory Text</a></h6>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L887-L889">Input object fields may be required. This means that a selected object field is required if the corresponding input field is required. Otherwise, the selected object field is optional.</p>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L891">For instance, if the <code>UserInput</code> type requires the <code>id</code> field:</p>
<pre id="example-5e94b" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L893-L898"><a href="#example-5e94b">Example № 180</a><code><span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span><span class="token operator">!</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L900">Then, an invalid selection would be missing the required <code>id</code> field:</p>
<pre id="example-c5cdf" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L902-L906"><a href="#example-c5cdf">Counter Example № 181</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">userById</span><span class="token punctuation">(</span><span class="token attr-name">user</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name: name }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L908-L909">If the <code>UserInput</code> type requires the <code>name</code> field, but the <code>User</code> type has an optional <code>name</code> field, the following selection would be valid.</p>
<pre id="example-f2da0" class="spec-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L911-L925"><a href="#example-f2da0">Example № 182</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ name: name }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
<p data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L927-L928">But if the <code>UserInput</code> type requires the <code>name</code> field but it&rsquo;s not defined in the <code>User</code> type, the selection would be invalid.</p>
<pre id="example-7a958" class="spec-counter-example" data-language="graphql" data-source="spec/Appendix%20A%20--%20Field%20Selection.md#L930-L943"><a href="#example-7a958">Counter Example № 183</a><code><span class="token keyword">extend</span> <span class="token keyword">type</span> <span class="token class-name">Query</span> <span class="token punctuation">{</span>
  <span class="token property-query">findUser</span><span class="token punctuation">(</span><span class="token attr-name">input</span><span class="token punctuation">:</span> <span class="token atom-input class-name">UserInput</span><span class="token operator">!</span> <span class="token directive function">@is</span><span class="token punctuation">(</span><span class="token attr-name">field</span><span class="token punctuation">:</span> <span class="token string">"{ id: id }"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name">User</span><span class="token operator">!</span> <span class="token directive function">@lookup</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
<span class="token punctuation">}</span>

<span class="token keyword">input</span> <span class="token atom-input class-name">UserInput</span> <span class="token punctuation">{</span>
  <span class="token attr-name">id</span><span class="token punctuation">:</span> <span class="token scalar">ID</span>
  <span class="token attr-name">name</span><span class="token punctuation">:</span> <span class="token scalar">String</span><span class="token operator">!</span>
<span class="token punctuation">}</span>
</code></pre>
</section>
</section>
</section>
</section>
<section id="index" secid="index" class="spec-index">
<h1>
<span class="spec-secid" title="link to the index"><a href="#index">§</a></span>Index</h1>
<ol>
<li><a href="#FieldName">FieldName</a></li>
<li><a href="#FieldsAreMergeable()">FieldsAreMergeable</a></li>
<li><a href="#GetPossibleTypes()">GetPossibleTypes</a></li>
<li><a href="#HasEnumAccessibleChildren()">HasEnumAccessibleChildren</a></li>
<li><a href="#HasInputObjectAccessibleChildren()">HasInputObjectAccessibleChildren</a></li>
<li><a href="#HasInterfaceAccessibleChildren()">HasInterfaceAccessibleChildren</a></li>
<li><a href="#HasKeyFieldsArguments()">HasKeyFieldsArguments</a></li>
<li><a href="#HasObjectTypeAccessibleChildren()">HasObjectTypeAccessibleChildren</a></li>
<li><a href="#HasProvidesDirective()">HasProvidesDirective</a></li>
<li><a href="#HasPublicField()">HasPublicField</a></li>
<li><a href="#HasUnionAccessibleChildren()">HasUnionAccessibleChildren</a></li>
<li><a href="#IsObjectTypeEmpty()">IsObjectTypeEmpty</a></li>
<li><a href="#IsValidKeyField()">IsValidKeyField</a></li>
<li><a href="#Path">Path</a></li>
<li><a href="#PathSegment">PathSegment</a></li>
<li><a href="#ProvidesHasArguments()">ProvidesHasArguments</a></li>
<li><a href="#SelectedListValue">SelectedListValue</a></li>
<li><a href="#SelectedObjectField">SelectedObjectField</a></li>
<li><a href="#SelectedObjectValue">SelectedObjectValue</a></li>
<li><a href="#SelectedValue">SelectedValue</a></li>
<li><a href="#TypeName">TypeName</a></li>
<li><a href="#ValidateArgumentDefaultValues()">ValidateArgumentDefaultValues</a></li>
<li><a href="#ValidateDefaultValue()">ValidateDefaultValue</a></li>
<li><a href="#ValidateInputFieldDefaultValues()">ValidateInputFieldDefaultValues</a></li>
<li><a href="#ValidateSelectionMap()">ValidateSelectionMap</a></li>
<li><a href="#ValidateSelectionSet()">ValidateSelectionSet</a></li>
</ol>
</section>
</article>
<footer>
Written in <a href="https://spec-md.com" target="_blank">Spec Markdown</a>.</footer>
<input hidden class="spec-sidebar-toggle" type="checkbox" id="spec-sidebar-toggle" aria-hidden /><label for="spec-sidebar-toggle" aria-hidden><div class="spec-sidebar-button">&#x2630;</div></label>
<div class="spec-sidebar" aria-hidden>
<div class="spec-toc">
<div class="title"><a href="#">GraphQL Composite Schemas Spec</a></div>
<ol><li id="_sidebar_1"><a href="#sec-Overview"><span class="spec-secid">1</span>Overview</a></li>
<li id="_sidebar_2"><a href="#sec-Source-Schema"><span class="spec-secid">2</span>Source Schema</a>
<input hidden class="toggle" type="checkbox" id="_toggle_2" /><label for="_toggle_2"></label>
<ol>
<li id="_sidebar_2.1"><a href="#sec-Directives"><span class="spec-secid">2.1</span>Directives</a>
<input hidden class="toggle" type="checkbox" id="_toggle_2.1" /><label for="_toggle_2.1"></label>
<ol>
<li id="_sidebar_2.1.1"><a href="#sec--lookup"><span class="spec-secid">2.1.1</span>@lookup</a></li>
<li id="_sidebar_2.1.2"><a href="#sec--internal"><span class="spec-secid">2.1.2</span>@internal</a></li>
<li id="_sidebar_2.1.3"><a href="#sec--is"><span class="spec-secid">2.1.3</span>@is</a></li>
<li id="_sidebar_2.1.4"><a href="#sec--require"><span class="spec-secid">2.1.4</span>@require</a></li>
<li id="_sidebar_2.1.5"><a href="#sec--key"><span class="spec-secid">2.1.5</span>@key</a></li>
<li id="_sidebar_2.1.6"><a href="#sec--shareable"><span class="spec-secid">2.1.6</span>@shareable</a></li>
<li id="_sidebar_2.1.7"><a href="#sec--provides"><span class="spec-secid">2.1.7</span>@provides</a></li>
<li id="_sidebar_2.1.8"><a href="#sec--external"><span class="spec-secid">2.1.8</span>@external</a></li>
<li id="_sidebar_2.1.9"><a href="#sec--override"><span class="spec-secid">2.1.9</span>@override</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3"><a href="#sec-Schema-Composition"><span class="spec-secid">3</span>Schema Composition</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3" /><label for="_toggle_3"></label>
<ol>
<li id="_sidebar_3.1"><a href="#sec-Validate-Source-Schemas"><span class="spec-secid">3.1</span>Validate Source Schemas</a></li>
<li id="_sidebar_3.2"><a href="#sec-Merge-Source-Schemas"><span class="spec-secid">3.2</span>Merge Source Schemas</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2" /><label for="_toggle_3.2"></label>
<ol>
<li id="_sidebar_3.2.1"><a href="#sec-Pre-Merge-Validation"><span class="spec-secid">3.2.1</span>Pre Merge Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.1" /><label for="_toggle_3.2.1"></label>
<ol>
<li id="_sidebar_3.2.1.1"><a href="#sec-Enum-Type-Default-Value-Uses-Inaccessible-Value"><span class="spec-secid">3.2.1.1</span>Enum Type Default Value Uses Inaccessible Value</a></li>
<li id="_sidebar_3.2.1.2"><a href="#sec-Output-Field-Types-Mergeable"><span class="spec-secid">3.2.1.2</span>Output Field Types Mergeable</a></li>
<li id="_sidebar_3.2.1.3"><a href="#sec-Disallowed-Inaccessible-Elements"><span class="spec-secid">3.2.1.3</span>Disallowed Inaccessible Elements</a></li>
<li id="_sidebar_3.2.1.4"><a href="#sec-External-Argument-Default-Mismatch"><span class="spec-secid">3.2.1.4</span>External Argument Default Mismatch</a></li>
<li id="_sidebar_3.2.1.5"><a href="#sec-External-Argument-Missing"><span class="spec-secid">3.2.1.5</span>External Argument Missing</a></li>
<li id="_sidebar_3.2.1.6"><a href="#sec-External-Argument-Type-Mismatch"><span class="spec-secid">3.2.1.6</span>External Argument Type Mismatch</a></li>
<li id="_sidebar_3.2.1.7"><a href="#sec-External-Missing-on-Base"><span class="spec-secid">3.2.1.7</span>External Missing on Base</a></li>
<li id="_sidebar_3.2.1.8"><a href="#sec-External-Type-Mismatch"><span class="spec-secid">3.2.1.8</span>External Type Mismatch</a></li>
<li id="_sidebar_3.2.1.9"><a href="#sec-External-Unused"><span class="spec-secid">3.2.1.9</span>External Unused</a></li>
<li id="_sidebar_3.2.1.10"><a href="#sec-Root-Mutation-Used"><span class="spec-secid">3.2.1.10</span>Root Mutation Used</a></li>
<li id="_sidebar_3.2.1.11"><a href="#sec-Root-Query-Used"><span class="spec-secid">3.2.1.11</span>Root Query Used</a></li>
<li id="_sidebar_3.2.1.12"><a href="#sec-Root-Subscription-Used"><span class="spec-secid">3.2.1.12</span>Root Subscription Used</a></li>
<li id="_sidebar_3.2.1.13"><a href="#sec-Key-Fields-Select-Invalid-Type"><span class="spec-secid">3.2.1.13</span>Key Fields Select Invalid Type</a></li>
<li id="_sidebar_3.2.1.14"><a href="#sec-Key-Directive-in-Fields-Argument"><span class="spec-secid">3.2.1.14</span>Key Directive in Fields Argument</a></li>
<li id="_sidebar_3.2.1.15"><a href="#sec-Key-Fields-Has-Arguments"><span class="spec-secid">3.2.1.15</span>Key Fields Has Arguments</a></li>
<li id="_sidebar_3.2.1.16"><a href="#sec-Key-Invalid-Syntax"><span class="spec-secid">3.2.1.16</span>Key Invalid Syntax</a></li>
<li id="_sidebar_3.2.1.17"><a href="#sec-Key-Invalid-Fields"><span class="spec-secid">3.2.1.17</span>Key Invalid Fields</a></li>
<li id="_sidebar_3.2.1.18"><a href="#sec-Provides-Directive-in-Fields-Argument"><span class="spec-secid">3.2.1.18</span>Provides Directive in Fields Argument</a></li>
<li id="_sidebar_3.2.1.19"><a href="#sec-Provides-Fields-Has-Arguments"><span class="spec-secid">3.2.1.19</span>Provides Fields Has Arguments</a></li>
<li id="_sidebar_3.2.1.20"><a href="#sec-Provides-Fields-Missing-External"><span class="spec-secid">3.2.1.20</span>Provides Fields Missing External</a></li>
<li id="_sidebar_3.2.1.21"><a href="#sec-Query-Root-Type-Inaccessible"><span class="spec-secid">3.2.1.21</span>Query Root Type Inaccessible</a></li>
<li id="_sidebar_3.2.1.22"><a href="#sec-Require-Directive-in-Fields-Argument"><span class="spec-secid">3.2.1.22</span>Require Directive in Fields Argument</a></li>
<li id="_sidebar_3.2.1.23"><a href="#sec-Require-Invalid-Fields-Type"><span class="spec-secid">3.2.1.23</span>Require Invalid Fields Type</a></li>
<li id="_sidebar_3.2.1.24"><a href="#sec-Require-Invalid-Syntax"><span class="spec-secid">3.2.1.24</span>Require Invalid Syntax</a></li>
<li id="_sidebar_3.2.1.25"><a href="#sec-Type-Definition-Invalid"><span class="spec-secid">3.2.1.25</span>Type Definition Invalid</a></li>
<li id="_sidebar_3.2.1.26"><a href="#sec-Type-Kind-Mismatch"><span class="spec-secid">3.2.1.26</span>Type Kind Mismatch</a></li>
<li id="_sidebar_3.2.1.27"><a href="#sec-Provides-Invalid-Syntax"><span class="spec-secid">3.2.1.27</span>Provides Invalid Syntax</a></li>
<li id="_sidebar_3.2.1.28"><a href="#sec-Invalid-GraphQL"><span class="spec-secid">3.2.1.28</span>Invalid GraphQL</a></li>
<li id="_sidebar_3.2.1.29"><a href="#sec-Override-Collision-with-Another-Directive"><span class="spec-secid">3.2.1.29</span>Override Collision with Another Directive</a></li>
<li id="_sidebar_3.2.1.30"><a href="#sec-Override-from-Self-Error"><span class="spec-secid">3.2.1.30</span>Override from Self Error</a></li>
<li id="_sidebar_3.2.1.31"><a href="#sec-Override-on-Interface"><span class="spec-secid">3.2.1.31</span>Override on Interface</a></li>
<li id="_sidebar_3.2.1.32"><a href="#sec-Override-Source-Has-Override"><span class="spec-secid">3.2.1.32</span>Override Source Has Override</a></li>
<li id="_sidebar_3.2.1.33"><a href="#sec-External-Collision-with-Another-Directive"><span class="spec-secid">3.2.1.33</span>External Collision with Another Directive</a></li>
<li id="_sidebar_3.2.1.34"><a href="#sec-Key-Invalid-Fields-Type"><span class="spec-secid">3.2.1.34</span>Key Invalid Fields Type</a></li>
<li id="_sidebar_3.2.1.35"><a href="#sec-Provides-Invalid-Fields-Type"><span class="spec-secid">3.2.1.35</span>Provides Invalid Fields Type</a></li>
<li id="_sidebar_3.2.1.36"><a href="#sec-Provides-on-Non-Composite-Field"><span class="spec-secid">3.2.1.36</span>Provides on Non-Composite Field</a></li>
<li id="_sidebar_3.2.1.37"><a href="#sec-External-on-Interface"><span class="spec-secid">3.2.1.37</span>External on Interface</a></li>
</ol>
</li>
<li id="_sidebar_3.2.2"><a href="#sec-Merge"><span class="spec-secid">3.2.2</span>Merge</a></li>
<li id="_sidebar_3.2.3"><a href="#sec-Post-Merge-Validation"><span class="spec-secid">3.2.3</span>Post Merge Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_3.2.3" /><label for="_toggle_3.2.3"></label>
<ol>
<li id="_sidebar_3.2.3.1"><a href="#sec-Empty-Merged-Object-Type"><span class="spec-secid">3.2.3.1</span>Empty Merged Object Type</a></li>
<li id="_sidebar_3.2.3.2"><a href="#sec-No-Queries"><span class="spec-secid">3.2.3.2</span>No Queries</a></li>
<li id="_sidebar_3.2.3.3"><a href="#sec-Implemented-by-Inaccessible"><span class="spec-secid">3.2.3.3</span>Implemented by Inaccessible</a></li>
<li id="_sidebar_3.2.3.4"><a href="#sec-Interface-Field-No-Implementation"><span class="spec-secid">3.2.3.4</span>Interface Field No Implementation</a></li>
<li id="_sidebar_3.2.3.5"><a href="#sec-Invalid-Field-Sharing"><span class="spec-secid">3.2.3.5</span>Invalid Field Sharing</a></li>
<li id="_sidebar_3.2.3.6"><a href="#sec-Invalid-Shareable-Usage"><span class="spec-secid">3.2.3.6</span>Invalid Shareable Usage</a></li>
<li id="_sidebar_3.2.3.7"><a href="#sec-Only-Inaccessible-Children"><span class="spec-secid">3.2.3.7</span>Only Inaccessible Children</a></li>
<li id="_sidebar_3.2.3.8"><a href="#sec-Require-Invalid-Fields"><span class="spec-secid">3.2.3.8</span>Require Invalid Fields</a></li>
<li id="_sidebar_3.2.3.9"><a href="#sec-Provides-Invalid-Fields"><span class="spec-secid">3.2.3.9</span>Provides Invalid Fields</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_3.3"><a href="#sec-Validate-Satisfiability"><span class="spec-secid">3.3</span>Validate Satisfiability</a></li>
</ol>
</li>
<li id="_sidebar_4"><a href="#sec-Executor"><span class="spec-secid">4</span>Executor</a>
<input hidden class="toggle" type="checkbox" id="_toggle_4" /><label for="_toggle_4"></label>
<ol>
<li id="_sidebar_4.1"><a href="#sec-Configuration"><span class="spec-secid">4.1</span>Configuration</a></li>
</ol>
</li>
<li id="_sidebar_5"><a href="#sec-Shared-Types"><span class="spec-secid">5</span>Shared Types</a>
<input hidden class="toggle" type="checkbox" id="_toggle_5" /><label for="_toggle_5"></label>
<ol>
<li id="_sidebar_5.1"><a href="#sec-Shared-Types.Name"><span class="spec-secid">5.1</span>Name</a></li>
<li id="_sidebar_5.2"><a href="#sec-FieldSelection"><span class="spec-secid">5.2</span>FieldSelection</a></li>
</ol>
</li>
<li id="_sidebar_6"><a href="#sec-Appendix-A-Specification-of-FieldSelectionMap-Scalar"><span class="spec-secid">6</span>Appendix A: Specification of FieldSelectionMap Scalar</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6" /><label for="_toggle_6"></label>
<ol>
<li id="_sidebar_6.1"><a href="#sec-Introduction"><span class="spec-secid">6.1</span>Introduction</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.1" /><label for="_toggle_6.1"></label>
<ol>
<li id="_sidebar_6.1.1"><a href="#sec-Scope"><span class="spec-secid">6.1.1</span>Scope</a></li>
</ol>
</li>
<li id="_sidebar_6.2"><a href="#sec-Language"><span class="spec-secid">6.2</span>Language</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.2" /><label for="_toggle_6.2"></label>
<ol>
<li id="_sidebar_6.2.1"><a href="#sec-Language.Name"><span class="spec-secid">6.2.1</span>Name</a></li>
<li id="_sidebar_6.2.2"><a href="#sec-Path"><span class="spec-secid">6.2.2</span>Path</a></li>
<li id="_sidebar_6.2.3"><a href="#sec-SelectedValue"><span class="spec-secid">6.2.3</span>SelectedValue</a></li>
<li id="_sidebar_6.2.4"><a href="#sec-SelectedObjectValue"><span class="spec-secid">6.2.4</span>SelectedObjectValue</a></li>
<li id="_sidebar_6.2.5"><a href="#sec-SelectedListValue"><span class="spec-secid">6.2.5</span>SelectedListValue</a></li>
</ol>
</li>
<li id="_sidebar_6.3"><a href="#sec-Validation"><span class="spec-secid">6.3</span>Validation</a>
<input hidden class="toggle" type="checkbox" id="_toggle_6.3" /><label for="_toggle_6.3"></label>
<ol>
<li id="_sidebar_6.3.1"><a href="#sec-Path-Field-Selections"><span class="spec-secid">6.3.1</span>Path Field Selections</a></li>
<li id="_sidebar_6.3.2"><a href="#sec-Path-Terminal-Field-Selections"><span class="spec-secid">6.3.2</span>Path Terminal Field Selections</a></li>
<li id="_sidebar_6.3.3"><a href="#sec-Type-Reference-Is-Possible"><span class="spec-secid">6.3.3</span>Type Reference Is Possible</a></li>
<li id="_sidebar_6.3.4"><a href="#sec-Values-of-Correct-Type"><span class="spec-secid">6.3.4</span>Values of Correct Type</a></li>
<li id="_sidebar_6.3.5"><a href="#sec-Selected-Object-Field-Names"><span class="spec-secid">6.3.5</span>Selected Object Field Names</a></li>
<li id="_sidebar_6.3.6"><a href="#sec-Selected-Object-Field-Uniqueness"><span class="spec-secid">6.3.6</span>Selected Object Field Uniqueness</a></li>
<li id="_sidebar_6.3.7"><a href="#sec-Required-Selected-Object-Fields"><span class="spec-secid">6.3.7</span>Required Selected Object Fields</a></li>
</ol>
</li>
</ol>
</li>
<li id="_sidebar_index"><a href="#index"><span class="spec-secid">§</span>Index</a></li>
</ol>
</div>
</div>
</body>
</html>
